webpackJsonp([1],Array(773).concat([function(e,t,a){function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(0),c=r(l),h=a(165),d=a(11),u=r(d),p=a(1039),m=a(1073),f=a(1142),g=a(1286),v=a(829),b=a(891),_=a(783);a(974),window.fx=a(975),Fotor.EngineAction=a(976),window.jsDraw2DX=a(1761);var y=function(e){function t(){return n(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),s(t,[{key:"componentDidMount",value:function(){Fotor.routerManager.trigger(u.default.ROUTER_AFTER_ENTER,"editor")}},{key:"render",value:function(){var e=a(5),t=e({displayName:"UserResourcePlane",render:function(){return c.default.createElement("div",{id:"toolbar"},c.default.createElement(_,{notPlug:!0}))}}),e=a(5),r=e({displayName:"StickersList",render:function(){return c.default.createElement("div",{id:"toolbar"},c.default.createElement(b,{data:Fotor.globalConfig.config.toolbar.stickers,api:Fotor.globalConfig.config.api.stickers,designMode:Fotor.globalConfig.designMode,notPlug:!0}))}}),e=a(5),n=e({displayName:"TextList",render:function(){return c.default.createElement("div",{id:"toolbar"},c.default.createElement(v,{notPlug:!0}))}});return c.default.createElement(h.Switch,null,c.default.createElement(h.Route,{path:"/editor/sample/basic(/:subTool)?",component:p}),c.default.createElement(h.Route,{path:"/editor/sample/effect(/:subTool)?",component:m}),c.default.createElement(h.Route,{path:"/editor/sample/border(/:subTool)?",component:f}),c.default.createElement(h.Route,{path:"/editor/sample/beauty(/:subTool)?",component:g}),c.default.createElement(h.Route,{path:"/editor/sample/sticker(/:stickerGroupId)?",component:r}),c.default.createElement(h.Route,{path:"/editor/sample/text",component:n}),c.default.createElement(h.Route,{path:"/editor/sample/upload",component:t}),c.default.createElement(h.Route,{path:"/editor/sample",component:p}),c.default.createElement(h.Route,{path:"/editor/basic(/:subTool)?",component:p}),c.default.createElement(h.Route,{path:"/editor/effect(/:subTool)?",component:m}),c.default.createElement(h.Route,{path:"/editor/border(/:subTool)?",component:f}),c.default.createElement(h.Route,{path:"/editor/beauty(/:subTool)?",component:g}),c.default.createElement(h.Route,{path:"/editor/sticker(/:stickerGroupId)?",component:r}),c.default.createElement(h.Route,{path:"/editor/text",component:n}),c.default.createElement(h.Route,{path:"/editor/upload",component:t}),c.default.createElement(h.Route,{path:"/editor",component:p}))}}]),t}(l.Component);t.default=y,e.exports=t.default},,,,function(e,t,a){(function(t,r){var n=a(34),o=function(e){return e&&e.__esModule?e:{default:e}}(n);a(909);var i=a(53).default,s=a(5),l=s({displayName:"StickerItem",hanldeClick:function(e,a){this.props.tool.markPosition();var r=this;if(!(this.props.data.vip||this.props.groupData&&this.props.groupData.vip)||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin()||Fotor.designerMode){if(r.doClickAction(e,a),r.props.showAddTip){var n=t(e.target),o=n.offset().left,i=n.offset().top;o+=25,i-=7,t("body").append('<div class="sticker_add_favor_tips">'+Fotor.globalConfig.lang.design_workspace_material_sticker_added_successfully+"</div>"),t(".sticker_add_favor_tips").css({left:o,top:i-10,opacity:0,display:"block"}).stop().animate({top:i,opacity:1},200),setTimeout(function(){t(".sticker_add_favor_tips").remove()},1e3)}}else{var s=t.Deferred();s.promise().then(function(){r.doClickAction(e,a)});var l=Fotor.vipResManager.getUpgradeContent("resource");Fotor.common.User.useVipResource(l,s,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var r=FotorUtils.Object.simpleClone(this.props.data);if(r.innerCategory=Number(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fileScale=r.scale,r=FotorUtils.Object.simpleClone(r),this.props.groupData&&this.props.groupData.id&&(r.groupId=this.props.groupData.id),a){var n=t("#canvas").offset(),i={x:(e.pageX?e.pageX:e.clientX)-n.left,y:(e.pageY?e.pageY:e.clientY)-n.top};i.x=i.x<-50?-50:i.x,"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r,i):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r,i):Fotor.mainCanvas.placeObject("fotor/sticker",r,i)}else"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r):Fotor.mainCanvas.placeObject("fotor/sticker",r);Fotor.app.trigger("stickerClickByAdmin",r),FotorUtils.Ajax.request(Fotor.globalConfig.config.api.addUserMruStyle,{method:"post",data:{styleId:r.id,styleType:2},success:function(e){e.status&&(FotorAnalytic.pageView("/resourceUsage/sticker/addUserMruStyle_sticker",Fotor.routerManager.getToolPath()),Fotor.app.trigger(o.default.STICKER_RECENT_UPDATE))}});var s=this.props.groupData&&this.props.groupData.id?this.props.groupData.id:r.groupId;FotorAnalytic.pageView("/resourceUsage/sticker/"+s+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){this.props.tool.markPosition();var a=this;if(!(this.props.data.vip||this.props.groupData&&this.props.groupData.vip)||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragAction(e);else{var r=t.Deferred();r.promise().then(function(){a.doDragAction(e)});var n=Fotor.vipResManager.getUpgradeContent("resource");Fotor.common.User.useVipResource(n,r,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragAction:function(e){var t=this.props.data.thumb,a=t.startsWith("http")?t:"//pub-static.haozhaopian.net"+t,r=document.createElement("img");r.src=a;var n=FotorUtils.Object.simpleClone(this.props.data);n.innerCategory=parseInt(n.innerCategory),0!=n.innerCategory&&5!=n.innerCategory&&(n.hasBorder=!1),this.props.groupData&&this.props.groupData.id&&(n.groupId=this.props.groupData.id);try{e.dataTransfer.setDragImage(r,r.width/2,r.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";var i;i="4"==n.innerCategory?"fotor/shape":"5"==n.innerCategory?"fotor/ArtCustom":"fotor/sticker",FotorUtils.Ajax.request(Fotor.globalConfig.config.api.addUserMruStyle,{method:"post",data:{styleId:n.id,styleType:2},success:function(e){e.status&&(FotorAnalytic.pageView("/resourceUsage/sticker/addUserMruStyle_sticker",Fotor.routerManager.getToolPath()),Fotor.app.trigger(o.default.STICKER_RECENT_UPDATE))}}),Fotor.dragHelper.setCurrentDragObject(n,i),e.dataTransfer.setData("text",i),FotorAnalytic.pageView("/resourceUsage/sticker/"+n.groupId+"/"+n.id+"/click",Fotor.routerManager.getToolPath())},findParent:function(e){if(t(e).hasClass("sticker-item"))return e;var a=t(e).parent();return t(a).hasClass("sticker-item")?a:this.findParent(a)},render:function(){var e="";if(!Fotor.noUserFunction){var t=this.props.data.isOpenClipSticker?" no-favor-func":"";e=this.props.isFavor?r.createElement("span",{className:"favor-icon active",onClick:this.handleRemoveFavor,onMouseEnter:this.showTip,onMouseLeave:this.hideTip}):""!=t?r.createElement("span",{className:"favor-icon"+t,onClick:this.handleNoFavor,onMouseEnter:this.showTip,onMouseLeave:this.hideTip}):r.createElement("span",{className:"favor-icon"+t,onClick:this.handleAddFavor,onMouseEnter:this.showTip,onMouseLeave:this.hideTip})}var a=this.props.data.thumb.startsWith("http")?this.props.data.thumb:"//pub-static.haozhaopian.net"+this.props.data.thumb;return r.createElement("div",{className:"sticker-item-wrapper"},r.createElement("div",{className:"sticker-item",ref:"stickerItem",draggable:"true",onClick:this.hanldeClick,onDragStart:this.handleDragStart},!Fotor.noUserFunction&&e,(this.props.data.vip||this.props.groupData&&this.props.groupData.vip)&&!Fotor.hideVipIcon&&r.createElement("span",{className:"search-vip"}),r.createElement(i,{"data-display":this.props.display},r.createElement("img",{src:a}))))},handleAddFavor:function(e){var t=this;this.checkLoginBeforeFavor()&&(FotorUtils.Ajax.request(Fotor.globalConfig.config.api.saveStickerFavor,{method:"post",data:"stickerId="+t.props.data.id,success:function(e){if(e.status){t.props.data.favor=1,Fotor.app.trigger(o.default.STICKER_FAVOR_UPDATE);var a=t.props.groupData&&t.props.groupData.id?t.props.groupData.id:t.props.data.groupId;t.forceUpdate(),FotorAnalytic.pageView("/resourceUsage/sticker/"+a+"/"+t.props.data.id+"/addfavor",Fotor.routerManager.getToolPath())}else"114"==e.code&&(Fotor.loginStateManager.logout(),Fotor.loginStateManager.addAction(function(){t.handleAddFavor()}),Fotor.popup.showLoginStateLostPop())}}),this.props.showFavorAnimation("add",this.refs.stickerItem,this.props.isSearch)),e&&e.stopPropagation()},handleNoFavor:function(e){e&&e.stopPropagation()},handleRemoveFavor:function(e){var t=this;this.checkLoginBeforeFavor()&&FotorUtils.Ajax.request(Fotor.globalConfig.config.api.removeStickerFavor,{method:"post",data:"stickerId="+t.props.data.id,success:function(e){if(e.status){Fotor.app.trigger(o.default.STICKER_FAVOR_UPDATE),t.props.data.favor=0,t.forceUpdate();var a=t.props.groupData&&t.props.groupData.id?t.props.groupData.id:t.props.data.groupId;FotorAnalytic.pageView("/resourceUsage/sticker/"+a+"/"+t.props.data.id+"/removeFavor",Fotor.routerManager.getToolPath())}else"114"==e.code&&(Fotor.loginStateManager.logout(),Fotor.loginStateManager.addAction(function(){t.handleRemoveFavor()}),Fotor.popup.showLoginStateLostPop())}}),e&&e.stopPropagation()},checkLoginBeforeFavor:function(){if(void 0!=FotorUser.userData)return!0;Fotor.loginStateManager.addAction(this.handleAddFavor);var e=Fotor.vipResManager.getLoginContent("favor");return FotorUser.show(e,!1),!1},showTip:function(e){var a=t(e.target),r=a.offset().left,n=a.offset().top;r+=25,n-=7;var o=Fotor.globalConfig.lang.design_workspace_material_addFavorStickerTips;this.props.data.isOpenClipSticker&&(o=Fotor.globalConfig.lang.design_workspace_material_openClipStickerFavorTips||'The sticker from a third-party doesn\'t support adding to "My Favorite" now.');var i=this.props.isFavor?Fotor.globalConfig.lang.design_workspace_material_removeFavorStickerTips:o;this.props.showTip(r,n,i)},hideTip:function(e){this.props.hideTip()}});e.exports=l}).call(t,a(1),a(0))},,function(e,t,a){(function(r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(0);a(803),a(796);var c=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={show:"none",top:0,left:0,gif:"",tip:""},a}return i(t,e),s(t,[{key:"show",value:function(e,t,a,r){this.setState({show:"block",gif:e,txt:t,top:a,left:r})}},{key:"hide",value:function(){this.setState({show:"none",gif:"",txt:""})}},{key:"render",value:function(){return r.createElement("div",{className:"help-tip-text",style:{display:this.state.show,top:this.state.top,left:this.state.left}},r.createElement("img",{src:this.state.gif}),r.createElement("div",null,this.state.txt))}}]),t}(l.Component);t.default=c,e.exports=t.default}).call(t,a(0))},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAeCAYAAAAo5+5WAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFCQ0JBREUwRUFFNTExRTdCRjFBRTZGNTE4OThERDAzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjFCQ0JBREUxRUFFNTExRTdCRjFBRTZGNTE4OThERDAzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUJDQkFEREVFQUU1MTFFN0JGMUFFNkY1MTg5OEREMDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUJDQkFEREZFQUU1MTFFN0JGMUFFNkY1MTg5OEREMDMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7KwXM4AAADdklEQVR42uyVeUgVURTGv3vfPHPJNhUs/zAqhSiiTVsosB3bSNI2aCMkqCgs0jRaKFooqKSIqCjbFwtNomh/pWS2R0QLERkaD7XF1OfWzO2b4RW+NHm2/NeB3507Z+5897wz554nlFL4pTnE99la4iR7rLuYn965yHV+nn6J5szlRiCI4w20wKQXa4JJLXkJM6DqH/4wEt5S4R5kKLolAgbiONchGq1JJYNxwXrQniR7I9ydjCc+1gYK+7iBaYNIT/eaNeSElSgfOLh1mDfCZ0gKSi5HwRchnL+2IrZhLzRE4IoV5QdcE6bvFEXv835JQwFtzE5Xk8qXogL4lJFruO12zWDU+bxmwc7xpiWewV/TDmPUFK8/njio4HR1PMTpemJGPZGstERBMXDDOnRC2GQzZdPJXG+Eh5GTXXPf11srJNMC3GH0pVZlCDxg9MWcjSZ1sKpYOT1SceeN3kj1RmqrxJKKiqmv6gNFRqiaOscpHGiLu6iyMp1BPpMEBHIsPgu8Eweszzyq+QMSAKEnzB6qwSitNHN3/mioOs9ryUcXz4kd+znv564SMzGdyTZS4BHxxgRP7UW7jflH8pS2cKRE0kED4kv1OLTxy/LPVHFFMcGKFZuLMlYGMA3lZhCsC1+04risuRzbEobLtD3XddhtTGA/G7Zf0TEsvGYSnx0OOlkE60PZsAqa9gWRi9MwVi2nbyHJ8xB2MlsNmLw6TguqKWc1vVRYPFriyTOFDxXAihG1M7n+2Ka8FTkdsqtn3epcn46I9K1WWkY0bmSyvE7hO8cL1NKQ1mxS/SXSL+voGy7g34Fq+Qbi++jwCxQz0p5syjZTaNUGmBYwMU10vIapGPjmHQY4XhhYMkri4VOFskpg/nAbdl014O8rMbbX18IAn0rHp2Jp1oCpZG5S2GQT2nlGwWRBjLZ6YA/BSA1EdRGwtwVOFxhIjJFw1aqyzHvGyvatZSTf2eBupl61zZCiT4hdFiuR/8hAZQ2wNJaNwWHUP3+vdkSEKrMKNroPg3f9OHezBns7kbzrqo4hkQKB7L4HchWiu4ojVTWGGWGS+0CgpY3eP2W8TDrHn11YqhAfLS/kPBbR9M8ib/GbJjMffF03b4jNFhwkC7IeYwJ948g9/KFp2fdFVO+OutlktuAvmmj2X/oPTOIf2X/h/8KN7ZsAAwBCvyZ+3sSNTwAAAABJRU5ErkJggg=="},function(e,t,a){e.exports=a.p+"images/shapeImage1ba6e0104b497f35000546222bbb25fb.gif"},,function(e,t,a){(function(t,r,n,o){function i(e){return e&&e.__esModule?e:{default:e}}var s=a(29),l=a(35),c=i(l),h=a(6),d=i(h),u=a(13),p=(i(u),a(16)),m=(i(p),a(12)),f=i(m);a(784);var g=a(53).default,v=a(20).default,b=a(10),_=a(5),y=_({displayName:"UserResource",mixins:[b,Fotor.Evented,Fotor.mixin],getInitialState:function(){return{spaceIsFull:!1,spaceProgress:0,hadUsedSpace:0}},componentWillUnmount:function(){Fotor.loginStateManager.off(f.default.LOGIN,this.refreshList),Fotor.resourceManager.off("userSpaceChecked",this.refreshList),Fotor.resourceManager.needBackgroundGuide=!1},componentDidMount:function(){Fotor.loginStateManager.on(f.default.LOGIN,this.refreshList),Fotor.resourceManager.on("userSpaceChecked",this.refreshList),this.refreshList()},refreshList:function(){this.setState({spaceIsFull:Fotor.resourceManager.spaceIsFull,spaceProgress:Fotor.resourceManager.spaceProgress,hadUsedSpace:Math.max(0,Math.round(Fotor.resourceManager.hadUsedSpace/1048576*100)/100)})},expandClick:function(e){if(!Fotor.resourceManager.needBackgroundGuide){var t=Fotor.vipResManager.getUpgradeContent("space");Fotor.common.User.useVipResource(t,null,Fotor.routerManager.getToolPath()+"/space")}},render:function(){var e=FotorUser.getLoginedUser(),a=FotorUser.checkIsVip(),r=Fotor.loginStateManager.isAdmin(),n="",o=this.state.spaceIsFull,i="500M";a||(i="50M"),r&&(i="999999M");var s=this.state.hadUsedSpace;void 0==s||null==s?(o=!0,n="error"):n=s+"M/"+i;var l=this.state.spaceProgress>30&&this.state.spaceProgress<100,c=l||this.state.spaceIsFull,h=Fotor.resourceManager.needBackgroundGuide?"not-allowed":"pointer";return t.createElement("div",{className:"toolbar"},Fotor.dragFile&&e&&t.createElement("div",{className:"upload-dragFile"},t.createElement("div",{className:"upload-dragFileImg"})),t.createElement("div",{className:"toolbar-title"},Fotor.globalConfig.lang.common_workspace_upload_userResourceButton),t.createElement("div",{className:"toolbar-list",style:{top:"56px"}},t.createElement(x,null),t.createElement(C,null),e&&t.createElement("div",{className:"upload-space-div"},t.createElement("div",{className:"upload-space-progress-bar "+(this.state.spaceIsFull?"full":"")+(l?"warning":"")},t.createElement("div",{style:{width:this.state.spaceProgress+"%"}})),t.createElement("div",{className:"pull-left marginT5",style:{color:o?"#eb1c1c":"#787878"}},n,t.createElement("div",{className:(l?"space-warning-icon":"")+(this.state.spaceIsFull?"space-full-icon":""),style:{display:c?"inline-block":"none"}})),!a&&t.createElement("div",{className:"pull-right marginT5",style:{color:"#ac975e",cursor:h},onClick:this.expandClick},Fotor.globalConfig.lang.common_workspace_upload_spacefull_confirm))))}}),x=_({displayName:"UploadBtn",componentDidMount:function(){var e=this.refreshBtn;Fotor.loginStateManager.on(f.default.LOGIN,e),Fotor.loadingScreen.hide()},componentWillUnmount:function(){var e=this.refreshBtn;Fotor.loginStateManager.off(f.default.LOGIN,e)},refreshBtn:function(){this.forceUpdate()},loadFileFromComputer:function(e){if(FotorUser.getLoginedUser()){if(Fotor.resourceManager.spaceIsFull&&!FotorUser.checkIsVip()){FotorAnalytic.event("upload_panel","spaceFullPop","resource_click_spaceFullPop");var t=Fotor.globalConfig.lang.common_workspace_upload_spacefull_title;Fotor.popup.doPopup({title:'<div><div class="spaceCloud"></div><div style="margin-top:10px">'+t+"</div></div>",content:Fotor.globalConfig.lang.common_workspace_upload_spacefull_content,confirmBtnText:Fotor.globalConfig.lang.common_workspace_upload_spacefull_confirm,cancelBtnFunc:function(){FotorAnalytic.pageView("/count/cloudimagesLimit/close1",Fotor.routerManager.getToolPath())}},function(){var e=Fotor.vipResManager.getUpgradeContent("space");Fotor.common.User.useVipResource(e,null,Fotor.routerManager.getToolPath()+"/space"),FotorAnalytic.pageView("/count/cloudimagesLimit/upgrate1",Fotor.routerManager.getToolPath())}),FotorAnalytic.pageView("/count/cloudimagesLimit/show1",Fotor.routerManager.getToolPath())}else Fotor.resourceManager.startImportPhoto();e.stopPropagation(),e.preventDefault(),FotorAnalytic.event("upload_panel","openimage","openimage_uploadResource"),FotorAnalytic.pageView("/count/try_open_photo_uploadResource/"+Fotor.routerManager.moduleName+"/"+Fotor.routerManager.childModuleName,Fotor.routerManager.getToolPath())}else{var a=Fotor.vipResManager.getLoginContent("useYourOwn");FotorUser.show(a,!1)}},render:function(){return t.createElement("div",{id:"userUploadBtn"},t.createElement(Fotor.ui.Button,{className:"marginT5 ",ref:"uploadFileBtn",enable:!Fotor.dragFile,text:Fotor.globalConfig.lang.common_workspace_upload_addResourceButton,onClick:this.loadFileFromComputer},t.createElement("i",{className:"add-icon-22 upload-resource pull-right"})))}}),C=(_({displayName:"UploadGuide",getInitialState:function(){return{gif:"",tip:""}},componentDidMount:function(){},componentWillUnmount:function(){},helpClose:function(){Fotor.resourceManager.needBackgroundGuide=!1,this.forceUpdate(),this.props.tool&&this.props.tool.forceUpdate()},render:function(){this.state.gif=a(792);var e=r("body").width(),n=42;return e<Fotor.holderWidth()&&(n=4),t.createElement("div",null,t.createElement("div",{className:"resource-help-tip",style:{display:"block",top:90,left:n}},t.createElement("img",{src:this.state.gif}),t.createElement("div",null,Fotor.globalConfig.lang.common_workspace_upload_setAsBackground),t.createElement("span",{className:"resource-help-tip-close",onClick:this.helpClose}),t.createElement("span",{className:"resource-help-tip-gotit",onClick:this.helpClose},Fotor.globalConfig.lang.newbieGuide_readBtn)))}}),_({displayName:"UploadList",getInitialState:function(){return{items:[],loadingNextPage:!1,loadFinish:!0,loading:!1,photoW:94,minWindow:null,maxHeight:0,showMenuResId:null,isUploading:!1,searchPageNo:1,beingGetNext:!1,hdrMode:!1,isBatchMode:!1,selectedAllMode:!1}},canloadLocalData:function(){var e=FotorUser.getLoginedUser(),t=!0;(!e||e&&!e.userId)&&(t=!1),t&&this.loadServerPhotosList()},loadServerPhotosList:function(){var e=this;FotorAnalytic.pageView("/getUserResource",Fotor.routerManager.getToolPath()),this.setState({loading:!0,loadFinish:!1});var t="https://gw.fotor.com/v2/userResource/list?type=0&category=0&"+Fotor.randomKey;Fotor.services.loadData("resource_list"+Fotor.randomKey,t,Fotor.globalConfig.designMode,!1,function(t,a){e.setDataLater(t,a)},!0,20,this.state.searchPageNo)},loadNextPagePhotosList:function(){var e=this;if(!this.state.loading&&!this.state.loadFinish&&!this.state.beingGetNext){this.state.beingGetNext=!0,e.state.searchPageNo=e.state.searchPageNo+1;var t="https://gw.fotor.com/v2/userResource/list?type=0&category=0&"+Fotor.randomKey;Fotor.services.loadData("resource_list"+Fotor.randomKey,t,Fotor.globalConfig.designMode,!1,function(t,a){e.setDataLater(t,a)},!0,20,this.state.searchPageNo)}},setDataLater:function(e,t){var a=this,r=[];if(e&&e.length>0)for(var n=0;n<e.length;n++)0==e[n].fileState&&r.push(e[n]);Fotor.resourceManager.addResourcePhoto(r,!0),FotorUser.getLoginedUser()&&Fotor.photoManager.photos&&Fotor.photoManager.photos.length>0&&!Fotor.resourceManager.spaceIsFull&&Fotor.resourceManager.addResourcePhoto(Fotor.photoManager.getPhotosWithOutSkip(),!1),Fotor.resourceManager.addSnapShotPhoto(),Fotor.photoManager.syncTwoManagerPhotosStatus(),Fotor.resourceManager.syncTwoManagerPhotosStatus(),t?(this.state.loadFinish=!0,this.state.loadingNextPage=!1):this.state.loadingNextPage=!0,this.state.beingGetNext=!1,this.state.loading=!1,this.resizeMe(),this.setState({loading:!1,items:a.getPhotosPos()})},getPhotosPos:function(){var e=[];if(Fotor.resourceManager.photos&&Fotor.resourceManager.photos.length>0)for(var t=0;t<Fotor.resourceManager.photos.length;t++)Fotor.resourceManager.photos[t].usable&&e.push({file:Fotor.resourceManager.photos[t],pos:{}});if(0==e.length)return r("#upload-resource-list .scrollarea-content").css("height","auto"),this.refs.scrollArea.handleWindowResize(),e;for(var a,n=0,o=0,i=0,s=0,l=0,c=0,h=0,d=0;d<e.length;d++)d<3?(e[d].pos={left:(this.state.photoW+9)*d,top:0,scPos:d},o=1!=e[d].file.fileHeight&&1!=e[d].file.fileWidth?e[d].file.fileHeight*this.state.photoW/e[d].file.fileWidth:40,0==d?i=o:1==d?s=o:2==d&&(l=o)):(o=e[d].file.fileHeight*this.state.photoW/e[d].file.fileWidth,a=c+6,0==n?(i+=o+6,e[d].pos={left:0,top:a,scPos:0}):1==n?(s+=o+6,e[d].pos={left:this.state.photoW+9,top:a,scPos:1}):2==n&&(l+=o+6,e[d].pos={left:2*(this.state.photoW+9),top:a,scPos:2})),c=Math.min(i,s,l),h=Math.max(i,s,l,300),c==i?n=0:c==s?n=1:c==l&&(n=2);var u=98;return r("#userUploadBtn")&&r("#userUploadBtn").height()>40&&(u=r("#userUploadBtn").height()+56),r("#upload-resource-list").css("top",u+"px"),r("#upload-resource-list").css("bottom","45px"),r("#upload-resource-list .scrollarea-content").css("width","100%"),r("#upload-resource-list .scrollarea-content").css("height",h+60+"px"),this.state.maxHeight=h,h+45<r("#toolbar").height()-140&&this.loadNextPagePhotosList(),e},componentDidMount:function(){this.state.searchPageNo=1,this.mounted=!0,Fotor.photoManager&&Fotor.resourceManager?this.canloadLocalData():Fotor.app.on(d.default.INIT_FINISHED,this.canloadLocalData),Fotor.loginStateManager.on(f.default.LOGIN,this.loadServerPhotosList),Fotor.photoManager.on("SyncToResource",this.SyncToResource),Fotor.resourceManager.on("SyncToPhotos",this.SyncToPhotos),Fotor.photoManager.on(c.default.CHANGE,this.handlePhotosChanged),Fotor.resourceManager.on(c.default.CHANGE,this.handlePhotosChanged),window.addEventListener("layoutChange",this.resizeMe),Fotor.app.on("photoThumbReady",this.handlePhotosChanged),Fotor.app.on(d.default.HDR_MODE_CHANGE,this.HDRModeChange),Fotor.app.on(d.default.HDR_PHOTO_CHANGE,this.updatePhotoList),this.resizeMe()},componentWillUnmount:function(){this.state.searchPageNo=1,this.mounted=!1,Fotor.app.off(d.default.INIT_FINISHED,this.canloadLocalData),Fotor.loginStateManager.off(f.default.LOGIN,this.loadServerPhotosList),Fotor.photoManager.off("SyncToResource",this.SyncToResource),Fotor.resourceManager.off("SyncToPhotos",this.SyncToPhotos),Fotor.photoManager.off(c.default.CHANGE,this.handlePhotosChanged),Fotor.resourceManager.off(c.default.CHANGE,this.handlePhotosChanged),window.removeEventListener("layoutChange",this.resizeMe),Fotor.app.off("photoThumbReady",this.handlePhotosChanged),Fotor.app.off(d.default.HDR_MODE_CHANGE,this.HDRModeChange),Fotor.app.off(d.default.HDR_PHOTO_CHANGE,this.updatePhotoList)},HDRModeChange:function(e){var t=e.params[0];this.setState({hdrMode:t})},resizeMe:function(){var e=r("body").width();this.state.showMenuResId=null,null==this.state.minWindow?e<Fotor.holderWidth()?(this.state.minWindow=!0,this.state.photoW=70,this.setState({showMenuResId:null,items:this.getPhotosPos(),minWindow:!0,photoW:70})):(this.state.minWindow=!1,this.state.photoW=94,this.setState({showMenuResId:null,items:this.getPhotosPos(),minWindow:!1,photoW:94})):e<Fotor.holderWidth()&&!this.state.minWindow?(this.state.minWindow=!0,this.state.photoW=70,this.setState({showMenuResId:null,items:this.getPhotosPos(),minWindow:!0,photoW:70})):e>=Fotor.holderWidth()&&this.state.minWindow&&(this.state.minWindow=!1,this.state.photoW=94,this.setState({showMenuResId:null,items:this.getPhotosPos(),minWindow:!1,photoW:94}))},updatePhotoList:function(){this.forceUpdate()},SyncToResource:function(){Fotor.resourceManager.syncTwoManagerPhotosStatus()},SyncToPhotos:function(){Fotor.photoManager.syncTwoManagerPhotosStatus()},handlePhotosChanged:function(e){var t;e.params&&(t=e.params[0]);var a=this;Fotor.photoManager.syncTwoManagerPhotosStatus(),Fotor.resourceManager.syncTwoManagerPhotosStatus(),FotorUser.getLoginedUser()&&!Fotor.resourceManager.spaceIsFull&&Fotor.resourceManager.addResourcePhoto(Fotor.photoManager.getPhotosWithOutSkip(),!1),Fotor.resourceManager.addSnapShotPhoto(),this.checkPhotoIsUploading(),this.setState({items:a.getPhotosPos()}),"removePhoto"==t&&setTimeout(function(){a.refs.scrollArea&&a.refs.scrollArea.handleWindowResize()},500)},checkPhotoIsUploading:function(){var e=this;e.state.isUploading||Fotor.resourceManager.hasUnsyncedPhotosDesignMode()&&(e.state.isUploading=!0,r(".icon-cloud-arrow").addClass("cloudArrowAnimateClass"),setTimeout(function(){r(".icon-cloud-arrow").removeClass("cloudArrowAnimateClass"),e.state.isUploading=!1,e.checkPhotoIsUploading()},6e3))},handlePhotosDelete:function(e){var t;e.params&&(t=e.params[0]),Fotor.resourceManager.removePhoto(t),this.setState({items:this.getPhotosPos()})},handleScroll:function(e){e.realHeight<e.containerHeight&&r("#upload-resource-list .scrollarea-content").stop().animate({"margin-top":"0px"},200),this.hideExtendPanle(),e.topPosition+e.containerHeight==e.realHeight&&this.state.loadingNextPage&&!this.state.loadFinish&&this.loadNextPagePhotosList()},showLoginPop:function(e){if(!FotorUser.getLoginedUser()){var t=Fotor.vipResManager.getLoginContent("useYourOwn");FotorUser.show(t,!1)}},showExtendPanle:function(e,t,a,n){var o=this;this.state.showMenuResId&&this.state.showMenuResId==e?this.hideExtendPanle():(this.state.showMenuResId=e,this.setState({showMenuResId:e}),setTimeout(function(){r(o.refs.rightExtendPanel)&&(r(o.refs.rightExtendPanel).css("left",t+"px"),r(o.refs.rightExtendPanel).css("top",a+"px"),0==n?r(o.refs.topTriangle).css("left","18px"):1==n?r(o.refs.topTriangle).css("left","58px"):2==n&&r(o.refs.topTriangle).css("left","108px"),r(o.refs.rightExtendPanel).addClass("active"),r(document).on("mousedown",o.handleMouseDown))},10))},hideExtendPanle:function(){this.state.showMenuResId=null,this.setState({showMenuResId:null}),r(".upload-item-more").removeClass("active"),r(this.refs.rightExtendPanel)&&r(this.refs.rightExtendPanel).removeClass("active"),r(document).off("mousedown",this.hideExtendPanle)},handleMouseDown:function(e){var t=e.target;if(r(t).hasClass("right-extends-panel-inner")||r(t).parent().hasClass("right-extends-panel-inner")||r(t).parent().parent().hasClass("right-extends-panel-inner"))return!1;this.hideExtendPanle()},handleToBackGroundClick:function(){Fotor.exportPop.state.defaultTransparent=!1,Fotor.mainCanvas.beforeBatchModify();var e=Fotor.resourceManager.getPhotoById(this.state.showMenuResId);e=FotorUtils.Object.simpleClone(e),e.useOwn=!0,Fotor.mainCanvas.setBackgroundObject(e,!0,Fotor.mainCanvas.afterBatchModify.bind(Fotor.mainCanvas)),this.hideExtendPanle()},handleToEditorClick:function(){if(!Fotor.resourceManager.spaceIsFull){var e=Fotor.resourceManager.getPhotoById(this.state.showMenuResId);if(e&&"editor"!=Fotor.routerManager.moduleName){var t=e.fileUrl;Fotor.plusEditorManager.showEditorWindow(t,this.handlePlusReturn)}else e&&"editor"==Fotor.routerManager.moduleName&&Fotor.app.trigger("custome_photoClick",e,"byMenu");this.hideExtendPanle(),this.forceUpdate()}},handlePlusReturn:function(e,t){Fotor.progressBar.hide(),n(e.data,function(a){var r,n=ImageTools._toBlob(a,"image/"+e.format);/Edge/.test(navigator.userAgent)?(n.lastModifiedDate=new Date,n.name="plusReturn."+e.format,r=n):r=new File([n],"plusReturn."+e.format),Fotor.resourceManager.addPhotoFromLocalFile(r,"plusReturn."+e.format,void 0,a.width,a.height),t&&t()},{canvas:!0})},handleDeleteClick:function(){var e=this,t={resId:e.state.showMenuResId};Fotor.resourceManager.removePhoto(e.state.showMenuResId),this.setState({items:this.getPhotosPos()}),e.hideExtendPanle(),FotorUtils.Ajax.request("https://gw.fotor.com/v2/resource/delete",{method:"post",dataType:"json",data:t,error:function(e){},success:function(e){},fail:function(e){}})},switchToBatchMode:function(){this.hideExtendPanle(),this.state.isBatchMode=!0,this.state.selectedAllMode=!1;for(var e=0;e<this.state.items.length;e++)this.refs["UploadPhotoItem_"+e].state.selected=!1;this.refs.selectCheckbox.setSelect(!1),this.forceUpdate()},quitBatchMode:function(){this.hideExtendPanle(),this.state.isBatchMode=!1,this.state.selectedAllMode=!1;for(var e=0;e<this.state.items.length;e++)this.refs["UploadPhotoItem_"+e].state.selected=!1;this.refs.selectCheckbox.setSelect(!1),this.forceUpdate()},batchDelete:function(){var e,t=this,a=[];if(this.state.selectedAllMode)Fotor.popup.doPopup({title:Fotor.globalConfig.lang.common_uploadList_deleteAll_photo,confirmBtnText:Fotor.globalConfig.lang.common_uploadList_clear_confirmBtn,cancelBtnText:Fotor.globalConfig.lang.common_uploadList_clear_cancelBtn,cancelBtnFunc:function(e){t.forceUpdate()}},function(){e={resId:"all"},Fotor.resourceManager.clearAll(),t.setState({items:t.getPhotosPos()}),FotorUtils.Ajax.request("https://gw.fotor.com/v2/resource/delete",{method:"post",dataType:"json",data:e,error:function(e){},success:function(e){},fail:function(e){}})});else{for(var r=0;r<t.state.items.length;r++)t.refs["UploadPhotoItem_"+r].state.selected&&a.push(t.state.items[r].file.resId);if(0==a.length)return;var n=Fotor.globalConfig.lang.common_uploadList_deletesome_photo.replace("d%",a.length);Fotor.popup.doPopup({title:n,confirmBtnText:Fotor.globalConfig.lang.common_uploadList_clear_confirmBtn,cancelBtnText:Fotor.globalConfig.lang.common_uploadList_clear_cancelBtn,cancelBtnFunc:function(e){t.forceUpdate()}},function(){for(var r=0;r<t.state.items.length;r++)t.refs["UploadPhotoItem_"+r].state.selected&&(t.refs["UploadPhotoItem_"+r].state.selected=!1);e={resId:a.join(",")},Fotor.resourceManager.removePhotos(a),t.state.items=t.getPhotosPos(),t.forceUpdate(),FotorUtils.Ajax.request("https://gw.fotor.com/v2/resource/delete",{method:"post",dataType:"json",data:e,error:function(e){},success:function(e){},fail:function(e){}})})}},handleCheckboxClick:function(){var e=this;this.state.selectedAllMode=this.refs.selectCheckbox.isSelected();for(var t=0;t<this.state.items.length;t++)this.refs["UploadPhotoItem_"+t].state.selected&&(this.refs["UploadPhotoItem_"+t].state.selected=this.state.selectedAllMode);this.forceUpdate(),setTimeout(function(){e.forceUpdate()},50)},updataSelectedAllMode:function(){for(var e=0;e<this.state.items.length;e++)this.refs["UploadPhotoItem_"+e].state.selected||(this.refs.selectCheckbox.setSelect(!1),this.state.selectedAllMode=!1);this.forceUpdate()},progress:[],render:function(){var e=this,a=this,r=a.state.items,n=FotorUser.getLoginedUser(),o=!0;(!n||n&&!n.userId)&&(o=!1);var i=r.length>0,s=!1;if(i&&o)for(var l=0;l<this.state.items.length;l++)this.state.isBatchMode&&this.refs["UploadPhotoItem_"+l]&&this.refs["UploadPhotoItem_"+l].state.selected&&(s=!0);return t.createElement("div",null,i&&o&&!this.state.loading&&t.createElement("div",{className:"batchArea"},t.createElement("div",{className:"resourceTextbtn",style:{display:this.state.isBatchMode?"none":"inline-block"},onClick:function(){return e.switchToBatchMode()}},Fotor.globalConfig.lang.entry_batch_management),t.createElement("div",{style:{display:this.state.isBatchMode?"block":"none"}},t.createElement(Fotor.ui.Checkbox,{className:"marginT20",text:Fotor.globalConfig.lang.entry_select_all,ref:"selectCheckbox",isRu:!0,noClear:!0,onClick:function(){return e.handleCheckboxClick()}}),t.createElement("div",{className:"resourceTextbtn pull-right ",onClick:function(){return e.quitBatchMode()}},Fotor.globalConfig.lang.entry_cancel_management),t.createElement("div",{className:"resourceTextbtn pull-right ",style:{display:s?"inline-block":"none",marginRight:"8px"},onClick:function(){return e.batchDelete()}},Fotor.globalConfig.lang.design_myProject_popUps_deleteConfirmButton))),t.createElement("div",{id:"upload-resource-list"},t.createElement(v,{className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#999",background:"#c8c8c8",opacity:1,width:"5px"},horizontal:!1,smoothScrolling:!0,minScrollSize:40,onScroll:this.handleScroll,ref:"scrollArea"},this.state.loading&&t.createElement("div",{className:"toolbar-loading"},t.createElement("div",{className:"loading-round"},t.createElement("div",null),t.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),i&&r.map(function(e,r){return t.createElement(w,{ref:"UploadPhotoItem_"+r,data:e.file,photoW:a.state.photoW,key:r,pos:e.pos,itemKey:r,uploadList:a,isBatchMode:a.state.isBatchMode,selectedAllMode:a.state.selectedAllMode,hdrMode:a.state.hdrMode,showMenuResId:a.state.showMenuResId,updataSelectedAllMode:function(){return a.updataSelectedAllMode()}})}),!i&&t.createElement("div",{className:"upload-resource-Image"}),!i&&o&&t.createElement("div",{className:"upload-resource-noImage-div"},Fotor.globalConfig.lang.design_workspace_upload_noImage),!i&&!o&&t.createElement("div",{className:"upload-resource-noImage-div"},Fotor.globalConfig.lang.design_workspace_upload_noSignIn),!i&&!o&&t.createElement("div",{className:"upload-resource-noImage-SingIn",onClick:a.showLoginPop},Fotor.globalConfig.lang.design_start_myProject_signInButton),this.state.beingGetNext&&t.createElement("div",{className:"loading-page",style:{display:this.state.loadFinish?"none":"block",left:"45%",position:"absolute",top:this.state.maxHeight+"px"}},t.createElement("span",null),t.createElement("span",null),t.createElement("span",null),t.createElement("span",null),t.createElement("span",null))),this.state.showMenuResId&&t.createElement("div",{className:"right-extends-panel",ref:"rightExtendPanel"},t.createElement("div",{className:"right-extends-panel-inner"},t.createElement("div",{className:"topTriangle",ref:"topTriangle"}),"editor"!==Fotor.routerManager.moduleName&&t.createElement("div",{title:Fotor.globalConfig.lang.design_workspace_tools_toBackGround,className:"btn toBackGround",onClick:this.handleToBackGroundClick},t.createElement("i",null),t.createElement("span",{className:"tip-right",style:{fontSize:"12px"}},Fotor.globalConfig.lang.design_workspace_tools_toBackGround)),!Fotor.frameMode&&!Fotor.plusEditorMode&&!Fotor.resourceManager.spaceIsFull&&t.createElement("div",{title:Fotor.globalConfig.lang.design_workspace_tools_toEditor,className:"btn toEditor",onClick:this.handleToEditorClick},t.createElement("i",null),t.createElement("span",{className:"tip-right",style:{fontSize:"12px"}},Fotor.globalConfig.lang.design_workspace_tools_toEditor)),t.createElement("div",{title:Fotor.globalConfig.lang.design_workspace_tools_deleteTips,className:"btn deleteBtn",onClick:this.handleDeleteClick},t.createElement("i",null),t.createElement("span",{className:"tip-right",style:{fontSize:"12px"}},Fotor.globalConfig.lang.design_workspace_tools_deleteTips))))))}})),w=_({displayName:"UploadPhotoItem",progressID:0,findUploadItem:function(e){if(r(e).hasClass("upload-item"))return e;var t=r(e).parent();return r(t).hasClass("upload-item")?t:this.findUploadItem(t)},componentWillUnmount:function(){this.mounted=!1,clearInterval(this.progressID),Fotor.app.off("custome_photoClick",this.sureHandleAfterClick,this,-1e3)},getInitialState:function(){return{num:0,checkingID:0,minHeight:40,thumbUrl:"",selected:!1,saveDisplay:"block"}},componentDidMount:function(){var e=this;e.mounted=!0,this.props&&this.props.data&&this.props.data.resId&&this.props.data.on(Fotor.PhotoFileState.FILE_THUMB_READY,function(){Fotor.app.trigger("photoThumbReady"),e.forceUpdate()}),this.progressID=setInterval(function(){e.progress()},300),Fotor.app.on("custome_photoClick",this.sureHandleAfterClick,this,-1e3)},componentWillReceiveProps:function(e){var t=this;e.isBatchMode||setTimeout(function(){t.progress(),e.showMenuResId?r(t.refs.resourceInfoIcon).css("pointer-events","none"):r(t.refs.resourceInfoIcon).css("pointer-events","auto")},50),e.selectedAllMode&&(this.state.selected=!0)},progress:function(){var e=this,t=o.findDOMNode(e.refs.progressBar),a=o.findDOMNode(e.refs.progressCover);if(e.props.data.progress<0)"fileUploadError"==e.props.data.fileState&&r(e.refs.itemCover).addClass("upload-item-error"),r(e.refs.itemCover).css("display","block"),r(e.refs.progressBar).css("display","none"),clearInterval(e.checkingID);else{if(r(t).css("width",100*e.props.data.progress+"%"),"fileUploadError"==e.props.data.fileState)return r(e.refs.itemCover).addClass("upload-item-error"),void clearInterval(this.progressID);1==e.props.data.progress&&(void 0!=e.props.data.fileUrl&&""!=e.props.data.fileUrl&&"undefined"!=e.props.data.fileUrl||Fotor.routerManager.isEditor())&&(clearInterval(this.progressID),r(a).addClass("upload-item-progress-fade-out"),r(e.refs.itemCover).css("display","block"),this.setState({minHeight:10}))}},handleDragStart:function(e){if(!this.props.isBatchMode){var t=parseInt(1e3*Math.random());if(!Fotor.resourceManager.needBackgroundGuide){if(!this.props.data.dragable(!0))return void e.preventDefault();if("editor"==Fotor.routerManager.moduleName&&!Fotor.mainCanvas.editorPicId){var a=this.props.data;return a.thumbUrl=this.state.thumbUrl,Fotor.photoList.trigger("photoClick",a),void e.preventDefault()}this.props.uploadList&&this.props.uploadList.hideExtendPanle(),console.log("drag start enable",t);var r=document.createElement("img");r.src=this.state.thumbUrl;try{e.dataTransfer.setDragImage(r,r.width/2,r.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";Fotor.dragHelper.setCurrentDragObject(this.props.data,"fotor/photo_custome"),e.dataTransfer.setData("text","fotor/photo_custome"),Fotor.mainCanvas.trigger("photo:dragStart",{target:this.props.data})}}},handleClick:function(e,t){if(!Fotor.resourceManager.needBackgroundGuide&&("hdr"!=Fotor.routerManager.moduleName||Fotor.resourceManager.selectMode)&&!this.props.hdrMode){Fotor.resourceManager.selectMode&&!this.props.hdrMode&&this.props.data.fileUrl&&(this.props.data.selected=!this.props.data.selected),this.props.uploadList&&this.props.uploadList.hideExtendPanle();var a=this.props.data;a.thumbUrl=this.state.thumbUrl,this.props.isBatchMode?(this.state.selected=!this.state.selected,this.props.updataSelectedAllMode&&this.props.updataSelectedAllMode()):Fotor.app.trigger("custome_photoClick",a,"byClick"),this.forceUpdate(),e.stopPropagation()}},sureHandleAfterClick:function(e){var t=this,a=e.params[0],r=e.params[1]||"byClick";if((void 0==a.fileId||a.fileId==this.props.data.fileId)&&(void 0==a.resId||a.resId==this.props.data.resId)&&this.props.data.dragable(!0)&&("editor"===Fotor.routerManager.moduleName||"hdr"===Fotor.routerManager.moduleName||null!=Fotor.projectManager.currentProjectData))if("editor"!==Fotor.routerManager.moduleName&&"hdr"!==Fotor.routerManager.moduleName&&Fotor.projectManager.currentProjectData.type!=s.ProjectType.EDITOR)if("classic"==Fotor.routerManager.childModuleName||"funky"==Fotor.routerManager.childModuleName||"artistic"==Fotor.routerManager.childModuleName||"stitching"==Fotor.routerManager.childModuleName){var n=Fotor.resourceManager.getPhotoById(t.props.data.resId);n&&(n=n.toSimpleObject()),Fotor.photoManager.addResourcePhoto(n),Fotor.app.trigger(d.default.UPLOAD_PHOTO_CLICK,n)}else Fotor.mainCanvas.placeObject("fotor/photo_custome",this.props.data,parseInt(1e3*Math.random()));else{Fotor.mainCanvas.editorApplyBeforeExport();var n=Fotor.resourceManager.getPhotoById(t.props.data.resId);Fotor.projectManager.currentProjectData&&!Fotor.projectManager.currentProjectData.selectedPhotoId&&"byClick"==r&&(r="byMenu"),Fotor.projectManager.currentProjectData&&Fotor.projectManager.currentProjectData.selectedPhotoId&&(Fotor.projectManager.currentProjectData.selectedPhotoId==t.props.data.fileId||Fotor.projectManager.currentProjectData.selectedPhotoId==t.props.data.resId)?"byClick"==r&&Fotor.mainCanvas.placeObject("fotor/photo_custome",this.props.data,parseInt(1e3*Math.random())):Fotor.projectManager.currentProjectData&&null!=Fotor.projectManager.currentProjectData.selectedPhotoId&&Fotor.mainCanvas.isAnyContentDirty()&&("byMenu"==r||"editor"==Fotor.routerManager.moduleName&&"byClick"==r)?Fotor.popup.doPopup({title:Fotor.globalConfig.lang.editor_switch_photo_save_title,content:null,confirmBtnText:Fotor.globalConfig.lang.editor_switch_photo_save_jpg_confirmBtn,cancelBtnText:Fotor.globalConfig.lang.editor_switch_photo_save_cancelBtn,cancelBtnFunc:function(e){e||(n&&(n=n.toSimpleObject()),Fotor.photoManager.addResourcePhoto(n),Fotor.projectManager.createNewEditorProject(t.props.data.resId||t.props.data.fileId))}},function(){Fotor.vipResManager.vipPermission(function(){Fotor.projectManager.exportUniqueNumber=Math.random(),Fotor.exportPop.showAndExportEditor("jpg",function(){n&&(n=n.toSimpleObject()),Fotor.photoManager.addResourcePhoto(n),Fotor.projectManager.createNewEditorProject(t.props.data.resId||t.props.data.fileId)})},function(){Fotor.projectManager.exportUniqueNumber=null,n&&(n=n.toSimpleObject()),Fotor.photoManager.addResourcePhoto(n),Fotor.projectManager.createNewEditorProject(t.props.data.resId||t.props.data.fileId)})}):(n&&(n=n.toSimpleObject()),"byMenu"==r?(Fotor.photoManager.addResourcePhoto(n),Fotor.projectManager.createNewEditorProject(this.props.data.resId)):"byClick"==r&&("editor"==Fotor.routerManager.moduleName?(Fotor.photoManager.addResourcePhoto(n),Fotor.projectManager.createNewEditorProject(this.props.data.resId)):Fotor.mainCanvas.placeObject("fotor/photo_custome",this.props.data,parseInt(1e3*Math.random()))))}},handleDragEnd:function(e){this.props.isBatchMode||Fotor.mainCanvas.trigger("photo:dragEnd")},retryTimes:0,handleThumpError:function(e){var t=this,a=e.target,r=a.src;""!=r&&-1!==r.indexOf("base64")||this.retryTimes++>10||setTimeout(function(){r=r.replace(/(\?.*)?$/g,"")+"?"+Math.random(),a.src=r,t.state.thumbUrl=r},2e3)},handleClickExtendRight:function(e){var t=0;0==this.props.pos.scPos?t=r(this.refs.rightExtendBtn).offset().left-r("#upload-resource-list").offset().left-20:1==this.props.pos.scPos?t=r(this.refs.rightExtendBtn).offset().left-r("#upload-resource-list").offset().left-60:2==this.props.pos.scPos&&(t=r(this.refs.rightExtendBtn).offset().left-r("#upload-resource-list").offset().left-110);var a=r(this.refs.rightExtendBtn).offset().top-r("#upload-resource-list").offset().top+20;this.props.uploadList&&(r(this.refs.rightExtendBtn).addClass("active"),this.props.uploadList.showExtendPanle(this.props.data.resId,t,a,this.props.pos.scPos)),this.forceUpdate(),e.stopPropagation()},handledeleteCheckBoxClick:function(e){this.state.selected=!this.state.selected,this.props.updataSelectedAllMode&&this.props.updataSelectedAllMode(),this.forceUpdate(),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},handleClickInfoIcon:function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},render:function(){var e=this;this.state.thumbUrl=this.props.data.thumbUrl;var a=""!=this.props.data.thumbUrl?"block":"none",r=this.props.data.selected&&Fotor.resourceManager.selectMode,n=this.props.photoW+"px",o=(this.props.photoW-20).toString()+"px",i=Fotor.projectManager.currentProjectData&&Fotor.projectManager.currentProjectData.selectedPhotoId==this.props.data.resId?"active":"";return t.createElement("div",{className:"upload-item clearfix"+i,"data-url":this.props.data.fileUrl,style:{position:"absolute",marginTop:0,marginRight:0,left:this.props.pos.left,top:this.props.pos.top,display:a,opacity:Fotor.dragFile?.5:1,width:n,minHeight:this.state.minHeight,background:this.props.data.progress>=1?"none":"rgba(255,255,255,.5)"},draggable:Fotor.resourceManager.needBackgroundGuide||this.props.isBatchMode?"false":"true",onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onClick:this.handleClick},t.createElement(g,null,t.createElement("img",{ref:"thumb",src:this.state.thumbUrl,onError:this.handleThumpError})),t.createElement("div",{className:"upload-item-progress",style:{left:"0"},ref:"progressCover"},t.createElement("div",{ref:"progressBar"})),!this.props.isBatchMode&&t.createElement("div",{className:"upload-item-cover",ref:"itemCover"},t.createElement("div",{className:"upload-item-more",ref:"rightExtendBtn",onClick:this.handleClickExtendRight}),t.createElement("div",{className:"resource-info-icon",ref:"resourceInfoIcon",onClick:function(t){return e.handleClickInfoIcon(t)}},t.createElement("div",{className:"clearfix resource-info-expand ",ref:"resourceInfoExpand",style:{width:n}},t.createElement("div",{className:"resource-info-arrow"}),t.createElement("div",{className:"resource-file-name",style:{width:o}},this.props.data.fileName)))),this.props.isBatchMode&&this.props.data.progress>=1&&t.createElement("div",{className:"checkboxBg"}),this.props.isBatchMode&&this.props.data.progress>=1&&t.createElement("div",{className:"checkbox batchBox"+(this.state.selected?" active":""),ref:"deleteCheckbox",onClick:function(t){return e.handledeleteCheckBoxClick(t)}},t.createElement("div",{className:"round"})),r&&t.createElement("div",{className:"upload-item-selected"}))}});e.exports=y}).call(t,a(0),a(1),a(23),a(15))},function(e,t,a){var r=a(785);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,"/*user resource*/\n/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n#upload-resource-list {\n  position: absolute;\n  top: 70px;\n  bottom: 0;\n  left: 4px;\n  right: 3px;\n  overflow: hidden; }\n  #upload-resource-list .right-extends-panel {\n    display: none;\n    float: none;\n    z-index: 100;\n    position: absolute;\n    width: 144px;\n    top: 46px;\n    background: rgba(255, 255, 255, 0.97);\n    border-radius: 6px;\n    -moz-border-radius: 6px;\n    -webkit-border-radius: 6px;\n    box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);\n    -webkit-box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);\n    -moz-box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1); }\n    #upload-resource-list .right-extends-panel.active {\n      display: block; }\n    #upload-resource-list .right-extends-panel .right-extends-panel-inner {\n      border-radius: 6px;\n      -moz-border-radius: 6px;\n      -webkit-border-radius: 6px;\n      overflow: hidden; }\n      #upload-resource-list .right-extends-panel .right-extends-panel-inner .topTriangle {\n        content: '';\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 16px;\n        margin-top: -14px;\n        border: 7px solid transparent;\n        border-bottom-color: rgba(255, 255, 255, 0.97); }\n    #upload-resource-list .right-extends-panel .btn {\n      float: none;\n      background: none;\n      width: 100%;\n      height: auto;\n      line-height: 32px;\n      padding: 0;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      color: #646464;\n      cursor: pointer;\n      border-radius: 0;\n      -moz-border-radius: 0;\n      -webkit-border-radius: 0;\n      text-align: left; }\n      #upload-resource-list .right-extends-panel .btn i {\n        float: left;\n        margin: 8px 6px 0 8px;\n        display: block;\n        width: 18px;\n        height: 18px;\n        background: url("+r(a(786))+") -36px 0 no-repeat; }\n      #upload-resource-list .right-extends-panel .btn.deleteBtn i {\n        background-position: -180px 0; }\n      #upload-resource-list .right-extends-panel .btn.toBackGround i {\n        background-position: -918px 0; }\n      #upload-resource-list .right-extends-panel .btn.toEditor i {\n        background-position: -936px 0; }\n      #upload-resource-list .right-extends-panel .btn span {\n        position: static;\n        display: inline;\n        padding: 0;\n        background: none;\n        box-shadow: 2px 2px 5px transparent;\n        -webkit-box-shadow: 2px 2px 5px transparent;\n        -moz-box-shadow: 2px 2px 5px transparent; }\n        #upload-resource-list .right-extends-panel .btn span:before, #upload-resource-list .right-extends-panel .btn span:after {\n          display: none; }\n        #upload-resource-list .right-extends-panel .btn span.tip-right {\n          left: auto;\n          right: -11px; }\n          #upload-resource-list .right-extends-panel .btn span.tip-right:before {\n            left: auto;\n            right: 14px; }\n        #upload-resource-list .right-extends-panel .btn span.no-tip {\n          display: inline !important; }\n      #upload-resource-list .right-extends-panel .btn:hover {\n        background: rgba(0, 0, 0, 0.05);\n        box-shadow: 0 0 0 0 #ac975e;\n        -webkit-box-shadow: 0 0 0 0 #ac975e;\n        -moz-box-shadow: 0 0 0 0 #ac975e; }\n        #upload-resource-list .right-extends-panel .btn:hover.deleteBtn i {\n          background-position: -180px -18px; }\n        #upload-resource-list .right-extends-panel .btn:hover.toBackGround i {\n          background-position: -918px -18px; }\n        #upload-resource-list .right-extends-panel .btn:hover.toEditor i {\n          background-position: -936px -18px; }\n        #upload-resource-list .right-extends-panel .btn:hover span {\n          color: #ac975e; }\n      #upload-resource-list .right-extends-panel .btn:active {\n        background: rgba(0, 0, 0, 0.05);\n        box-shadow: 0 0 0 0 #ac975e;\n        -webkit-box-shadow: 0 0 0 0 #ac975e;\n        -moz-box-shadow: 0 0 0 0 #ac975e; }\n        #upload-resource-list .right-extends-panel .btn:active span {\n          color: #ac975e; }\n        #upload-resource-list .right-extends-panel .btn:active.deleteBtn i {\n          background-position: -180px -36px; }\n        #upload-resource-list .right-extends-panel .btn:active.toBackGround i {\n          background-position: -918px -36px; }\n        #upload-resource-list .right-extends-panel .btn:active.toEditor i {\n          background-position: -936px -36px; }\n      #upload-resource-list .right-extends-panel .btn.active {\n        background: none;\n        box-shadow: 0 0 0 0 #ac975e;\n        -webkit-box-shadow: 0 0 0 0 #ac975e;\n        -moz-box-shadow: 0 0 0 0 #ac975e; }\n\n.batchArea {\n  position: relative;\n  width: 100%;\n  height: 50px; }\n\n.batchBox {\n  position: absolute;\n  width: 100%;\n  height: 100%; }\n\n.checkboxBg {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.2); }\n\n.resourceTextbtn {\n  position: relative;\n  display: inline-block;\n  float: right;\n  padding: 0 8px;\n  margin: 12px 18px 0 0;\n  line-height: 26px;\n  color: #787878;\n  border: 1px solid #c8c8c8;\n  cursor: pointer; }\n  .resourceTextbtn:hover {\n    border-color: #ac975e;\n    color: #ac975e; }\n  .resourceTextbtn:active {\n    background: #b4b4b4;\n    border-color: #d0c5a9;\n    color: #d0c5a9; }\n\n.resource-info-icon {\n  position: absolute;\n  z-index: 10;\n  display: block;\n  opacity: 0;\n  left: 2px;\n  bottom: 2px;\n  width: 18px;\n  height: 18px;\n  background: url("+r(a(787))+") no-repeat;\n  transition: opacity .3s;\n  -moz-transition: opacity .3s;\n  -webkit-transition: opacity .3s;\n  -o-transition: opacity .3s; }\n  .resource-info-icon:hover {\n    background-position: 0 -18px;\n    opacity: 1; }\n  .resource-info-icon:active {\n    background-position: 0 -36px; }\n\n.resource-info-expand {\n  cursor: default;\n  z-index: 10;\n  opacity: 0;\n  transition: bottom .3s, opacity .3s;\n  -moz-transition: bottom .3s, opacity .3s;\n  -webkit-transition: bottom .3s, opacity .3s;\n  -o-transition: bottom .3s, opacity .3s;\n  pointer-events: none;\n  position: absolute;\n  left: -4px;\n  top: 22px;\n  box-shadow: 0px 2px 2px rgba(26, 26, 32, 0.06);\n  background-color: #ffffff;\n  font-family: 'Microsoft YaHei', 'OpenSansLight', 'Arial';\n  font-size: 12px; }\n  .resource-info-expand .resource-info-arrow {\n    position: absolute;\n    padding: 6px;\n    top: -12px;\n    left: 3px;\n    width: 8px;\n    height: 6px;\n    background-origin: content-box; }\n  .resource-info-expand .resource-file-name {\n    margin: 10px;\n    color: #808080;\n    line-height: 16px;\n    word-break: break-all; }\n\n.resource-info-icon:hover .resource-info-expand {\n  pointer-events: all;\n  opacity: 1.0; }\n\n.resource-help {\n  width: 100%;\n  height: 100%;\n  background-color: rgba(235, 235, 240, 0.5);\n  cursor: not-allowed;\n  position: absolute;\n  z-index: 10; }\n\n.resource-help-tip {\n  position: absolute;\n  z-index: 11;\n  display: block;\n  padding: 13px;\n  top: 0;\n  left: 0;\n  margin: -21px 0 0 0;\n  background: #282829;\n  color: #c8c8c8;\n  font-size: 12px;\n  font-family: 'Arial';\n  width: 200px;\n  border-radius: 4px;\n  -moz-border-radius: 4px;\n  -webkit-border-radius: 4px;\n  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);\n  -moz-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);\n  -webkit-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2); }\n  .resource-help-tip img {\n    width: 174px;\n    height: 128px; }\n  .resource-help-tip .resource-help-tip-close {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    width: 10px;\n    height: 10px;\n    display: block;\n    background: url("+r(a(788))+") top no-repeat;\n    cursor: pointer; }\n    .resource-help-tip .resource-help-tip-close:hover {\n      background-position: center; }\n    .resource-help-tip .resource-help-tip-close:hover {\n      background-position: center; }\n  .resource-help-tip .resource-help-tip-gotit {\n    float: right;\n    text-decoration: underline;\n    color: #ac975e;\n    cursor: pointer; }\n    .resource-help-tip .resource-help-tip-gotit:hover {\n      color: #bda460; }\n    .resource-help-tip .resource-help-tip-gotit:hover {\n      color: #bda460; }\n\n.upload-space-div {\n  position: absolute;\n  left: 4px;\n  width: 300px;\n  bottom: 0; }\n\n.upload-space-progress-bar {\n  position: relative;\n  width: 100%;\n  height: 10px;\n  margin: auto;\n  background: rgba(120, 120, 120, 0.9);\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.1) inset;\n  -moz-box-shadow: 0 0 3px rgba(0, 0, 0, 0.1) inset;\n  -webkit-box-shadow: 0 0 3px rgba(0, 0, 0, 0.1) inset;\n  border-radius: 10px;\n  -moz-border-radius: 10px;\n  -webkit-border-radius: 10px;\n  overflow: hidden; }\n  .upload-space-progress-bar div {\n    position: absolute;\n    left: 0;\n    width: 0;\n    height: 10px;\n    border-radius: 10px;\n    -moz-border-radius: 10px;\n    -webkit-border-radius: 10px;\n    background: #5db361;\n    transition: width .3s;\n    -webkit-transition: width .3s;\n    -moz-transition: width .3s; }\n    .upload-space-progress-bar div.error-icon {\n      display: none; }\n  .upload-space-progress-bar.warning div {\n    background-color: #f9a43f; }\n  .upload-space-progress-bar.full div {\n    width: 100%;\n    background: #d54862; }\n\n.space-warning-icon {\n  display: none;\n  margin-left: 10px;\n  width: 14px;\n  height: 14px;\n  background: url("+r(a(789))+") 0 0 no-repeat; }\n\n.space-full-icon {\n  display: none;\n  margin-left: 10px;\n  width: 14px;\n  height: 14px;\n  background: url("+r(a(790))+") 0 0 no-repeat; }\n\n.spaceCloud {\n  display: block;\n  margin: auto;\n  width: 52px;\n  height: 34px;\n  background: url("+r(a(791))+") 0 0 no-repeat; }\n\n.upload-resource-noImage-SingIn {\n  text-decoration: underline;\n  color: #ac975e;\n  text-align: center;\n  width: 100%;\n  cursor: pointer;\n  font-size: 14px;\n  padding-top: 15px; }\n",""])},function(e,t,a){e.exports=a.p+"images/white-icons3adc79d02171fac60e99f632af02e2a1.png"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAA2CAYAAADK88l3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABNFJREFUeNqUV1FMm1UUvu3fDhRo6WQM3RCkZDTDxRHBUTKl2R5IyLZCTOiDJgQTjOzJxMSwJ+BpqC8+TRMfiIkkQrIhRBScmDqzbmPKGMJErVUHrCt0DtZSoKXUc/6ddvD33r/0JB//5T/nfJx77jnnv2g6OzuZUuCdBR6VgDLAXnr9H+B3wM+gn1X6aLYTwboAHm8ADjF1+QPQC/b34y+020jQ+dwuSBjZnCOfJ0QUyVlAJtu9oO1Z8mUawvuAEp61yzV+Bp81Na8MCQg9gA8xIouIJJFIjUZNjb4WtHgT8KqaZU5OjhQOh2MbGxtbApOf4hFxpbW1tXBmZub0ysrKW/Pz8w6Vv2XRwQ8TT9PX13esqanppfjvS0tLQRUikwQ/6gA6pWZ0dPS+0WgMV1VVHdwCaW5u/t7tdocERFu4tRWeJhAIROvq6sy4HhgYmB4ZGfGrRLSMRH/zNJWVlQaz2bxvfX093NbW9kuKmnLjlsYB1UqN1WqVewxOarOiosIQDAY3Q6FQdHJykperG5gjDPmwMulw3JsOh6MkMzNzT3l5efbCwkJgeHjYLyjIQblpqczbAU+x9GQN8AH4e+O9hl18AbCeBgnaXkASZffjaDhPoaYStDlPPrJINpstoYV10Ol0umD5FyACyAJk0BrzcwvwFeYESHYkXceZjrEX93sKqP9OAJ4n1V3ADwDvtK/kjtJvBxEQYN99gsFxtlNKeBvsnPBsA8LZpAkJylqqKdsucoQ24+TzhIgiGcSJkcapoe0g+TItLHAm9QCMPOujtndlCAR9epADIzrJa5GdI1JVi74nMdlNalaTzo+ZJOmZRiux2FZUZNakoyPmyv7CI6ys4hTLe7aMrQUfsG973xOZnkCiQp7mSLWDHTpan/g9BEQqUog52uBp7ty8xH699qW8xi3dvtqrmigkusdTRKMRdtB87PHUmr7Mlv3/qvHMa6kIkyTLsI+Z8l9gkfAaRDeQqqauIhE3ZuPex6mLboaBNJ9lGwvY0zl5IqIvkOg7wPWkaf7gLltbfch0+gx2uKoRiPJZKMCd/+h7WZ6QVObXRdWtIvgFskLz/ib3GnWxHb9CaZCgrR1J5OKPxWIJzcVPmy3Ud9UpSDD6ltff+Xy2q6tr5xhBQQXeYOjr+xmNVJyOq4BZeoe6GrIVT0gwwBDx07wM8G2zeUjvUBdTnZA0AbspKqUUE/Aa5KLPlztpQmL2Ad8ISJRSQ7ZWJVEpJTk7jVND256Ojo7S+Knh2ML74cs86+7u7mfw2d7eLmp/vGCcwYiOi0jisr1EOIK+xzGij+iSLpRIJKKRJCmm1WpFJr1I5KLTSJKpqakMuGBlezyePbm5uVHY5qKA6B88/gM8TX9/v2FsbCwrcUk0maIqQR8QTsjGxsaA3W5/JB8tbAnuSo9STUgfT6HX62MTExPyfam2tna1uLg4osJzT0s3jCRZXFyU5ubm9HBjizU0NKSaCjeR6BJPgyTxyHw+n87r9er8fr8kILqIRD9SUe2QoqKiiMFgiMJdUjM0NJSNEebl5UUFBXklPo+wzL8GGNKckHgAp2Em/RmvMOziFkAwDRK0bUESZfdfA9TztinYTj35cOcRRob/6L0GOEV9+BxNSfyQ3qAUXFEOt/8FGABocLPHTn9CAQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAeCAYAAAAVdY8wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFODNGMzY5NTFGNTlFNjExQkJBQkE3OENBRjM3NDFBRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNzI0RjI1MjNBQTcxMUU3QUQyMkY3QzY2RTAyNUVDRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNzI0RjI1MTNBQTcxMUU3QUQyMkY3QzY2RTAyNUVDRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjkxODZFNDlEQTYzQUU3MTE5MTI4QkIyRDA1Qjg0MDA4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU4M0YzNjk1MUY1OUU2MTFCQkFCQTc4Q0FGMzc0MUFFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7rrFPwAAAWlJREFUeNqcUztOw0AQHSeUJFQ+gCssQeGeyshVLuEm6SntC+CSA7ixi1Q5AYWJEL6AC1+CdICQXJk3y64z+IMIKz3teObNzufJ1LYtRVFkAQu2JdjHMbbnTdNYRPQA3BdFsQuC4BM2xXFs43oBLuF/PIOxBALgCtiD4NP32Wsfn6V6VmebQK2Dxr5NkuRVEUUp+UpH4o8Z/X5aY8xGXqs1TM8cU1Nf4H4GrjWBh8mBlSavMPWWp34DngBek4+eDrqKr6sUivPXhfOL5Lru6CTSP3ccp1Omqqqd53lKmTzPO2XgHyoDwrQyOntSmTAMj8r0yCRJpyszUroWPStlrCzLWJmypwz1Em8GyqCng67yQxkzNZPOQXqXDcK/wPUBf6t6LMtSoX+k31qv10YZXrqfpqkqvdlsbFH6bqAMCNPKiOxRZVDlqEyPTJJ0ujIjpWvRs22m/p8yYj3Df4Z3CQz+GfZxjO0vAQYA4egIj6b0Un0AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDY5NkYwODNDNTQzMTFFNzg2M0RGNTUxQ0EwQTFFRjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDY5NkYwODRDNTQzMTFFNzg2M0RGNTUxQ0EwQTFFRjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpENjk2RjA4MUM1NDMxMUU3ODYzREY1NTFDQTBBMUVGMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpENjk2RjA4MkM1NDMxMUU3ODYzREY1NTFDQTBBMUVGMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Po8TygkAAADZSURBVHjaYvz//z8DDPxa6iACpIqA2AeI1aDCN4B4ExBPYos+8AamlhGmEagpGEjNBWJ+BuzgExAnATWvhWuEaloN4jPgByBbQkGaGX8usRcFcu4AMR+yCla3yWD6965cbDarsgCJXHRNYKeI6uKyFaS2gAlI+DGQDnxAGjXI0KjOgjMUXl/GF1a/WKDxpI8ugyVQkME9JmjkYgBQqMJCFgvYCtI4BRrEWAAjroQwgewEALKRAZqMwoD4Mx5Nn2GaUNIqWiL3BQU5SAiIb4H8BMQTkRM5QIABAA4CTT3X4OBAAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REU0RjM3RTNDNTQzMTFFNzlDNjZGNzY1MEY3NjhBQTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REU0RjM3RTRDNTQzMTFFNzlDNjZGNzY1MEY3NjhBQTMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERTRGMzdFMUM1NDMxMUU3OUM2NkY3NjUwRjc2OEFBMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERTRGMzdFMkM1NDMxMUU3OUM2NkY3NjUwRjc2OEFBMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvFYj0UAAADbSURBVHjaYvz//z8DDFzzTBYBUkVA7APEalDhG0C8CYgnaW2f+wamlhGmEagpGEjNBWJ+BuzgExAnATWvhWuEaloN4jPgByBbQkGaGa96JIkCOXeAmA9ZhUJPBZh+UNKBzWZVFiCRi64JBLi0VXHZClJbwAQk/BhIBz4gjRpkaFRnwSXz7eptYFDhDKtfoMC5AGTok2jjJSZo5GIAUKjCQhYL2ArSOAUaxJgAu1NBaieQnwCQklwIkJoHxLw4NH0G4kSUJIclkfuCghwUekB8C+QnIJ6InMgBAgwA6g5Pg4B0FAMAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAiCAYAAAAQ9/ptAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MThBREQyRkNDMkQ3MTFFNzkyMEZCMEM3NzEwNEMzQjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MThBREQyRkRDMkQ3MTFFNzkyMEZCMEM3NzEwNEMzQjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxOEFERDJGQUMyRDcxMUU3OTIwRkIwQzc3MTA0QzNCMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxOEFERDJGQkMyRDcxMUU3OTIwRkIwQzc3MTA0QzNCMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pv0lAncAAAPuSURBVHja1Jl5SBRhGMZna7PSKLHT7qj8o0OzmyCL7VLQspOs7NBE7T4IiqIiiIIiotMgsTQygrRDizLDLLOCzCKK7LRIO6WygjapnheehakcdXdmdvOFHzO7fjM7z7zf9x6floyk6YqB1hqMByNAH9AZ+AI7+AQegVvgIsjh97psYnz6H5+tBgkZCFaDCRr3bErageFgGagAB8AO8N6oN9pA5/Xy9lPATTCZYjLBPDCAHmsEfEB7em4NuAT8eC5eWwgsRgjS46FgcJLTSiwJbARvqhlbBb6BcpAPttJTK0Ak2ANCwQxQ6QkPhfDBREw26AkSNcRo2RVZAiAKvAThIA+0cLeg3uA0aAbS+CCPdTzDMXrrBugPzgMvdwnyBhl8i0fBbIPWcimYCorAELDNXYLWgwCQC2YpxppMuzieLwJDzRYkUWoJzzeAX4rxVsRQLs+1xWxBicwlx0GBYp6Jdx6AkSDITEEzedyvmGtVzFNi0WYJ6gG6MZrlKeZbGo+jzRIUzGOx4h4rUqUIp0J4XSuFrjw+c5OgH5x2NrAYfARvGQnvcVq65CE/liQh/Hy1hrFhoIyE1XLfuozdzeN2cJDJ/DZ4B/aqSq4/zKLRPoSzIpZI01CVJwL5tqozeTh/npczzCs6x0ayipAiuA3oCPrxb3aG9k1oIX5qeaglOAfOgFEUI6XIulrE/POinJheNY2V4ncliAURXMtBrFK8mA+zMw9EeVcnKICLMZRrRfqbJvy8uQ5i5oPX4BUfwKixf9tdppDRfE55vlSIsqiDgnjmgqp6juNUcMbOqqaRkWO1LJeiCtmLLQU7HR7aBbrwhya5IMZT9hQscJRj8JKvCOrLnsRR3tiVemQICCdwyGLgmC2CYrgwpeN8odRPS3WkAyvDoliyQTe3MG+N4R6ClE2twHduhpSyW81h12tE1X6Nx0AR1EmVZ/QKmQNWgV4aVYkP16oIXgvus5k7rFOYo/Vva2WEE/ug44aduftjU+0X5NMLJfRMY3qqC70XwtmRwqo6ht5zxRz1nt3KGsmfmbjMxRsWMts/5BtP1qjPvoDn4DK/i6VHbZw2HVz8fUet+VyCwh1+sOnwkIg5BQY7uRZl7CBe217H70/jsaABywtF5x6BhXXXZxeureS1ejYaIxw7SCLoCKfdOOahemVIpoe4/XUDOSlXBH0Fy/n3fTqnnrttPyOr7MomqItTqV73qGqkpP9cSHO26QkM99HwTvHfHatsUVWwVYhn35HFVuIJI5SnbRjLtAiGf1l/cyEmo6YGz8bQ2/8/95IU0sshpqS2PQXp5eX/PWPBFIbi7szynrbrTNjpWhs2vwUYAIh86fqeFfVyAAAAAElFTkSuQmCC"},function(e,t,a){e.exports=a.p+"images/userResource172f103f231aad2f8ef9717bce821a23.gif"},,,,function(e,t,a){var r=a(806);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){function r(e){return a(n(e))}function n(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./halloweenBtn_0.png":1080,"./halloweenBtn_1.png":1081,"./halloweenBtn_2.png":1082,"./halloweenBtn_3.png":1083,"./halloween_0.png":1084,"./halloween_1.png":1085,"./halloween_2.png":1086,"./halloween_3.png":1087};r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id=797},function(e,t,a){function r(e){return a(n(e))}function n(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./default_01.jpg":1096,"./default_02.jpg":1097,"./default_03.jpg":1098,"./default_04.jpg":1099,"./default_05.jpg":1100,"./default_06.jpg":1101,"./default_07.jpg":1102,"./magic_1.jpg":1103,"./magic_2.jpg":1104,"./magic_3.jpg":1105,"./magic_4.jpg":1106,"./pressed_01.jpg":1107,"./pressed_02.jpg":1108,"./pressed_03.jpg":1109,"./pressed_04.jpg":1110,"./pressed_05.jpg":1111,"./pressed_06.jpg":1112,"./pressed_07.jpg":1113};r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id=798},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(0),n=(a.n(r),a(15)),o=(a.n(n),a(894)),i=a.n(o),s=a(895),l=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},d=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},p={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},m=function(e){function t(e){l(this,t);var a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={z:e.z,original:{x:0,y:0},bounds:{top:0,right:0,bottom:0,left:0},maxWidth:e.maxWidth,maxHeight:e.maxHeight,isMounted:!1},a.onResizeStart=a.onResizeStart.bind(a),a.onResize=a.onResize.bind(a),a.onResizeStop=a.onResizeStop.bind(a),a.onDragStart=a.onDragStart.bind(a),a.onDrag=a.onDrag.bind(a),a.onDragStop=a.onDragStop.bind(a),a.getMaxSizesFromProps=a.getMaxSizesFromProps.bind(a),a}return d(t,e),c(t,[{key:"componentWillReceiveProps",value:function(e){this.props.z!==e.z&&this.setState({z:e.z})}},{key:"componentDidMount",value:function(){this.setParentPosition()}},{key:"getParentSize",value:function(){return this.resizable.getParentSize()}},{key:"getMaxSizesFromProps",value:function(){return{maxWidth:void 0===this.props.maxWidth?Number.MAX_SAFE_INTEGER:this.props.maxWidth,maxHeight:void 0===this.props.maxHeight?Number.MAX_SAFE_INTEGER:this.props.maxHeight}}},{key:"getSelfElement",value:function(){return this?Object(n.findDOMNode)(this):null}},{key:"setParentPosition",value:function(){var e=this.getSelfElement();if(e instanceof Element){var t=e.parentNode;if(!t||"undefined"==typeof window)return;if(!(t instanceof HTMLElement))return;if("static"!==getComputedStyle(t).position)return void this.setState({isMounted:!0});t.style.position="relative",this.setState({isMounted:!0})}}},{key:"onDragStart",value:function(e,t){if(this.props.onDragStart&&this.props.onDragStart(e,t),this.props.bounds){var a=this.resizable&&this.resizable.parentNode,r="parent"===this.props.bounds?a:document.querySelector(this.props.bounds);if(r instanceof HTMLElement&&a instanceof HTMLElement){var n=r.getBoundingClientRect(),o=n.left,i=n.top,s=a.getBoundingClientRect(),l=s.left,c=s.top,h=o-l,d=i-c;this.resizable&&this.setState({bounds:{top:d,right:h+(r.offsetWidth-this.resizable.size.width),bottom:this.props._freeBottomBounds?2147483647:d+(r.offsetHeight-this.resizable.size.height),left:h}})}}}},{key:"onDrag",value:function(e,t){this.props.onDrag&&this.props.onDrag(e,t)}},{key:"onDragStop",value:function(e,t){this.props.onDragStop&&this.props.onDragStop(e,t)}},{key:"onResizeStart",value:function(e,t,a){if(e.stopPropagation(),this.setState({original:{x:this.draggable.state.x,y:this.draggable.state.y}}),this.props.bounds){var r=this.resizable&&this.resizable.parentNode,n="parent"===this.props.bounds?r:document.querySelector(this.props.bounds),o=this.getSelfElement();if(o instanceof Element&&n instanceof HTMLElement&&r instanceof HTMLElement){var i=this.getMaxSizesFromProps(),s=i.maxWidth,l=i.maxHeight,c=this.getParentSize();if(s&&"string"==typeof s)if(s.endsWith("%")){var h=Number(s.replace("%",""))/100;s=c.width*h}else s.endsWith("px")&&(s=Number(s.replace("px","")));if(l&&"string"==typeof l)if(l.endsWith("%")){var d=Number(l.replace("%",""))/100;l=c.width*d}else l.endsWith("px")&&(l=Number(l.replace("px","")));var u=o.getBoundingClientRect(),p=u.left,m=u.top,f=n.getBoundingClientRect(),g=f.left,v=f.top;if(/left/i.test(t)&&this.resizable){var b=p-g+this.resizable.size.width;this.setState({maxWidth:b>Number(s)?s:b})}if(/right/i.test(t)){var _=n.offsetWidth+(g-p);this.setState({maxWidth:_>Number(s)?s:_})}if(/top/i.test(t)&&this.resizable){var y=m-v+this.resizable.size.height;this.setState({maxHeight:y>Number(l)?l:y})}if(/bottom/i.test(t)){var x=n.offsetHeight+(v-m);this.setState({maxHeight:x>Number(l)?l:x})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(e,t,a)}},{key:"onResize",value:function(e,t,a,r){var n=void 0,o=void 0;/left/i.test(t)&&(n=this.state.original.x-r.width,this.draggable.setState({x:n})),/top/i.test(t)&&(o=this.state.original.y-r.height,this.draggable.setState({y:o})),this.props.onResize&&this.props.onResize(e,t,a,r,{x:n||this.draggable.state.x,y:o||this.draggable.state.y})}},{key:"onResizeStop",value:function(e,t,a,r){var n=this.getMaxSizesFromProps(),o=n.maxWidth,i=n.maxHeight;if(this.setState({maxWidth:o,maxHeight:i}),this.props.onResizeStop){var s={x:this.draggable.state.x,y:this.draggable.state.y};this.props.onResizeStop(e,t,a,r,s)}}},{key:"updateSize",value:function(e){this.resizable&&this.resizable.updateSize({width:e.width,height:e.height})}},{key:"updatePosition",value:function(e){this.draggable.setState(e)}},{key:"updateZIndex",value:function(e){this.setState({z:e})}},{key:"render",value:function(){var e=this,t=this.props.disableDragging||this.props.dragHandleClassName?{cursor:"normal"}:{cursor:"move"},a=h({},p,{zIndex:this.state.z},t,this.props.style);if(!this.state.isMounted)return Object(r.createElement)("div",null);var n=this.props._freeBottomBounds?2147483647:this.state.maxHeight;return Object(r.createElement)(i.a,{ref:function(t){e.draggable=t},handle:this.props.dragHandleClassName,defaultPosition:this.props.default,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:this.props.dragAxis,disabled:this.props.disableDragging,grid:this.props.dragGrid,bounds:this.props.bounds?this.state.bounds:void 0,position:this.props.position,enableUserSelectHack:!1,cancel:this.props.cancel},Object(r.createElement)(s.a,h({},this.props.extendsProps,{className:this.props.className,ref:function(t){e.resizable=t},defaultSize:this.props.default,size:this.props.size,enable:this.props.enableResizing,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:a,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.maxWidth,maxHeight:n,grid:this.props.resizeGrid,handleWrapperClass:this.props.resizeHandleWrapperClass,handleWrapperStyle:this.props.resizeHandleWrapperStyle,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:this.props.resizeHandleStyles,handleClasses:this.props.resizeHandleClasses}),this.props.children))}}]),t}(r.Component);m.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t.default=m},,,,function(e,t,a){var r=a(804);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,"/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n.help-tip-text {\n  position: absolute;\n  z-index: 11;\n  display: none;\n  padding: 18px;\n  top: 0;\n  left: 0;\n  margin: -21px 0 0 30px;\n  background: #282829;\n  color: #c8c8c8;\n  font-size: 12px;\n  font-family: 'Arial';\n  width: 180px;\n  border-radius: 4px;\n  -moz-border-radius: 4px;\n  -webkit-border-radius: 4px;\n  box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);\n  -moz-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);\n  -webkit-box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2); }\n  .help-tip-text img {\n    width: 180px;\n    height: 180px; }\n  .help-tip-text:before {\n    content: '';\n    position: absolute;\n    display: block;\n    top: 20px;\n    left: 0;\n    margin-left: -16px;\n    border: 8px solid transparent;\n    border-right-color: #282829; }\n  .help-tip-text .help-tip-close {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    width: 10px;\n    height: 10px;\n    display: block;\n    background: url("+r(a(805))+") top no-repeat;\n    cursor: pointer; }\n    .help-tip-text .help-tip-close:hover {\n      background-position: center; }\n    .help-tip-text .help-tip-close:hover {\n      background-position: center; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAeCAYAAAAVdY8wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFODNGMzY5NTFGNTlFNjExQkJBQkE3OENBRjM3NDFBRSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNzI0RjI1MjNBQTcxMUU3QUQyMkY3QzY2RTAyNUVDRiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNzI0RjI1MTNBQTcxMUU3QUQyMkY3QzY2RTAyNUVDRiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjkxODZFNDlEQTYzQUU3MTE5MTI4QkIyRDA1Qjg0MDA4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU4M0YzNjk1MUY1OUU2MTFCQkFCQTc4Q0FGMzc0MUFFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7rrFPwAAAWlJREFUeNqcUztOw0AQHSeUJFQ+gCssQeGeyshVLuEm6SntC+CSA7ixi1Q5AYWJEL6AC1+CdICQXJk3y64z+IMIKz3teObNzufJ1LYtRVFkAQu2JdjHMbbnTdNYRPQA3BdFsQuC4BM2xXFs43oBLuF/PIOxBALgCtiD4NP32Wsfn6V6VmebQK2Dxr5NkuRVEUUp+UpH4o8Z/X5aY8xGXqs1TM8cU1Nf4H4GrjWBh8mBlSavMPWWp34DngBek4+eDrqKr6sUivPXhfOL5Lru6CTSP3ccp1Omqqqd53lKmTzPO2XgHyoDwrQyOntSmTAMj8r0yCRJpyszUroWPStlrCzLWJmypwz1Em8GyqCng67yQxkzNZPOQXqXDcK/wPUBf6t6LMtSoX+k31qv10YZXrqfpqkqvdlsbFH6bqAMCNPKiOxRZVDlqEyPTJJ0ujIjpWvRs22m/p8yYj3Df4Z3CQz+GfZxjO0vAQYA4egIj6b0Un0AAAAASUVORK5CYII="},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,'@charset "UTF-8";\n/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Settings\r\n * ----------------------------------------*/\n.designer-info-expand {\n  cursor: default;\n  z-index: 10;\n  opacity: 0;\n  transition: bottom .3s, opacity .3s;\n  -moz-transition: bottom .3s, opacity .3s;\n  -webkit-transition: bottom .3s, opacity .3s;\n  -o-transition: bottom .3s, opacity .3s;\n  pointer-events: none;\n  position: absolute;\n  left: -10px;\n  top: 26px;\n  width: 200px;\n  height: 98px;\n  box-shadow: 0px 2px 2px rgba(26, 26, 32, 0.06);\n  background-color: #ffffff;\n  border-radius: 4px;\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  font-family: "Microsoft YaHei", "OpenSansLight", "Arial";\n  font-size: 12px; }\n  .designer-info-expand.expand-2-0 {\n    left: -10px; }\n  .designer-info-expand.expand-2-1 {\n    left: -166px; }\n  .designer-info-expand .background-arrow {\n    position: absolute;\n    padding: 6px;\n    top: -12px;\n    width: 8px;\n    height: 6px;\n    background: url('+r(a(807))+") no-repeat;\n    background-origin: content-box; }\n  .designer-info-expand .background-arrow-1-0 {\n    left: 9px; }\n  .designer-info-expand .background-arrow-2-0 {\n    left: 8px; }\n  .designer-info-expand .background-arrow-2-1 {\n    left: 8px; }\n  .designer-info-expand .background-arrow-3-0 {\n    left: 42.33333px; }\n  .designer-info-expand .background-arrow-3-1 {\n    left: 146px; }\n  .designer-info-expand .background-arrow-3-2 {\n    left: 249.66667px; }\n  .designer-info-expand .wantdesign {\n    display: inline-block;\n    width: 110px;\n    height: 26px;\n    line-height: 26px;\n    text-align: center;\n    color: #ffffff;\n    background: #ac975e;\n    margin-left: 20px;\n    overflow: hidden;\n    cursor: pointer;\n    border-radius: 2px;\n    -moz-border-radius: 2px;\n    -webkit-border-radius: 2px; }\n    .designer-info-expand .wantdesign:hover {\n      color: #ffffff;\n      background: #c0aa6d; }\n    .designer-info-expand .wantdesign:active {\n      color: #c6c6c6;\n      background: #84642f; }\n  .designer-info-expand .report-btn {\n    margin-right: 20px;\n    line-height: 26px;\n    color: #ac975e;\n    text-decoration: underline; }\n    .designer-info-expand .report-btn:hover {\n      color: #c0aa6d; }\n    .designer-info-expand .report-btn:active {\n      color: #808080; }\n  .designer-info-expand .report-expand-inner {\n    position: absolute;\n    width: 200px; }\n    .designer-info-expand .report-expand-inner .designer-name {\n      margin: 20px 0 0 20px;\n      color: #808080;\n      cursor: pointer;\n      padding-right: 10px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n      .designer-info-expand .report-expand-inner .designer-name div.name {\n        display: inline;\n        text-decoration: underline; }\n    .designer-info-expand .report-expand-inner .designer-info-close {\n      position: absolute;\n      display: block;\n      top: 8px;\n      right: 8px;\n      transition: transform .3s !important;\n      -webkit-transition: transform .3s !important;\n      -moz-transition: transform .3s !important;\n      width: 8px;\n      height: 8px;\n      background: url("+r(a(808))+") 0 0 no-repeat;\n      border-radius: 4px;\n      -moz-border-radius: 4px;\n      -webkit-border-radius: 4px; }\n      .designer-info-expand .report-expand-inner .designer-info-close:hover {\n        background-position: 0 -8px;\n        transform: rotate(180deg); }\n      .designer-info-expand .report-expand-inner .designer-info-close:active {\n        background-position: 0 -16px; }\n    .designer-info-expand .report-expand-inner .background-expand-loading {\n      position: absolute;\n      z-index: 5;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background: #ebebf0; }\n    .designer-info-expand .report-expand-inner .input-range {\n      width: 270px; }\n    .designer-info-expand .report-expand-inner .color-selection .color-selection-item {\n      background-position: center;\n      background-size: cover;\n      background-repeat: no-repeat; }\n  .designer-info-expand.search {\n    width: 146px;\n    height: 130px; }\n    .designer-info-expand.search .report-expand-inner {\n      width: 144px; }\n      .designer-info-expand.search .report-expand-inner .designer-name {\n        margin: 20px 0 0 18px; }\n        .designer-info-expand.search .report-expand-inner .designer-name div.name {\n          display: inline;\n          text-decoration: underline; }\n      .designer-info-expand.search .report-expand-inner .designer-name-long {\n        margin: 8px 0 0 16px; }\n      .designer-info-expand.search .report-expand-inner .wantdesign {\n        margin-left: 18px; }\n\n@media (max-width: 1279px) {\n  .designer-info-expand.search {\n    transform: scale(0.75) translate(-27px, -23px); } }\n\n.template-info-icon:hover .designer-info-expand {\n  pointer-events: all;\n  opacity: 1.0; }\n\n/*-----------------------------------------\r\n * Template\r\n * ----------------------------------------*/\n#template-list {\n  margin-left: 0px; }\n  #template-list .toolbar-title {\n    position: fixed;\n    z-index: 10;\n    margin: 0 !important;\n    padding: 15px 13px 10px;\n    width: 356px;\n    background: #ebebf0;\n    box-sizing: border-box;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    overflow: hidden; }\n    #template-list .toolbar-title .toolbar-tpl-size {\n      font-size: 12px;\n      color: #787878;\n      font-family: Arial;\n      margin-top: 5px;\n      text-transform: none;\n      text-shadow: none;\n      letter-spacing: 1px;\n      line-height: 1; }\n    #template-list .toolbar-title.marginT0 {\n      margin-top: 0; }\n  #template-list .template-list {\n    margin-top: 0px; }\n    #template-list .template-list.show {\n      animation: blinkHide 0.35s 1; }\n    #template-list .template-list.hide {\n      display: none; }\n\n.black #template-list .toolbar-title {\n  background: #3c3c3e; }\n\n@keyframes fade-in-out {\n  0%, 100% {\n    opacity: 0; }\n  50% {\n    opacity: 1; } }\n\n.template-item {\n  position: relative;\n  float: left;\n  margin: 4px 8px 8px 4px;\n  cursor: pointer;\n  box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);\n  -moz-box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);\n  -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);\n  background: url("+r(a(809))+") center no-repeat;\n  background-color: rgba(0, 0, 0, 0.05); }\n  .template-item .imageHolder {\n    width: 100%;\n    height: 100%;\n    background-size: 100% 100%;\n    background-position: center;\n    -webkit-transition: all .2s !important;\n    -moz-transition: all .2s !important;\n    transition: all .2s !important; }\n  .template-item:hover .imageHolder {\n    background-size: 110% 110%; }\n  .template-item:hover, .template-item:active, .template-item.active {\n    box-shadow: 0 0 4px rgba(0, 0, 0, 0.3); }\n  .template-item .info {\n    position: absolute;\n    z-index: 10;\n    display: none;\n    bottom: 6px;\n    left: 6px; }\n  .template-item:hover .info {\n    display: block; }\n  .template-item .template-info-icon {\n    position: absolute;\n    z-index: 11;\n    display: block;\n    opacity: 0;\n    left: 0px;\n    bottom: 8px;\n    width: 18px;\n    height: 18px;\n    background: url("+r(a(810))+") no-repeat;\n    transition: opacity .3s;\n    -moz-transition: opacity .3s;\n    -webkit-transition: opacity .3s;\n    -o-transition: opacity .3s;\n    border-width: 0 10px;\n    border-style: solid;\n    border-color: rgba(255, 255, 255, 0); }\n    .template-item .template-info-icon:hover {\n      background-position: 0 -18px; }\n    .template-item .template-info-icon:active {\n      background-position: 0 -36px; }\n  .template-item:hover .template-info-icon {\n    opacity: 1.0; }\n  .template-item .template-fave-icon {\n    position: absolute;\n    z-index: 10;\n    display: block;\n    opacity: 0;\n    left: 0px;\n    bottom: 8px;\n    width: 18px;\n    height: 18px;\n    background: url("+r(a(811))+") no-repeat;\n    transition: opacity .3s;\n    -moz-transition: opacity .3s;\n    -webkit-transition: opacity .3s;\n    -o-transition: opacity .3s;\n    border-width: 0 10px;\n    border-style: solid;\n    border-color: rgba(255, 255, 255, 0); }\n    .template-item .template-fave-icon:hover {\n      background-position: 0 -18px; }\n      .template-item .template-fave-icon:hover.isfavor {\n        background-position: 0px -36px; }\n    .template-item .template-fave-icon:active {\n      background-position: 0 -36px; }\n      .template-item .template-fave-icon:active.isfavor {\n        background-position: 0px -36px; }\n    .template-item .template-fave-icon.isfavor {\n      background-position: 0px -36px; }\n      .template-item .template-fave-icon.isfavor:hover {\n        background-position: 0px -36px; }\n      .template-item .template-fave-icon.isfavor:active {\n        background-position: 0px -36px; }\n  .template-item:hover .template-fave-icon {\n    opacity: 1.0; }\n  .template-item .vip {\n    display: block;\n    position: absolute;\n    z-index: 5;\n    top: 0;\n    right: 10px;\n    width: 18px;\n    height: 21px;\n    background: url("+r(a(812))+") 0 0 no-repeat; }\n  .state_icon {\n    display: block;\n    position: absolute;\n    z-index: 6;\n    bottom: 2px;\n    left: 2px;\n    width: 20px;\n    height: 20px; }\n    .state_icon.state_0 {\n      background: url("+r(a(813))+") 0 0 no-repeat; }\n    .state_icon.state_1 {\n      background: url("+r(a(814))+") 0 0 no-repeat; }\n    .state_icon.state_2 {\n      background: url("+r(a(815))+") 0 0 no-repeat; }\n    .state_icon.state_3 {\n      background: url("+r(a(816))+") 0 0 no-repeat; }\n    .state_icon.state_4 {\n      background: url("+r(a(817))+") 0 0 no-repeat; }\n    .state_icon.state_5 {\n      background: url("+r(a(818))+") 0 0 no-repeat; }\n  .template-item .page-mark {\n    position: absolute;\n    right: 7px;\n    bottom: 3px;\n    z-index: 6;\n    line-height: 1;\n    opacity: 0;\n    transition: opacity .3s ease-out; }\n  .template-item span {\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    border: 4px solid #fff;\n    opacity: 0;\n    transition: all .3s !important;\n    -webkit-transition: all .3s !important;\n    -moz-transition: all .3s !important; }\n  .template-item:hover span {\n    display: block;\n    opacity: 1; }\n  .template-item.active span {\n    display: none;\n    border: 4px solid #ac975e;\n    background: rgba(172, 151, 94, 0);\n    box-shadow: 0 0 4px rgba(0, 0, 0, 0.3);\n    opacity: 1; }\n  .template-item:hover .page-mark, .template-item:active .page-mark, .template-item.active .page-mark {\n    opacity: 1; }\n  .template-item .corner, .template-item .corner-p, .template-item .corner-n {\n    position: absolute;\n    z-index: 3;\n    right: 0px;\n    bottom: 0px;\n    width: 18px;\n    height: 20px;\n    font-family: 'Microsoft YaHei', 'Helvetica', Arial;\n    font-size: 12px;\n    line-height: 22px;\n    padding-left: 2px;\n    text-align: center;\n    color: #ffffff;\n    background: #ac975e;\n    background: url("+r(a(819))+") top no-repeat;\n    background-position: 0 -20px;\n    overflow: hidden; }\n  .template-item .corner-p, .template-item .corner-n {\n    width: 70px;\n    padding-left: 0;\n    background: url("+r(a(820))+") top no-repeat;\n    background-position: 0 0; }\n  .template-item:hover .corner, .template-item:hover .corner-p, .template-item:hover .corner-n, .template-item:active .corner, .template-item:active .corner-p, .template-item:active .corner-n {\n    display: none; }\n  .template-item .expand-item-cover {\n    position: absolute;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background-position: center;\n    background-color: transparent;\n    border: 4px solid rgba(255, 255, 255, 0);\n    transition: all .3s; }\n  .template-item:hover .expand-item-cover {\n    background-color: rgba(0, 0, 0, 0.7);\n    border-color: white; }\n  .template-item .apply-current {\n    position: absolute;\n    cursor: pointer;\n    z-index: 4;\n    top: 50%;\n    left: 50%;\n    transform: translateX(-50%) translateY(-50%);\n    white-space: nowrap;\n    padding: 0 10px;\n    height: 24px;\n    font-family: 'Microsoft YaHei', 'Helvetica', Arial;\n    font-size: 14px;\n    line-height: 24px;\n    text-align: center;\n    color: #fff;\n    border: 2px solid white;\n    display: none; }\n  .template-item:hover .apply-current {\n    display: block; }\n  .template-item .apply-new {\n    display: none; }\n  .template-item.multi-page {\n    box-shadow: none;\n    -moz-box-shadow: none;\n    -webkit-box-shadow: none; }\n    .template-item.multi-page:after {\n      content: '';\n      position: absolute;\n      z-index: 5;\n      width: 80px;\n      height: 74px;\n      bottom: 0;\n      right: -1px;\n      background: url("+r(a(821))+") bottom right no-repeat;\n      transform-origin: 100% 100%;\n      transform: scale(0.8);\n      transition: transform .3s ease; }\n    .template-item.multi-page span {\n      display: none; }\n    .template-item.multi-page:hover:after, .template-item.multi-page.active:after, .template-item.multi-page:active:after {\n      transform: scale(1); }\n    .template-item.multi-page:hover span, .template-item.multi-page.active span, .template-item.multi-page:active span {\n      display: block;\n      box-shadow: none;\n      -moz-box-shadow: none;\n      -webkit-box-shadow: none; }\n    .template-item.multi-page.active span {\n      display: none; }\n  .icon-12 {\n    display: inline-block;\n    width: 12px;\n    height: 12px;\n    background: url("+r(a(822))+") 0 0 no-repeat; }\n  .add-icon-22 {\n    display: block;\n    width: 22px;\n    height: 22px;\n    background: url("+r(a(823))+") no-repeat; }\n    .add-icon-22.color-texture {\n      background-position: -44px 0px;\n      margin-right: -8px; }\n    .add-icon-22.fillin {\n      background-position: -22px 0px;\n      margin-right: -8px; }\n    .add-icon-22.icon-btn-hdr {\n      background-position: -66px 0px;\n      margin-right: -8px; }\n    .add-icon-22.upload-resource {\n      background-position: -88px 0px;\n      margin-right: -8px; }\n\n.btn-grey .btn-spinner {\n  background: rgba(0, 0, 0, 0.1); }\n\n.no-template {\n  width: 300px;\n  margin-left: 4px; }\n\n.no-template-image {\n  display: block;\n  margin: 50px auto 18px auto;\n  width: 75px;\n  height: 60px;\n  background: url("+r(a(824))+") top no-repeat; }\n\n.no-collection-image {\n  display: block;\n  margin: 50px auto 18px auto;\n  width: 65px;\n  height: 56px;\n  background: url("+r(a(825))+") top no-repeat; }\n\n.no-recently-image {\n  display: block;\n  margin: 50px auto 18px auto;\n  width: 65px;\n  height: 56px;\n  background: url("+r(a(826))+") top no-repeat; }\n\n.no-template-label {\n  width: 260px;\n  margin: auto;\n  text-align: center;\n  font-family: Arial;\n  font-size: 14px;\n  line-height: 30px;\n  color: rgba(120, 120, 120, 0.5); }\n\n@keyframes blinkHide {\n  0% {\n    opacity: 0; }\n  50% {\n    opacity: 0; }\n  100% {\n    opacity: 1; } }\n\n@keyframes expandIn {\n  from {\n    transform: translateX(320px); }\n  to {\n    transform: translateX(0px); } }\n\n.template-expand {\n  clear: both;\n  padding-top: 10px;\n  width: 100%;\n  box-sizing: border-box;\n  animation: expandIn 0.15s 1; }\n  .template-expand .template-line {\n    position: relative;\n    margin: 6px 16px 0 4px;\n    height: 1px;\n    background: #b4b4b4; }\n    .template-expand .template-line:before {\n      content: '';\n      position: absolute;\n      display: block;\n      width: 0;\n      height: 0;\n      top: 0;\n      left: 60px;\n      margin: -15px 0 0;\n      border: 8px solid transparent;\n      border-bottom-color: #b4b4b4; }\n    .template-expand .template-line:after {\n      content: '';\n      position: absolute;\n      display: block;\n      width: 0;\n      height: 0;\n      top: 0;\n      left: 61px;\n      margin: -12px 0 0;\n      border: 7px solid transparent;\n      border-bottom-color: #ebebf0; }\n    .template-expand .template-line.template-line-1:before {\n      left: 220px; }\n    .template-expand .template-line.template-line-1:after {\n      left: 221px; }\n    .template-expand .template-line.template-line-footer {\n      margin-bottom: 22px; }\n      .template-expand .template-line.template-line-footer:before, .template-expand .template-line.template-line-footer:after {\n        display: none; }\n  .template-expand .template-expand-inner {\n    position: relative;\n    padding: 10px 0 12px;\n    width: 100%;\n    box-sizing: border-box; }\n    .template-expand .template-expand-inner .close {\n      position: absolute;\n      top: 8px;\n      right: 20px;\n      transition: transform .3s !important;\n      -webkit-transition: transform .3s !important;\n      -moz-transition: transform .3s !important; }\n      .template-expand .template-expand-inner .close:hover {\n        transform: rotate(180deg); }\n    .template-expand .template-expand-inner .template-expand-info {\n      padding: 12px 15px 14px 15px;\n      font-family: Arial;\n      color: #8c8c8c;\n      line-height: 20px; }\n      .template-expand .template-expand-inner .template-expand-info .template-title {\n        color: #505050; }\n  .template-expand .apply-all {\n    display: block;\n    position: absolute;\n    z-index: 4;\n    left: 3px;\n    top: 16px;\n    right: 18px;\n    height: 34px;\n    border-radius: 4px;\n    font-family: \"Microsoft YaHei\", \"noto_sansregular\", sans-serif;\n    text-align: center;\n    font-size: 14px;\n    line-height: 34px;\n    color: #ffffff;\n    background: #ac9753;\n    overflow: hidden;\n    cursor: pointer; }\n    .template-expand .apply-all:active {\n      color: #ffffff;\n      background-color: #bda560; }\n\n#backButton {\n  color: #ac975e;\n  cursor: pointer;\n  height: 14px;\n  font-size: 14px; }\n\n.icon-back {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  background: url("+r(a(827))+") 0 -24px no-repeat; }\n\n#backButton:hover {\n  color: #c0aa6d; }\n\n#backButton:hover .icon-back {\n  background-position: 0 -12px; }\n\n#backButton:active {\n  color: #808080; }\n\n#backButton:active .icon-back {\n  background-position: 0 0; }\n\n/*-----------------------------------\r\n * templates 的各种尺寸\r\n *-----------------------------------*/\n.template-item-facebook-cover {\n  width: 300px;\n  height: 110px; }\n\n.template-item-bookCover {\n  width: 144px;\n  height: 230px; }\n\n.template-item-facebook-event-cover {\n  width: 300px;\n  height: 113px; }\n\n.template-item-twitter-post {\n  width: 300px;\n  height: 150px; }\n\n.template-item-email-header {\n  width: 300px;\n  height: 100px; }\n\n.template-item-twitter-cover {\n  width: 300px;\n  height: 100px; }\n\n.template-item-leader-board {\n  width: 300px;\n  height: 36px; }\n\n.template-item-esty-cover-photo {\n  width: 300px;\n  height: 75px; }\n\n.template-item-business-card-dimension {\n  width: 144px;\n  height: 82px; }\n\n.template-expand-item-business-card-dimension {\n  width: 300px;\n  height: 171px; }\n\n.template-item-linkedin-background {\n  width: 300px;\n  height: 75px; }\n\n.template-item-albumCover {\n  width: 144px;\n  height: 144px; }\n\n.template-item-postCard {\n  width: 144px;\n  height: 102px; }\n\n.template-expand-item-postCard {\n  width: 300px;\n  height: 213px; }\n\n.template-item-letterHead {\n  width: 144px;\n  height: 186px; }\n\n.template-item-menuDimension {\n  width: 144px;\n  height: 186px; }\n\n.template-item-program {\n  width: 144px;\n  height: 186px; }\n\n.template-expand-item-program {\n  width: 300px;\n  height: 388px; }\n\n.template-item-tbshouhouka {\n  width: 144px;\n  height: 201.6px; }\n\n.template-item-wxqrcode {\n  width: 144px;\n  height: 144px; }\n\n.template-item-giftCertificate {\n  width: 144px;\n  height: 64px; }\n\n.template-expand-item-giftCertificate {\n  width: 300px;\n  height: 133px; }\n\n.template-item-flyer {\n  width: 144px;\n  height: 204px; }\n\n.template-item-ticket {\n  width: 300px;\n  height: 116px; }\n\n.template-item-mobile-leaderboard {\n  width: 300px;\n  height: 46px; }\n\n.template-item-taobao-shop-cover {\n  width: 300px;\n  height: 38px; }\n\n.template-item-taobao-shop-banner {\n  width: 144px;\n  height: 72px; }\n\n.template-item-weixin-gzh-bottom-qrcode {\n  width: 300px;\n  height: 150px; }\n\n.template-item-weixin-gzh-bottom-qrcode-xcx {\n  width: 145px;\n  height: 145px; }\n\n.template-item-weibo-cover {\n  width: 300px;\n  height: 92px; }\n\n.template-item-wei-gzh-cover {\n  width: 144px;\n  height: 80px; }\n\n.template-item-wei-gzh-cover-new {\n  width: 144px;\n  height: 61px; }\n\n.template-item-weibo-focus-image {\n  width: 300px;\n  height: 139px; }\n\n.template-item-wei-gzh-cover-small {\n  width: 144px;\n  height: 144px; }\n\n.template-item-blog-title {\n  width: 144px;\n  height: 96px; }\n\n.template-item-facebook-ad-mobile {\n  width: 144px;\n  height: 75px; }\n\n.template-item-poster, .template-item-resume-print {\n  width: 144px;\n  height: 203px; }\n\n.template-item-planner {\n  width: 144px;\n  height: 203px; }\n\n.template-item-certificate {\n  width: 144px;\n  height: 111px; }\n\n.template-item-label {\n  width: 144px;\n  height: 111px; }\n\n.template-item-logo-dimension {\n  width: 144px;\n  height: 144px; }\n\n.template-item-cnLogo {\n  width: 144px;\n  height: 144px; }\n\n.template-item-social-peitu {\n  width: 144px;\n  height: 144px; }\n\n.template-item-wallpaper {\n  width: 144px;\n  height: 81px; }\n\n.template-item-cnWallpaper {\n  width: 144px;\n  height: 81px; }\n\n.template-item-invitation {\n  width: 144px;\n  height: 203px; }\n\n.template-item-card {\n  width: 144px;\n  height: 108px; }\n\n.template-item-print-card {\n  width: 144px;\n  height: 103px; }\n\n.template-item-esty-shop-icon {\n  width: 144px;\n  height: 144px; }\n\n.template-item-taobao-shop-fang-banner {\n  width: 144px;\n  height: 144px; }\n\n.template-item-wide-skycraper {\n  width: 94px;\n  height: 353px;\n  margin-right: 5px; }\n\n.template-item-business-card {\n  width: 144px;\n  height: 87px; }\n\n.template-item-sanzheye {\n  width: 144px;\n  height: 106px; }\n\n.template-item-erzheye {\n  width: 144px;\n  height: 106px; }\n\n.template-expand-item-sanzheye, .template-expand-item-erzheye {\n  width: 300px;\n  height: 222px; }\n\n.template-expand-item-business-card {\n  width: 300px;\n  height: 181px; }\n\n.template-item-business-card-v1 {\n  width: 144px;\n  height: 233.56px; }\n\n.template-item-business-card-h1 {\n  width: 144px;\n  height: 72px; }\n\n.template-item-dm-print {\n  width: 144px;\n  height: 197px; }\n\n.template-item-dma5-print {\n  width: 144px;\n  height: 216px; }\n\n.template-item:hover .apply-current-dm-print {\n  width: 110px; }\n\n.template-item-sticker-print {\n  width: 144px;\n  height: 85px; }\n\n.template-expand-item-sticker-print {\n  width: 300px;\n  height: 177px; }\n\n.template-item-sticker-v-print {\n  width: 144px;\n  height: 244px; }\n\n.template-item-coupon-print {\n  width: 300px;\n  height: 98px; }\n\n.template-expand-item-coupon-print {\n  width: 300px;\n  height: 98px; }\n\n.template-item-poster-print {\n  width: 144px;\n  height: 196px; }\n\n.template-item-wei-friendship-cover {\n  width: 144px;\n  height: 133px; }\n\n.template-item-wei-friendship-invitation {\n  width: 146px;\n  height: 256px; }\n\n.template-item-wei-friendship-poster {\n  width: 146px;\n  height: 256px; }\n\n.template-item-mobile-wallpaper {\n  width: 146px;\n  height: 256px; }\n\n.template-item-mobile-capture {\n  width: 146px;\n  height: 256px; }\n\n.template-item-wei-gongzhonghao-small {\n  width: 145px;\n  height: 145px; }\n\n.template-item-facebook-post {\n  width: 144px;\n  height: 120px; }\n\n.template-item-instagram-post {\n  width: 144px;\n  height: 144px; }\n\n.template-item-pinterest {\n  width: 144px;\n  height: 215px; }\n\n.template-item-youtube-thumbnail {\n  width: 144px;\n  height: 81px; }\n\n.template-item-youtube-channel-art {\n  width: 146px;\n  height: 82px; }\n\n.template-item-google-cover {\n  width: 146px;\n  height: 82px; }\n\n.template-item-medium-rectangle {\n  width: 144px;\n  height: 120px; }\n\n.template-item-large-rectangle {\n  width: 144px;\n  height: 120px; }\n\n.template-item-search {\n  width: 144px; }\n\n.template-item-yilabao-print {\n  width: 144px;\n  height: 360px; }\n\n.template-item-x-diaplay-rack {\n  width: 144px;\n  height: 324px; }\n\n.template-item-menu-cn {\n  width: 144px;\n  height: 98px; }\n\n.template-item-video-cover {\n  width: 144px;\n  height: 90px; }\n\n.template-item-course-cover {\n  width: 144px;\n  height: 90px; }\n\n.black .template-item.multi-page:after {\n  background-image: url("+r(a(828))+"); }\n\n.black .template-expand .template-line {\n  background: #b4b4b4; }\n  .black .template-expand .template-line:before {\n    border-bottom-color: #b4b4b4; }\n  .black .template-expand .template-line:after {\n    border-bottom-color: #3c3c3e; }\n\n.black .template-expand .template-expand-inner .template-expand-info {\n  color: #8c8c8c; }\n  .black .template-expand .template-expand-inner .template-expand-info .template-title {\n    color: #f5f5f5; }\n\n@media (max-width: 1279px) {\n  body.no-ads #template-list .toolbar-title {\n    width: 283px; }\n  body.no-ads .template-expand .template-line:before {\n    left: 43px; }\n  body.no-ads .template-expand .template-line:after {\n    left: 44px; }\n  body.no-ads .template-expand .template-line.template-line-1:before {\n    left: 168px; }\n  body.no-ads .template-expand .template-line.template-line-1:after {\n    left: 169px; }\n  body.no-ads .no-template {\n    width: 226px; }\n  body.no-ads .no-template-label {\n    width: 186px; }\n  body.no-ads .btn-title-add {\n    padding: 10px 15px 10px 15px; } }\n\n@media (max-width: 1439px) {\n  body.ads #template-list .toolbar-title {\n    width: 283px; }\n  body.ads .template-item-facebook-cover {\n    width: 226px;\n    height: 83px; }\n  body.ads .template-item-bookCover {\n    width: 107px;\n    height: 171px; }\n  body.ads .template-item-facebook-event-cover {\n    width: 226px;\n    height: 85px; }\n  body.ads .template-item-twitter-post {\n    width: 226px;\n    height: 113px; }\n  body.ads .template-item-email-header {\n    width: 226px;\n    height: 75px; }\n  body.ads .template-item-twitter-cover {\n    width: 226px;\n    height: 75px; }\n  body.ads .template-item-leader-board {\n    width: 226px;\n    height: 27px; }\n  body.ads .template-item-esty-cover-photo {\n    width: 226px;\n    height: 57px; }\n  body.ads .template-item-business-card-dimension {\n    width: 107px;\n    height: 61px; }\n  body.ads .template-expand-item-business-card-dimension {\n    width: 225px;\n    height: 128px; }\n  body.ads .template-item-linkedin-background {\n    width: 226px;\n    height: 57px; }\n  body.ads .template-item-albumCover {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-postCard {\n    width: 107px;\n    height: 76px; }\n  body.ads .template-expand-item-postCard {\n    width: 225px;\n    height: 159px; }\n  body.ads .template-item-letterHead {\n    width: 107px;\n    height: 138.5px; }\n  body.ads .template-item-menuDimension {\n    width: 107px;\n    height: 138.5px; }\n  body.ads .template-item-program {\n    width: 107px;\n    height: 138.5px; }\n  body.ads .template-expand-item-program {\n    width: 226px;\n    height: 292.47px; }\n  body.ads .template-item-tbshouhouka {\n    width: 107px;\n    height: 150px; }\n  body.ads .template-item-wxqrcode {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-giftCertificate {\n    width: 107px;\n    height: 47.6px; }\n  body.ads .template-expand-item-giftCertificate {\n    width: 226px;\n    height: 100.19px; }\n  body.ads .template-item-flyer {\n    width: 107px;\n    height: 151px; }\n  body.ads .template-item-ticket {\n    width: 226px;\n    height: 87px; }\n  body.ads .template-item-mobile-leaderboard {\n    width: 226px;\n    height: 35px; }\n  body.ads .template-item-taobao-shop-cover {\n    width: 226px;\n    height: 29px; }\n  body.ads .template-item-taobao-shop-banner {\n    width: 107px;\n    height: 53.5px; }\n  body.ads .template-item-business-card {\n    width: 107px;\n    height: 64px; }\n  body.ads .template-item-sanzheye {\n    width: 107px;\n    height: 78.8px; }\n  body.ads .template-item-erzheye {\n    width: 107px;\n    height: 78.8px; }\n  body.ads .template-expand-item-sanzheye, body.ads .template-expand-item-erzheye {\n    width: 226px;\n    height: 167px; }\n  body.ads .template-expand-item-business-card {\n    width: 225px;\n    height: 135px; }\n  body.ads .template-item-business-card-v1 {\n    width: 107px;\n    height: 173.548px; }\n  body.ads .template-item-business-card-h1 {\n    width: 107px;\n    height: 54px; }\n  body.ads .template-item-dm-print {\n    width: 107px;\n    height: 147px; }\n  body.ads .template-item-dma5-print {\n    width: 107px;\n    height: 160px; }\n  body.ads .template-item-sticker-print {\n    width: 107px;\n    height: 63px; }\n  body.ads .template-expand-item-sticker-print {\n    width: 225px;\n    height: 133px; }\n  body.ads .template-item-sticker-v-print {\n    width: 107px;\n    height: 182px; }\n  body.ads .template-item-coupon-print {\n    width: 226px;\n    height: 73px; }\n  body.ads .template-expand-item-coupon-print {\n    width: 225px;\n    height: 74px; }\n  body.ads .template-item:hover .apply-current-dm-print {\n    width: 88px; }\n  body.ads .template-item-poster-print {\n    width: 107px;\n    height: 145px; }\n  body.ads .template-item-weixin-gzh-bottom-qrcode {\n    width: 226px;\n    height: 113px; }\n  body.ads .template-item-weixin-gzh-bottom-qrcode-xcx {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-weibo-cover {\n    width: 226px;\n    height: 69px; }\n  body.ads .template-item-wei-gzh-cover {\n    width: 107px;\n    height: 59px; }\n  body.ads .template-item-wei-gzh-cover-new {\n    width: 107px;\n    height: 46px; }\n  body.ads .template-item-wei-gzh-cover-small {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-wei-friendship-cover {\n    width: 107px;\n    height: 99px; }\n  body.ads .template-item-wei-friendship-invitation {\n    width: 107px;\n    height: 190px; }\n  body.ads .template-item-wei-friendship-poster {\n    width: 107px;\n    height: 190px; }\n  body.ads .template-item-mobile-wallpaper {\n    width: 107px;\n    height: 190px; }\n  body.ads .template-item-mobile-capture {\n    width: 107px;\n    height: 190px; }\n  body.ads .template-item-wei-gongzhonghao-small {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-facebook-post {\n    width: 107px;\n    height: 89px; }\n  body.ads .template-item-instagram-post {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-pinterest {\n    width: 107px;\n    height: 160px; }\n  body.ads .template-item-youtube-thumbnail {\n    width: 226px;\n    height: 127px; }\n  body.ads .template-item-youtube-channel-art {\n    width: 109px;\n    height: 61px; }\n  body.ads .template-item-youtube-channel-art {\n    width: 226px;\n    height: 127px; }\n  body.ads .template-item-weibo-focus-image {\n    width: 226px;\n    height: 105px; }\n  body.ads .template-item-google-cover {\n    width: 109px;\n    height: 61px; }\n  body.ads .template-item-google-cover {\n    width: 226px;\n    height: 127px; }\n  body.ads .template-item-facebook-ad-mobile {\n    width: 226px;\n    height: 119px; }\n  body.ads .template-item-blog-title {\n    width: 107px;\n    height: 71px; }\n  body.ads .template-item-medium-rectangle {\n    width: 107px;\n    height: 89px; }\n  body.ads .template-item-large-rectangle {\n    width: 107px;\n    height: 89px; }\n  body.ads .template-item-poster, body.ads .template-item-resume-print {\n    width: 107px;\n    height: 151px; }\n  body.ads .template-item-planner {\n    width: 107px;\n    height: 151px; }\n  body.ads .template-item-certificate {\n    width: 107px;\n    height: 82.5px; }\n  body.ads .template-item-label {\n    width: 107px;\n    height: 82px; }\n  body.ads .template-item-logo-dimension {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-cnLogo-dimension {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-social-peitu {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-wallpaper {\n    width: 107px;\n    height: 60px; }\n  body.ads .template-item-cnWallpaper {\n    width: 107px;\n    height: 60px; }\n  body.ads .template-item-invitation {\n    width: 107px;\n    height: 151px; }\n  body.ads .template-item-card {\n    width: 107px;\n    height: 81px; }\n  body.ads .template-item-print-card {\n    width: 107px;\n    height: 76px; }\n  body.ads .template-item-esty-shop-icon {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-taobao-shop-fang-banner {\n    width: 107px;\n    height: 107px; }\n  body.ads .template-item-wide-skycraper {\n    width: 70px;\n    height: 263px;\n    margin-right: 7px; }\n  body.ads .template-item-search {\n    width: 107px; }\n  body.ads .template-item-yilabao-print {\n    width: 107px;\n    height: 267px; }\n  body.ads .template-item-x-diaplay-rack {\n    width: 107px;\n    height: 241px; }\n  body.ads .template-item-menu-cn {\n    width: 107px;\n    height: 72.6px; }\n  body.ads .template-item-video-cover {\n    width: 107px;\n    height: 67px; }\n  body.ads .template-item-course-cover {\n    width: 107px;\n    height: 67px; }\n  body.ads .template-expand .template-line:before {\n    left: 43px; }\n  body.ads .template-expand .template-line:after {\n    left: 44px; }\n  body.ads .template-expand .template-line.template-line-1:before {\n    left: 168px; }\n  body.ads .template-expand .template-line.template-line-1:after {\n    left: 169px; }\n  body.ads .no-template {\n    width: 226px; }\n  body.ads .no-template-label {\n    width: 226px; }\n  body.ads .btn-title-add {\n    padding: 10px 15px 10px 15px; } }\n\n@media (max-width: 1279px) {\n  body.no-ads .template-item-facebook-cover {\n    width: 226px;\n    height: 83px; }\n  body.no-ads .template-item-bookCover {\n    width: 107px;\n    height: 171px; }\n  body.no-ads .template-item-facebook-event-cover {\n    width: 226px;\n    height: 85px; }\n  body.no-ads .template-item-twitter-post {\n    width: 226px;\n    height: 113px; }\n  body.no-ads .template-item-email-header {\n    width: 226px;\n    height: 75px; }\n  body.no-ads .template-item-twitter-cover {\n    width: 226px;\n    height: 75px; }\n  body.no-ads .template-item-leader-board {\n    width: 226px;\n    height: 27px; }\n  body.no-ads .template-item-esty-cover-photo {\n    width: 226px;\n    height: 57px; }\n  body.no-ads .template-item-business-card-dimension {\n    width: 107px;\n    height: 61px; }\n  body.no-ads .template-expand-item-business-card-dimension {\n    width: 225px;\n    height: 128px; }\n  body.no-ads .template-item-linkedin-background {\n    width: 226px;\n    height: 57px; }\n  body.no-ads .template-item-albumCover {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-postCard {\n    width: 107px;\n    height: 76px; }\n  body.no-ads .template-expand-item-postCard {\n    width: 225px;\n    height: 159px; }\n  body.no-ads .template-item-letterHead {\n    width: 107px;\n    height: 138.5px; }\n  body.no-ads .template-item-menuDimension {\n    width: 107px;\n    height: 138.5px; }\n  body.no-ads .template-item-program {\n    width: 107px;\n    height: 138.5px; }\n  body.no-ads .template-expand-item-program {\n    width: 226px;\n    height: 292.47px; }\n  body.no-ads .template-item-tbshouhouka {\n    width: 107px;\n    height: 150px; }\n  body.no-ads .template-expand-item-tbshouhouka {\n    width: 226px;\n    height: 316.4px; }\n  body.no-ads .template-item-wxqrcode {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-giftCertificate {\n    width: 107px;\n    height: 47.6px; }\n  body.no-ads .template-expand-item-giftCertificate {\n    width: 226px;\n    height: 100.19px; }\n  body.no-ads .template-item-flyer {\n    width: 107px;\n    height: 151px; }\n  body.no-ads .template-item-ticket {\n    width: 226px;\n    height: 87px; }\n  body.no-ads .template-item-mobile-leaderboard {\n    width: 226px;\n    height: 35px; }\n  body.no-ads .template-item-taobao-shop-cover {\n    width: 226px;\n    height: 29px; }\n  body.no-ads .template-item-taobao-shop-banner {\n    width: 107px;\n    height: 53.5px; }\n  body.no-ads .template-item-business-card {\n    width: 107px;\n    height: 64px; }\n  body.no-ads .template-item-sanzheye {\n    width: 107px;\n    height: 78.8px; }\n  body.no-ads .template-item-erzheye {\n    width: 107px;\n    height: 78.8px; }\n  body.no-ads .template-expand-item-sanzheye, body.no-ads .template-expand-item-erzheye {\n    width: 226px;\n    height: 167px; }\n  body.no-ads .template-expand-item-business-card {\n    width: 225px;\n    height: 135px; }\n  body.no-ads .template-item-business-card-v1 {\n    width: 107px;\n    height: 173.548px; }\n  body.no-ads .template-item-business-card-h1 {\n    width: 107px;\n    height: 54px; }\n  body.no-ads .template-item-dm-print {\n    width: 107px;\n    height: 147px; }\n  body.no-ads .template-item-dma5-print {\n    width: 107px;\n    height: 160px; }\n  body.no-ads .template-item-sticker-print {\n    width: 107px;\n    height: 63px; }\n  body.no-ads .template-expand-item-sticker-print {\n    width: 225px;\n    height: 133px; }\n  body.no-ads .template-item-sticker-v-print {\n    width: 107px;\n    height: 182px; }\n  body.no-ads .template-item-coupon-print {\n    width: 226px;\n    height: 73px; }\n  body.no-ads .template-expand-item-coupon-print {\n    width: 225px;\n    height: 74px; }\n  body.no-ads .template-item:hover .apply-current-dm-print {\n    width: 88px; }\n  body.no-ads .template-item-poster-print {\n    width: 107px;\n    height: 145px; }\n  body.no-ads .template-item-weixin-gzh-bottom-qrcode {\n    width: 226px;\n    height: 113px; }\n  body.no-ads .template-item-weixin-gzh-bottom-qrcode-xcx {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-weibo-cover {\n    width: 226px;\n    height: 69px; }\n  body.no-ads .template-item-wei-gzh-cover {\n    width: 107px;\n    height: 59px; }\n  body.no-ads .template-item-wei-gzh-cover-new {\n    width: 107px;\n    height: 46px; }\n  body.no-ads .template-item-wei-gzh-cover-small {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-wei-friendship-cover {\n    width: 107px;\n    height: 99px; }\n  body.no-ads .template-item-wei-friendship-invitation {\n    width: 107px;\n    height: 190px; }\n  body.no-ads .template-item-wei-friendship-poster {\n    width: 107px;\n    height: 190px; }\n  body.no-ads .template-item-mobile-wallpaper {\n    width: 107px;\n    height: 190px; }\n  body.no-ads .template-item-mobile-capture {\n    width: 107px;\n    height: 190px; }\n  body.no-ads .template-item-wei-gongzhonghao-small {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-facebook-post {\n    width: 107px;\n    height: 89px; }\n  body.no-ads .template-item-instagram-post {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-pinterest {\n    width: 107px;\n    height: 160px; }\n  body.no-ads .template-item-youtube-thumbnail {\n    width: 226px;\n    height: 127px; }\n  body.no-ads .template-item-youtube-channel-art {\n    width: 109px;\n    height: 61px; }\n  body.no-ads .template-item-youtube-channel-art {\n    width: 226px;\n    height: 127px; }\n  body.no-ads .template-item-weibo-focus-image {\n    width: 226px;\n    height: 105px; }\n  body.no-ads .template-item-google-cover {\n    width: 109px;\n    height: 61px; }\n  body.no-ads .template-item-google-cover {\n    width: 226px;\n    height: 127px; }\n  body.no-ads .template-item-facebook-ad-mobile {\n    width: 226px;\n    height: 119px; }\n  body.no-ads .template-item-blog-title {\n    width: 107px;\n    height: 71px; }\n  body.no-ads .template-item-medium-rectangle {\n    width: 107px;\n    height: 89px; }\n  body.no-ads .template-item-large-rectangle {\n    width: 107px;\n    height: 89px; }\n  body.no-ads .template-item-poster, body.no-ads .template-item-resume-print {\n    width: 107px;\n    height: 151px; }\n  body.no-ads .template-item-planner {\n    width: 107px;\n    height: 151px; }\n  body.no-ads .template-item-certificate {\n    width: 107px;\n    height: 82.5px; }\n  body.no-ads .template-item-label {\n    width: 107px;\n    height: 82px; }\n  body.no-ads .template-item-logo-dimension {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-cnLogo {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-social-peitu {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-wallpaper {\n    width: 107px;\n    height: 60px; }\n  body.no-ads .template-item-cnWallpaper {\n    width: 107px;\n    height: 60px; }\n  body.no-ads .template-item-invitation {\n    width: 107px;\n    height: 151px; }\n  body.no-ads .template-item-card {\n    width: 107px;\n    height: 81px; }\n  body.no-ads .template-item-print-card {\n    width: 107px;\n    height: 76px; }\n  body.no-ads .template-item-esty-shop-icon {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-taobao-shop-fang-banner {\n    width: 107px;\n    height: 107px; }\n  body.no-ads .template-item-wide-skycraper {\n    width: 70px;\n    height: 263px;\n    margin-right: 7px; }\n  body.no-ads .template-item-yilabao-print {\n    width: 107px;\n    height: 267px; }\n  body.no-ads .template-item-search {\n    width: 107px; }\n  body.no-ads .template-item-x-diaplay-rack {\n    width: 107px;\n    height: 241px; }\n  body.no-ads .template-item-menu-cn {\n    width: 107px;\n    height: 72.6px; }\n  body.no-ads .template-item-video-cover {\n    width: 107px;\n    height: 67px; }\n  body.no-ads .template-item-course-cover {\n    width: 107px;\n    height: 67px; } }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAD9JREFUeNpi/P//PwMSCIHSa+AiIAVQLALEL6FYFCaOrGD1fwRYja4g5D8mCIEpEIUaiw5AYmLoRqOD1QABBgBicpLD7xkeNAAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAYCAYAAADH2bwQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAPZJREFUeNqMkTEOwjAMRZ3CDbpwBiQ2pJ4DcQBWlp6h7RkqIVYOgMQRGNsKiZGRBXEJhuAEf8dCHWopivvt5Duvruu6ijiKomjIRN/3Uc94OV41BFOsQ81574MQPiCS7A3fWscGOYUmQhEWCD+WZ3+ejSydaW6LuJY1kiZ9hRblybjNzV/3gxfRYiDoyuF83CkHyRMHFkY5bPenxME0EYrTORhP5YCZZqvFs7Key/Xm+rhd4uC8Jw7wDCH5j8P7s/Y0EtCVQ9u2ykHyxIGFUQ5lWSYOpolQnM7BeCoHzDTL87yynvxXr8MwxMF5TxzgGULyyOErwACLH584LTtHLwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAbCAYAAAAULC3gAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6REY5RTZCOThCQUFEMTFFNjg3Njc5MkNCMjZCNzJCMDAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REY5RTZCOTlCQUFEMTFFNjg3Njc5MkNCMjZCNzJCMDAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpERjlFNkI5NkJBQUQxMUU2ODc2NzkyQ0IyNkI3MkIwMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpERjlFNkI5N0JBQUQxMUU2ODc2NzkyQ0IyNkI3MkIwMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PugULZ4AAALJSURBVHjatJd9b9pADMbzRnKho12L2q37/p9smrb2j64dtLmQNLA79Hh6al3CAdpJFiQY53e2z3bSNF0kZ6ylk7mTwUnrxDrZONnGGthuVx+uizNgPjv5hO+Zk5mTBWAEzn++H2P0HCCBEa/UTirAzSEJfhO4zf8C8t7I8f03vPAH9gzgDOAqSAI9gWtDoU2PzCEDQ/5PN8idHyO6AiNwM/X7jkPrcqmP9VAJoxfQ/44H+NVM5SseZpUdA0lxXe/ps0sP9zQGVJFySfflSEh+tOxtJ1cAWQVsdhAOrUiOz9siADEPuNfCG6/kHQ1UA0j0+wnvvcPWKzZyjTQoCzx8SYmnISxyRdYFwWyVB3rcG46oQzsXrg6XvQe6o1wag0iUJxLKDd71zxNPrZyspiAYf3zXEQmejwCxzkAbuoL3gvrOOznlqc2oWMW4uSZv9IHadOvkHjv2tr+goi8jbPpQb/yf3pTbYoCsOl3+od/o9FW4JwcgV4chZNPXon24LBW9bKIxZpT4DUB8+7gM1LNKlQvpfQ+6MOtNZnB/p+rLIde2uL4ZKa4pbB+CrKD7AYgrbgxQQwZ+OXkG4C5yQgjZ7Fy4Bm4dDZRrEO9G+picopIqb4fKnKvWkI9sakYHQm/yH1CP0BVQagKuzQnoHiAtNchBVV9D7YfD6sP8iHszfUhY8Q01Yx4Amo/UmxJJPQTguLFybxTvCczgwtWFgBoCCj18auVoKdxWWhrKRF4AtyNdOzagddhZTnMPN1Fz5NxkKB1aNXMnMUDipQW67xqeWWFkyPBbesJ0yfO2VSWhnZoYDco9L7/DJ9pZiYJYnzmT7+dtlz8PUx6SkSJTO/yKcG7gxWdIReGpTgCyMUO+pfjqxDUA7lRuCLhRbx+HVhMD9KIK24ZmpKkpsIesAWMIsBiZGvvYtw4xyH3unFUR3Izystdvrn8FGADIk+Ynki4auQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAA2CAYAAADK88l3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABNFJREFUeNqUV1FMm1UUvu3fDhRo6WQM3RCkZDTDxRHBUTKl2R5IyLZCTOiDJgQTjOzJxMSwJ+BpqC8+TRMfiIkkQrIhRBScmDqzbmPKGMJErVUHrCt0DtZSoKXUc/6ddvD33r/0JB//5T/nfJx77jnnv2g6OzuZUuCdBR6VgDLAXnr9H+B3wM+gn1X6aLYTwboAHm8ADjF1+QPQC/b34y+020jQ+dwuSBjZnCOfJ0QUyVlAJtu9oO1Z8mUawvuAEp61yzV+Bp81Na8MCQg9gA8xIouIJJFIjUZNjb4WtHgT8KqaZU5OjhQOh2MbGxtbApOf4hFxpbW1tXBmZub0ysrKW/Pz8w6Vv2XRwQ8TT9PX13esqanppfjvS0tLQRUikwQ/6gA6pWZ0dPS+0WgMV1VVHdwCaW5u/t7tdocERFu4tRWeJhAIROvq6sy4HhgYmB4ZGfGrRLSMRH/zNJWVlQaz2bxvfX093NbW9kuKmnLjlsYB1UqN1WqVewxOarOiosIQDAY3Q6FQdHJykperG5gjDPmwMulw3JsOh6MkMzNzT3l5efbCwkJgeHjYLyjIQblpqczbAU+x9GQN8AH4e+O9hl18AbCeBgnaXkASZffjaDhPoaYStDlPPrJINpstoYV10Ol0umD5FyACyAJk0BrzcwvwFeYESHYkXceZjrEX93sKqP9OAJ4n1V3ADwDvtK/kjtJvBxEQYN99gsFxtlNKeBvsnPBsA8LZpAkJylqqKdsucoQ24+TzhIgiGcSJkcapoe0g+TItLHAm9QCMPOujtndlCAR9epADIzrJa5GdI1JVi74nMdlNalaTzo+ZJOmZRiux2FZUZNakoyPmyv7CI6ys4hTLe7aMrQUfsG973xOZnkCiQp7mSLWDHTpan/g9BEQqUog52uBp7ty8xH699qW8xi3dvtqrmigkusdTRKMRdtB87PHUmr7Mlv3/qvHMa6kIkyTLsI+Z8l9gkfAaRDeQqqauIhE3ZuPex6mLboaBNJ9lGwvY0zl5IqIvkOg7wPWkaf7gLltbfch0+gx2uKoRiPJZKMCd/+h7WZ6QVObXRdWtIvgFskLz/ib3GnWxHb9CaZCgrR1J5OKPxWIJzcVPmy3Ud9UpSDD6ltff+Xy2q6tr5xhBQQXeYOjr+xmNVJyOq4BZeoe6GrIVT0gwwBDx07wM8G2zeUjvUBdTnZA0AbspKqUUE/Aa5KLPlztpQmL2Ad8ISJRSQ7ZWJVEpJTk7jVND256Ojo7S+Knh2ML74cs86+7u7mfw2d7eLmp/vGCcwYiOi0jisr1EOIK+xzGij+iSLpRIJKKRJCmm1WpFJr1I5KLTSJKpqakMuGBlezyePbm5uVHY5qKA6B88/gM8TX9/v2FsbCwrcUk0maIqQR8QTsjGxsaA3W5/JB8tbAnuSo9STUgfT6HX62MTExPyfam2tna1uLg4osJzT0s3jCRZXFyU5ubm9HBjizU0NKSaCjeR6BJPgyTxyHw+n87r9er8fr8kILqIRD9SUe2QoqKiiMFgiMJdUjM0NJSNEebl5UUFBXklPo+wzL8GGNKckHgAp2Em/RmvMOziFkAwDRK0bUESZfdfA9TztinYTj35cOcRRob/6L0GOEV9+BxNSfyQ3qAUXFEOt/8FGABocLPHTn9CAQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAA2CAYAAADK88l3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEMkQzNEI3QkE1NzNFODExODVCNkVDRUJEMkFBNkE4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowRUQyQUUyNjczQUUxMUU4OTMwNkE3NDU0REU0Q0MyNSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowRUQyQUUyNTczQUUxMUU4OTMwNkE3NDU0REU0Q0MyNSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFFN0VBNENEQTk3M0U4MTE4NUI2RUNFQkQyQUE2QThBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQyRDM0QjdCQTU3M0U4MTE4NUI2RUNFQkQyQUE2QThBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+HA+qKAAABfdJREFUeNqsV31MU1cUv63VChTKl4pQoIgNTIuONVDJCBAM+8jmxElM2DLRacbIkmUxMYbEZNn+ISYu2R9mYjI22Adk2Qzo5papm+JYlAES7UCcWiofioBI+aiCSnd+r/eV1+sr84+d5Jf3ej5+Offec8591TB1SSFY+dPIdW5CL6GL4BQDNMLvWMKrBDNbWFyEnwijsmKRwojgMk72XxJJWE8YIIwriRC8nbBUjKioqEjJysqKam9vHxdMOkI6oYfg0fDl7SKYRBKtVsucTuduvK9aterzubk5teyQVY2Wb6hJzWPv3r1pycnJCcC+ffvSgiwTsSnIZhPBJlrtdruxqanpjYmJiWmv18uMRmNYcXFxfWtrq1uFrANE7xOi8evIkSP23Nzc1WazOT6U5BFJWVlZLWx1dXU7dCQeEpfLdaulpeV6eXl5Kyca0yrqhDU3Nw9YLJZkkBw6dOgEZVFVX18/COAdOtjgA19FRkac2vP8BJjD4ZicnZ0dLiwsXGu1Wk1nzpzpvnnz5gPYcnJyIg8ePLgVWe3fv//76urqXgWRFxlNKhd74MCBq7W1tafCwsJC8/Ly4mR9fn5+HHSwwUfYowlkMigW4ZUrV6SKjYqK0re1tZVoSCi7a9B1dXWNqmx2H4gcvErnGy0lRdq3PXv2bJZ1NpttDZ6pqalGFaLLILrBi8pfSyaTSXJ2u90TDQ0NLXgvLS3NpQ2PkG1CQTo1ihbZLbdIY2PjxoGBAXdlZWXn1NTUY+gMBsOiqqqqTCKK2LJly+88DgdRQxjRCE1bStCzp5MZQgOfBEzzw+HtfktJxVfIrDhYywjLaaLYUYrx9aXSCgNP9WuUPeEeAUub5bOng9tquG/AKGACmZceyXzAFRKS5CMmYG88/IDYQkSYL4cJBSrLWc3xDuEsRhVmERpaXFo+4a8gJKIUcN98/+xSZHKMEC5GLEtYI0FF4HvsaHVZukyEEvhSOQWUd4PVXiLhyXvC1/WIJTINiDYSNqh5rTQ/y6KXp0qIN2cGWyZiN2Kzt6lZQ8NjmTW7hI0MdjNs59rsrWz8bh/zTKr1LNum40fsO5aMIhaXtJ5FLjMz/dJw9vjxQ9Zx9gvJlre5kr385ids5sEkGx9xsaG+S+y645QcWoilJcq/xu44WezKNImk81wdO15TzsaGb0jAO3SwwQe+CknU8p7xEVFA6+nPmNc7x9Zkvc5CDDF+T7xDBxt84BtwdRFuKRW3XZ3Mcf47pg8JZ5ExSfNXa2ySpIMNPmLv6XhhBdxZk+7b0nOxPoTZi96T3of6Lvts47fVNvtPEH1LeCvgxPiSbAW752/B1Gx+mjFqRN+A6CThgrKWZKL702PsaucJ6T0t8xUWEhbttykEsadAhDLZyRX+6sYJuXrOsbm5R9Lv3u6zzJyeR5serSTBrfv21nfrvMrBhgb8Ua3fggiusU1E0iw1kzwGILwBvwzWMsJydhJJj78rlUScDN1ZhMnL+zCRT8h+wh+YfdgTLCegvUUiLlmcDE/5th0itBFO85JhCxHhJqlU+8wRP2MIVfINIhI9R/gUp/+Um43Z/QHhopIImeA7yCB6UzuE+2ZT5qQK2RRhBzKTJ+SHaiQosa62owmAr9yeEAOPlSYkNjRDzav/2oVI993+MKDvn/ORQZaI2CwtP50nc3YPLelub4z3f+p0NMVDF4SsCHvUJF/RPR3Hl98Z+NvoHusPfTjj0alFLNaHPjJGJ3pWmKzudNtrw/IYQUYrZKeYOMv0vWGnIRgJBDb4wFehXgGih/N32DPTtoJdvfSB5g1GBBt84CtOyJGA4WvJGU+3bR4MRgQbfAT1sJb/bQqQiKj4B8GIIqIS1GyXQPSLqJ2eGA12OmQbUbP9rOMjwaGspftTdyVnfYhx1rLuBTQru3b5ZNzMffcS2aYQxLbKE/KjgBbRaFjGhm19qzNeHNUu0kkbb1n30uh1x6+xnqmxJUKLfAyO/61pld9HF/mfP8dTkDi478WFBhua2M6nYzYvWNTaHdwJhN+wJ0zo4n8FGACS7y2WcVgg0AAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAoCAYAAADzL6qcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAMfSURBVHjarJXba1NJHMc/Oc3FpLGaYrcSC16QVuyyVVkXtiBeQChYFFEsFeyDL14e9nEfll1a/Q9EdvOy7MMW1t1uYBWvVNBiQVMvbY3xUpTGapL24Maml7TNycmcfdjT4DE5adr09zLn/GbmM/P7zW++YwFsfl+bQgl29MzvdglwUro5JcC2DCCb9XPPSo+X3Qd/wOFcmfWNjgxmv9PKLKG+LmanPxrmSZ/+uFdVs6v5ewMkZ2m7k/qdR1jhWm0O2rnvFM5yz4Jx2Fe4qW1oMgcFH1xCCHVBkCYyhF/dMwfFx14z2Nu5IGj4xV2mxmPmIIDwyx7CL3tMIfL7EPL7Zzl+Kd/gwd5O4vKbHP9UYpThF3fyLpAXJIRKoPsic8lE1qekkgz1X0UTmeJBAHPJBIHuiwihookMQwPXUFJJ05CthZIal98w2NvJzHQ8J7mLAs0nvxiTWCZbNlDB0DRNU6LyZDeA94uK/ZJkcSwKpKpiciQ6fuXvG08vPQ5GogA7vlz3c0vztuPr13kOWa1SRUFQKqXGhsIfun776+E/kbEJGZgAZgD6Q1G5PxQN16xd9evJlm8O122sOuZwWL2fgrSZWSU48Dzm/6Xz/q2Uoo7rgCSQ8vvaMrqcJoGpyNjEx/MXbsccdusfZ080Nm2v9x4FNAvgBtbo4El9B4rf1yZM9FkC7IALmA/xX4u+KxsggLTeFnviNr1NW33nm34E2pejjjqAc8VOqK6pp7qm3rQgi4RZaGhspaGxFbAYesqa926e/+7Re/fkE/w1a2vZ/NV+1td+i8tdSVmZDU0IlNQ0IqMaQKawHbva+HrvSaq8dVlflXcLm7buxmZ3EXs7kAPKCxsdeYqnagMVHq9hYHT4CYHbPkAzvbSGnGmaIBjoyhkUDHShaWLB22+AudyV/9/D9Bxqes7gK0bYOvS23e4o5/mjywwNXAegbvsB7I7yvKeW11q/+7Mn1Oe3JOLv9siREBlVIaMqyJEQifi74kGhPn/B0liKQhYs2sVKrSlsKZqdF7ZU8c+BlfKKGGClPkdZWMnv2umfbnYA5/4bALn2Kol4JPH6AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QUYyRDNFRDE5Rjc5MTFFNzlFMkJENzMyNzQ0MjEyNDEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QUYyRDNFRDI5Rjc5MTFFNzlFMkJENzMyNzQ0MjEyNDEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpBRjJEM0VDRjlGNzkxMUU3OUUyQkQ3MzI3NDQyMTI0MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBRjJEM0VEMDlGNzkxMUU3OUUyQkQ3MzI3NDQyMTI0MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsJGZI8AAALGSURBVHjanJVrSJNhFMf/7+YNN5sSmkYTnTM/5MzsIuWXmEpBfYlifYlJBWHU6FNeiOiDgWVQQdmFPnTTSgnKosi0C0h4KbEU+uJSW3Nekjlxwpzk2zlvr8NZr84OnD2X8zy/nec85zmvcLIrE/+SquweMzX7SblNlqcdpG9J60s+m97I64L2CQuBtMBCzVG7t337l/FXsHs74PEPSbbYiCQYtVuwPnYnjDG572nqOsMVgQQ7P+rrL3nirMA370csJmnazdiz5jQSolKraFg6N6/OK06Yg1X2eT+V3rQfxs/pASwl434XOt3PkKLJzouLWB1FU1IIVDLMSp6V3em3YXp2CqEKr+U9vJeGVunIoigKIsTZ6t4DcEx1438kWZOFY+k1ECCo2MN8+2T7smC68FUSYEeS7c/V015mMIuBlm5P47K8OZFRh4GpLjQOXQnMywwLA82UIiHB0ihljqTdQp+3Ey9dF4NsMsPMQL3HP7wkzKjNxSHDNbj9g6hznALFPcguM/QMnA4TIoKMBYnFyF25LzCOj0yBNfUy9UTUDpRgZtan+McMdK0Ijw+ajFbrsFd/hiCXOHHJs2pEqbV47rqAEZ9d8aJInGH006HXmDLmJ/MLik9ydBYydQVYpzNTOqjwdeId2sbqFT1L0W7g5gN7WJsTtyvI+EucwYPvpVLiMoyP+HSwctEY58Tt5qaGga/TY7ZJ6TBf3H4nGpznpH7zyI1AgVBKpfSYrdxtUlEZEinDiyz6s1Kc5kunuwGtY4/QMnpfEcZ7LPoKfiVFfGuBaiMXh7LbfcdDfs+RKg0OGq7CoN3ERykPFAcW8rScDFW2tQ//Or7SMXkt75mDKRVYKyXt3d7JVvR4mtA72YaJmWGohXAqsIlI1WyEKbZQipl8zHuLVmwZKlBTSMrZnc8vgNRP+oO0hfQxXwDHf+En4LcAAwAhGg0H7n+aqQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjM0NzhEQzM5Rjc5MTFFN0I4NUZFQkExRTk1RkZENzUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjM0NzhEQzQ5Rjc5MTFFN0I4NUZFQkExRTk1RkZENzUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMzQ3OERDMTlGNzkxMUU3Qjg1RkVCQTFFOTVGRkQ3NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMzQ3OERDMjlGNzkxMUU3Qjg1RkVCQTFFOTVGRkQ3NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PoEz+1YAAAKQSURBVHjajJVLTJNBEMd/LSBQoUQREbWYEBUPHowVhUAUMFyMB21M0cTgzYSLiReQm55ELl58HbxIEKORxpMXovKqEl/xERIxxigUjYomRQRRoc58W1IL/Von2d18u7O/zs7+d+qIdLlJaL5wrfT10nQsjs6OSLsr7QaBvDtRv7htjkVAX9gvfSNf+qoJdSEjTIXMmmstFOyENT5YuatHZi5acFugL3yG76+beHZcQAMktYIq2HIWcje2yVfz/HTayfrMedhpxgea6d8Lk29IaVNy+pFrkL+jEldxlsxYKXBGYQ0S2QkeHII/k/y3qa/u0b3QYI4ciTggMkdPHXx7FHNOkx/1XoKsQhg6BV8H7cHLy6C6W3FOjXA3n3sXwLJh9id8vC3O26C8Q49mD9S9yhCWAv2EAvEOZZdFKKKYUbnA502QWQAlRzUCe6hh+NMtnak0/jWXB7aek+MWwao6Mzc3I13EHmgYtRqhh+mx+MUXLfBbBLtZcreiKpqn7eDeZA80DI8CZ3AuiV8cD5rbe98p0rhuJJK7QXIpMslZn/TiFfiB7KLEiX7SCI8ld/cPwo93AiuBis7E0OzVViYV+JBl3uR6mxiC4H7R27BEWgqVgcXHzy/XPqjAq3j8qUU8+RYGD5tIl64zGk13xdY9WkfosBe2nWlkXqkJT49B+GUCYQfyRAuOI3gvQIY7NXDiFfTticF0j/c8FkMiM285kNcuVaOVCrnF9JzU0NlpM6qv7sktbZWv9lhxMNAW0VwbNffMEVKZ+qiv7oGWZAVWqkbkCp/EeeyWvIBeI1pnhkhDCmx+hRTYfVBYM3/M9uQV20D10eqbO2AVD31N8EvaqLR+aTeldVv5X/AX8FeAAQB7pc+EnYos3wAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Qjk0QTc1NDM5Rjc5MTFFN0E2MjBFNUNFNDM4MDZGNDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6Qjk0QTc1NDQ5Rjc5MTFFN0E2MjBFNUNFNDM4MDZGNDkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCOTRBNzU0MTlGNzkxMUU3QTYyMEU1Q0U0MzgwNkY0OSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCOTRBNzU0MjlGNzkxMUU3QTYyMEU1Q0U0MzgwNkY0OSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pq2YCYYAAAJ0SURBVHjarJVNTBNREMf/761NFOJFC0W0aGKMViyixotibDB6lYOpnuoVDujBRNqgeABiAT0oiRBv1o8Y48GjiQFJRA8aUFAOGjEploYvww2jifucebuL2S6u1TjJ69v33sxvZ2bfTMWP43VYSeSjZ/U0naTBc5W9PUVjkMYDs+HQgK3nshOFQFKI09SkxkdjGB6AejsKzM9ah2UhiOheoK4eombfEO30Mfy3QIJ1IZc9r/qvQr17DT8Ru/ZANJ4DNm3upmWLs29c2lHlwC5j4k2LefEskP+MP8rcDNTTxxCR6EGUV6ymHSsFNixBniXNziTwdQlFC+lqG7KlVUJ7rpQSUMo0k03A+wn8k2yvhkxTOoWQ7OERNT7igcmuPsje20Cw/NdmaAPkjXsQ7dfcQLLVDGIxMI7ng963lq4FwlsgO65bUIZ19AKVYQg+KxSLEeeQP5qNp7ZiZtqtQBDZSYBQJfSZsUpfG0xPwbxwBlj84tav2AjZf3+SPQxjYc77RtozW5uB2bxW9oXZ+sxi4DcEAisn2zAomYZ7bRi+34eBeawLek+cnNmeOZ4u57RQ1pfxb46BL8W2iPdNbVcsWC6rw9Thcy4Z2tbjrZxIVH8aBt7F4WMeBcV5mvwAXTn8zDnl/GU/QS3Mez2Macad/3+xqQ0pejgtm1NASenfw8hG2xKDA9O1TNAMdY20bE0Da0qKh5GutiFbWmWWm4MNTaG6tlv23NQhFBUm65INrVJ+DTZBOb2lxl4BL4agxkasSxugSglSg91ZAxyIQeze74SZ8e3YNlTQdJTGCS54XU3AdxrcKLnnP6TxhPNf+BfwU4ABAOGg6uEGZfTlAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjY0QzNFMzg5Rjc5MTFFN0FCQkQ4MUM4QkE0RTY5MjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjY0QzNFMzk5Rjc5MTFFN0FCQkQ4MUM4QkE0RTY5MjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCNjRDM0UzNjlGNzkxMUU3QUJCRDgxQzhCQTRFNjkyNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCNjRDM0UzNzlGNzkxMUU3QUJCRDgxQzhCQTRFNjkyNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpOfQioAAAK5SURBVHjajJVLTFNREIb/WwpSqNIHUFJoEyBUQoyPqBiDCFSNO2SBNYYENm50S8Jj48KFIIk7iQtXNjYhhkhwYxQxhIqPKjFooqgQYykFLLSiCOV5nbneNqG0t04yPY87852Zc86cCvr+AcSTYO1pOzUXSLm1ytNe0mek9w0Pnw7Kdtv8hFggGTiouTw8H6zum56Dez4E30pY+lagSUdlth51+SZUZRuGaOo2wxMCCXbj69Kflub343hOICU5QeCb+0tRos3somFrZD5Fc7ExAusYWQi11r4YxcTSMpKJdzmMnqkZlBt0FdYMCh2QtkAlwxopsrYGzxiWNjbxv8K27MO+NJQiE0RRFERg66z7Dd6GFhUBzbZCtNiK0D35Hdc+TUTnj+iz8LjyKAQKkCM8NRwIJoVZKKsSbQbUKgFXiq3bvrEvM5ilph9Hn38uaXote4tQZzah1zeL0TiLM6Mqx+DgCO3u+aAirCbHiAarGaG1dRRlatDjm9lhIzPsDLRMr6wmhKkFAR37bFLflL4LTq8fv9Y3dtjJDAsDV9NoXxLJpUILbLszpf7Y4m+4CKgkDPTn0crxxJiWilbau4i0ffiMLVGMa2v+x/Ax0HNYlxXXqK20GFmpaqn/gMrwdfBnwsiOGXTcjDDQdb4gL2GEj2YDWN7cxNWPXxRTdVgkxj1e/klNrlG6nLF3kU+Xt7f+5Tv4FQ6OfavJlmRARc+QSD5N3YfKsEdOLyJ3vk3BPuzBK4VU2efWwTKukiYailItE9RJr0anq/wAtOqUqPH18UlMKjwUbMs+dAs6aeiMPg4ytL3CqO8aPFkupZBM2IZt2YeG7UoPbCNdjLtDgQX0+39INTodDiNVUCGf6vm4UYdz5lxpz+Q0nYovtgzlm36GtJ4LniuAdI10iquMtJcPgPc/9i/grwADALdB+jhy/YsiAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OTM2MjFCRTg1RUZFMTFFODkxMzVCNUVDOTI2MjI2OEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OTM2MjFCRTk1RUZFMTFFODkxMzVCNUVDOTI2MjI2OEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MzYyMUJFNjVFRkUxMUU4OTEzNUI1RUM5MjYyMjY4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5MzYyMUJFNzVFRkUxMUU4OTEzNUI1RUM5MjYyMjY4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuhZ7IAAAAKmSURBVHjaYmRNesiADfyaK+cEpMKBGETLQYUfAfE+IF7FlvxoL1Qdij5GdAOBCsKAVOb+6z8cVp/+xgCkGR6/+wuWkxViZnDU5GAIMeVicNLkOAAUmg4yHKeBQMM6bz7/XZaz+D3DwZs/GPABe3UOhimxggzqkqxdQG45hoFAw9oP3fxZETjpNcPnH/8YiAG8HEwM6/NEGezU2TuA3EqQGBPUsDigyyqCJ2Ma1hDIz3CvW5rhUoskQ4o9D4ocSC1ID0gvkBsHduH///+BmOGfXdtLhpP3fqJoyHfjZegOF0QR8+1/xbDzCmpwmCuxMxyqEmdgZGRgArnQeR8w4NENAwFQ4KODAGNMMZBekBkgs0AGhq0BxiY28O3nfwyx77/+Y1ULNSMMZKDT/hvYY3TXFUzxHZe/Y1ULNcMJZKDsE2g6QwezDnxhuPr0N5y/9eJ3rJaAANQMWZCBP9lZGLEqAsXixF2f4fzqNR8IJiWQgc8kBZixprEyLz6Gcm8+uNj0eCGGZDseUGxiAGlBsBlPWIDEKVNFNvVbLxBe89DlZJgWJ8QgI4RqkaUKOxhnOfMyJM19y3Dx0S+4nBVQHAiOgly4NNKCG0XjpgJRDMOQga4MK8PaHBEUsShLsBlLQAbuctXmACdOGHjx8S/BsLrz6g9KwnbR4gAxd4PzMjTrLbRpfcnw8fs/Bn5OJoZ4G24GLSlWBnF+ZgYOVkZ4unz24S/D2Qe/GBYf+8LwF5hLQWoPV4szaEiyxgOVLKJN4QACwAKzEijRdaxGHMX7uABIDUgtSA/MMFwFbBywsFi459oPhnVnvoHzKCjRsgHTg4wQC4ONKjtDkAkXOMyAyQfsTbwlNtRQUKC5gsoHUIYH5QCQMBA/BuLDoKwLigCgr/6jVwEAAQYA7lcMZLBvMt0AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RkEzRTQ4MTE1RUZBMTFFOEE1NzNEODQzOTk2RDgwMjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RkEzRTQ4MTI1RUZBMTFFOEE1NzNEODQzOTk2RDgwMjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGQTNFNDgwRjVFRkExMUU4QTU3M0Q4NDM5OTZEODAyMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGQTNFNDgxMDVFRkExMUU4QTU3M0Q4NDM5OTZEODAyMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrlWk7wAAALFSURBVHjahFVLSFRhFP5m1EydqEzHR5o9hsrQSnvYIjJGwxZBBmG1aCTCRevIB1ntMoXWQRJSVIsQKqJF5liQQYgoRBkEFeaopC0cncYsm9t37n/1zp2HHjhz5j//Od/85zm222UaYlHdO7gpTpFFbjDU38k95EftB+A17CxkiwSkQQ3FhbF+HP7SDVAi8EPdObKA3L3A5gpg/T68puqWgMcFJFjr1DDqe1uB8QEsSTmlwMEGYE0B2nhsWNDbw8BaxgdR/+Tc8mBCYqPb0ofHFgsgwTx8WWPXJeBvUF0kJpNXklOAyusMs1LpVqSZoGIrPuLLo0cPWdM0GzSEntYBEx9M46LTwDoXMNgBHL8DDHUCcwE9REhKwslZRJt2QYNdXlgx2m8FE0rLBLYeo3TyJbOAxlRnFbMwOUDGdhZnj2krvoIhWAJY87U7OkeTQ0quyuUHwf79YX4SgBkfUFgNlJ632hsYNQLoHuuPBvSPAMGfQPEZIHk1UHBIhRaaVz/i91ntDQy3AOYHJqIBZ0aBaXK6SxVCwk3NALZUAdkl0SkyMPIFcC4hybzIKwM2lqsQg5PRP5SyFhD76ZHY7ZQor03NxDb/sFLsOqum4dNjOqfHdpJ2kXRYiujUhU9e2OfcYV70tqmCFJ5Q0xCTbMxlyKrK3qmLtwL4wFUVVgyOv/cyc/Qx/pRIKuZnrTrXUV3cF8AuyZtUcLEg41wpV83WiaT3D4HfU9bGztuvf31p5xrSGEJt+RVW02Gt8qtrwOfnfDXzO+1T8+ttpu4ZW9MIWXzKm/U01ErHLm4bYzk0vrhozvNylJQKVN1krktwg8cmy7bhS5t40VbdYQ0/HomN2IrPAli8BethEu76+oBvPWpGf3HB2tl7DrZG9m5gk9vImQrz3pIb2wBlY+AI+aQMvEwAma0Oaec35E4pgOQ/8i/gvwADAH+X6pVLajMLAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAoCAYAAAD+MdrbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEExRERFNTU1RTBBMTFFNjgxMzZGM0RBODkyOTQ1QjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEExRERFNTY1RTBBMTFFNjgxMzZGM0RBODkyOTQ1QjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0QTFEREU1MzVFMEExMUU2ODEzNkYzREE4OTI5NDVCNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0QTFEREU1NDVFMEExMUU2ODEzNkYzREE4OTI5NDVCNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Po15J18AAAENSURBVHjaYvz//z8DkYAHiL2B2BGIDYBYEYj5oXIfgfg+EF9gABlIAKsA8Wwg/vKfCIDPIA4g7gDin/9JALgMUwbi8//JACxYwsoIiLcBsTgDGYARLVJUgPgYEIsykAmYkNicQLyGEsPQDWwAYn0GCgHMy8pAfB2IWSk1EObCCmoYBnMhL5B+DsTc1DAQ5EIvahkGM9CZgYoAZKAetQ1UpraBfNQ2kIHaBn6itoF3qW3gJWoayLhmehxV6xQWIgwClZHlQByJJ0eJQbE5PgM5oEVaIRCzEesNXAYqQwtbA1LDkOp1CguW8NoxvOsUJqRIKKRm4UC1OgVkIC800VItL4/WKaN1yrCrUwACDADF6ALhxsLunwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAUCAYAAAAwaEt4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEQ3MDZDODBEQTJGMTFFN0I5NTdGRUYxRDMxRTI4MUEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NEQ3MDZDN0ZEQTJGMTFFN0I5NTdGRUYxRDMxRTI4MUEiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTU5Qzg5MjBEOTY1MTFFN0I2RDQ4QTVBMUZEMDVCNkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTU5Qzg5MjFEOTY1MTFFN0I2RDQ4QTVBMUZEMDVCNkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5/2aLNAAAAf0lEQVR42uzTQQpAQBiG4RmRsra0cQCXcAruoOQQysbeKVyRTwllY2Y3eb96V/9memrsujTmnFWV6lStCpWany5+oAxqUolhF0yvZjjuRapUIxRvmOMLZVC8Ydrwnm09b24weXgwm+fNDYYBAwwwwAADDDDAAAMMMAyYT9sFGAAwwAhSDFX10AAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABKCAYAAAAsXNNQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxRTMxNTAwMjhGNjdFNzExOEExQzhGMDRFNTY3MTgyMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBRTc2MTkxMDY3OTUxMUU3QTYxNTk1OEY0NDgxMDdFNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBRTc2MTkwRjY3OTUxMUU3QTYxNTk1OEY0NDgxMDdFNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ1Mjk4RkYxOTQ2N0U3MTE4QTFDOEYwNEU1NjcxODIyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFFMzE1MDAyOEY2N0U3MTE4QTFDOEYwNEU1NjcxODIyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+6Zs1rgAABWZJREFUeNrs27tPI0cYAPB9zLJ+YvADmzPmceLsS8DobJwQuOArIkVcdCCkU6iIUp2S7pQCKUhpUhm5gIYGRemp+QeuoEiVhr+A/ppUwW9nvrVnb2ytA7s76weekT4Nj8XAT9833+zDYrPZFPiwPiROwAE5IAfkgHxYHcjsD4iiyNUoDp6BNvA4oE08DmgTjwPaxIMmzAFt4HFAm3i8hG3icUCbeLyEbeJxQJt4HNAmHge0icebiE08noE28TigTTwIxPEs48njnoG28WBGHM8SHomxLGEWeGhc10CWeGOXgazw6BIWEcezhIeGBvDjx38cff1IZMoJPPK58Kgz0EE8PQMljmcJT4t0es2POJ4lPAWOrdWqkmj2AcsReLSD5VYF9cDTtjCq6np0JdwvPO3jdDo9JXE803gKOS6X+2IWcTxLeFoHfvEiM484niU8mJvJZOo54nim8ZT26zTj8blVxPFM42nl++7dT4s+ny+KOJ5pPO0U7u3b7/OwpUMczxQefC6mUs+9q6vpb6CMJY5nCk/bQBcKxdeKonjwSchIXc4aBjzxzZu92Y2Nr/bIGdmonMoNA54cCATk6+u/fo1GYylwqNVq/0o88x6GNzeXcH/4cH0cicyk6D8OcTxjvJmZGffBwcFyNpv9LJlMrsXjiaSqeqTuCkTjjheLxTz7+/tzmUwmgdHmcTydnJx8qqpqrFKpyHgIbrdPUBRVW75IDDugZbyVlRV1a2vLv7S0FMTDG8bD7/cH8aY3iGEiLpcLIoq7aAhHFAOFSqWSeHd3B2uaUK/XhUajIVSrVUGWkeDx+AWEUM9egB4TXrFYjB8dHf3d/YLQKCEAB5AgAAgC4GCm8TQYpGiZJ0mtXwFzd/YNI6Ctss3n85/3wgMYAKIRSZCvw3EApCgTwsSEB6MBmGRYuu3XHqp9oO1nVfB6tnYfXncQQBiQZbDWIaS28YzhhnENZPGgj4LXvHWjDDTKPlK2pGQBb2LCjWek48GvoRGHtYSZ4OGuKXs8nvVecASPrH30eidJsoYH5Urj0eueEd4wADLBg/nk5CSFO2qAxiOANBzdLAAE8BBytT82hzdoQGZ48H9sb29/+X8lSzcMgifLCp6RZbxBAjLFg1hYWNg2wiNZhzfFela2wABPbmMJlvAGBcgcL5FIuKenpzeM8Ohm0VrzCJ7Ugde9XXkI3iAAmeNBnJ6evsSzh5SoUadt7fHkdohM8PCC0dd9oCN4ELlc7lt6jSNwEK2ybuov0YlnDGfmkh0adbzl5WUfPt19RTcKACRZV6/DLOlYLPH6BegYHsTZ2dlrPHsJHOmyrcwTdLxPzYEdXj8AHcWD72Wz2X06+z5lnqAFwDmF5zSg43jn5+ebbrc7RZcs3KGoVpv6loTgwT6v16mZndsUTt0TcRwPjru9vb3wer0pUraw3gEeQTHCk9rvLWKBV6mUS2gUMw+Ou7y83MPnvjpepVLX1jyCdN82hdUNMjSKeLu7u7P5fP5n0mUrFbJBFh9Usqzw4HogyxLuCx5CSLm5uSmGQqFMtQqdt4H/C0nsbBSdp2V0ybK8NVsul8polDIP4urq6jAYDGagZFtdVhbpvR0B6l7rWMKxLuG+4RUKhfVMJvtDuVxvYCxJljvhemWcU3gsAJ3G059H2dnZCR8e/vg7dFkZy/W6YtyN5fSTFNIQ4+nvR3v//pdnFxd//oFzzg14cBEUAu7ZQnRulo0z0KmBBoAnUWj0TfCO7ycSCfX4+LeNzc2X30Wj0a/F1ujIKiOgfj+7gwaAp4H5/X6Uz7+aDgSm1MXFxaknT+JRHPMY61k4HF7x+fxwiV69L5sG/b6V/wQYAIkOYz4LiuBtAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAwCAYAAAAlzZsxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyQUIzNDYzM0EwNThFNjExQTM4OEVFQTE5QjZCOTU3OCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxQjcxNjc3QzU4QTExMUU2QjNCMkZFMkExRDdDMjM0QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxQjcxNjc3QjU4QTExMUU2QjNCMkZFMkExRDdDMjM0QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjJBQjM0NjMzQTA1OEU2MTFBMzg4RUVBMTlCNkI5NTc4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjJBQjM0NjMzQTA1OEU2MTFBMzg4RUVBMTlCNkI5NTc4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+zSV8/gAAAWlJREFUeNrslL1KA0EUhbOKIohokzSuhUVWiwiSQjCKkaBgqzY+QxqfxSbPoIX6BoEIaqeNiCYEUdfGVCtYr9/A2XViEjGFP8gGPmYy95y5d2Yu64RhmOrn5/yMoVY7u2KegaVisdCwBcSyDKfwTCw3oHUf0lBF4FpiM68q5tsZxhXIww1sy3MEM3ABJTIE8RkwpZU6+6HshkptdRxaJZyDa5W6iNjveUuYZhkO9XcL8e0vvMN/MCS9lPTSdxjK5d22a61U9npfK+KuD4ep8+EQf9oamN5bA/GXmg9TELX3gcQm9TqBawPzNa3lpUlFBlNzS7vE9WpeUsxNWqMvQ71+12Q+BAXPm46vlXWHIQcn8EQs/i69wJRpOkQj1oYZvfYEBHYGT60xqXEHRuEY5sG8+gYZHiODST2n1GPazdHO97CC+KHt0JhMeQvmSwPDKsm0xDLietdbwjTIsAr78AqbiC//+MO9CTAAW6ssTacm/FcAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG4AAABYCAYAAAAUeMJLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3QkVBMUEzMTFBNTlFNjExQUJFQzk5MzY3MzcxQTBFNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNjZDQjdGN0JERUMxMUU3QjcwODg3NzZCQzNGMzJFMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNjZDQjdGNkJERUMxMUU3QjcwODg3NzZCQzNGMzJFMSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg5NzdEMzI0RUNCREU3MTFBOEVFRTA0NDZGNkU1NTM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjdCRUExQTMxMUE1OUU2MTFBQkVDOTkzNjczNzFBMEU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+MHUl6wAACBVJREFUeNrsWl+IFVUYv7uuu+rNVHSvlm61mq1C9scKpcJKCyQIIhQ0zXqoF4OCnpIFuSo++dRj5EMbuNGDURZhkVrqrlmRtaYmplaKWRjb7iq5pjt9B36nDtPM+Tdn5u7C98GPO/fOzHe/md+c7zvnm19dFEUltpFn9cr2fEIPIfJED3zEbTZhO6HPw2cfzp1doF9p8lhp7Z5+8jEx4oCeKLsdVfwJtBF6A/jtha/Qfv+M+VUhTf1th2V8uUP9cg1BjPJ0lnSh2/FbJ6Hi4bOCcyP4svU7h3AOx2yK7RtH2K/Eu93hemzjs0Ej4UVCN2EAOEB4CfusibMJ1JW4PvxWyeC3Ah8Dln5NpO3Gvv0Jfk1mG58J0w0Z7lvCDF/ibE1HXNaHwRSbL2m78d31mk3x9WHkzTaMtG9w/D7CCsJ4YDmhC/uOEJqGG3Gb8YRuDkicK2mmB8vloXOpeWtxjEiLkxL2TyR8hmNerlWqTPM5qEkv1xHqHInzIS0P4mxqXjf2r9T4W4Z79MpwI06MtIsJI66ZcJjwWow8HXG+pCX5bc9InE3Nu4T9ZY0/EeddI6XGSdKkfU643hBbFtI2pvh9P4caPIawnnBcqW06f/Wm+xiMuKGhoUjAgrixBtK+V9JJF8hLiy0EaVGArKPzE19+CNJuz5rNik6VojAfI9yoIU2kmgnK7KrL8FD5knauIOI2YPs7wmOh7m2RxAnShvBdkDc1gbRm5dwJMdKSbkwSaXs0pLVi8lPGvg8KIO4Ethdb+mqwyXhZiLM5XpokTeCM0h5LI00lr9tyZKik7UkgzWZC4tMwqGgW8uoMusnCV1npmgwL4iRpgsBpIC0ykKaSZyLOljRT3K4turTpv/ofJ7H9cMhsViRxa5XfBXmHLEizLf460lod4p7j2bzuxblJ/7EJ24eQLhtqQZxrS0hNlfF9dWjzZKkhJtI24T9c4m7D6Om3OK8fx7Zp4h0XS/cmu0y4s9bE5d1k7jKQFmEy4tuDDFXzxmJ2+SPhqkU8Z10W4K6vdWyIzvu1jiQvjbRzFt2SkPFnec3j/T6uxzMN6v7At2aYasgcvAS1sR0ZiAtV84JDlS48RzhEGAr4gv0HwkLCu4QBj/MHcO5C+FL9LrD0+wRkB0XEnxZvcKtjsdDIFwuxscqLVV6s8mKVF6u8WOXFKi9WebHKi1VerPJilRervFjlxSovVnnVmjhWebHKi1VerPJilRervFjlxSovVnmxyotVXqzyYpUXq7xY5RV4MsMqL1Z5scqLVV6s8mKrlTUo2zcQniRM9fT1G+E9wq+x3ycTHiXMJDQ5+hwknCJ8SvijIL/SqrHPRYTFHn5yH3FZSCvh3Kdiv00hvECY63FzSzhnLnxMKcCvzvYSjgfwE3zEVfC50XOCIp7M5thvSwhjCIcJOwmXHH2WCUsJ8+DrHUu/4iY+SxiPG75b2Tea8AzhJvhQ/Zrsbcv4bGwU4R6cKwfM77imrwnXbImrw2fIWeVMfPqQVsI5O3Fxsyz9mkh7GqT9gs9ZCemxlPJb1TI+k11PWJWQ4WYAdxM6Cf02xOkCLnke16RcoK/Jcxst/NqQ1ko4jRvTHvObNb51FjVPjLSVIE08PF8STmDfrVhKtCArvE646kpcnrYE67CDhF2BfLqS9rfl6Ko6xCBrnvifrYQLCcfMx0TwLFLvX8q+I4SThBWEWwj3Er7Ia8T52P148hYkENeImxoVTFoI22JR8+7A58EYadIuYxS2KOVr2KzjuglXEHy82D+Pi6+rAWmLAqTNndhOq3nT8Hlc40ekzjcIB2pV49JsV8JIK4OACjANN3owJ9IeSfAn1mnTkcKqGciL12Rxnx/AaBuN2nZF40PUtfO6tF2LETc6ZdovSRNT4jOEmwmrDeu0LKQ9lOKzLYfrXYP/nAzSPjScYywTRde4+1DXOkr/NW3jpHVgDbMKeX61xl8W0gZwft72IJYdorP0CSYfQRfgeZsg7XHULkHUm3iy4qTJVLNNIU/XzYiTtgozsiTSJhG6APHfywm35Xzd85Q152nLbtaQaU2Zhbiqw7RZklbColLWpiiFNDm7MpGXRtpPKROR3li8nbEJySBSc9lh7VnGZ1rNmoDPMxa+Gk0dk6JHnCTtI8IxkNastHk6Um6UJO9VizqikrbNYcq/V9k+hXXYUstuj2x5lTQpsB8jfQZi09kV2zVlkalSkPYVtjtQu+o1pKnkZSFtEkaa7Wy3FeltnsO1XdY0Eg5jVAuCPyb8HKKt2OCZHm17eUmkCbuIdk6jYbpfykjaYtQz27gvoOMhFs82r4vka51dKV0SYfvwMLQg05jsKmI4X8tUKWvG0ZQprw1pSTVE+l2DG5JGmnjS9zvGfEHpeKzD/2zJUPNETG9hdilG8UTDMqwBs+JOhbyqjrgIM756zVB27eW51gzbGiL9tqDop5E2gOvy7UGGqnkitj1AEFOJE5ME0bFer1kUbvDokPjUDFMNkX7HgLx2zTpvWen/79Hyjl9X84KYOmSl7CDyXc2npJ2tmEn61LJBnBvvtLv4bcvQg3SNPy3e4MYqrxFqrPIaocYqL1Z5scqrViOOVV5mY5WXpbHKy6NzUnUYabqUVCqxyis+0ljllYE0Vnl5GKu8WOXFKq88alyascqLVV6s8iqixrHKi1Ve/3YzWOXl0SmxnTazyotVXql1hFVeORmrvFjlZU0aq7w8jVVerPJilVcacSaVl8/ajlVeOZmLysvHWOWVk7HKa4TaPwIMAALJBrD36wGuAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAA8CAYAAAAuaUeTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGNzNFQkZGNDUzQzhFNzExQUU4MERBMzYzOTg3N0E1RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGNzkwRTcyQkM4NTgxMUU3QkZCNDg2OUYzNjgyM0E5NiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGNzkwRTcyQUM4NTgxMUU3QkZCNDg2OUYzNjgyM0E5NiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkY3M0VCRkY0NTNDOEU3MTFBRTgwREEzNjM5ODc3QTVFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY3M0VCRkY0NTNDOEU3MTFBRTgwREEzNjM5ODc3QTVFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+44aOSgAABv1JREFUeNrsm+tSYkcQx+cAgqAoiri7WfeWze5mTVKpfPejDyVP4FP5DElVKrqVeF/XKIgXUG7KOZmJ/y57pzhwLnMASbqqi12BufxOd0/3zGCtra2JIUhW6jP8+1jqddCG1tfXBzboxIAhzQDSNPvbB6k1qX/jdWRlULBmAWmqh6VlYWEKWvW/CKsfJF2Uxb2TegNoV+MOy2KQMgHbUHC/k1pn0JxxgqUg5QApbahNBfvtqEBLGIT0jdTJiMZJ0BqAdjkMaLEQgNR356UuS/02QlBc0uhL9TmnxlEsFgcGy/KZZ1nQObhbashhpMktTeZczijAIkjKkp6OACRdWoB2ESW0frAIUh6QkmK0pQ1o51FAc4PFY5JytwnxuERBOwE02xQ0HRZBIkt6bJB0uWWWFhoawVKQ4gxSQoyX3MLSKmGgxQDpidQfpC6NISgBD3kh9UepizLdiAeFtQBriovxlzjmuhA0gz+VWoZ1FfA3a8wg2VLvMM+SdEM7TLljIxAqcIsMWmyMIJ2GDfCJLo2fMGiLjxSajaBOlmQkdXAL5g6AlR4ZNIJUAqSB7jpwaAVAmxhBaDYSUQWoPOwtGoeeFotpyRGARpBUPDqLurMgOVVJs7RhQLNRPJcGASnIFg1l+SmsMG1Y3AKDFnWu1iFLQjZuod8E4HWi3KbxAosg0VkfbRmfYdAtQMsjV4sCWgf9nKLOU2OaRH95fIa2nq+jgtYLFkGaQdbrtq9+BrdsAto8JpEyAM0LJF3qSH9qpqF1g0WQZgHJ63ZxBZMyAa2DdlR7FxhTGu3Ne2yjAWhVU9A4LAu+P+MTki7nmGQD0OYwyUkP0Dr4nvr+JRYOgjQXcDxNBu0uDDQFK6ZZkqkt43NmaWr1yrGHoEO7Y5ZkClIvaJ0g9WECgXtJmD+dmYdeAEIVIHLM0gSzpCtAmsb7OcPjUf29Rn9fRIDTblpyaxhoFCXNHPRSgzYLN62izywgzUZcVNcw50BJqTLPQ5QxZPZRQMtBCRrdmBkUJGXhJ9L97kxk8KoAPYJfE7SJCKGRG0QJ6ZZB6kRR7tzBp0/YUh0FtKghnaNm7Jhq2EsGH48YmumimlZhG+lQFosG5XuUw9WQ7Xu+PeilkFaNH7MNwfkR2XHg47tFUlwCJIFCv9/BcBNzuzBdSPPklcqNCTG8gw4qqqly4J7wxqebqzYO+iWsfqwjgUQxiXi2idcmBj5ISHT1aFNO8BQulsYYP2ig2rCePanbeD1BbCZRD/5dsVi0wrphAgldAS5ow9wr6PSEWVqU2zRkSVS4/5toygnSFtGuuL8jxgt+Wqi6iQL4HGMXLDn/7Bq8V1ZWekHKYABLbBAWAmYBlnmLNKAMkBTPYgYhUSl0IO7vm6YRj15jLJf4zDP2vT2MqZdU0T5Z4tTGxkZtdXW17dWyJpglzfWJXU/xZEoswNIu6kLIbZo7Zkk06TTaLYivzzaV9bzSrObcYz8lzJOumz8RLvfyYxokZYovpb73UcBSwP8o7o/I05jcFtygrsUHL5Bu8N0twMpgXMtwOUtb0WzxcNnX7uF6bnLI8z+34/0YIM3iybwPUcBamMgyJpbBRAnaTR9oBElVEZ9gqRk8gI+wpm6ivsOvjl8In/dN5SLRQDs0j4ybG+YQk0zmTQVoGcAqeM3j7ykWAmh7hj5nYfILwtudhLaWS7VDbOEQ9KQbrDI+uAiiyQignUHPASTPQJTFw5bxFD6f95m5x7X/B60AeqZU9HRr0CwGO2UYGllJhcGpsIFN4/18gLbjWp4XdEGJaytw39WQoE0zaCYv2+ah5JaC5W9BJaNl8DOIkX4ly/5d95OUXkOn4J5RQTMh6sHuw41igJcVPn5hJle/nHi4EtpCWPJd7twguduD67TE6EkMixQ/mX4lvP8kZgq1JEnZbRfC6wpI0HbhQqMCzYEVpOCKFGtSyO4zHkC9ZRw6vbJ+v+lCHSa/iyfZFMP54RFBqmAsR0gZ9th4MsgbF7rMM4FE+nvx9Y1sFeSfu/3EJWhuVUedRpY2KGgOy8l2sK3SYO9fYVwOm7xyyV+k/iTuLxmr15+RW/J2SVSMftENWNhEtIHB7URsaQ76KqOvQ7cgjIf3Z5f3k6h5k11CzJZWS3YFZiprpxOiHUyoYQiaDulzD0j6ar6JkFHtkqja2KlQbX6Cde73A2Z6a7iJCe2gmg8KjSCVGKRWgDaUlf0l9Tepv0v9A6+/ot1LVh86LsBeErCo9tFbCLp+odmIh6fY1TwytPI6WACavWpHF2AFAhb1oQNB2waAukvtRpDIkr6EKIhDCQNW0YEN6oSmDQDbAELQbARYsqShQeoC7EADVh/0cdYtgBwBEu1fHeO9kREGTK3y++ruquU4jvhfvMk/AgwA+jyW2693TlQAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAA4CAYAAACi2pVMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjkyNjc2OEQ2RUYyMTFFODg1RTBBNDdEOTY0MDRDQzYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjkyNjc2OEU2RUYyMTFFODg1RTBBNDdEOTY0MDRDQzYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCOTI2NzY4QjZFRjIxMUU4ODVFMEE0N0Q5NjQwNENDNiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCOTI2NzY4QzZFRjIxMUU4ODVFMEE0N0Q5NjQwNENDNiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PtNo7OUAAAPVSURBVHja7JtdTxNBFIa3awtSEAlEAwp+AC1B460xGO/8UfQX8Ku80cidiQEjUQpWIX6EECpBA0GL55i3ZJzMbndmZ2Z3Kyd5swvZbnqePTNz3sm2tLy8HGQQ10g1nL8j7ZveaGVlJfWXKXtOfhLJjwn/WwKEVDDyDqFEmkLyoxHXTGQJo+w4+WnSPGkk4WcygeECQkiaQfJVw3t4hWETwiXSLSR/2dI9vcAoW7rHHdIsadDRw3IKIw2ECukukq94msOcwAgNPsNPe5H0lLTgEYAKxlKj0ZhIPYNrNEs8zudItzH+8xR/K4Map31XEKqY7GYMKyf3MOIgjCD5aaz5RQotGCoIo0j+RgGTN4IhQhhDazsZ9F/EwmAI43Ssw9n1eyhhhCj5MPg/ohPVLDGVVay9Czj2W3wlbVIFtHt1jP0G44z0Bckf6rbNRYfBye+SmpT8UVrvUDQYPN53kPxP2wYq7zB+kz4h+WPXLjJvMH6RWqRtSv7El4EagGP8ITi5LGCckj5w8jhnM3eddEwwDnwZKNnL+4JxgsRbqALVZo53A+ULBo/zLdJHjP8kmzneDZQrGDzDNzHjd/C0Z/H0yxrzmFcDZQvGEZLfxZpvYzPHu4EyhXGI5D8jeRebOUoYZQcGSrUZGre0cj+/if7e9WaOdwPVCwYn+J6052EzJ3MDFQXD9WZOLg2UDOPM0WZOIQxUF8aFgbowUBcGyp2BIiUyUPIrPkkqIc5A+awMlYGaVxioDQHGPdLbNMMhqmnRbYZcGKh6hIGawPdmCFNotw+wVGpBSNq0uIahMlD1Hgaqjeu5YhfxPz5+i+oWZQimTYttGKYGqoP2OwCoYZwP4+/tOAi2DFRaGLoGqg19FxRgiNSka2uokNMoCEU0UM+FpM9XOtIVVM2AYmW7j7nlCJCVS6SriS3KWpsaKIb2AsP3Ko6jUJKH2UHVHXYrqYgGqi187oHB9wnxWRa/bbcexnSGq4Hdt8TO3zPCOc9Fj0hPNCfjcRxb6AnSxAY1Tq0iGigu+8ekl5hIKxhGusFeoxkkHEOuKiNNcDU87D5NVIVO/FNFoeYElycYXFE3cb4uTLC9gq97I/oHk5c5s3aTsoESLXUi600AzkytdNYwZAMlx1DC+wyl2U/ICoZsoOLcbpKoqtZMm02RzTmDDdQa6RkqIA5AReEoeey/VswVlUajUbFdCbYrQzZQOiXe3WFuCm31DjrLedjrEq4/dQnBFIZsoHRiEMNlS9j5EoOBvIKjnAuknyT4+A2UroEyib2ESyQDWjPZXnMFQzZQRmHjJ4F/BBgAkd7MtAwGh44AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAA4CAYAAACi2pVMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzIyRDE0QzI2RUYyMTFFOEJERDFFNDM2OUYwQjg2RUUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzIyRDE0QzM2RUYyMTFFOEJERDFFNDM2OUYwQjg2RUUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDMjJEMTRDMDZFRjIxMUU4QkREMUU0MzY5RjBCODZFRSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDMjJEMTRDMTZFRjIxMUU4QkREMUU0MzY5RjBCODZFRSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Psvd/acAAAQXSURBVHja5JvbUhNBEIYnIRxERFRQRKiACrE8XeqtjwVPwCt5pVd6pzeilhhAEVDkpBzkICF267/FOM4ku7Ozs5u1q/6CMpu4/aWnp/9JKExOToqUYoA0QTohvSNt2rzI9PR07BsppZD8IGmc1Cf9Wz9pPQ6MVoBQIA2RbpJ6Ddf0pwWj5CH5YSTfE/I53mEkBaFIGkHy3Zav4Q2GawhtpDLpBqnL0WsmDqPk8HVGSddJnQm9YYnBiAuhHYmP4Xcf4RxGwXJO6ETyoylts3L8hkHzwqYvCF1Y72Ws/yyFNYywELrR6UfQ+bMca6TZKDCaQehB8sPY81spQsMwQehF8kMtmHxkGCqEPsz1gyJ/YYQRQLgIRzcg8h//wChKM35R/B9RNw1LG6TnpEukCn7mLfFVVMD3ZhNj3mBw8iuk95T8TtSxudVh8GnVMpLfi+sdWg0GJ79ImqPkf7g2UFmHUSN9RPIHSbvIrME4Ji2Q5in5I18GqgOWeU+ytRMpwDhC8qyfMHOXSQcEY8uXgWLHNovK8AnjkEsepX+MNyQ4zOmwdZNxDZQvGLzOq2h6NSQ81uQwJzQMVwYqKRh7SH4Jnb9TOs8I28+8GyhXMHZ5j8dezwPPGSl52/Heu4GyhbGN5D8j+bPScnTlbdYwRG2oW6RrA6Uehq5DJhhbSH5V6kVckdccn2fU0zBQzWAIJL8m9aJx9CLXHuILKiA1A2WCEcQFJH8lDQNVqNfrYmpqyvR4UpNh0DMEknd9mHOCHaXq0kC53v+DykjKQHHy+6GHpSaVoLv5NMbkMB5iEdNkJAPFX/IoWZTxeoZgsG/4wAYKfqJRtGEU2EDFWLvIwEClDUNnoK6iCkwG6j7mDe4RM6SvUSGYDJRvGDoDNa4zUOLvD2r7AEBgAHuIafRlGAgmAyVveT5g7EvJnyDhisFABffGc8ELXM+zwWvcW7u08zWshLAGKmkYcQzUMp7Ds8ctAHyK+yqjWrQQbA1UIxgVNCSfBmoVQ1IJvYA/Tb+H579CM91VIbgyUHFhBAZqRVq/NgZqQRrEupQKf0B6rNsdfBooHQyXBmoOXqQbDVPnInNtoIKJkeOO5o3lx9/k3UDNYK33G/paFTtNKO/gA4ZrA7WNHYCXz90G55S5NlDBlsc7wDnN47wMajYQsuoZ1FjCcNSOyhWaxrtsa6VbxUAFS6sijc9qrxCuIGQFhmqggm11VHPtJ9K3JCCkBUM1UHLoPiDia97GPVnKCgzVQOny4GVxXvz5TFJIM8ihLwhJwVANlCmGMWPMYNS+jevnw/wnSX0v2bWBahY1VMAj9IlnUq9IDYItDNVARRmXhTj9Y5MdNMRMQAgLQzVQUeNYnH5hYy5KFfiEYOoZqoGKMzI/CdMEdfFLgAEAIJrJ+dK/QKQAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MTIzRUM2QTI2MTA0MTFFNkExRTlEMEJDNEIxQUI5NjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MTIzRUM2QTM2MTA0MTFFNkExRTlEMEJDNEIxQUI5NjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMjNFQzZBMDYxMDQxMUU2QTFFOUQwQkM0QjFBQjk2NSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoxMjNFQzZBMTYxMDQxMUU2QTFFOUQwQkM0QjFBQjk2NSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PjnXl2wAAAEcSURBVHjazJLBSsNAFEVjzFfYxk3Q71C7dFW6T5fmH1z7D9mahTvpUnBh+w8iIq2rdtV+QN3FE3iGMNN5zICBPrg8yNwLdyYnrus6ClESOSbP8zPWE/qqquru73viMA9Yb+gSDbtn8QFzY5iLeYfG3fPEMKdizsQ8os67M8C8inmLbjB/mA3MSqeyf9D+0P3MwC3aoHO0oGKmBqiwZF1LKJXQhfpKhFasK7SWJ31RAxL6ltAnWnbPTprfHTJxFDhOlp7LacvSpHjUWcLszxJmf5YwWyxRx58lzD2zREWdJSpYLBHSWSIUzhKhY2SpfBi3LBX3M50lzP4sYfZnCbPFEnX8WcLcM0tU1FmigsUSIZ0lQuEsEfo/ln4FGAB7XKsiaikv4AAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABKCAYAAAAsXNNQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxRTMxNTAwMjhGNjdFNzExOEExQzhGMDRFNTY3MTgyMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMzFBODI2QTY3OTYxMUU3OTVDQkE0OUI5ODM0NzRDNyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyMzFBODI2OTY3OTYxMUU3OTVDQkE0OUI5ODM0NzRDNyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjRBMjk4RkYxOTQ2N0U3MTE4QTFDOEYwNEU1NjcxODIyIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFFMzE1MDAyOEY2N0U3MTE4QTFDOEYwNEU1NjcxODIyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+aJ/avQAABWVJREFUeNrs20tMG0cYAOBZexY/eYN5pODwSCihioRBoFJwD5UqUkHEiVN7Sg69I6JeewIBBQXcVAFDjuGQKhVN0/TCI6IcUhUiek258BIKvSHAPOz+v8ughdrA7uwa28xIvwbDsjKf/pl/ZhlLoVCIiKa9mQSBABSAAlAAiqa1UbW/IEmSUFNwiAzkwBOAnHgCkBNPAHLiYREWgBx4ApATTwxhTjwByIknhjAnngDkxBOAnHgCkBNPFBFOPJGBnHgCkBMPgwo8zXjmq56B3HjYU4GnCY/FlRzCeuDRqzoH6ol35TJQLzzlEJaowNOER+MGsLHRa+j9Z2dfG4HHXpOkzkAD8Y4z0CTwNOGFw+l0plKBpwlPxmuDwZBJUnvAMgGOdui5VKFR8P7bxplMSTeEY4UX/trhcGaYBJ5qPJldl5qaWkAFnia8cAWGGlJMBZ4mPOxDdrv9QyrwVOPJR/cJWSyWj6jAU40XHr6FhdeuU0rzqMBTjRfewuXm5noTdSt3mXj4WoK5zwEF5DMcxiaBpwovvIAuLS27AxsKe6I9zooHPCknJ6cgLS39LntTVOBdGM8MRcNcUlJ2H7ZwciIBxgVeYWGhra6uvuP9+82byjdHBV5kPJfLZWtvby/3eDyVZWVlt1++/PXm7Ozv/6sZ9Krj5efn29va2j6orq4uArRiiNK0tLRSWCTn7+3tmQ8PD4nfP0rm5xciPo2iyYZXVVVlaWhoSC0pKcmC5oBJPwc2/VlOpzMLYHKtVitGnizL2RB5ZrM5e3d3V9rZ2SEHBwcEwYLBINnf3yfb2zvE5/ORd+/+jvoYjyYTXk9Pz7XOzs4/T98Qn3liIA4iYSAQBsJhr8TDtr6+TgYHfWRzc/PMZ6A0mYat1+u9FQ0PYRBIiciCfR+vQ6yFhbfhYQuZeQIvAmRcrQO5z6rAfHb7PLzTwQAZ0IsXv5Dnz38iF31ST5MFD4sCzHk1kTIwUvaxYcuGLBQMMjb2hLx580fEjIvnOVAXPKiaZtij1kSDY3hs7lPOdxsbG2Ro6HuyurqqCi8eAHXBw767u7sCKmq6Eo8BKuGUxQJh5ufnyfCwP1xM1OJdNqBuePh3NDU11Z01ZJUFg2Xes2c/komJn0++KRV4lwmoKx6G2+1uioTHsg7nOJaVW1tb5NGjH8ji4l9RwS7671uaDHhFRUW2zMzM+kh4ymKBsbS0RB4+HIT13T/ceJcBqDseRn9//yfQ29kQjVRpMTtfvfqNPH06Hv6+Hnhwz5iuAw3Bw6itrf1cOccxOAyE297eJiMjo2Rubu4E0mksLacuaKLjlZeXO2G7+6myUCAgy7rl5WXS3z8AS5Q13fFiBWgYHsbAwMAd6B0MjlVZxJuenoHF8RhsyQJnDlOe8z40kfHwZx6Pp02ZfYiHe9iRET+ZmXl97hzHe1iKJjKez+f72GazVSiH7MrKKunr+w76FcPxjAQ0HA+va2lpuceGLMbU1HQ48wKBQEzwjAKMCd74+Phd2PtWICBuw/z+MTI5OXnu0kTv8400EfFaW1sLvF7v16zK9vb2Qb8Ss6w7cUsdT6jGBI9SKi8uLvZkZ2dXY8Y9fjwcCgT2pPOwjDhZC9NGgCZS5mFMTEx86XA4qgcHh2DITh3ZSFGRjD6STBMJr6urqwYy76uOjs7g2tqa6TLh9AI0Gu/4PEpzc3OOy+X69sGDb3DBbIrVMDUS0Gi848+jVVbeuuF2X+8dHX1iQyQjq6pqBI1FhOtj8iT6Z8+OAS0Wq9Xtdtenp2d8kZKS0nh0j7hA4y0ieuCZodFMaNABlTXDYrHkpaRYigHrhizLVVBtK+A6SzyBRWr/CjAAg7GvjlpzO8kAAAAASUVORK5CYII="},function(e,t,a){(function(t,r,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=a(6),s=o(i),l=a(8),c=o(l),h=a(12),d=o(h),u=a(20).default,p=a(830),m=(a(168),a(10)),f=a(5),g=f({displayName:"Text",mixins:[m,Fotor.mixin],getReady:!1,isMount:!1,getInitialState:function(){return{textListData:[]}},componentWillUnmount:function(){Fotor.mainCanvas.off(c.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.off(c.default.EXIT_EDITOR_MODE,this.update),Fotor.loginStateManager.off(d.default.LOGIN,this.update),this.isMount=!1,this.getReady=!1},componentDidMount:function(){Fotor.mainCanvas?this.init():Fotor.app.on(s.default.APP_INIT,this.init),this.isMount=!0},init:function(){Fotor.mainCanvas.on(c.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.on(c.default.EXIT_EDITOR_MODE,this.update),Fotor.loginStateManager.on(d.default.LOGIN,this.update),0==Fotor.fontManager.fontList.length?Fotor.app.on("fontList:loadComplete",this.loadData):this.loadData()},update:function(){this.isMount&&this.forceUpdate()},checkAbrilLoadFont:function(e){t(".textListItemDiv").eq(0).removeClass("disable"),Fotor.fontManager.loadFont("Trocchi",["n4"],this.checkTrocchiLoadFont)},checkTrocchiLoadFont:function(e){t(".textListItemDiv").eq(1).removeClass("disable"),Fotor.fontManager.loadFont("Sintony",["n4"],this.checkSintonyLoadFont)},checkSintonyLoadFont:function(e){t(".textListItemDiv").eq(2).removeClass("disable")},loadData:function(){this.forceUpdate();var e=["Abril Fatface","Trocchi","Sintony"];e=e;var t=this,a=[{items:[{img:"Abril-Fatface",fontName:e[0],imgWidth:"263",imgHeight:"43",fontSize:"42",label:0},{img:"Trocchi",fontName:e[1],imgWidth:"296",imgHeight:"33",fontSize:"32",label:1},{img:"Sintony",fontName:e[2],imgWidth:"230",imgHeight:"15",fontSize:"16",label:2}]}];this.setState({textListData:a}),t.updateScrollerPosition()},updateScrollerPosition:function(){if(Fotor.toolbarManager.designMode){var e=Fotor.toolbarManager.get("text");this.refs.scrollArea&&this.refs.scrollArea.scrollYTo(e)}this.getReady=!0,this.removeLoading()},findTextGroupDOM:function(e){if(t(e).hasClass("text-group-sticker-inner"))return e;var a=t(e).parent();return this.findTextGroupDOM(a)},handleScroll:function(e){if(e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200),this.getReady){var a=r.findDOMNode(this.refs.scrollArea);a&&setTimeout(function(){var e=t(a).find(".scrollarea-content").css("margin-top");e=e.replace("px",""),e=Math.abs(e),Fotor.toolbarManager.save("text",e)},300)}},render:function(){var e="editor"==Fotor.routerManager.moduleName&&Fotor.mainCanvas&&!Fotor.mainCanvas.editorMode;return n.createElement("div",{className:"toolbar"},n.createElement("div",{className:"toolbar-cover",style:{display:e?"block":"none"}}),n.createElement("div",{className:"toolbar-loading"},n.createElement("div",{className:"loading-round"},n.createElement("div",null),n.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),n.createElement("div",{className:"toolbar-title"},Fotor.globalConfig.lang.design_workspace_material_textButton),n.createElement("div",{className:"toolbar-list",style:{top:"60px"}},n.createElement(u,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},n.createElement("div",{className:"toolbar-list-with-padding"},this.state.textListData.map(function(e,t){return n.createElement(p,{data:e,key:t})})),n.createElement("div",{className:"paddingT15","data-guanggao-group":!0,style:{display:FotorUser.checkIsVip()?"none":"block",position:"relative",width:"300px"}},n.createElement("div",{id:"text-ad","data-guanggao":"app_text",style:{position:"relative"}})))))}});e.exports=g}).call(t,a(1),a(15),a(0))},function(e,t,a){(function(t){var r=a(13),n=function(e){return e&&e.__esModule?e:{default:e}}(r);a(831);var o=a(833),i=a(5),s=i({displayName:"TextListGroup",getInitialState:function(){return{needAddText:!1}},componentWillUnmount:function(){Fotor.app.off(n.default.THEME_CHANGE,this.update)},componentDidMount:function(){Fotor.app.on(n.default.THEME_CHANGE,this.update),"text"==Fotor.routerManager.sampleToolName&&(Fotor.routerManager.sampleToolName=void 0,this.setState({needAddText:!0}))},componentWillReceiveProps:function(e){},update:function(){this.forceUpdate()},render:function(){var e=this;return t.createElement("div",{className:"textListGroupDiv"},this.props.data.items.map(function(a,r){return r==e.props.data.items.length?t.createElement(o,{ref:"text_"+r,needAddText:0==r&&e.state.needAddText,data:a,beLast:"true",key:r}):t.createElement(o,{ref:"text_"+r,needAddText:0==r&&e.state.needAddText,data:a,key:r})}))}});e.exports=s}).call(t,a(0))},function(e,t,a){var r=a(832);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){t=e.exports=a(2)(!1),t.push([e.i,".textListGroupDiv {\n  margin: 5px 0 0 4px; }\n",""])},function(e,t,a){(function(t,r,n){function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a(834);var i=a(5),s=a(167),l=i({displayName:"TextListItem",getInitialState:function(){return{BackImgWidth:null,backImgHeight:null,backImg:null,marginBottom:null,parseIntWidth:null,parseIntHeight:null,textListItemDiv:null,textData:null}},componentDidMount:function(){this.state.textListItemDiv=t.findDOMNode(this.refs.textListItemDiv)},getCurrentText:function(e){var t,a,r;return"zh_CN"==FotorUtils.I18N.getLocale()?(t="点击添加标题",a="点击添加副标题",r="点击添加正文"):"zh_TW"==FotorUtils.I18N.getLocale()?(t="點擊添加標題",a="點擊添加副標題",r="點擊添加正文"):"ja_JP"==FotorUtils.I18N.getLocale()?(t="タイトル",a="サブタイトル",r="本文"):"fr_FR"==FotorUtils.I18N.getLocale()?(t="Titre",a="Sous-titre",r="Textes"):"de_DE"==FotorUtils.I18N.getLocale()?(t="Überschrift",a="Unterrubrik",r="Körpertext"):"es_ES"==FotorUtils.I18N.getLocale()?(t="Encabezado",a="Subtítulo",r="Cuerpo del texto"):"ru_RU"==FotorUtils.I18N.getLocale()?(t="Заголовок",a="Подзаголовок",r="Основной текст"):"pt_BR"==FotorUtils.I18N.getLocale()?(t="Título",a="Sub-título",r="Texto principal"):(t="Add heading",a="Add subheading",r="Add a little bit of body text"),0==e?t:1==e?a:2==e?r:void 0},addText:function(e){if(!r(this.refs.textListItemDiv).hasClass("disable")){var t={},a=this.getCurrentText(this.state.textData.label);t.txtBoxConfig=this.setTxtBoxConfig(a),t.text="",Fotor.mainCanvas.placeObject("fotor/text",t)}},handleDragStart:function(e){if(!r(this.refs.textListItemDiv).hasClass("disable")){var t=r(this.refs.textListItemDiv).attr("data-thumb"),a=document.createElement("img");a.src=t;try{e.dataTransfer.setDragImage(a,a.width/2,a.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";var n={},o=this.getCurrentText(this.state.textData.label);n.txtBoxConfig=this.setTxtBoxConfig(o),n.text="";Fotor.dragHelper.setCurrentDragObject(n,"fotor/text"),e.dataTransfer.setData("text","fotor/text")}},setTxtBoxConfig:function(e){var t,a,r,n=this.state.textData.fontSize,i=parseInt(this.state.textData.imgWidth),s=parseInt(this.state.textData.imgHeight);return i/s>1?(a=.5*Fotor.mainCanvas.canvas.documentWidth,r=a/i,Math.round(n*r)<12?(r=12/n,i*=r,s*=r,n=12):(i=a,s*=r,n=Math.round(n*r))):(a=.5*Fotor.mainCanvas.canvas.documentHeight,r=a/s,Math.round(n*r)<12?(r=12/n,i*=r,s*=r,n=12):(s=a,i*=r,n=Math.round(n*r))),this.setState({parseIntWidth:i,parseIntHeight:s,backImgWidth:i.toString()+"px",backImgHeight:s.toString()+"px"}),t={defaultText:e,fontSize:n,fontFamily:this.state.textData.fontName,textAlign:"left",left:0,top:0,originX:"center",originY:"center"},o(t,"textAlign","center"),o(t,"width",i),o(t,"height",s),o(t,"adjustScale",1),o(t,"stretchMode","any"),o(t,"charSpacing",0),o(t,"strokeWidth",0),o(t,"caching",!0),t},componentWillReceiveProps:function(e){if(e&&null==this.state.backImgWidth&&null==this.state.backImgHeight&&null==this.state.backImg&&null==this.state.marginBottom){var t;t="true"==e.beLast?"20px":"14px",this.state.textData=e.data,this.state.parseIntWidth=parseInt(e.data.imgWidth),this.state.parseIntHeight=parseInt(e.data.imgHeight),this.state.backImgWidth=parseInt(e.data.imgWidth).toString()+"px",this.state.backImgHeight=parseInt(e.data.imgHeight).toString()+"px",this.state.marginBottom=t,this.forceUpdate(),e.needAddText&&this.addSampleText(),Fotor.fontManager.loadFont(e.data.fontName,["n4"],this.checkLoadFont)}},checkLoadFont:function(){r(this.refs.textListItemDiv).hasClass("disable")&&r(this.refs.textListItemDiv).removeClass("disable")},addSampleText:function(){r(this.refs.textListItemDiv).hasClass("disable")?setTimeout(this.addSampleText,1e3):this.addText()},render:function(){var e="black"==Fotor.globalConfig.theme?"white/":"",t=FotorUtils.I18N.getLocale();t=""!=t?"-"+t:"-en_US";var r=a(836)("./"+e+this.props.data.img+t+".png");return n.createElement("div",{ref:"textListItemDiv",className:"textListItemDiv disable","data-thumb":r,draggable:"true",onClick:this.addText,onDragStart:this.handleDragStart},n.createElement("img",{src:r}),n.createElement("div",{className:"fontLoadingIcon"},n.createElement(s,null)))}});e.exports=l}).call(t,a(15),a(1),a(0))},function(e,t,a){var r=a(835);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){t=e.exports=a(2)(!1),t.push([e.i,".textListItemDiv {\n  position: relative;\n  width: auto;\n  cursor: pointer;\n  padding: 8px 5px 0;\n  text-align: center;\n  transition: opacity .5s !important;\n  -webkit-transition: opacity .5s !important;\n  -moz-transition: opacity .5s !important; }\n  .textListItemDiv .fontLoadingIcon {\n    display: none;\n    top: 50%;\n    right: 0; }\n  .textListItemDiv.disable img {\n    opacity: .3;\n    cursor: not-allowed; }\n  .textListItemDiv.disable .fontLoadingIcon {\n    display: block; }\n\n.textListItemDiv:hover {\n  background: #dddde3; }\n  .textListItemDiv:hover.disable {\n    background: none; }\n    .textListItemDiv:hover.disable img {\n      opacity: .3;\n      cursor: not-allowed; }\n\n.textListItemDiv img {\n  max-width: 90%; }\n\n.black .textListItemDiv:hover {\n  background: rgba(255, 255, 255, 0.1); }\n",""])},function(e,t,a){function r(e){return a(n(e))}function n(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./Abril-Fatface-de_DE.png":837,"./Abril-Fatface-en_US.png":838,"./Abril-Fatface-es_ES.png":839,"./Abril-Fatface-fr_FR.png":840,"./Abril-Fatface-ja_JP.png":841,"./Abril-Fatface-pt_BR.png":842,"./Abril-Fatface-ru_RU.png":843,"./Abril-Fatface-zh_CN.png":844,"./Abril-Fatface-zh_TW.png":845,"./Sintony-de_DE.png":846,"./Sintony-en_US.png":847,"./Sintony-es_ES.png":848,"./Sintony-fr_FR.png":849,"./Sintony-ja_JP.png":850,"./Sintony-pt_BR.png":851,"./Sintony-ru_RU.png":852,"./Sintony-zh_CN.png":853,"./Sintony-zh_TW.png":854,"./Trocchi-de_DE.png":855,"./Trocchi-en_US.png":856,"./Trocchi-es_ES.png":857,"./Trocchi-fr_FR.png":858,"./Trocchi-ja_JP.png":859,"./Trocchi-pt_BR.png":860,"./Trocchi-ru_RU.png":861,"./Trocchi-zh_CN.png":862,"./Trocchi-zh_TW.png":863,"./white/Abril-Fatface-de_DE.png":864,"./white/Abril-Fatface-en_US.png":865,"./white/Abril-Fatface-es_ES.png":866,"./white/Abril-Fatface-fr_FR.png":867,"./white/Abril-Fatface-ja_JP.png":868,"./white/Abril-Fatface-pt_BR.png":869,"./white/Abril-Fatface-ru_RU.png":870,"./white/Abril-Fatface-zh_CN.png":871,"./white/Abril-Fatface-zh_TW.png":872,"./white/Sintony-de_DE.png":873,"./white/Sintony-en_US.png":874,"./white/Sintony-es_ES.png":875,"./white/Sintony-fr_FR.png":876,"./white/Sintony-ja_JP.png":877,"./white/Sintony-pt_BR.png":878,"./white/Sintony-ru_RU.png":879,"./white/Sintony-zh_CN.png":880,"./white/Sintony-zh_TW.png":881,"./white/Trocchi-de_DE.png":882,"./white/Trocchi-en_US.png":883,"./white/Trocchi-es_ES.png":884,"./white/Trocchi-fr_FR.png":885,"./white/Trocchi-ja_JP.png":886,"./white/Trocchi-pt_BR.png":887,"./white/Trocchi-ru_RU.png":888,"./white/Trocchi-zh_CN.png":889,"./white/Trocchi-zh_TW.png":890};r.keys=function(){return Object.keys(o)},r.resolve=n,e.exports=r,r.id=836},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-de_DE.6db987e9d2cc82bdc9797e14ecc4047d.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-en_US.789a68ea6e8a89657946c724706819ec.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-es_ES.c73d4065a2d5cdb0e536067d9bb06323.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-fr_FR.3a10ba5bdad86715fcf711599b7cd184.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-ja_JP.5a0477f2462431500794bd52055c7b54.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-pt_BR.5fe956ed13885fd8ffe205a91b15ce9e.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-ru_RU.8e31278d52099f1d3e0bb31566ebcf7c.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-zh_CN.f9dadae88b681de269114a54a27ab437.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-zh_TW.70319cfd0c6edee5dba23b0ad62628d2.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-de_DE.7bbbc96172d36d2652d98f1a5f70d8e8.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-en_US.271a6eea9a595c904ee9360a8f0111f8.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-es_ES.7a37e43596deb65f71d1fe7bef28827c.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-fr_FR.44409214c18333029e89fe2c171be144.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-ja_JP.08abaaf5c32895fe63c4354ce48ff378.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-pt_BR.457a9161dade627078e382eb1b01a540.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-ru_RU.d667dcc10750e1581174e4de991f4f08.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-zh_CN.82a0de1621f8c326c4c0ee0d6c643beb.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-zh_TW.053698511f129926435491c91c05ec21.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-de_DE.52399efb427c9a8d079ffea874a034bf.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-en_US.1df8fa7dfa82cc853eba88c01c05f459.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-es_ES.72023998766ca724438616087a0676a2.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-fr_FR.a132d54d2f93bf27d9aec1b06a6492a4.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-ja_JP.1cedbf02727d6d514964e3c493650c43.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-pt_BR.e16a96ade774f9d9cc18a684b8c67d42.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-ru_RU.d5bc4165c5d4f9b3f488441015e8ca69.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-zh_CN.ca46cd8b3da613b9e6de9c828e86156f.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-zh_TW.e6b0ec53e99551d0418bcea8b9fa1092.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-de_DE.5ad1e4f16f2852c381ccf3b30abe2955.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-en_US.8452e8b18dec800dae14bd00c3965376.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-es_ES.b41ece96a89adfd879ccd110dcf850de.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-fr_FR.42b26fa77814a02dce212a0b9bf46a88.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-ja_JP.bc94f53ca876a1851d2b23dd13f6b5bb.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-pt_BR.159d9640ccccab17b7ae9de49a8e6bc1.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-ru_RU.7d8d1a20cfa90fc723b60eb0382c0550.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-zh_CN.b6929cad2adb0b9a0f20e9c59e91e916.png"},function(e,t,a){e.exports=a.p+"images/textList/Abril-Fatface-zh_TW.39766c33ceb235b22c18d54d9f295d41.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-de_DE.f2c0eb7a9634268d184a12edc2aa47ca.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-en_US.235c68ec50bb2e14c342dc072b25996d.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-es_ES.18f4b2e7563148af21e30b1211c77ebd.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-fr_FR.b321dd1352ab1beb324a415d5735e1a9.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-ja_JP.af34e2b4c20bc6c21c332bca827e7ae6.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-pt_BR.5c3fd1c4bd91329b9e92272008b7efcf.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-ru_RU.34624626fd7052b192d604934fc496b7.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-zh_CN.aefcb8b166fc2bd84c3f6559fde96f99.png"},function(e,t,a){e.exports=a.p+"images/textList/Sintony-zh_TW.c3c42ffb33b620639925df798f703ea9.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-de_DE.e9daeba48378036e9f19cad5992a8bdc.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-en_US.d0a7ce50cfd19bcf869f779e48698254.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-es_ES.03692cd6b04180b3ad13a46eb098648f.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-fr_FR.f0db34a589bcc1cd5a171be14ab4e47a.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-ja_JP.2d040b0c5fb0e39da5b6a972c97169d2.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-pt_BR.fa14e432cb8e4e44fc01df0c24c32e94.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-ru_RU.118e24118f15aa6c296b381e19ef1413.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-zh_CN.3cc5244eb9bf208be077ce419ac1f2ce.png"},function(e,t,a){e.exports=a.p+"images/textList/Trocchi-zh_TW.f1d5d944abe9079fbffc43b15d9c967e.png"},function(e,t,a){(function(t,r,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=a(892),s=o(i),l=a(914),c=o(l),h=a(13),d=o(h),u=a(12),p=o(u),m=a(779),f=o(m),g=a(34),v=o(g),b=a(6),_=o(b),y=a(8),x=o(y),C=a(915);a(916);var w=a(20).default,A=a(10),E=a(920),F=a(921),k=a(932),M=a(934),S=a(953),T=a(5),D=T({displayName:"Sticker",mixins:[A,Fotor.mixin],getReady:!1,mounted:!1,curStickerState:99,selectDropVal:"0",getInitialState:function(){return{items:[],favorItems:[],recentItems:[],isAdmin:!1,loadTime:null,loadFinish:!1,favorAnimatePosition:{top:0,left:0,width:0,height:0,content:""},isSearching:!1,keyword:"",autoSearch:!1,showState:localStorage.getItem("sticker-display-format")?localStorage.getItem("sticker-display-format"):0,showDragPop:!1,width:984,height:678,x:20,y:20,catArr:[{key:"0",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_all},{key:"1",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_image_shape},{key:"2",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_shapes},{key:"3",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_line},{key:"4",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_Illustrations},{key:"5",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_icons}],reachedBottom:!1,isLoadingMore:!1,stateArr:[{key:"99",val:"所有"},{key:"0",val:"已上线"},{key:"1",val:"内部测试"},{key:"2",val:"已下线"},{key:"3",val:"修改中"},{key:"4",val:"已测试"}]}},reloadData:function(){this.loadData(!0)},languageSwitch:function(){var e=this;e.pageNo=1,0==this.state.showState&&(Fotor.routerManager.childModuleName&&"sticker"==Fotor.routerManager.childModuleName||"block"==document.querySelectorAll(".toolbar-show")[1].style.display)&&e.addLoading(),e.setState({items:[],catArr:[{key:"0",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_all},{key:"1",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_image_shape},{key:"2",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_shapes},{key:"3",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_line},{key:"4",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_Illustrations},{key:"5",val:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_icons}]},function(){e.loadData()})},loadMoreData:function(){var e=this;e.setState({isLoadingMore:0==e.state.showState});var t=FotorUtils.I18N.getLocale();"zh_CN"!=t&&(t="en_US");var a=Fotor.loginStateManager.isAdmin(),r="stickers_"+t,n=Fotor.globalConfig.config.api.stickers+"?lang="+t;99!=this.curStickerState&&a?(r+="_state_"+this.curStickerState,n+="&flag=1&groupStateType="+this.curStickerState):a&&(n+="&flag=1"),Fotor.services.loadData(r,n,Fotor.globalConfig.designMode,!1,function(t,a,r){e.setDataLater(t,a),e.removeLoading()},!0,16,e.pageNo)},loadData:function(e,t){e=!!e;var a=this;if(null==this.state.loadTime)this.state.loadTime=new Date;else{var r=new Date;if(r.getTime()-this.state.loadTime.getTime()<500)return!1;this.state.loadTime=r}var n=FotorUtils.I18N.getLocale();"zh_CN"!=n&&(n="en_US");var o=Fotor.globalConfig.config.api.stickers+"?lang="+n;o+=Fotor.loginStateManager.isAdmin()?"&flag=1":"",Fotor.services.loadData("stickers_"+n,o,Fotor.globalConfig.designMode,!1,function(e,r,n){a.setDataLater(e,r),""!=t&&void 0!=t&&t(),a.removeLoading()},!0,16,1)},setDataLater:function(e,t){var a=this;a.mounted?a.setState({items:(this.state.items||[]).concat(e),isLoadingMore:!1,loadFinish:t},function(){if(setTimeout(a.updateScrollerPosition,300),1==a.pageNo&&!t)var e=setInterval(function(){var t=a.refs.scrollArea;t&&(clearInterval(e),t.state.realHeight<=t.state.containerHeight&&(a.pageNo++,a.loadMoreData()))},200)}):setTimeout(function(){a.setDataLater(e)},100)},updateScrollerPosition:function(){if(Fotor.toolbarManager.designMode){if(""!=Fotor.toolbarManager.get("sticker_search_keyword"));else{var e=Fotor.toolbarManager.get("sticker");this.refs.scrollArea&&this.refs.scrollArea.scrollYTo(e)}}this.getReady=!0},checkNeedtoSearch:function(){var e=Fotor.toolbarManager.get("sticker_search_keyword");""!=e&&(this.setState({isSearching:!0,keyword:e,autoSearch:!0}),this.refs.searchBar&&this.refs.searchBar.updateSearchState(e))},scrollerToSearch:function(){var e=Fotor.toolbarManager.get("sticker_search");this.refs.scrollArea&&this.refs.scrollArea.scrollYTo(e),this.setState({autoSearch:!1})},stickerFavorUpdate:function(e){var t=e.params[0],a=this.state.items;a.map(function(e,a){e.items.map(function(e,a){e.id==t&&(e.favor=0)})}),this.setState({items:a})},componentDidUpdate:function(){this.refs.scrollArea.handleWindowResize()},componentWillUnmount:function(){this.mounted=!1,Fotor.loginStateManager.off(p.default.LOGIN,this.strongLoadData),Fotor.app.off(v.default.STICKER_FAVOR_REMOVE,this.stickerFavorUpdate),t("#sticker-favor-animate").removeClass("rotationAndZoomOut"),t("#sticker-favor-animate").css("display","none"),Fotor.app.off(_.default.INIT_FINISHED,this.init),Fotor.app.off(d.default.LANGUAGE_CHANGE,this.languageSwitch),Fotor.app.off(_.default.INIT_FINISHED,this.checkNeedtoSearch),Fotor.mainCanvas&&(Fotor.mainCanvas.off(x.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.off(x.default.EXIT_EDITOR_MODE,this.update)),this.getReady=!1},strongLoadData:function(){Fotor.loginStateManager.isAdmin()&&(this.markPosition(),this.loadData(!0))},componentDidMount:function(){this.mounted=!0,this.pageNo=1,this.loadData(),Fotor.loginStateManager.on(p.default.LOGIN,this.strongLoadData),Fotor.app.on(v.default.STICKER_FAVOR_REMOVE,this.stickerFavorUpdate),Fotor.app.on(d.default.LANGUAGE_CHANGE,this.languageSwitch),t("#sticker-favor-animate").removeClass("rotationAndZoomOut"),t("#sticker-favor-animate").css("display","none"),Fotor.toolbarManager?this.checkNeedtoSearch():Fotor.app.on(_.default.INIT_FINISHED,this.checkNeedtoSearch),Fotor.mainCanvas?this.init():Fotor.app.on(_.default.INIT_FINISHED,this.init);var e=this;C.EventEmitter.subscribe("detectShowState",function(){e.setState({showState:1})})},init:function(){Fotor.mainCanvas.on(x.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.on(x.default.EXIT_EDITOR_MODE,this.update),this.update()},update:function(){this.mouted&&this.forceUpdate()},handleScroll:function(e){0!=e.realHeight&&(e.topPosition&&e.topPosition>=500?this.refs.stickerGridList&&this.refs.stickerGridList.showTopName():e.topPosition&&e.topPosition<500&&this.refs.stickerGridList&&this.refs.stickerGridList.hideTopName(),e.topPosition+e.containerHeight==e.realHeight&&(this.state.isSearching?this.refs.searchResult.loadMore():(0!=this.state.showState||this.state.loadFinish||this.state.isLoadingMore||(this.pageNo++,this.loadMoreData()),1==this.state.showState&&this.refs.stickerGridList&&this.refs.stickerGridList.loadMore())),e.topPosition&&e.topPosition>=155?this.state.isSearching&&this.refs.searchResult.showSearchFilter:e.topPosition&&e.topPosition<155&&this.state.isSearching&&this.refs.searchResult.hideSearchFilter,e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200),this.hideTip(),this.getReady&&this.markPosition())},markPosition:function(){var e=this,a=r.findDOMNode(this.refs.scrollArea);a&&setTimeout(function(){var r=t(a).find(".scrollarea-content").css("margin-top");r=r.replace("px",""),r=Math.abs(r),Fotor.toolbarManager.save("sticker",r),e.state.isSearching&&e.state.keyword?(Fotor.toolbarManager.save("sticker_search",r),Fotor.toolbarManager.save("sticker_search_keyword",e.state.keyword)):(Fotor.toolbarManager.save("sticker_search",""),Fotor.toolbarManager.save("sticker_search_keyword",""))},300)},showTip:function(e,a,r){t("#tip").remove(),t("body").append('<div id="tip">'+r+"</div>"),t("#tip").css({left:e+10,top:a,opacity:0,display:"block"}).stop().animate({left:e,opacity:1},200)},hideTip:function(){t("#tip").remove()},setSearching:function(e,t){var a=this;t=t||"",this.refs.stickerGridList&&this.refs.stickerGridList.hideTopName(),this.setState({isSearching:e,keyword:t}),setTimeout(function(){return a.markPosition},100)},resetSearch:function(){this.refs.searchResult&&this.refs.searchResult.resetSearch()},isSearchFinish:function(){return this.refs.searchResult&&this.refs.searchResult.isSearchFinish()},cancelSearch:function(){this.setState({keyword:""}),this.refs.searchResult&&this.refs.searchResult.cancelSearch()},saveFavorData:function(e){this.setState({favorItems:e})},saveRecentData:function(e){this.setState({recentItems:e})},scrollToTop:function(){this.state.isSearching?this.refs.scrollArea.scrollYTo(0):this.refs.stickerGridList.scrollToTop()},handleSelectChange:function(e){this.scrollToTop(),this.selectDropVal=e,this.refs.searchResult.handleSelectChange(e)},handleSelectSet:function(e){var t=this;this.refs.selectDrop&&(this.refs.selectDrop.setValue("0"),t.state.keyword&&t.refs.searchResult.handleSelectChange(0,t.state.keyword))},handleStateChange:function(e){if(e==this.curStickerState)return!1;var t=this;this.curStickerState=e,this.state.items=[],this.state.loadFinish=!1,this.pageNo=1;var a=FotorUtils.I18N.getLocale();"zh_CN"!=a&&(a="en_US");var r="stickers_"+a,n=Fotor.globalConfig.config.api.stickers+"?lang="+a+"&flag=1";99!=e&&(r+="_state_"+e,n+="&groupStateType="+e),Fotor.services.loadData(r,n,Fotor.globalConfig.designMode,!1,function(e,a,r){t.setDataLater(e,a)},!0,16,1)},render:function(){var e="editor"==Fotor.routerManager.moduleName&&Fotor.mainCanvas&&!Fotor.mainCanvas.editorMode,t=this.selectDropVal;return n.createElement("div",{className:"toolbar"},n.createElement("span",{id:"sticker-top-name",style:{display:"none"}}),n.createElement("span",{id:"sticker-to-top",onClick:this.scrollToTop,style:{display:"none"}}),this.state.isSearching&&this.state.keyword&&n.createElement("div",{id:"sticker-top-search-filter"},n.createElement("div",{className:"search-select-dropdown"},n.createElement(Fotor.ui.SelectDrop,{ref:"selectDrop",onChange:this.handleSelectChange,defaultValue:t,items:this.state.catArr,itemHeight:26}))),this.state.showDragPop&&n.createElement(s.default,{hideDragPop:this.hideDragPop,showTip:this.showTip,hideTip:this.hideTip,tool:this,keyword:this.state.keyword,favorItems:this.state.favorItems,showFavorAnimation:this.showFavorAnimation}),n.createElement("div",{className:"toolbar-cover",style:{display:e?"block":"none"}}),n.createElement("div",{className:"toolbar-loading"},n.createElement("div",{className:"loading-round"},n.createElement("div",null),n.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),n.createElement(c.default,{ref:"searchBar",tool:this,isSearching:this.state.isSearching,autoSearch:this.state.autoSearch,handleSelectSet:this.handleSelectSet}),n.createElement(f.default,{ref:"helpTip"}),n.createElement("div",{className:"toolbar-list",ref:"stickerList",id:"sticker-list"},n.createElement(w,{className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:5,minScrollSize:40,onScroll:this.handleScroll,ref:"scrollArea"},this.state.isSearching&&n.createElement(S,{keyword:this.state.keyword,ref:"searchResult",scroller:this.refs.scrollArea,showTip:this.showTip,hideTip:this.hideTip,tool:this,stickerList:this.refs.stickerList,favorItems:this.state.favorItems,isSearching:this.state.isSearching,showFavorAnimation:this.showFavorAnimation,triggerPopDrag:this.showDragPop}),n.createElement("div",{className:"sticker",style:{display:this.state.isSearching?"none":"block",minHeight:Fotor.loginStateManager.isAdmin()?"370px":"auto"}},n.createElement("div",{className:"sticker-filter"},n.createElement("a",{"data-state":"0",title:Fotor.globalConfig.lang.design_workspace_material_sticker_tip_sticker_packs,className:"sticker-filter-type1 "+(0==this.state.showState?"active":""),onClick:this.changeShowState}),n.createElement("a",{"data-state":"1",title:Fotor.globalConfig.lang.design_workspace_material_sticker_tip_categories,className:"sticker-filter-type2 "+(1==this.state.showState?"active":""),onClick:this.changeShowState}),n.createElement("a",{title:Fotor.globalConfig.lang.design_workspace_material_sticker_tip_display_all,className:"sticker-filter-type3",onClick:this.showDragPop})),!Fotor.frameMode&&n.createElement(F,{scroller:this.refs.scrollArea,showTip:this.showTip,hideTip:this.hideTip,tool:this,displayFormat:this.state.showState,ref:"stickerUserOwn"}),0==this.state.showState&&n.createElement(n.Fragment,null,Fotor.loginStateManager.isAdmin()&&!Fotor.noUserFunction&&n.createElement("div",{className:"filter-state",style:{margin:"0 19px 0 5px"}},n.createElement(Fotor.ui.SelectDrop,{ref:"selectDrop",defaultValue:"99",onChange:this.handleStateChange,items:this.state.stateArr,itemHeight:26})),n.createElement(k,{items:this.state.items,scroller:this.refs.scrollArea,showTip:this.showTip,hideTip:this.hideTip,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip,tool:this,favorItems:this.state.favorItems,stickerList:this.refs.stickerList,showFavorAnimation:this.showFavorAnimation})),1==this.state.showState&&n.createElement(M,{scroller:this.refs.scrollArea,showTip:this.showTip,hideTip:this.hideTip,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip,helpTipGif:a(781),helpTip:Fotor.globalConfig.lang.common_stickerlist_shapeImage_helpTip,tool:this,favorItems:this.state.favorItems,showFavorAnimation:this.showFavorAnimation,ref:"stickerGridList"}),1==this.state.showState&&n.createElement("div",{className:"paddingT15","data-guanggao-group":!0,style:{display:FotorUser.checkIsVip()?"none":"block",position:"relative",width:"300px"}}),n.createElement("div",{className:"loading-page",style:{display:this.state.isLoadingMore?"block":"none"}},n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null))),n.createElement("div",{id:"sticker-favor-animate",dangerouslySetInnerHTML:{__html:this.state.favorAnimatePosition.content}}),n.createElement("div",{style:{height:"50px"}}," "))),Fotor.loginStateManager.isAdmin()&&!this.props.noAdmin&&n.createElement(E,{data:this.state.items,calltoParent:this.loadData,tool:this}))},showFavorAnimation:function(e,a,r){if(!Fotor.frameMode){t("#sticker-favor-animate").removeClass("rotationAndZoomOut");var n=parseInt(t("#sticker-list").find(".scrollarea-content").css("margin-top").replace("px","")),o=t(a).offset().top-t("#sticker-list").offset().top-n,i=t(a).offset().left-t("#sticker-list").offset().left;this.setState({favorAnimatePosition:{content:'<img src="'+t(a).find("img").attr("src")+'" />'}}),t("#sticker-favor-animate").css({top:o,left:i,width:t(a).width,height:t(a).height});var s=-30;if(!r){var l=t("#sticker-own-list").find(".title-drop").eq(0);s=t(l).offset().top}var c=s-t("#sticker-list").offset().top-n;Math.abs(o-c)>900&&(c=o-900),r&&(c=o-900);var i=0;setTimeout(function(){t("#sticker-favor-animate").css("display","block"),t("#sticker-favor-animate").addClass("rotationAndZoomOut"),t("#sticker-favor-animate").stop().animate({top:c,left:i},500,function(){t(this).removeClass("rotationAndZoomOut"),t(this).css("display","none")})},100)}},changeShowState:function(e){var a=t(e.target).data("state");FotorAnalytic.pageView("/count/stickerLayout/"+a,Fotor.routerManager.getToolPath()),this.setState({showState:a}),localStorage.setItem("sticker-display-format",a)},showDragPop:function(){FotorAnalytic.pageView("/count/stickerLayout/2",Fotor.routerManager.getToolPath()),this.setState({showDragPop:!0})},hideDragPop:function(){this.setState({showDragPop:!1})},showHelpTip:function(e,t,a,r){this.refs.helpTip&&this.refs.helpTip.show(e,t,a,r)},hideHelpTip:function(){this.refs.helpTip&&this.refs.helpTip.hide()}});e.exports=D}).call(t,a(1),a(15),a(0))},function(e,t,a){(function(r,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),h=a(0),d=a(893),u=o(d),p=a(799),m=o(p);a(896);var f=a(20).default,g=a(905),v=function(e){function t(e){i(this,t);var a=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={keyword:"",searching:!1,searched:!1,hasSearchedKeyword:!1,isSearching:!0,favorAnimatePosition:{top:0,left:0,width:0,height:0,content:""},width:890,height:678,x:20,y:20,catId:0,festivalIconRandom:0},a.hideDragPop=a.hideDragPop.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleRemoveTag=a.handleRemoveTag.bind(a),a.clearAll=a.clearAll.bind(a),a.handleSearch=a.handleSearch.bind(a),a.handleBack=a.handleBack.bind(a),a.handleScroll=a.handleScroll.bind(a),a.resize=a.resize.bind(a),a.showFavorAnimation=a.showFavorAnimation.bind(a),a.showAddTip=a.showAddTip.bind(a),a.isFull=a.isFull.bind(a),a.searchNewYear=a.searchNewYear.bind(a),a.searchProps=a.searchProps.bind(a),a}return l(t,e),c(t,[{key:"componentWillUnmount",value:function(){this.setState({x:20,y:20,width:890,height:678}),window.removeEventListener("layoutChange",this.resize)}},{key:"componentDidMount",value:function(){""!=this.props.keyword&&void 0!=this.props.keyword&&window.addEventListener("layoutChange",this.resize),this.resize(),this.state.festivalIconRandom=3*Math.random()^0,this.props.keyword&&this.searchProps(this.props.keyword);var e=this;setTimeout(function(){window.scrollArea=e.refs.scrollArea},1e3)}},{key:"resize",value:function(){var e,t=r("#main").width(),a=r("#main").height(),n=r("body").height(),o=(screen.width,890);t<1500&&(o=t-490>890?890:t-490);var i=setInterval(function(){document.getElementById("drag-pop-wrap")&&(clearInterval(i),e=document.getElementById("drag-pop-wrap"),e.className=o>1560?"drag-pop-wrap sticker-pop-drag-col-15":o>1440?"drag-pop-wrap sticker-pop-drag-col-14":o>1320?"drag-pop-wrap sticker-pop-drag-col-13":o>1200?"drag-pop-wrap sticker-pop-drag-col-12":o>1e3?"drag-pop-wrap sticker-pop-drag-col-10":o>880?"drag-pop-wrap sticker-pop-drag-col-9":o>760?"drag-pop-wrap sticker-pop-drag-col-8":"drag-pop-wrap sticker-pop-drag-col-7")},200);this.setState({width:o}),a<880?n<730&&r("body").hasClass("ads")?this.setState({height:n-230}):n<560&&!r("body").hasClass("ads")?this.setState({height:n-90}):this.setState({height:a-60}):this.setState({height:678})}},{key:"hideDragPop",value:function(){this.props.hideDragPop&&this.props.hideDragPop()}},{key:"doKeyWordsSearching",value:function(e){e=e||"",this.setState({keyword:e,searching:!1}),this.refs.searchResult.searchContent(this.state.catId,e)}},{key:"cancelSearch",value:function(){this.setState({searching:!0}),this.doKeyWordsSearching("")}},{key:"setCategory",value:function(e){this.refs.scrollArea.scrollYTo(0);var t=r(".drag-pop-filter a").eq(e);r(t).hasClass("active")||r(".drag-pop-filter a").removeClass("active"),this.setState({catId:e,searching:!1}),this.refs.searchResult.searchContent(e,this.state.keyword)}},{key:"getCookiekeywords",value:function(){var e=FotorUtils.Cookie.get("searchSticker");return e=e?e.split("||"):[]}},{key:"handleFocus",value:function(){r("#searchTotalNum").text(""),this.setState({searching:!0,catId:0})}},{key:"clearAll",value:function(e){FotorUtils.Cookie.set("searchSticker","",Fotor.globalConfig.stickerRecentKeywordCookieSaveTime),this.forceUpdate(),e.stopPropagation()}},{key:"handleSearch",value:function(e){var t=this;this.setState({searching:!1,catId:0},function(){t.refs.searchBar.updateSearchState(e),t.doKeyWordsSearching(e)})}},{key:"handleRemoveTag",value:function(e,t){var a=this.getCookiekeywords(),r=[];a.forEach(function(e){e!=t&&r.push(e)}),FotorUtils.Cookie.set("searchSticker",r.join("||"),Fotor.globalConfig.stickerRecentKeywordCookieSaveTime),this.forceUpdate(),e.stopPropagation()}},{key:"handleBack",value:function(){this.setState({searching:!1,keyword:"",catId:0}),this.refs.searchResult.searchContent(0,"")}},{key:"handleScroll",value:function(e){e.containerHeight+e.topPosition>=e.realHeight-10&&!this.state.searching&&this.refs.searchResult.loadMore()}},{key:"showFavorAnimation",value:function(e,t,a){r("#sticker-pop-favor-animate").removeClass("rotationAndZoomOut"),this.setState({favorAnimatePosition:{content:'<img src="'+r(t).find("img").attr("src")+'" />'}}),r("#sticker-pop-favor-animate").css({top:r(t).offset().top,left:r(t).offset().left,width:r(t).width,height:r(t).height}),setTimeout(function(){r("#sticker-pop-favor-animate").css("display","block"),r("#sticker-pop-favor-animate").addClass("rotationAndZoomOut"),r("#sticker-pop-favor-animate").stop().animate({top:r("#sticker-own-list").offset().top,left:r("#sticker-own-list").offset().left},500,function(){r(this).removeClass("rotationAndZoomOut"),r(this).css("display","none")})},100)}},{key:"showAddTip",value:function(){this.refs.scrollArea.state.topPosition;r(".drag-pop-search-wrapper .area").append('<div class="sticker_add_favor_tips">'+Fotor.globalConfig.lang.design_workspace_material_sticker_added_successfully+"</div>"),r(".sticker_add_favor_tips").css({left:"50%",top:0,transform:"translateX(-50%)",opacity:0,display:"block"}).stop().animate({top:50,opacity:1},200),setTimeout(function(){r(".sticker_add_favor_tips").remove()},1e3)}},{key:"isFull",value:function(){if(!this.state.searching){var e=this;setTimeout(function(){var t=e.refs.scrollArea.computeSizes();t.realHeight<t.containerHeight&&e.refs.searchResult.loadMore()},500)}}},{key:"searchProps",value:function(e){this.handleSearch(e)}},{key:"searchNewYear",value:function(){this.handleSearch(Fotor.globalConfig.lang.stickerFastSearchNewYear)}},{key:"render",value:function(){var e=this,t=this.getCookiekeywords(),a=Fotor.globalConfig.lang.common_search_guess_keywrods;a=a?a.split("||"):[];var o=this.state.catId,i=this;return n.createElement("div",null,n.createElement(m.default,{size:{width:this.state.width,height:this.state.height},position:{x:this.state.x,y:this.state.y},z:40,minWidth:600,minHeight:300,dragHandleClassName:".drag-pop-handle",onDragStop:function(t,a){a.y<-22&&(a.y=-22);var n=e.state.width;n-(0-a.x)<0?a.x=0-n:r("#panel").offset().left-a.x<70?a.x=r("#panel").offset().left-70:r("#canvas-bar").offset().top-a.y<90&&(a.y=r("#canvas-bar").offset().top-90),e.setState({x:a.x,y:a.y})},onResize:function(t,a,r,n,o){var i=document.getElementById("drag-pop-wrap");r.offsetWidth>1560?i.className="drag-pop-wrap sticker-pop-drag-col-15":r.offsetWidth>1440?i.className="drag-pop-wrap sticker-pop-drag-col-14":r.offsetWidth>1320?i.className="drag-pop-wrap sticker-pop-drag-col-13":r.offsetWidth>1200?i.className="drag-pop-wrap sticker-pop-drag-col-12":r.offsetWidth>1e3?i.className="drag-pop-wrap sticker-pop-drag-col-10":r.offsetWidth>880?i.className="drag-pop-wrap sticker-pop-drag-col-9":r.offsetWidth>760?i.className="drag-pop-wrap sticker-pop-drag-col-8":r.offsetWidth>640&&(i.className="drag-pop-wrap sticker-pop-drag-col-7"),e.setState({width:r.offsetWidth,height:r.offsetHeight,x:o.x,y:o.y})},resizeHandleClasses:{top:"topHandlerCursor",right:"rightHandlerCursor",bottom:"bottomHandlerCursor",left:"leftHandlerCursor",topRight:"topRightHandlerCursor",bottomRight:"bottomRightHandlerCursor",bottomLeft:"bottomLeftHandlerCursor",topLeft:"topLeftHandlerCursor"}},n.createElement("div",{className:"drag-pop-wrap",ref:"dragPop",id:"drag-pop-wrap"},n.createElement("div",{className:"drag-pop-inner"},n.createElement("div",{className:"drag-pop-top-wrap"},n.createElement("div",{className:"drag-pop-handle"}),n.createElement("div",{className:"drag-pop-top"},n.createElement("div",{className:"drag-pop-search"},n.createElement(u.default,{ref:"searchBar",tool:this,keyword:this.props.keyword,handleFocus:this.handleFocus,handleBack:this.handleBack}))),n.createElement("div",{className:"drag-pop-filter"},n.createElement("a",{className:0==o?"active":"",onClick:this.setCategory.bind(this,0)},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_all),n.createElement("a",{className:1==o?"active":"",onClick:this.setCategory.bind(this,1)},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_image_shape),n.createElement("a",{className:7==o?"active":"",onClick:this.setCategory.bind(this,7)},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_grids),n.createElement("a",{className:2==o?"active":"",onClick:this.setCategory.bind(this,2)},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_shapes),n.createElement("a",{className:3==o?"active":"",onClick:this.setCategory.bind(this,3)},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_line),n.createElement("a",{className:4==o?"active":"",onClick:this.setCategory.bind(this,4)},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_Illustrations),n.createElement("a",{className:5==o?"active":"",onClick:this.setCategory.bind(this,5)},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_icons),!1,n.createElement("a",{className:8==o?"active":"",onClick:this.setCategory.bind(this,8)},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_texture||"纹理"))),n.createElement("div",{className:"drag-pop-close",onClick:this.hideDragPop}),n.createElement("div",{className:"drag-pop-search-wrapper"},this.state.searching&&n.createElement("div",{className:"clearfix search-tags"},n.createElement("div",{className:"clearfix",style:{display:t.length>0?"block":"none"}},Fotor.globalConfig.lang.common_search_record_title,n.createElement("a",{className:"pull-right clear-all",onClick:this.clearAll,title:Fotor.globalConfig.lang.design_workspace_photo_clearButton})),n.createElement("div",{className:"clearfix",style:{display:t.length>0?"block":"none"}},t.map(function(t,a){if(t)return n.createElement("a",{key:a+Math.random(),onClick:function(a){return e.handleSearch(t)},className:"search-tag"},t,n.createElement("span",{onClick:function(a){return e.handleRemoveTag(a,t)}}))})),n.createElement("div",{className:"marginT20"},Fotor.globalConfig.lang.common_search_guess_title),n.createElement("div",{className:"clearfix"},a.map(function(t){if(t)return n.createElement("a",{onClick:function(a){return e.handleSearch(t)},className:"search-tag"},t)}))),n.createElement(f,{className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:5,minScrollSize:40,onScroll:this.handleScroll,ref:"scrollArea",style:{display:this.state.searching?"none":"block",background:"#f3f4f8"}},n.createElement(g,{ref:"searchResult",scroller:this.refs.scrollArea,showTip:i.props.showTip,hideTip:i.props.hideTip,tool:i.props.tool,stickerList:this.refs.stickerList,favorItems:this.props.favorItems,showFavorAnimation:this.showFavorAnimation,keyword:this.props.keyword,catId:this.props.catId,showAddTip:this.showAddTip,isFull:this.isFull})))))),n.createElement("div",{id:"sticker-pop-favor-animate",dangerouslySetInnerHTML:{__html:this.state.favorAnimatePosition.content}}))}}]),t}(h.Component);t.default=v,e.exports=t.default}).call(t,a(1),a(0))},function(e,t,a){(function(r,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),h=function(e){function t(e){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={keyword:"",searching:!1,searched:!1,hasSearchedKeyword:!1},a.handleFocus=a.handleFocus.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a.handleBack=a.handleBack.bind(a),a.updateSearchState=a.updateSearchState.bind(a),a.doSearch=a.doSearch.bind(a),a.handleSearchIcon=a.handleSearchIcon.bind(a),a.handleSearch=a.handleSearch.bind(a),a.handleSearchCloseIcon=a.handleSearchCloseIcon.bind(a),a}return s(t,e),l(t,[{key:"componentDidMount",value:function(){this.setState({keyword:this.props.keyword||""}),Fotor.app.fixedInputSelection()}},{key:"updateSearchState",value:function(e){r(this.refs.searchInput).val(e),this.setState({searching:!0,searched:!0,hasSearchedKeyword:!0,keyword:e})}},{key:"componentDidUpdate",value:function(){r(this.refs.searchInput).val()==this.state.keyword||this.state.searching||r(this.refs.searchInput).val(this.state.keyword)}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"toolbar-title"},Fotor.globalConfig.lang.design_workspace_materialList_stickerTitle),n.createElement("div",{className:"search-bar "+(this.state.searching?"active":"")},n.createElement("div",{className:"back-btn",ref:"backBtn",onClick:this.handleBack.bind(this)}),n.createElement("div",{className:"search-icon",onClick:this.handleSearchIcon.bind(this)}),n.createElement("div",{className:"search-close-icon",style:{display:this.state.hasSearchedKeyword?"block":"none"},onClick:this.handleSearchCloseIcon.bind(this)}),n.createElement("input",{type:"text",ref:"searchInput",onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:Fotor.globalConfig.lang.common_search_holder})))}},{key:"handleFocus",value:function(){this.setState({searching:!0}),this.props.handleFocus&&this.props.handleFocus()}},{key:"handleKeyDown",value:function(e){13==e.keyCode&&this.doSearch(),e.stopPropagation()}},{key:"doSearch",value:function(){var e=r(this.refs.searchInput).val();""!==(e=e.trim())&&(this.setState({searched:!0,hasSearchedKeyword:!0}),this.props.tool.doKeyWordsSearching(e))}},{key:"handleKeyUp",value:function(e){var t=r(this.refs.searchInput).val();t=t.trim(),""!==t?this.setState({hasSearchedKeyword:!0}):this.handleSearchCloseIcon(),e.stopPropagation()}},{key:"handleBack",value:function(){r(this.refs.searchInput).val(""),this.setState({searching:!1,searched:!1,hasSearchedKeyword:!1,keyword:""}),this.props.handleBack&&this.props.handleBack()}},{key:"handleSearchIcon",value:function(){r(this.refs.backBtn).parent().hasClass("active")||(this.handleFocus(),r(this.refs.searchInput).focus()),"block"==r(this.refs.backBtn).css("display")&&this.doSearch()}},{key:"handleSearch",value:function(e){r(this.refs.searchInput).val(e),this.doSearch()}},{key:"handleSearchCloseIcon",value:function(e){r(this.refs.searchInput).val(""),this.setState({hasSearchedKeyword:!1,searched:!1}),this.props.tool.cancelSearch(),e&&e.stopPropagation()}}]),t}(c.Component);t.default=h,e.exports=t.default}).call(t,a(1),a(0))},function(e,t,a){!function(t,r){e.exports=r(a(15),a(0))}(0,function(e,t){return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.d=function(e,a,r){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t,a){"use strict";function r(e,t){for(var a=0,r=e.length;a<r;a++)if(t.apply(t,[e[a],a,e]))return e[a]}function n(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function o(e){return"number"==typeof e&&!isNaN(e)}function i(e){return parseInt(e,10)}function s(e,t,a){if(e[t])return new Error("Invalid prop "+t+" passed to "+a+" - do not set this, set it on the child.")}Object.defineProperty(t,"__esModule",{value:!0}),t.findInArray=r,t.isFunction=n,t.isNum=o,t.int=i,t.dontSetMe=s},function(e,t,a){"use strict";function r(e){return function(){return e}}var n=function(){};n.thatReturns=r,n.thatReturnsFalse=r(!1),n.thatReturnsTrue=r(!0),n.thatReturnsNull=r(null),n.thatReturnsThis=function(){return this},n.thatReturnsArgument=function(e){return e},e.exports=n},function(e,t,a){"use strict";function r(e,t,a,r,o,i,s,l){if(n(t),!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[a,r,o,i,s,l],d=0;c=new Error(t.replace(/%s/g,function(){return h[d++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var n=function(e){};"production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&(n=function(e){if(void 0===e)throw new Error("invariant requires an error message argument")}),e.exports=r},function(e,t,a){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,a){t.exports=e},function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){return F||(F=(0,w.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,w.isFunction)(e[t])})),!!(0,w.isFunction)(e[F])&&e[F](t)}function o(e,t,a){var r=e;do{if(n(r,t))return!0;if(r===a)return!1;r=r.parentNode}while(r);return!1}function i(e,t,a){e&&(e.attachEvent?e.attachEvent("on"+t,a):e.addEventListener?e.addEventListener(t,a,!0):e["on"+t]=a)}function s(e,t,a){e&&(e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener?e.removeEventListener(t,a,!0):e["on"+t]=null)}function l(e){var t=e.clientHeight,a=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,w.int)(a.borderTopWidth),t+=(0,w.int)(a.borderBottomWidth)}function c(e){var t=e.clientWidth,a=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,w.int)(a.borderLeftWidth),t+=(0,w.int)(a.borderRightWidth)}function h(e){var t=e.clientHeight,a=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,w.int)(a.paddingTop),t-=(0,w.int)(a.paddingBottom)}function d(e){var t=e.clientWidth,a=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,w.int)(a.paddingLeft),t-=(0,w.int)(a.paddingRight)}function u(e,t){var a=t===t.ownerDocument.body,r=a?{left:0,top:0}:t.getBoundingClientRect();return{x:e.clientX+t.scrollLeft-r.left,y:e.clientY+t.scrollTop-r.top}}function p(e){var t=e.x,a=e.y;return r({},(0,A.browserPrefixToKey)("transform",E.default),"translate("+t+"px,"+a+"px)")}function m(e){return"translate("+e.x+","+e.y+")"}function f(e,t){return e.targetTouches&&(0,w.findInArray)(e.targetTouches,function(e){return t===e.identifier})||e.changedTouches&&(0,w.findInArray)(e.changedTouches,function(e){return t===e.identifier})}function g(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function v(e){if(e){var t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {background: transparent;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {background: transparent;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&y(e.body,"react-draggable-transparent-selection")}}function b(e){try{e&&e.body&&x(e.body,"react-draggable-transparent-selection"),window.getSelection().removeAllRanges()}catch(e){}}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C({touchAction:"none"},e)}function y(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)"+t+"(?!\\S)"))||(e.className+=" "+t)}function x(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)"+t+"(?!\\S)","g"),"")}Object.defineProperty(t,"__esModule",{value:!0});var C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.matchesSelector=n,t.matchesSelectorAndParentsTo=o,t.addEvent=i,t.removeEvent=s,t.outerHeight=l,t.outerWidth=c,t.innerHeight=h,t.innerWidth=d,t.offsetXYFromParent=u,t.createCSSTransform=p,t.createSVGTransform=m,t.getTouch=f,t.getTouchIdentifier=g,t.addUserSelectStyles=v,t.removeUserSelectStyles=b,t.styleHacks=_,t.addClassName=y,t.removeClassName=x;var w=a(0),A=a(19),E=function(e){return e&&e.__esModule?e:{default:e}}(A),F=""},function(e,a){e.exports=t},function(e,t,a){if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV){var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,n=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r};e.exports=a(14)(n,!0)}else e.exports=a(17)()},function(e,t,a){"use strict";var r=a(1),n=r;if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV){var o=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];var n=0,o="Warning: "+e.replace(/%s/g,function(){return a[n++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(e){}};n=function(e,t){if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==t.indexOf("Failed Composite propType: ")&&!e){for(var a=arguments.length,r=Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];o.apply(void 0,[t].concat(r))}}}e.exports=n},function(e,t,a){"use strict";function r(e,t,a){if(!e.props.bounds)return[t,a];var r=e.props.bounds;r="string"==typeof r?r:h(r);var n=d(e);if("string"==typeof r){var o=n.ownerDocument,i=o.defaultView,s=void 0;if(!((s="parent"===r?n.parentNode:o.querySelector(r))instanceof HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=i.getComputedStyle(n),c=i.getComputedStyle(s);r={left:-n.offsetLeft+(0,u.int)(c.paddingLeft)+(0,u.int)(l.marginLeft),top:-n.offsetTop+(0,u.int)(c.paddingTop)+(0,u.int)(l.marginTop),right:(0,f.innerWidth)(s)-(0,f.outerWidth)(n)-n.offsetLeft+(0,u.int)(c.paddingRight)-(0,u.int)(l.marginRight),bottom:(0,f.innerHeight)(s)-(0,f.outerHeight)(n)-n.offsetTop+(0,u.int)(c.paddingBottom)-(0,u.int)(l.marginBottom)}}return(0,u.isNum)(r.right)&&(t=Math.min(t,r.right)),(0,u.isNum)(r.bottom)&&(a=Math.min(a,r.bottom)),(0,u.isNum)(r.left)&&(t=Math.max(t,r.left)),(0,u.isNum)(r.top)&&(a=Math.max(a,r.top)),[t,a]}function n(e,t,a){return[Math.round(t/e[0])*e[0],Math.round(a/e[1])*e[1]]}function o(e){return"both"===e.props.axis||"x"===e.props.axis}function i(e){return"both"===e.props.axis||"y"===e.props.axis}function s(e,t,a){var r="number"==typeof t?(0,f.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var n=d(a),o=a.props.offsetParent||n.offsetParent||n.ownerDocument.body;return(0,f.offsetXYFromParent)(r||e,o)}function l(e,t,a){var r=e.state,n=!(0,u.isNum)(r.lastX),o=d(e);return n?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:a,x:t,y:a}:{node:o,deltaX:t-r.lastX,deltaY:a-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:a}}function c(e,t){return{node:t.node,x:e.state.x+t.deltaX,y:e.state.y+t.deltaY,deltaX:t.deltaX,deltaY:t.deltaY,lastX:e.state.x,lastY:e.state.y}}function h(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function d(e){var t=m.default.findDOMNode(e);if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundPosition=r,t.snapToGrid=n,t.canDragX=o,t.canDragY=i,t.getControlPosition=s,t.createCoreData=l,t.createDraggableData=c;var u=a(0),p=a(4),m=function(e){return e&&e.__esModule?e:{default:e}}(p),f=a(5)},function(e,t,a){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){var a=[],r=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(6),h=r(c),d=a(7),u=r(d),p=a(4),m=r(p),f=a(5),g=a(9),v=a(0),b=a(11),_=r(b),y={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},x=y.mouse,C=function(e){function t(){var e,a,r,i;n(this,t);for(var l=arguments.length,c=Array(l),h=0;h<l;h++)c[h]=arguments[h];return a=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},r.handleDragStart=function(e){if(r.props.onMouseDown(e),!r.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;var t=m.default.findDOMNode(r);if(!t||!t.ownerDocument||!t.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var a=t.ownerDocument;if(!(r.props.disabled||!(e.target instanceof a.defaultView.Node)||r.props.handle&&!(0,f.matchesSelectorAndParentsTo)(e.target,r.props.handle,t)||r.props.cancel&&(0,f.matchesSelectorAndParentsTo)(e.target,r.props.cancel,t))){var n=(0,f.getTouchIdentifier)(e);r.setState({touchIdentifier:n});var o=(0,g.getControlPosition)(e,n,r);if(null!=o){var i=o.x,s=o.y,l=(0,g.createCoreData)(r,i,s);(0,_.default)("DraggableCore: handleDragStart: %j",l),(0,_.default)("calling",r.props.onStart);!1!==r.props.onStart(e,l)&&(r.props.enableUserSelectHack&&(0,f.addUserSelectStyles)(a),r.setState({dragging:!0,lastX:i,lastY:s}),(0,f.addEvent)(a,x.move,r.handleDrag),(0,f.addEvent)(a,x.stop,r.handleDragStop))}}},r.handleDrag=function(e){"touchmove"===e.type&&e.preventDefault();var t=(0,g.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var a=t.x,n=t.y;if(Array.isArray(r.props.grid)){var o=a-r.state.lastX,i=n-r.state.lastY,l=(0,g.snapToGrid)(r.props.grid,o,i),c=s(l,2);if(o=c[0],i=c[1],!o&&!i)return;a=r.state.lastX+o,n=r.state.lastY+i}var h=(0,g.createCoreData)(r,a,n);(0,_.default)("DraggableCore: handleDrag: %j",h);if(!1!==r.props.onDrag(e,h))r.setState({lastX:a,lastY:n});else try{r.handleDragStop(new MouseEvent("mouseup"))}catch(e){var d=document.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(d)}}},r.handleDragStop=function(e){if(r.state.dragging){var t=(0,g.getControlPosition)(e,r.state.touchIdentifier,r);if(null!=t){var a=t.x,n=t.y,o=(0,g.createCoreData)(r,a,n),i=m.default.findDOMNode(r);i&&r.props.enableUserSelectHack&&(0,f.removeUserSelectStyles)(i.ownerDocument),(0,_.default)("DraggableCore: handleDragStop: %j",o),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),r.props.onStop(e,o),i&&((0,_.default)("DraggableCore: Removing handlers"),(0,f.removeEvent)(i.ownerDocument,x.move,r.handleDrag),(0,f.removeEvent)(i.ownerDocument,x.stop,r.handleDragStop))}}},r.onMouseDown=function(e){return x=y.mouse,r.handleDragStart(e)},r.onMouseUp=function(e){return x=y.mouse,r.handleDragStop(e)},r.onTouchStart=function(e){return x=y.touch,r.handleDragStart(e)},r.onTouchEnd=function(e){return x=y.touch,r.handleDragStop(e)},i=a,o(r,i)}return i(t,e),l(t,[{key:"componentWillUnmount",value:function(){var e=m.default.findDOMNode(this);if(e){var t=e.ownerDocument;(0,f.removeEvent)(t,y.mouse.move,this.handleDrag),(0,f.removeEvent)(t,y.touch.move,this.handleDrag),(0,f.removeEvent)(t,y.mouse.stop,this.handleDragStop),(0,f.removeEvent)(t,y.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&(0,f.removeUserSelectStyles)(t)}}},{key:"render",value:function(){return h.default.cloneElement(h.default.Children.only(this.props.children),{style:(0,f.styleHacks)(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),t}(h.default.Component);C.displayName="DraggableCore",C.propTypes={allowAnyClick:u.default.bool,disabled:u.default.bool,enableUserSelectHack:u.default.bool,offsetParent:function(t,a){if(!0===e.browser&&t[a]&&1!==t[a].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:u.default.arrayOf(u.default.number),handle:u.default.string,cancel:u.default.string,onStart:u.default.func,onDrag:u.default.func,onStop:u.default.func,onMouseDown:u.default.func,className:v.dontSetMe,style:v.dontSetMe,transform:v.dontSetMe},C.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}},t.default=C}).call(t,a(20))},function(e,t,a){"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,a){"use strict";var r=a(13).default;e.exports=r,e.exports.default=r,e.exports.DraggableCore=a(10).default},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){var a=[],r=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),d=a(6),u=r(d),p=a(7),m=r(p),f=a(4),g=r(f),v=a(18),b=r(v),_=a(5),y=a(9),x=a(0),C=a(10),w=r(C),A=a(11),E=r(A),F=function(e){function t(e){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onDragStart=function(e,t){if((0,E.default)("Draggable: onDragStart: %j",t),!1===a.props.onStart(e,(0,y.createDraggableData)(a,t)))return!1;a.setState({dragging:!0,dragged:!0})},a.onDrag=function(e,t){if(!a.state.dragging)return!1;(0,E.default)("Draggable: onDrag: %j",t);var r=(0,y.createDraggableData)(a,t),n={x:r.x,y:r.y};if(a.props.bounds){var o=n.x,i=n.y;n.x+=a.state.slackX,n.y+=a.state.slackY;var s=(0,y.getBoundPosition)(a,n.x,n.y),l=c(s,2),h=l[0],d=l[1];n.x=h,n.y=d,n.slackX=a.state.slackX+(o-n.x),n.slackY=a.state.slackY+(i-n.y),r.x=n.x,r.y=n.y,r.deltaX=n.x-a.state.x,r.deltaY=n.y-a.state.y}if(!1===a.props.onDrag(e,r))return!1;a.setState(n)},a.onDragStop=function(e,t){if(!a.state.dragging)return!1;if(!1===a.props.onStop(e,(0,y.createDraggableData)(a,t)))return!1;(0,E.default)("Draggable: onDragStop: %j",t);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(a.props.position)){var n=a.props.position,o=n.x,i=n.y;r.x=o,r.y=i}a.setState(r)},a.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},a}return s(t,e),h(t,[{key:"componentWillMount",value:function(){!this.props.position||this.props.onDrag||this.props.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}},{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&g.default.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(e){!e.position||this.props.position&&e.position.x===this.props.position.x&&e.position.y===this.props.position.y||this.setState({x:e.position.x,y:e.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var e,t={},a=null,r=Boolean(this.props.position),o=!r||this.state.dragging,i=this.props.position||this.props.defaultPosition,s={x:(0,y.canDragX)(this)&&o?this.state.x:i.x,y:(0,y.canDragY)(this)&&o?this.state.y:i.y};this.state.isElementSVG?a=(0,_.createSVGTransform)(s):t=(0,_.createCSSTransform)(s);var c=this.props,h=c.defaultClassName,d=c.defaultClassNameDragging,p=c.defaultClassNameDragged,m=u.default.Children.only(this.props.children),f=(0,b.default)(m.props.className||"",h,(e={},n(e,d,this.state.dragging),n(e,p,this.state.dragged),e));return u.default.createElement(w.default,l({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),u.default.cloneElement(m,{className:f,style:l({},m.props.style,t),transform:a}))}}]),t}(u.default.Component);F.displayName="Draggable",F.propTypes=l({},w.default.propTypes,{axis:m.default.oneOf(["both","x","y","none"]),bounds:m.default.oneOfType([m.default.shape({left:m.default.number,right:m.default.number,top:m.default.number,bottom:m.default.number}),m.default.string,m.default.oneOf([!1])]),defaultClassName:m.default.string,defaultClassNameDragging:m.default.string,defaultClassNameDragged:m.default.string,defaultPosition:m.default.shape({x:m.default.number,y:m.default.number}),position:m.default.shape({x:m.default.number,y:m.default.number}),className:x.dontSetMe,style:x.dontSetMe,transform:x.dontSetMe}),F.defaultProps=l({},w.default.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null}),t.default=F},function(e,t,a){"use strict";var r=a(1),n=a(2),o=a(8),i=a(15),s=a(3),l=a(16);e.exports=function(e,t){function a(e){var t=e&&(F&&e[F]||e[k]);if("function"==typeof t)return t}function c(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}function h(e){this.message=e,this.stack=""}function d(e){function a(a,l,c,d,u,p,m){if(d=d||M,p=p||c,m!==s)if(t)n(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&"undefined"!=typeof console){var f=d+":"+c;!r[f]&&i<3&&(o(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",p,d),r[f]=!0,i++)}return null==l[c]?a?new h(null===l[c]?"The "+u+" `"+p+"` is marked as required in `"+d+"`, but its value is `null`.":"The "+u+" `"+p+"` is marked as required in `"+d+"`, but its value is `undefined`."):null:e(l,c,d,u,p)}if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)var r={},i=0;var l=a.bind(null,!1);return l.isRequired=a.bind(null,!0),l}function u(e){function t(t,a,r,n,o,i){var s=t[a];if(C(s)!==e)return new h("Invalid "+n+" `"+o+"` of type `"+w(s)+"` supplied to `"+r+"`, expected `"+e+"`.");return null}return d(t)}function p(e){function t(t,a,r,n,o){if("function"!=typeof e)return new h("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var i=t[a];if(!Array.isArray(i)){return new h("Invalid "+n+" `"+o+"` of type `"+C(i)+"` supplied to `"+r+"`, expected an array.")}for(var l=0;l<i.length;l++){var c=e(i,l,r,n,o+"["+l+"]",s);if(c instanceof Error)return c}return null}return d(t)}function m(e){function t(t,a,r,n,o){if(!(t[a]instanceof e)){var i=e.name||M;return new h("Invalid "+n+" `"+o+"` of type `"+E(t[a])+"` supplied to `"+r+"`, expected instance of `"+i+"`.")}return null}return d(t)}function f(e){function t(t,a,r,n,o){for(var i=t[a],s=0;s<e.length;s++)if(c(i,e[s]))return null;return new h("Invalid "+n+" `"+o+"` of value `"+i+"` supplied to `"+r+"`, expected one of "+JSON.stringify(e)+".")}return Array.isArray(e)?d(t):("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&o(!1,"Invalid argument supplied to oneOf, expected an instance of array."),r.thatReturnsNull)}function g(e){function t(t,a,r,n,o){if("function"!=typeof e)return new h("Property `"+o+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var i=t[a],l=C(i);if("object"!==l)return new h("Invalid "+n+" `"+o+"` of type `"+l+"` supplied to `"+r+"`, expected an object.");for(var c in i)if(i.hasOwnProperty(c)){var d=e(i,c,r,n,o+"."+c,s);if(d instanceof Error)return d}return null}return d(t)}function v(e){function t(t,a,r,n,o){for(var i=0;i<e.length;i++){if(null==(0,e[i])(t,a,r,n,o,s))return null}return new h("Invalid "+n+" `"+o+"` supplied to `"+r+"`.")}if(!Array.isArray(e))return"production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV&&o(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),r.thatReturnsNull;for(var a=0;a<e.length;a++){var n=e[a];if("function"!=typeof n)return o(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",A(n),a),r.thatReturnsNull}return d(t)}function b(e){function t(t,a,r,n,o){var i=t[a],l=C(i);if("object"!==l)return new h("Invalid "+n+" `"+o+"` of type `"+l+"` supplied to `"+r+"`, expected `object`.");for(var c in e){var d=e[c];if(d){var u=d(i,c,r,n,o+"."+c,s);if(u)return u}}return null}return d(t)}function _(e){function t(t,a,r,n,o){var l=t[a],c=C(l);if("object"!==c)return new h("Invalid "+n+" `"+o+"` of type `"+c+"` supplied to `"+r+"`, expected `object`.");var d=i({},t[a],e);for(var u in d){var p=e[u];if(!p)return new h("Invalid "+n+" `"+o+"` key `"+u+"` supplied to `"+r+"`.\nBad object: "+JSON.stringify(t[a],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var m=p(l,u,r,n,o+"."+u,s);if(m)return m}return null}return d(t)}function y(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(y);if(null===t||e(t))return!0;var r=a(t);if(!r)return!1;var n,o=r.call(t);if(r!==t.entries){for(;!(n=o.next()).done;)if(!y(n.value))return!1}else for(;!(n=o.next()).done;){var i=n.value;if(i&&!y(i[1]))return!1}return!0;default:return!1}}function x(e,t){return"symbol"===e||("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}function C(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":x(t,e)?"symbol":t}function w(e){if(void 0===e||null===e)return""+e;var t=C(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function A(e){var t=w(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}function E(e){return e.constructor&&e.constructor.name?e.constructor.name:M}var F="function"==typeof Symbol&&Symbol.iterator,k="@@iterator",M="<<anonymous>>",S={array:u("array"),bool:u("boolean"),func:u("function"),number:u("number"),object:u("object"),string:u("string"),symbol:u("symbol"),any:function(){return d(r.thatReturnsNull)}(),arrayOf:p,element:function(){function t(t,a,r,n,o){var i=t[a];if(!e(i)){return new h("Invalid "+n+" `"+o+"` of type `"+C(i)+"` supplied to `"+r+"`, expected a single ReactElement.")}return null}return d(t)}(),instanceOf:m,node:function(){function e(e,t,a,r,n){return y(e[t])?null:new h("Invalid "+r+" `"+n+"` supplied to `"+a+"`, expected a ReactNode.")}return d(e)}(),objectOf:g,oneOf:f,oneOfType:v,shape:b,exact:_};return h.prototype=Error.prototype,S.checkPropTypes=l,S.PropTypes=S,S}},function(e,t,a){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var a,s,l=r(e),c=1;c<arguments.length;c++){a=Object(arguments[c]);for(var h in a)o.call(a,h)&&(l[h]=a[h]);if(n){s=n(a);for(var d=0;d<s.length;d++)i.call(a,s[d])&&(l[s[d]]=a[s[d]])}}return l}},function(e,t,a){"use strict";function r(e,t,a,r,l){if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)for(var c in e)if(e.hasOwnProperty(c)){var h;try{n("function"==typeof e[c],"%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",r||"React class",a,c,typeof e[c]),h=e[c](t,c,r,a,null,i)}catch(e){h=e}if(o(!h||h instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",a,c,typeof h),h instanceof Error&&!(h.message in s)){s[h.message]=!0;var d=l?l():"";o(!1,"Failed %s type: %s%s",a,h.message,null!=d?d:"")}}}if("production"!==Object({DRAGGABLE_DEBUG:void 0}).NODE_ENV)var n=a(2),o=a(8),i=a(3),s={};e.exports=r},function(e,t,a){"use strict";var r=a(1),n=a(2),o=a(3);e.exports=function(){function e(e,t,a,r,i,s){s!==o&&n(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var a={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return a.checkPropTypes=r,a.PropTypes=a,a}},function(e,t,a){var r,n;/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){"use strict";function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var n=typeof r;if("string"===n||"number"===n)e.push(r);else if(Array.isArray(r))e.push(a.apply(null,r));else if("object"===n)for(var i in r)o.call(r,i)&&r[i]&&e.push(i)}}return e.join(" ")}var o={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=a:(r=[],void 0!==(n=function(){return a}.apply(t,r))&&(e.exports=n))}()},function(e,t,a){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window||void 0===window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var a=0;a<s.length;a++)if(n(e,s[a])in t)return s[a];return""}function n(e,t){return t?""+t+i(e):e}function o(e,t){return t?"-"+t.toLowerCase()+"-"+e:e}function i(e){for(var t="",a=!0,r=0;r<e.length;r++)a?(t+=e[r].toUpperCase(),a=!1):"-"===e[r]?a=!0:t+=e[r];return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefix=r,t.browserPrefixToKey=n,t.browserPrefixToStyle=o;var s=["Moz","Webkit","O","ms"];t.default=r()},function(e,t){function a(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(e){if(h===setTimeout)return setTimeout(e,0);if((h===a||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function o(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function i(){f&&p&&(f=!1,p.length?m=p.concat(m):g=-1,m.length&&s())}function s(){if(!f){var e=n(i);f=!0;for(var t=m.length;t;){for(p=m,m=[];++g<t;)p&&p[g].run();g=-1,t=m.length}p=null,f=!1,o(e)}}function l(e,t){this.fun=e,this.array=t}function c(){}var h,d,u=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:a}catch(e){h=a}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var p,m=[],f=!1,g=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];m.push(new l(e,t)),1!==m.length||f||n(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=c,u.addListener=c,u.once=c,u.off=c,u.removeListener=c,u.removeAllListeners=c,u.emit=c,u.prependListener=c,u.prependOnceListener=c,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}}])})},function(e,t,a){"use strict";var r=a(0),n=(a.n(r),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c={base:{position:"absolute",userSelect:"none",MsUserSelect:"none"},top:{width:"100%",height:"10px",top:"-5px",left:"0px",cursor:"row-resize"},right:{width:"10px",height:"100%",top:"0px",right:"-5px",cursor:"col-resize"},bottom:{width:"100%",height:"10px",bottom:"-5px",left:"0px",cursor:"row-resize"},left:{width:"10px",height:"100%",top:"0px",left:"-5px",cursor:"col-resize"},topRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",top:"-10px",cursor:"ne-resize"},bottomRight:{width:"20px",height:"20px",position:"absolute",right:"-10px",bottom:"-10px",cursor:"se-resize"},bottomLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",bottom:"-10px",cursor:"sw-resize"},topLeft:{width:"20px",height:"20px",position:"absolute",left:"-10px",top:"-10px",cursor:"nw-resize"}},h=function(e){return Object(r.createElement)("div",{className:e.className,style:i({},c.base,c[e.direction],e.replaceStyles||{}),onMouseDown:function(t){e.onResizeStart(t,e.direction)},onTouchStart:function(t){e.onResizeStart(t,e.direction)}},e.children)},d={userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",MsUserSelect:"none"},u={userSelect:"auto",MozUserSelect:"auto",WebkitUserSelect:"auto",MsUserSelect:"auto"},p=function(e,t,a){return Math.max(Math.min(e,a),t)},m=function(e,t){return Math.round(e/t)*t},f=function(e,t){return e.substr(e.length-t.length,t.length)===t},g=function(e){return f(e.toString(),"px")?e.toString():f(e.toString(),"%")?e.toString():e+"px"},v=["style","className","grid","bounds","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent"],b=function(e){function t(e){n(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isResizing:!1,resizeCursor:"auto",width:void 0===(a.propsSize&&a.propsSize.width)?"auto":a.propsSize&&a.propsSize.width,height:void 0===(a.propsSize&&a.propsSize.height)?"auto":a.propsSize&&a.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0}},a.updateExtendsProps(e),a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),"undefined"!=typeof window&&(window.addEventListener("mouseup",a.onMouseUp),window.addEventListener("mousemove",a.onMouseMove),window.addEventListener("mouseleave",a.onMouseUp),window.addEventListener("touchmove",a.onMouseMove),window.addEventListener("touchend",a.onMouseUp)),a}return s(t,e),o(t,[{key:"updateExtendsProps",value:function(e){this.extendsProps=Object.keys(e).reduce(function(t,a){return-1!==v.indexOf(a)?t:(t[a]=e[a],t)},{})}},{key:"getParentSize",value:function(){var e=this.parentNode,t=e.querySelector(".__resizable_base__");if(!t)return{width:window.innerWidth,height:window.innerHeight};var a=!1,r=this.parentNode.style.flexWrap,n=t.style.minWidth;"wrap"!==r&&(a=!0,this.parentNode.style.flexWrap="wrap"),t.style.minWidth="100%";var o={width:t.offsetWidth,height:t.offsetHeight};return a&&(this.parentNode.style.flexWrap=r),t.style.minWidth=n,o}},{key:"componentDidMount",value:function(){var e=this.size;this.setState({width:this.state.width||e.width,height:this.state.height||e.height});var t=this.parentNode;if(t instanceof HTMLElement&&!t.querySelector(".__resizable_base__")){var a=document.createElement("div");a.style.width="100%",a.style.height="100%",a.style.position="relative",a.style.transform="scale(0, 0)",a.style.left="-2147483647px",a.style.flex="0",a.classList?a.classList.add("__resizable_base__"):a.className+="__resizable_base__",t.appendChild(a)}}},{key:"componentWillReceiveProps",value:function(e){this.updateExtendsProps(e)}},{key:"componentWillUnmount",value:function(){if("undefined"!=typeof window){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseleave",this.onMouseUp),window.removeEventListener("touchmove",this.onMouseMove),window.removeEventListener("touchend",this.onMouseUp);var e=this.parentNode,t=document.getElementById(this.baseSizeId);if(!t||!e)return;if(!(e instanceof HTMLElement&&t instanceof Node))return;e.removeChild(t)}}},{key:"calculateNewSize",value:function(e,t){var a=this.propsSize&&this.propsSize[t];return"auto"!==this.state[t]||this.state.original[t]!==e||void 0!==a&&"auto"!==a?e:"auto"}},{key:"onResizeStart",value:function(e,t){var a=0,r=0;if(e.nativeEvent instanceof MouseEvent){if(a=e.nativeEvent.clientX,r=e.nativeEvent.clientY,3===e.nativeEvent.which)return}else e.nativeEvent instanceof TouchEvent&&(a=e.nativeEvent.touches[0].clientX,r=e.nativeEvent.touches[0].clientY);this.props.onResizeStart&&this.props.onResizeStart(e,t,this.resizable),this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.setState({original:{x:a,y:r,width:this.size.width,height:this.size.height},isResizing:!0,resizeCursor:window.getComputedStyle(e.target).cursor,direction:t})}},{key:"onMouseMove",value:function(e){if(this.state.isResizing){var t=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,a=e instanceof MouseEvent?e.clientY:e.touches[0].clientY,r=this.state,n=r.direction,o=r.original,i=r.width,s=r.height,l=this.props,c=l.lockAspectRatio,h=l.lockAspectRatioExtraHeight,d=l.lockAspectRatioExtraWidth,u=this.props,g=u.maxWidth,v=u.maxHeight,b=u.minWidth,_=u.minHeight,y=this.getParentSize();if(g&&"string"==typeof g&&f(g,"%")){var x=Number(g.replace("%",""))/100;g=y.width*x}if(v&&"string"==typeof v&&f(v,"%")){var C=Number(v.replace("%",""))/100;v=y.height*C}if(b&&"string"==typeof b&&f(b,"%")){var w=Number(b.replace("%",""))/100;b=y.width*w}if(_&&"string"==typeof _&&f(_,"%")){var A=Number(_.replace("%",""))/100;_=y.height*A}g=void 0===g?void 0:Number(g),v=void 0===v?void 0:Number(v),b=void 0===b?void 0:Number(b),_=void 0===_?void 0:Number(_);var E="number"==typeof c?c:o.width/o.height,F=o.width,k=o.height;if(/right/i.test(n)&&(F=o.width+(t-o.x),c&&(k=(F-d)/E+h)),/left/i.test(n)&&(F=o.width-(t-o.x),c&&(k=(F-d)/E+h)),/bottom/i.test(n)&&(k=o.height+(a-o.y),c&&(F=(k-h)*E+d)),/top/i.test(n)&&(k=o.height-(a-o.y),c&&(F=(k-h)*E+d)),"parent"===this.props.bounds){var M=this.parentNode;if(M instanceof HTMLElement){var S=M.getBoundingClientRect(),T=S.left,D=S.top,R=this.resizable.getBoundingClientRect(),I=R.left,N=R.top,P=M.offsetWidth+(T-I),B=M.offsetHeight+(D-N);g=g&&g<P?g:P,v=v&&v<B?v:B}}else if("window"===this.props.bounds){if("undefined"!=typeof window){var z=this.resizable.getBoundingClientRect(),U=z.left,G=z.top,O=window.innerWidth-U,j=window.innerHeight-G;g=g&&g<O?g:O,v=v&&v<j?v:j}}else if(this.props.bounds instanceof HTMLElement){var L=this.props.bounds.getBoundingClientRect(),H=L.left,Z=L.top,Y=this.resizable.getBoundingClientRect(),W=Y.left,Q=Y.top;if(!(this.props.bounds instanceof HTMLElement))return;var V=this.props.bounds.offsetWidth+(H-W),J=this.props.bounds.offsetHeight+(Z-Q);g=g&&g<V?g:V,v=v&&v<J?v:J}var X=void 0===b?10:b,q=void 0===g||g<0?F:g,K=void 0===_?10:_,$=void 0===v||v<0?k:v;if(c){var ee=(K-h)*E+d,te=($-h)*E+d,ae=(X-d)/E+h,re=(q-d)/E+h,ne=Math.max(X,ee),oe=Math.min(q,te),ie=Math.max(K,ae),se=Math.min($,re);F=p(F,ne,oe),k=p(k,ie,se)}else F=p(F,X,q),k=p(k,K,$);this.props.grid&&(F=m(F,this.props.grid[0])),this.props.grid&&(k=m(k,this.props.grid[1]));var le={width:F-o.width,height:k-o.height};if(i&&"string"==typeof i&&f(i,"%")){F=F/y.width*100+"%"}if(s&&"string"==typeof s&&f(s,"%")){k=k/y.height*100+"%"}this.setState({width:this.calculateNewSize(F,"width"),height:this.calculateNewSize(k,"height")}),this.props.onResize&&this.props.onResize(e,n,this.resizable,le)}}},{key:"onMouseUp",value:function(e){var t=this.state,a=t.isResizing,r=t.direction,n=t.original;if(a){var o={width:this.size.width-n.width,height:this.size.height-n.height};this.props.onResizeStop&&this.props.onResizeStop(e,r,this.resizable,o),this.props.size&&this.setState(this.props.size),this.setState({isResizing:!1,resizeCursor:"auto"})}}},{key:"updateSize",value:function(e){this.setState({width:e.width,height:e.height})}},{key:"renderResizer",value:function(){var e=this,t=this.props,a=t.enable,n=t.handleStyles,o=t.handleClasses,i=t.handleWrapperStyle,s=t.handleWrapperClass,l=t.handleComponent;if(!a)return null;var c=Object.keys(a).map(function(t){return!1!==a[t]?Object(r.createElement)(h,{key:t,direction:t,onResizeStart:e.onResizeStart,replaceStyles:n&&n[t],className:o&&o[t]},l&&l[t]?Object(r.createElement)(l[t]):null):null});return Object(r.createElement)("span",{className:s,style:i},c)}},{key:"render",value:function(){var e=this,t=this.state.isResizing?d:u;return Object(r.createElement)("div",i({ref:function(t){t&&(e.resizable=t)},style:i({position:"relative"},t,this.props.style,this.sizeStyle,{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box"}),className:this.props.className},this.extendsProps),this.state.isResizing&&Object(r.createElement)("div",{style:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:""+(this.state.resizeCursor||"auto"),opacity:"0",position:"fixed",zIndex:"9999",top:"0",left:"0",bottom:"0",right:"0"}}),this.props.children,this.renderResizer())}},{key:"parentNode",get:function(){return this.resizable.parentNode}},{key:"propsSize",get:function(){return this.props.size||this.props.defaultSize}},{key:"size",get:function(){var e=0,t=0;return"undefined"!=typeof window&&(e=this.resizable.offsetWidth,t=this.resizable.offsetHeight),{width:e,height:t}}},{key:"sizeStyle",get:function(){var e=this,t=this.props.size,a=function(t){if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&f(e.propsSize[t].toString(),"%")){if(f(e.state[t].toString(),"%"))return e.state[t].toString();var a=e.getParentSize();return Number(e.state[t].toString().replace("px",""))/a[t]*100+"%"}return g(e.state[t])};return{width:t&&t.width&&!this.state.isResizing?g(t.width):a("width"),height:t&&t.height&&!this.state.isResizing?g(t.height):a("height")}}}]),t}(r.Component);b.baseSizeId=0,b.defaultProps={onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0},t.a=b},function(e,t,a){var r=a(897);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,"@keyframes scaleOutNew {\n  0% {\n    transform: scale(0.5); }\n  100% {\n    transform: scale(1); } }\n\n.drag-pop-wrap {\n  position: absolute;\n  z-index: 1000;\n  background: white;\n  border-radius: 10px;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);\n  border-radius: 6px;\n  animation: scaleOutNew .2s; }\n  .drag-pop-wrap, .drag-pop-wrap * {\n    box-sizing: border-box; }\n  .drag-pop-wrap .drag-pop-close {\n    cursor: pointer;\n    right: 5px;\n    top: 5px;\n    position: absolute;\n    width: 12px;\n    height: 12px;\n    background: url("+r(a(898))+") no-repeat; }\n    .drag-pop-wrap .drag-pop-close:hover {\n      background-position: left -12px; }\n    .drag-pop-wrap .drag-pop-close:active {\n      background-position: left bottom; }\n  .drag-pop-wrap .drag-pop-top-wrap {\n    padding: 20px 20px 0;\n    background: #2cb0ae;\n    border-top-right-radius: 6px;\n    border-top-left-radius: 6px;\n    position: relative; }\n    .drag-pop-wrap .drag-pop-top-wrap .drag-pop-handle {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 100%;\n      height: 100px;\n      cursor: move; }\n    .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top {\n      margin-bottom: 10px; }\n      .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .toolbar-title {\n        font-size: 16px;\n        color: white;\n        line-height: 40px;\n        float: left;\n        margin: 0;\n        text-shadow: none; }\n      .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar {\n        margin: 0;\n        float: right;\n        background: none;\n        box-shadow: none;\n        width: 340px;\n        background: rgba(0, 0, 0, 0.06); }\n        .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar input {\n          color: rgba(255, 255, 255, 0.4); }\n        .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .search-close-icon {\n          background: none; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .search-close-icon:after {\n            width: 8px;\n            height: 8px;\n            content: '';\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            margin: -4px 0 0 -4px;\n            background: url("+r(a(899))+") no-repeat; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .search-close-icon:hover:after {\n            background-position: left -8px; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .search-close-icon:active:after {\n            background-position: left bottom; }\n        .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .search-icon {\n          background: none; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .search-icon:after {\n            width: 14px;\n            height: 14px;\n            background: url("+r(a(900))+") no-repeat;\n            position: absolute;\n            content: '';\n            left: 50%;\n            top: 50%;\n            margin: -7px 0 0 -7px; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .search-icon:hover:after {\n            background-position: left -14px; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .search-icon:active:after {\n            background-position: left bottom; }\n        .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar.active .search-icon {\n          background: none; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar.active .search-icon:after {\n            background-position: left -14px; }\n        .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar.active .search-close-icon {\n          background: none; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar.active .search-close-icon:after {\n            background-position: left -8px; }\n        .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar.active input {\n          color: white; }\n        .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .back-btn {\n          background: rgba(0, 0, 0, 0.06); }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .back-btn:after {\n            width: 14px;\n            height: 14px;\n            background: url("+r(a(901))+") no-repeat;\n            content: '';\n            position: absolute;\n            left: 50%;\n            top: 50%;\n            margin-left: -7px;\n            margin-top: -7px; }\n          .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .back-btn:hover {\n            background: rgba(0, 0, 0, 0.12); }\n            .drag-pop-wrap .drag-pop-top-wrap .drag-pop-top .drag-pop-search .search-bar .back-btn:hover:after {\n              background-position: left -14px; }\n  .drag-pop-wrap .drag-pop-filter {\n    position: relative; }\n    .drag-pop-wrap .drag-pop-filter a {\n      display: inline-block;\n      padding: 0 14px;\n      height: 28px;\n      line-height: 28px;\n      font-size: 12px;\n      color: white;\n      border-top-left-radius: 2px;\n      border-top-right-radius: 2px; }\n      .drag-pop-wrap .drag-pop-filter a:hover {\n        background: rgba(255, 255, 255, 0.1); }\n      .drag-pop-wrap .drag-pop-filter a:active, .drag-pop-wrap .drag-pop-filter a.active {\n        background: white;\n        color: #323232; }\n      .drag-pop-wrap .drag-pop-filter a.pop-filter-festival-tab {\n        margin-left: 20px;\n        background: white;\n        color: #323232;\n        padding: 0 14px;\n        height: 24px;\n        line-height: 24px;\n        border-radius: 2px;\n        background: rgba(255, 255, 255, 0.3);\n        font-family: Arial;\n        font-size: 12px;\n        color: white;\n        position: relative; }\n        .drag-pop-wrap .drag-pop-filter a.pop-filter-festival-tab:hover {\n          background: rgba(255, 255, 255, 0.4); }\n        .drag-pop-wrap .drag-pop-filter a.pop-filter-festival-tab:active {\n          background: white;\n          color: #323232; }\n        .drag-pop-wrap .drag-pop-filter a.pop-filter-festival-tab:before {\n          position: absolute;\n          left: -7px;\n          top: -8px;\n          content: '';\n          background-image: url("+r(a(780))+");\n          background-position: left top;\n          background-repeat: no-repeat;\n          width: 22px;\n          height: 30px; }\n        .drag-pop-wrap .drag-pop-filter a.pop-filter-festival-tab.newyearIcon_0:before {\n          background-image: url("+r(a(780))+"); }\n        .drag-pop-wrap .drag-pop-filter a.pop-filter-festival-tab.newyearIcon_1:before {\n          background-image: url("+r(a(902))+"); }\n        .drag-pop-wrap .drag-pop-filter a.pop-filter-festival-tab.newyearIcon_2:before {\n          background-image: url("+r(a(903))+"); }\n  .drag-pop-wrap .drag-pop-list {\n    padding: 30px; }\n\n.drag-pop-search-wrapper .search-tags {\n  margin: 30px 28px 10px 28px; }\n\n.drag-pop-search-wrapper .area {\n  height: calc(100% - 100px); }\n\n.drag-pop-search-wrapper .toolbar-loading {\n  background: none; }\n\n#searchTotalNum {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  font-size: 12px;\n  color: white;\n  font-family: Arial;\n  line-height: 28px; }\n\n.drag-pop-wrap .loading-page {\n  margin-bottom: 40px; }\n\n.sticker_add_favor_tips {\n  display: none;\n  position: absolute;\n  top: -6px;\n  left: 25px;\n  padding: 0 14px;\n  font-size: 12px;\n  font-weight: 200;\n  line-height: 30px;\n  font-family: Arial;\n  color: #fff;\n  background: rgba(0, 0, 0, 0.3);\n  white-space: nowrap;\n  border-radius: 4px;\n  z-index: 50; }\n  .sticker_add_favor_tips:before {\n    display: inline-block;\n    width: 16px;\n    height: 30px;\n    background: url("+r(a(904))+") no-repeat left center;\n    margin-right: 8px;\n    content: '';\n    position: relative;\n    top: -1px;\n    vertical-align: middle; }\n\n.topHandlerCursor {\n  cursor: n-resize !important; }\n\n.rightHandlerCursor {\n  cursor: e-resize !important; }\n\n.bottomHandlerCursor {\n  cursor: s-resize !important; }\n\n.leftHandlerCursor {\n  cursor: w-resize !important; }\n\n.sticker-pop-drag-col-15 .sticker-group-pop .sticker-item-wrapper {\n  width: 6.6666%; }\n\n.sticker-pop-drag-col-14 .sticker-group-pop .sticker-item-wrapper {\n  width: 7.14285%; }\n\n.sticker-pop-drag-col-13 .sticker-group-pop .sticker-item-wrapper {\n  width: 7.692%; }\n\n.sticker-pop-drag-col-12 .sticker-group-pop .sticker-item-wrapper {\n  width: 8.333%; }\n\n.sticker-pop-drag-col-10 .sticker-group-pop .sticker-item-wrapper {\n  width: 10%; }\n\n.sticker-pop-drag-col-9 .sticker-group-pop .sticker-item-wrapper {\n  width: 11.111%; }\n\n.sticker-pop-drag-col-8 .sticker-group-pop .sticker-item-wrapper {\n  width: 12.5%; }\n\n.sticker-pop-drag-col-7 .sticker-group-pop .sticker-item-wrapper {\n  width: 14.2857%; }\n\nbody.black #drag-pop-wrap .toolbar-loading {\n  background: none; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAkCAYAAAC9itu8AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDdERUYyMjVDNUM1MTFFN0E0NDJFNDRBNUU5MEFDMDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDdERUYyMjZDNUM1MTFFN0E0NDJFNDRBNUU5MEFDMDIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEN0RFRjIyM0M1QzUxMUU3QTQ0MkU0NEE1RTkwQUMwMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEN0RFRjIyNEM1QzUxMUU3QTQ0MkU0NEE1RTkwQUMwMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pnybgv8AAAEGSURBVHja7JMxEoIwEEVXxqGBlqHyAhRWVN6Am1h5GOy9BhWtlRVXsLK3ool/nY0Tlw0j1mTmIWT/z2aTlZxzBWhACihCKpoiIaIa7EADUpqOVGKsqdnQgwcoDZMXl6LpN5zSCHRi0HOjN1gm0mKeCA3aRFrMI6GFI5kp0DyIJCLuhImJa7DEY2whNvhLmRRomO70T2sUM22hsxRbPI7gAFpwAk8lziW2f38hTQ4u4Ca/ebCVTMd8wDJl1kJha4SpB5nz75+t6l763q8SW73klvRSBs7BNgZ5byUz+VOiSIHm6cXE0dPjolu5uOGHi7vyKhWb1MqaXDTV4n/c2ktrL0V66SXAAEoqPpasO9hEAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAYCAYAAADH2bwQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBMUNEOTdGMzdGQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NDIwN0QzN0MxODExMUU3ODYzMkE4RDE1MjQ1MjczQyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NDIwN0QzNkMxODExMUU3ODYzMkE4RDE1MjQ1MjczQyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkExQ0Q5N0YzN0ZDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkExQ0Q5N0YzN0ZDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+NyQNlQAAALBJREFUeNpi+P//vxgQewIxGxAzQDEbVEyMiYGBwRiIZYHYE4jZoNgTKmbMCFINFRAH4pcMEABjbwcpYEDSJQ5VAJYE4l9MDAQAUVbAHAQzlgFJw2MGYrwpiuRFGIBZK8YCJNKB2AqIJwFxHlQBiK0HcyQPksAlqAIYOw8WDsiKGGCSQPwFFg7/8YUDN5CejM+KSVBHXsLiyGMgP2uDFIEcixQOPFAxHYJxMULCASDAAJhutsec5pHYAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5RUNEOTdGMzdGQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1RjIwRDE4RUMxODExMUU3QTgzRDgxM0FGQkI2MUFCMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1RjIwRDE4REMxODExMUU3QTgzRDgxM0FGQkI2MUFCMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkEwQ0Q5N0YzN0ZDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjlFQ0Q5N0YzN0ZDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+IvKqpQAAATJJREFUeNrs0z9LAzEcxvGknqsFK/4Z1A5yurh07DtQB+mmL0B8AcU3oaModBAKKhR9Byro4CS+AdGhOrQuFnQQEfX83vEcBGkK7gl8mrukT5OS/GySJEZtCKtYRqz3R1yghXfjNKvgGHawaPq3Duq4d4MRfRMLuMMxrvCDCtZQRU/PvSxJsIZbNFFMd9DHtr6zlY8VyK5o9VO8erZ6oH4JaSb7iDV4afwt/QtdjGAyD0aa/DaD25f6KA8+aaAyIDSKaXziOQ+ea3LdE7LY1fO1wlmwpXOq6ixjJzSOQ8zreI7+XoA57KGk8a5+eVbviVZuYxMvBU08aKsneMOUQh84w4ZCZTTSBaxzV907O4FhZ2Wj3TQUvjGem+JTwj5mbKiOUB2hOkJ1hOoI1fHP6vgVYADmecnDizD7qwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5RUNEOTdGMzdGQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUY0MERGNkMxODExMUU3OTYxOEE5RDlBOTdDNEUzMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUY0MERGNUMxODExMUU3OTYxOEE5RDlBOTdDNEUzMCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjlFQ0Q5N0YzN0ZDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjlFQ0Q5N0YzN0ZDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+rlrmXgAAAMxJREFUeNpi/P//PwM5gAmLGAcQewOxMCkaYZqkgdiSWI3INr0D4j3EaETXtAWIf+DTyALV5APEQsRqAgFGYKimUStUiQIgG8lyKhNU0RaoJiGoIRzEOpVkzch+RNfsgtdKUFpFwxxA7APEwljk4JiRmomcbI2CQDwNiNVI0QjSNBWIzYC4kNjAEQTiZUB8BoiXQ/k4A4csTTCNglDFRGuCRccZukYH2U5FDpzlpAYOWZrRBZA1TydFI0wzSJPaaO4YzR2juYOuuQMgwACKyBu8/EQx0wAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAeCAYAAAAo5+5WAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEzQjQ3QzNDRUFFNTExRTdCNEVDQjA1MDYyNEE2MkJEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjEzQjQ3QzNERUFFNTExRTdCNEVDQjA1MDYyNEE2MkJEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MTNCNDdDM0FFQUU1MTFFN0I0RUNCMDUwNjI0QTYyQkQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MTNCNDdDM0JFQUU1MTFFN0I0RUNCMDUwNjI0QTYyQkQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5Xgp6UAAADxUlEQVR42tSUXWhcVRDHf/fm5mOjSTbppklcYjZ0m5VSsKlSFEv6UE0FH3wQP0hFtGBbsVQr9QOq9AMRH0QfBCuIlYAoNg8FFSmVtrQpBm0bkdomtmlp0zYGNpuk3ewm2b25t3Nudjeb3e1mC/bBgeGeM3fO/8yZ+c9o9nEKkVI05zu9oOdq2/kYWAUBexN+lyhQDOyC/BYLcNGdAasnKs0feY14li6IZqcDJ0WBF932glo5ZOQF0zIjzuWoZVkbxK5nWbV8qcglVtYhl+zt2z27cGASaYmldjfEM/rfACupT60uyyvGUrvRhVmh5/1bIvreKuivGOHo4iAfr4CyQumWfdGDouWiKsJzoo3sefhTTD3CitDzsh8WXSZaLarS81cuLhmploU3meFl+S6SQunEZQcDtAbvo7fWhy5JXTr+m9j+xcQvNUiSc0T0a9HP06tiJEA/Et2SePycTErHtci5ytHr6IbBkvFmsTXPY4wmHJ89Xyf6QXKeqKc/LhXelgU6O3JiNOkdBEr9NET8+MbXy+NjOfirzm4XXTuXU5v2LNZazjvihLQ91Pd2ceBoMbv3TXBV75ITH4p3PAfdtPnAWkak6oCqvOHqpMP9CSdvqly+6DTJxha5rOgzKWenk8CZDFhtjgwq4gvzQJWzn1/ZH3iX0SYf3d/7OXbsFNtfX+PkcUfbBH2edwi7DjngdkLjzqjqmwMu5rDUd9IBVA4e+jlftZXz5TGWejZw8c8xtmw9STzm56Ha1eJxL8+scXPau4kAZ1JE0wgLxpH0iM+I8YeEQ5AWXmVnQz+Hvc/htX4nEq1yuO2qPMCMVo3LMrg/vJkej8VA+SvCiaCEpaLdJ8kaSG8IS276SqIepqpxJ699cUJsD9Ay3sS0eQhLfwG3ex3RaJhw5BGGrwS4J/gH3d4NtD91mpsVu6jgmrRUZ3qj6EQcvvZStuhZVg7udRrk1NTbVMYuynpC8hNH110UF5mEwwdZ2x7jpfW/4FG/WUWofK/UpEP6sE+izuq8KZb9qFrzCXw3rlBjnCVu9qDps2weGhrENCfp/OYnli8PYFmT7Hj/OI01T/Nt83Xeau2m52BGS6+z00kexFc/iGV/Kfmckr8lAl5GNNJNSalNW5vbyffIyD9se+ME+7uWcNbfKrYhHn1yFmggewiFEpo+lCVnlkZ1pc3f55ID82c8nriTT3P6O+piZZialjmh9fxzzzTFv4KqmjoeU0xz2DqWVqRIIhirsEHvbUiuiiWOILYR4g5Fs22buyE6d0n+f8C3BBgApv4s/shkghcAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAeCAYAAAAo5+5WAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjAyMzVFRDU5RUFFNTExRTc4RkU1RDgzRkRBMjdEREI5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAyMzVFRDVBRUFFNTExRTc4RkU1RDgzRkRBMjdEREI5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDIzNUVENTdFQUU1MTFFNzhGRTVEODNGREEyN0REQjkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDIzNUVENThFQUU1MTFFNzhGRTVEODNGREEyN0REQjkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz476EHWAAAB4UlEQVR42uyVzSsEYRzHn1kb0q4Q4sLBhfJyUiLvf4AcNva4RMpFchGKyEFyJpGkNvZCHHbLFqssrZOSUoS9eFkcsITZx/fJs9KYZ6Yd3Pzq0/M28+mZ3/zmGYlSSljk7sxWoekF5eQjtsHoWVnLFjEQEhND2ob+JDAp1iOgA/LpmMU5/plitAEQL7jmxSGvNw++OZvQrwUWsAcmSDVdEYnZDns0pCzi7ySLCy0TZ4IkwNK2TDalYS1xvd5j+aX8OMFSH+Q1InG6nvhWsghTCbpF4pCeOI0+aC1XisRePXFF5FBrOVkkHgevorvMRCbtskdLHFQVo0b30XbymlUkkNKRtwVSQINaYrdox2Q8aJ3mNerBRBg8sb5D9nbZZR/VkD6CMfUn5QG5Dw2jFWyAY0IaUbnODPT7Ve59BnZ8JCfCHSsiAXyWgetqaeApkmoPyxmnGIbBDVgEpZCuit/N97gHVnAZnVgLTe2iGQJzbGyz2XTPCrUdX4EsxVweOI/lEFITH4FCxTVF4OCnYpbLRJDNx6Xg7mtqjIpZee3zXabwk8wd63lsFsyzdDTw3LLSu4hVbBLMsw+kjqclYOTXJBKX8Jy6icEQia/BPM+3oZCif+nfDhP5o/gX/4u/x7sAAwDgqYBfn1bsswAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTgyNkI4RTZDNTMyMTFFNzg1NDhEMkEyMUE5QzMwMDEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTgyNkI4RTdDNTMyMTFFNzg1NDhEMkEyMUE5QzMwMDEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1ODI2QjhFNEM1MzIxMUU3ODU0OEQyQTIxQTlDMzAwMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1ODI2QjhFNUM1MzIxMUU3ODU0OEQyQTIxQTlDMzAwMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pip9O4sAAADZSURBVHjarJNBCsIwEEVHBcGN3qMNeB+X0jO49gTqwoI30JW6F5ceQBDrPXRhxRD/wChhsGmLfniBTv4fmmlKzjlSRGACMnAXzlKLtN9/aIM5sK5YvLcAHd2AwztXXXvJfBqkrr74bamBJSaiI2hRPVnQb2JJKoa3YChBkkxCMu0ybd5nBkuvnnEhV+YxOBSER8qb6wYrMfakyToQZl31EZ5gIIFuSZh14s2pKvpNQmHWjA1GQt+ahMLsMaGLZEu+TPrXq/zzz+QT83DABTzAjactNaP9LwEGADfsOp7Xnl8SAAAAAElFTkSuQmCC"},function(e,t,a){(function(r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(0);a(906);var c=a(777),h=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={items:[],keyword:"",loading:!1,loadingNextPage:!1,loadFinish:!0,searched:!1,beingSearch:!1,recordKeywords:a.getCookiekeywords(),curCatId:a.props.catId,totalResults:0,isLoadingMore:!1},a.mounted=!1,a.timeID=[],a.pageNo=1,a.fotorStickerPageSize=42,a.openclipStickerPageSize=18,a.openclipStickerTotal=0,a.fotorStickerLoadFinshed=!1,a.openclipStickerLoadfinshed=!1,a.isFilterMode=!1,a}return i(t,e),s(t,[{key:"getCookiekeywords",value:function(){var e=FotorUtils.Cookie.get("searchSticker");return e=e?e.split("||"):[]}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.setState({searched:!1})}},{key:"componentDidMount",value:function(){this.mounted=!0,this.searchContent(this.props.catId||0,this.props.keyword||"")}},{key:"getApi",value:function(e,t){FotorAnalytic.pageView("/search/"+Fotor.mainCanvas.getTemplateID()+"/sticker_pop/"+t.toLowerCase()+"/start",Fotor.routerManager.getToolPath());var a=Fotor.globalConfig.config.api.stickerSearchCategory+"?lang=en_US";return 0!=e&&(a+="&category="+e),t&&(a+="&tag="+encodeURIComponent(t)),a}},{key:"isSearchFinish",value:function(){return this.state.loadFinish}},{key:"shuffle",value:function(e){var t,a,r;for(t=e.length-1;t>0;t--)a=Math.floor(Math.random()*(t+1)),r=e[t],e[t]=e[a],e[a]=r;return e}},{key:"addKeyword",value:function(e){if(e){var t=this.getCookiekeywords();-1===t.indexOf(e)&&(t.length>=8&&t.splice(7,10),t.splice(0,0,e),this.setState({recordKeywords:t}),FotorUtils.Cookie.set("searchSticker",t.join("||"),Fotor.globalConfig.stickerRecentKeywordCookieSaveTime))}}},{key:"loadMore",value:function(){this.state.beingSearch||this.state.loadFinish||(this.pageNo++,this.setState({isLoadingMore:!0}),this.searchMoreContent(this.state.curCatId,this.state.keyword))}},{key:"searchContent",value:function(e,t){this.isFilterMode=0!=e||""==t,this.addKeyword(t);var a=this;this.state.beingSearch=!0,a.pageNo=1,this.setState({loading:!0,loadFinish:!1,items:[],curCatId:e,keyword:t},function(){var r=a.getApi(e,t);a.loadFotorSticker(e,encodeURIComponent(t),r,1,!1)})}},{key:"searchMoreContent",value:function(e,t){var a=this;this.state.beingSearch=!0,this.setState({loadFinish:!1});var r=a.getApi(e,t),n=!!this.fotorStickerLoadFinshed;a.openclipStickerPageSize=this.fotorStickerLoadFinshed?60:12,a.loadFotorSticker(e,encodeURIComponent(t),r,a.pageNo,n)}},{key:"loadFotorSticker",value:function(e,t,a,r,n){var o=this;o.isFilterMode||o.openclipStickerLoadfinshed||o.loadOpenClipSticker(t,o.openclipStickerPageSize,r,n),n||Fotor.services.loadData("search_sticker_"+e+"_"+t,a,Fotor.globalConfig.designMode,!1,function(e,a,r){if(FotorAnalytic.pageView("/search/"+Fotor.projectManager.currentProjectData.categoryId+"/sticker_pop/"+t.toLowerCase()+"/results/"+r,Fotor.routerManager.getToolPath()),o.fotorStickerLoadFinshed=a,o.isFilterMode)o.setDataLater(e,t);else if(o.openclipStickerLoadfinshed)o.setDataLater(e,t);else var n=setInterval(function(){if(o.openclipStickerLoaded){clearInterval(n);var a=e.concat(o.curPageOpenClipStickerData);o.setDataLater(o.shuffle(a),t),o.openclipStickerLoaded=!1}},200)},!0,o.fotorStickerPageSize,r,!1,t)}},{key:"loadOpenClipSticker",value:function(e,t,a,r){var n=this;Fotor.services.loadOpenClipData(e,"openclipart_sticker_"+e,Fotor.globalConfig.config.api.getOpenClipSticker+"?query="+e,Fotor.globalConfig.designMode,!1,function(t,a,o){n.openclipStickerLoaded=!0,n.curPageOpenClipStickerData=t,n.openclipStickerTotal=o,n.openclipStickerLoadfinshed=a,r&&n.setDataLater(t,e)},!0,t,a)}},{key:"reloadAllData",value:function(){this.searchContent(0,"")}},{key:"setDataLater",value:function(e,t,a){var r=this,n=!1;n=this.isFilterMode?this.fotorStickerLoadFinshed:this.fotorStickerLoadFinshed&&this.openclipStickerLoadfinshed,n?(this.state.loadFinish=!0,this.state.loadingNextPage=!1):this.state.loadingNextPage=!0,this.setState({items:(this.state.items||[]).concat(e),loading:!1,searched:!0,beingSearch:!1,isLoadingMore:!1},function(){r.props.isFull&&r.props.isFull()})}},{key:"cancelSearch",value:function(){this.clearTimeId(),this.state.beingSearch=!1,this.isFilterMode=!1,this.setState({items:[],keyword:"",loading:!1,loadingNextPage:!1,loadFinish:!0,searched:!1})}},{key:"clearTimeId",value:function(){this.timeID.map(function(e){return clearTimeout(e)})}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"clearfix",style:{minHeight:"200px",background:"#f3f4f8"}},this.state.loading&&r.createElement("div",{className:"toolbar-loading"},r.createElement("div",{className:"loading-round"},r.createElement("div",null),r.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),!this.state.loading&&0==this.state.items.length&&r.createElement("div",{className:"sticker-pop-no-result"},Fotor.globalConfig.lang.common_search_resultNotice.replace("d%",0)),!this.state.loading&&r.createElement("div",{ref:"stickerGroup",id:"search-results",className:"clearfix sticker-group sticker-group-pop",style:{display:this.state.items.length>0?"block":"none"}},r.createElement("div",{className:"search-results-inner"},this.state.items.map(function(t,a){return Fotor.hideVipContent&&t.vip?"":r.createElement(c,{data:t,display:!0,key:a,cols:3,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool,isSearch:!0,isFavor:e.isFavor(t.id),showFavorAnimation:e.props.showFavorAnimation,showAddTip:e.props.showAddTip})}))),this.state.isLoadingMore&&r.createElement("div",{className:"loading-page",style:{display:this.state.loadFinish?"none":"block"}},r.createElement("span",null),r.createElement("span",null),r.createElement("span",null),r.createElement("span",null),r.createElement("span",null)))}},{key:"isFavor",value:function(e){var t=!1;return this.props.favorItems&&this.props.favorItems.length>0&&this.props.favorItems.map(function(a){a.id==e&&(t=!0)}),t}}]),t}(l.Component);t.default=h,e.exports=t.default}).call(t,a(0))},function(e,t,a){var r=a(907);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,".sticker-pop-no-result {\n  background: url("+r(a(908))+") no-repeat center top;\n  padding-top: 95px;\n  text-align: center;\n  font-size: 14px;\n  color: #d6d6d6;\n  font-family: Arial;\n  margin: 50px auto 0; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABNCAYAAABKfSEkAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RTIwQkEzNkU4NjQ0MTFFNzg2N0Q5MjZBMjAzNzg3RUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RTIwQkEzNkY4NjQ0MTFFNzg2N0Q5MjZBMjAzNzg3RUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpFMjBCQTM2Qzg2NDQxMUU3ODY3RDkyNkEyMDM3ODdFQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMjBCQTM2RDg2NDQxMUU3ODY3RDkyNkEyMDM3ODdFQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpIwdzwAAAu3SURBVHja7F2Jchs3Em2SQ3F4iRJF27LXduK1K5VPtL9An5iqrXidTeysnViWeN/DHSSvi60xgJnBzPDwClUoHUUOAbw+XjcaYOn169d0ZM0L+1nYz8PeCHs57Muwj8Pex89V2NfHMJmrq6vYyR5Ta4b9GX7KVkPvhn0T9mHYBwBrgX6U7ZgAUtryz7CfxLyuFPZTdAJI3Kfo9wAVMM7nCcAxaR1r3BwATcI+Qt/cA5S9nWrMmktjU3gGv7UEWAP09T1A6ZsyWZ0CnltFb8B3rQFWH2AtDkG7jgGgivAnuqYYWwA2VwGgaVsZvYO+0YC12gdgxwBQwzJO5fh/g1+pAciWMGXlDFrLvusJfNcA7HCGv4N7gP5uJvOmFugDQCLB0D6BTPACK4DrGeeqwH6AvgS5GAvCsboH6OvGC6VrHPvcYI4KIB/a1XJkg9J3naOvhWCMoWGL/yeAGlgQXRsm9AkrvFb1a4CjNKINk1jP6B8Z9B7AmUFwBtCubxqgjsWP9B2eF2ABZ1jAjxCAU1DvBvyPC9EoCd+nnncJLVefcwsN26QlGocEEC+KnEDb8Nq1xbwlbRto1yriu05F3FVBd5kLv1eZ1ocCLE5BJcoXlg4gWVqDmaljkQLx/x8M/kJJ5L8Lpr1lANWGZtUs5tZFk4fCDC6urq4WhwRQTbCsNsBRA/6XeI1iTM8M5uY/Yf+8Y+2WrLABzcirjQXJ6IdgbaSU7KqdYNFfhP0lfj4UTvpL5PUtAzhBDubNxRyOoOHvwv4WGvwxp7E0sRYqGfzyzZs39V0BVAW7eQlz9QxplbqBlUkw6xZpW+7ZLM9A4T8AqJ/C/iuIS5BRUxUxehWC1CiCJJTwzFPECc2E6ZdosMc230Sv1w7jKspfyaTrtaDeHZjvqgMrVAL6NATpbR4AlTGIFkBpO2jmMCJ5DcMzNiJzkNTXnUMb5zCjswI1K0C/QWffdSbA8hICpl7f8TKA4mMhmZZWMkxsICS8QuatBc6DJQ1yX0SceQ8+ZLhj38V+qk5384VxQXLXS2kmmhH2lUUD52Lw0tH6FoDGCVMpSoAea5hWFf+f0H72fqaamOuRhRE2kyxwSwRu9YyxwIK2WWHT9nPdoo3jhL7kBBpEhuf7KU1lEW2BUGEO9qbDoly20L5/hP1HvPkxQHIBZ4WBvEWc8yt8wdQg+S3LhCYpzYvJTxzMNncY8wzJnA1feRET1oXKnWTwKZxCGcBRjmFOkiyKZ0nvzCh5wcccWlozaOHsUAAKmZpvsxiecMzPAZAre+HatBuA4xIP1Mi8FTBJIfkb2Hn2Z0yzpwguAzqcdmrx5X2mfE8dwOHMcJ5FF6at7bUD81Jj+xnzqkGrbqjAzTXHZsqY/MUA2aT0UkjmOJI7ymvCJcQLpmDQxakrYP+kw21VC4MbsQ9KAo4sq50WlGrxLYPdFy3ehfbULLHh2rOwJjYT77FARee/Ohat7dO32ZqWrMtY1W17FgelAPllh/GCzf8M9rB4HhaQs+ebAp7fsAS0c37R0sCcxjsEp2pJe0xz8nM1LMgmAcuMFun/Hvb/FmDS6xb/s2SAxgaAdklFbbm8fg6SqhKml2KenxEwbzSBsvLJTyLjuQQDzDN+spWCjXnTTg3o1vCiBu1uQ69D5gxvFoDOkQmJFt5f0Nf5PiXR30NzKhrgznOcb1zGZCqlawQ7X9GYnfYOHLRnUfUJudWZNZEROTMAz5Sek7Rd0idXZVOa9UdObLJqyZjcyVGWRVom2ipUTNG6bjGrFu0JUoKtgu6XkHjbvkuXttsm31F8jcFJjlrkW+Y8idYkBBYtaVC2fZ6ksYDpM4YpTIYyWz9Cc6oJpbhF28L5JO1BTgG5SXtWFKlxKMcEgn5MnJTHYE1Uc07xm3MljO8V/Ect5ef3UtJnn9zzlXLNO0kzJmXhmIYGM9csEKCGxf/EpZHqMGc/WCQySyRvWtxeRvJ0YsuYhOZtrQPIVqnZKtDMxdVeBwY/cwk/85DcynSlAPZSvqeZ0TfbTmsMdJOVgelKw825WC/vffySRTuXhpjjAn4gL60uk/1wmOk9XXIvseqkyZiUIwBNDANqFKA9J5aFnkQA8uBjnhdgckuOi9x2nLMxYxKat5UNIFtJU9aqHZPDNdnicUQ629CeXVbCxoHadRjPKaU8rVFO6JizHnoy2XKTqk804/pEu8mqp8lSNBwAMm3O9U2BXVRyF5r/c2oir0sgPIstnms0WQnNe0Es2hiPT/kWsafVoh4lr82uWAA1Zkw8DZMYGR6kUiPXlE8StRqT3rHR6wm6rDlo0N0LK3bVukj/JKk2stUR9k3xmO4Ntwauz6Wr8xwm1rY45zTP59Ny1yK+4GrXVkYKnlSLVObiXULzZvLjA9OlSjqARlA3XzMY9SF/5jCpTkxs5NL44LCiqp8hTLIuuiiCwUcnJzHmrW4RsoXNF+gc1sBg289yAKgSkz5Sn6GSlx/J/VoxebTxCz6zjWdz4J0XYOUEWlQn+2mNVRqAVLtBlK5jXtWMTCpOmtn59mhbrMLH25eUfuuZTxx8QefgtCPmk/WUBz9rbGGsxoyJzF4nBWgCX1DTSEtWLTpLScWbwhQMYYLZ97gQlgB+9pa2ydY2Psd3DCcqEOh3BoFrpMyYxALEk3ik+bAsAJUzMC2m1Hzbx1gwupGjKeTL/4YRgeBey0GLamQ/rTF3AYip3yPDQtUc2VyL8jkpXYWgnAGYmdCwLLd9cKFMScyTL7zwE2hRTwOQbwFa1R4ErgDxpHVnbFzZ3GkBbKoiJP4cDpcvP+o7Btdcxz3FMzzaXlBxZmFk52CQY2FxWhYiExs/eTFMaGCg221HgIoOJMvwIScY42MNWElPWkiw+BzqCOyyBpN2hvUp0/byinMBELNHU7yXCSC2zw8ttDGNmcvzIog0gPElGY/o7m0fU5jCtL4rENolwToVpoxLCWwHyRLV+8XRy6nBzNWgumkA8mj/2WglIBfovEk5ou32hovvmiPd8wfmGAh22bII/yjposVF50ODmWsirtikkLxDusCVq5Y6giAwKxw7+q5VwowJa3JmgHiPqKfJa/EWRFItmpG5zPgQWvR2YM6qD8jtNhHbwYRZ0mA/SQTNXN3X+CE/BUDs05p0+E1eK/aAtuVQnNVI4rdMGZMNpTgM4CWU/KkhDkhbefpJMJ9jaXwCxI/4rr7Io61TZExyB4gwIF0ZbZe2B4Wl7eXU/zhil9Xvqmj9xR4YXR6Nr7rhIHkj8oUjYbZaZN+QnOYNkBrApWZR1d/fISZaiqCRKaeioR+iyUH6+wKiJ+Rez3ZIgLWEr5kLE2lqg7Tqm5RKTg1Sr3zRc8P7etCwiUYjf6Zt+r9JxVQO7cN3xbXbIgBiLbLthJqerzTsF41ayy0APn7P2reL3dB9tGVa+p4WoOjBpiRNacYrEITPpN8iYFo7hLnk3VCO0CvfCECp749IAxCbOZdieqUdz+DH4i5WXdM2Q80bbNH7144VsD4VfOvvDWU77SBTLZtIIMg7pkGEkq4xsb4IKDsiUD45EnMYuGQnPAcJeJrTgugYEOfF+JTzwhA4M633BcngpGj5QAEakkOpQFqAFlicIs4McfR+gb+/wB+NYoLoGW2rePhG3iYVeyrDFaB10QBtcjBztrYSEXra7PJSmMIKwPZpuyO6zxxgQI5fE+A5SsImR7svry7jqtKs1atc3z1B3MGAcfba37Hfip7WKBQgvpz1IoM0rejrq8s2BUovX5emzOXvGrDyrJMzAbTcFUABYpo0xwcDQdPZDO3rcqSN8F2faHsknr8J5YTyva6as/i0K4AIC/2O9N9pGpWcCW2/p+DQ7mpj3yWLGtt094uhsvoujvt2ChDTXXUPaReTqsGuLwQVdr2IYp/OnDW8JKg7s8K03zWkrMb7LD7Vy0H6OIXDtzeu6XAOWWU1TWwB5BdDcb4wLhOvrMZvlPF+n7xs7Zq+zQv3ojEg12hwvlBeWe0J9nhNOX0v6/8EGAA2zV0ZZndGMgAAAABJRU5ErkJggg=="},function(e,t,a){var r=a(910);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,"/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n.sticker-item {\n  position: relative;\n  float: left;\n  cursor: pointer;\n  -webkit-transition: all .2s !important;\n  -moz-transition: all .2s !important;\n  transition: all .2s !important; }\n  .sticker-item:hover {\n    background: rgba(220, 220, 220, 0.4);\n    cursor: pointer; }\n  .sticker-item:active,\n  .sticker-item:active * {\n    cursor: move; }\n  .sticker-item div {\n    position: relative;\n    display: table-cell;\n    vertical-align: middle;\n    text-align: center;\n    box-shadow: 0 0 1px transparent; }\n    .sticker-item div img {\n      width: auto;\n      height: auto;\n      vertical-align: middle;\n      max-width: 100%;\n      max-height: 100%;\n      min-height: 1px; }\n  .sticker-item .vip {\n    position: absolute;\n    display: block;\n    width: 18px;\n    height: 18px;\n    top: 0;\n    right: 0;\n    background: url("+r(a(911))+") right -22px no-repeat;\n    opacity: 1; }\n  .sticker-item:hover .vip {\n    display: none;\n    opacity: 1;\n    animation: fadeIn .3s; }\n  .sticker-item .favor-icon {\n    display: none;\n    opacity: 0;\n    position: absolute;\n    z-index: 8;\n    display: block;\n    bottom: 0;\n    left: 0;\n    width: 18px;\n    height: 18px;\n    background: url("+r(a(912))+") 0px 0px no-repeat;\n    transition: all .3s !important;\n    -webkit-transition: all .3s !important;\n    -moz-transition: all .3s !important;\n    transition-property: transform, opacity !important; }\n  .sticker-item:hover .favor-icon {\n    display: block;\n    opacity: 1; }\n    .sticker-item:hover .favor-icon.no-favor-func {\n      background-position: 0 0 !important; }\n      .sticker-item:hover .favor-icon.no-favor-func:hover {\n        background-position: 0 -54px !important; }\n    .sticker-item:hover .favor-icon:hover {\n      background-position: 0px -18px; }\n    .sticker-item:hover .favor-icon:active {\n      background-position: 0px -36px; }\n    .sticker-item:hover .favor-icon.active {\n      background-position: 0px -36px; }\n  .sticker-item .remove-favor-icon {\n    position: absolute;\n    z-index: 10;\n    display: none;\n    opacity: 0;\n    top: -4px;\n    right: -4px;\n    width: 18px;\n    height: 18px;\n    background: url("+r(a(913))+") 0 0 no-repeat;\n    transform: rotate(0deg); }\n  .sticker-item:hover .remove-favor-icon {\n    display: block;\n    opacity: 1;\n    transform: rotate(0deg);\n    transition: all .3s !important;\n    -webkit-transition: all .3s !important;\n    -moz-transition: all .3s !important;\n    transition-property: transform, opacity !important; }\n    .sticker-item:hover .remove-favor-icon:hover {\n      transform: rotate(180deg); }\n    .sticker-item:hover .remove-favor-icon:active {\n      background-position: 0 -18px; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAoCAYAAADzL6qcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAMfSURBVHjarJXba1NJHMc/Oc3FpLGaYrcSC16QVuyyVVkXtiBeQChYFFEsFeyDL14e9nEfll1a/Q9EdvOy7MMW1t1uYBWvVNBiQVMvbY3xUpTGapL24Maml7TNycmcfdjT4DE5adr09zLn/GbmM/P7zW++YwFsfl+bQgl29MzvdglwUro5JcC2DCCb9XPPSo+X3Qd/wOFcmfWNjgxmv9PKLKG+LmanPxrmSZ/+uFdVs6v5ewMkZ2m7k/qdR1jhWm0O2rnvFM5yz4Jx2Fe4qW1oMgcFH1xCCHVBkCYyhF/dMwfFx14z2Nu5IGj4xV2mxmPmIIDwyx7CL3tMIfL7EPL7Zzl+Kd/gwd5O4vKbHP9UYpThF3fyLpAXJIRKoPsic8lE1qekkgz1X0UTmeJBAHPJBIHuiwihookMQwPXUFJJ05CthZIal98w2NvJzHQ8J7mLAs0nvxiTWCZbNlDB0DRNU6LyZDeA94uK/ZJkcSwKpKpiciQ6fuXvG08vPQ5GogA7vlz3c0vztuPr13kOWa1SRUFQKqXGhsIfun776+E/kbEJGZgAZgD6Q1G5PxQN16xd9evJlm8O122sOuZwWL2fgrSZWSU48Dzm/6Xz/q2Uoo7rgCSQ8vvaMrqcJoGpyNjEx/MXbsccdusfZ080Nm2v9x4FNAvgBtbo4El9B4rf1yZM9FkC7IALmA/xX4u+KxsggLTeFnviNr1NW33nm34E2pejjjqAc8VOqK6pp7qm3rQgi4RZaGhspaGxFbAYesqa926e/+7Re/fkE/w1a2vZ/NV+1td+i8tdSVmZDU0IlNQ0IqMaQKawHbva+HrvSaq8dVlflXcLm7buxmZ3EXs7kAPKCxsdeYqnagMVHq9hYHT4CYHbPkAzvbSGnGmaIBjoyhkUDHShaWLB22+AudyV/9/D9Bxqes7gK0bYOvS23e4o5/mjywwNXAegbvsB7I7yvKeW11q/+7Mn1Oe3JOLv9siREBlVIaMqyJEQifi74kGhPn/B0liKQhYs2sVKrSlsKZqdF7ZU8c+BlfKKGGClPkdZWMnv2umfbnYA5/4bALn2Kol4JPH6AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAABICAYAAAD726XGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEMkQzNEI3QkE1NzNFODExODVCNkVDRUJEMkFBNkE4QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NzQ3MjI3N0REQTUxMUU4ODY1NEE3NzQxMUMyMDBGOCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NzQ3MjI3NkREQTUxMUU4ODY1NEE3NzQxMUMyMDBGOCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjIwN0VBNENEQTk3M0U4MTE4NUI2RUNFQkQyQUE2QThBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQyRDM0QjdCQTU3M0U4MTE4NUI2RUNFQkQyQUE2QThBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Dtja1wAACCRJREFUeNqsWHtMU2cU/9pSCvKqPIZYoAV8RVFgBJgbAa36h3NDnWSJLhvDmTmzODcTZWQm+h8zcZkmuKnRDdymWTaHjxHM3FSYmzKKIh1VWMWCgFSwPNtCa9udc/lu/Xp3r/rHvuSX3nseP77HOee7BxkRHymAdPobRWUjgLuANkCn0EEmeI8FvALQkScPC+BnwCAvUDBKdC6hZE8bakAGoAcwzBKh81uAEKHHli1bUnJycqYbDIZhgSoIMA9wG+CQ0eW9A0gUksjlctLZ2bkJn1NTU496vV6x2eGsjsnphiaKWezYsWOuVqvVIMrKyuZKLBN9U3A2rwKyhdq8vLyo06dPbxgdHbX7fD4SFRUVtmbNmhONjY0jImTNSPQBIBrfDh8+nJefnz9Lp9PNnAbjEYySkpIq1FVXV78dBMMBw2Kx9F25csW8efPmRkpkkzNxQurr63tmz56tRZLKyspamEXFiRMnehH4jDLUoQ3aMjOKwlN7iZ4AMRqNYy6X64Fer1+Qnp6eeOnSJVNXV9cE6hYvXqzet2/fOpzVrl27fjh06NBdhsiHMxpjF7t37972qqqqC2FhYdMKCgpm8PLCwsIZKEMd2gj2aBRn0isMwlu3bnERO336dFVTU1OxDAbM7h+UtbW1DYpsdjcSGWmUPk60lBRu37Zv376al2VnZ8/H37S0tCgRolYkukODyh9LiYmJnPHIyMjoyZMnr+Dz+vXr82HDI3mdICA7ZUyKbOJTpKamZllPT89IeXn5jfHxcQ/KwsPDFRUVFVlAFLl27dqL1A8P4hhgQCZI2vUAFXm2MQk4SSsBkf345Vt+TfGW4zizNVIpI1jOafAdBJ+pvGS1qKBT/QbDHjAEwKW5aO1pprpj1DagFBABmQ9+tLTA6QHJ/BEDcG8c9IDIk4iwvnwJWCKynFkU7wIuY6nCWoQJLVxaIeAvCRLhWEJtC/21i5nJGUCE0CNOM5+DyEDbM6cOlczjiTAEvmarAHs3pOcVc/jvPTGV9egLZDIkWgZ4QcwqQZdJop9L4zBTlyW1TPRdhpv9uph2WkQsSc8tJgO9JoLbuSB3HRl+2E0cY2I5S14Pokc8dSwLV5AZyRlEHacjqpAI4vG4SfPlrzhdwepysvKNz8jkxBgZHrCQ/u6bxGy8wLvqcWlJ/JvN2kliE+ZyJDcaqsnZY5uJ7cEdDviMMtShDdoyI0lOc2aKCBwaf/2C+HxeMj/nNRIaHuO3xGeUoQ5t0Dbg6gL0sYL7lhvEePV7ogqNIOqY5MdXa2wyJ0Md2ghzL4gGVsCdNTZyn/tVqkJJ3or3uef+7tYp3fB9sc3+A4m+A7wZcGJ0SdlLNj2+BdNy6WnGiBF9i0S/AK6xscQTOe020n6jlnuem7WKhIZF+3XMQN8LSIRhUkoF/ujGE7LcbiBe7yPu/a7pMtHNK4BNj2ZJ8NbduO69ah9b2DABz4nlm8TAa+xVIKnnkokvAzhoAn4tlTKC5ZQCyW1/VrJElAyzcwVWXpqHSbRC3gP8jrUP9wSX88QKSQ0c9EvMytgMUZmD7mtgnRDMCCvgp4AXn7K0PwEfA8xiRIvx6wWvsGfc7HH6zXmVJZpFv1IjhdbWe8Zg/I1PWugSIRull4Q5iJa+z8VIcCva/voxcooofVCkSkZS3yJM2nyxTz8cvZ2GkKEBixLRc6cpRGKJ6JuPREViWvvogKKt6Sd/cJoMNREokyArwj36k//S77hZF2btblUND3YpXZN2uZhHsCrMq47VuuOTF03OyVhp5zsBNNbwRtHxaa6HVnOwFAkO1KEN2jJiTUCFjJ0xx52jf3dYJpPkIahDG7QVVkgrK9Ck5kzAjTEqRYQ6tBGI+5DoP3UzQp3wSIpIQteERD8JpXB3SZ2OlO4UBmQ9/e7xx5Jj/CFnHDJN7ZmTuXKcO9GWuvAJx7CC17HtA6CBr5AfBaaIjGS89MZI6ny9U64I4nIobcFyZ6fpYqhj3KYQpMh25PjfkpY9ZxS8TKf6tNFMba9K9bRwk/pQVkCzGvNwJsBNL9JGugUN0Az4qL14haQGDloR+xnVQypzilZIwTvmXLlUNRAsrQJzjJ8RS/Q8YD/ej8+42TjrD4HoOkuEM6kSO7GioiKulJw9e3ZM4uTeBjIL32Xj19RC1Jw/fz4VOkbb8ePHIXllpKWlhfvYzMzMvC28uujA7mojBhd+HWz0Z19fnwt62xSNRqOIiYlRQN8fDyPYbDY7W1tbJ0SI4gEtOJtPAGsDdlynU9bV1c1KSkpSmUwmJ/TIvri4uKBVq1aZOzo6xC6BGgzIHP4NetXnzp07lwKOZPny5WaPx0MSEhKUR44ceZCcnKxqb29fODQ0lNHQ0DAbbRmiHD6iDYilS5fecjqd4O/xabXamyjbvXv3PZvN5i4uLv5n586dXbBPPrRBW96Pj/AGRmDYsGEDzsSLztHR0VirDNDodUA36YaWH/+IF21YH57olEBo2LNnzz38yyUlJX4H6LJNKIOW3g6t/3WBzxk5/ccSEXTZ3Omo1WpFbW1t6tGjRxOvXbvmXLRo0d9ut9sHz3OggVYyLjf58hEwo7KyMm4v2GG32z1ZWVl/K5XK5v379/dZrVaXXq/n9+kFwjQ1fqKDBw/eR+f+/v5JaJC7EPiMstzcXFyBobS09A4Er436ykRTpLKyUtPd3e06cODA4OTkJBfOKpVKtm3btliIreCtW7f2MilSCvx3/7ekZSvkdfrvMeMzkBip7XXJCkllefT7MZfmkptepBhXv9FKGVAh/xVgAA8sfBhptRZZAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAkCAYAAACE7WrnAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkE4QkY5QTQ2MDZBMTFFNkFFMUJBRDdGNThFQjhCRkEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkE4QkY5QTU2MDZBMTFFNkFFMUJBRDdGNThFQjhCRkEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyQThCRjlBMjYwNkExMUU2QUUxQkFEN0Y1OEVCOEJGQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyQThCRjlBMzYwNkExMUU2QUUxQkFEN0Y1OEVCOEJGQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnBWljQAAAJSSURBVHja3FTPS5RRFL0z2NRmjGAcgtTFUCC0aEJGJhEUpUVMJUFoQZtaFP4D7Vz5R6grN0YQUVgzq+gXWgxBNKtybZPIOBDNLGo+Kjvn+Z5+83jB+9KFdOHwLvfH4X73e+/EHs1dE4eNApP67NWxNeAF8AB4bgqv3Lmvzg6LoA+YBUYc5Cc1bgOvgClg1STjocJh4N1fSGwb0bXDNhEnWQKS4m+sXXo8f73PEMWABeCoRDf2LIAsRqIxIB/OnjpzUc5duCuHj3TuxOgzxpxl7B0j0YSd6TpxWo73npWhy9OKgKDPGHMOm+jQv7jN3r+claFL09J5rFsR0Og3vlZVznVdOFGPHW19b8jK0xnVSAJDwhhzDushUcu5xi3PWOj3r9tBsxMziZnM7Mxh1bi+WG3WPzq1+zlPZhQMGXMOe0Oie3Z088tH2Vj7oAhaPxoK9BljzmGLMTxaXsi39l2KYGVgMK5XeBP49g8k7LkFBdgyb42veBxoRiBh7ThIPtmv/zUwoEf1+ZwB3bOtR4nuG+GC1aC6OIjzPHBVv0Ne2AD4DCwDD4Fn6Gu7VbawiS74qXf3W5+HdC39X66r+R8qZKlU2j+FBJlbITOZjORyOUkkErs/AT5jzHkrZCqVknQ6Lfl8XhEQ9BljzlshK5WKakwmk+pUC4HfbDZVzlshgyCQcrmsGklgSBhjLppCRjSnQpqdmEnMZGZn3gqZzWbbPif8mcx5K2S9XpdarbazE7MzxphzKmSxWDw4ClkoFPaukCDZZ4W0CjiZl0La4vZHgAEA0swColKu+1UAAAAASUVORK5CYII="},function(e,t,a){(function(r,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0),h=function(e){function t(e){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={keyword:"",searching:!1,searched:!1,hasSearchedKeyword:!1},a.handleFocus=a.handleFocus.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a.handleBack=a.handleBack.bind(a),a.clearAll=a.clearAll.bind(a),a.updateSearchState=a.updateSearchState.bind(a),a.getCookiekeywords=a.getCookiekeywords.bind(a),a.doSearch=a.doSearch.bind(a),a.handleSearchIcon=a.handleSearchIcon.bind(a),a.handleSearch=a.handleSearch.bind(a),a.handleRemoveTag=a.handleRemoveTag.bind(a),a.handleSearchCloseIcon=a.handleSearchCloseIcon.bind(a),a}return s(t,e),l(t,[{key:"componentWillUnmount",value:function(){r(this.refs.searchInput).val("")}},{key:"componentDidMount",value:function(){Fotor.app.fixedInputSelection()}},{key:"updateSearchState",value:function(e){r(this.refs.searchInput).val(e),this.setState({searching:!0,searched:!0,hasSearchedKeyword:!0})}},{key:"getCookiekeywords",value:function(){var e=FotorUtils.Cookie.get("searchSticker");return e=e?e.split("||"):[]}},{key:"render",value:function(){var e=this,t=this.getCookiekeywords(),a=Fotor.globalConfig.lang.common_search_guess_keywrods;a=a?a.split("||"):[];var o="block"==r("#results-found").css("display");return n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"toolbar-title"},Fotor.globalConfig.lang.design_workspace_materialList_stickerTitle),n.createElement("div",{style:{padding:"0 28px 10px 28px"}},n.createElement("div",{className:"search-bar "+(this.state.searching?"active":"")},n.createElement("div",{className:"back-btn",ref:"backBtn",onClick:this.handleBack.bind(this)}),n.createElement("div",{className:"search-icon",onClick:this.handleSearchIcon.bind(this)}),n.createElement("div",{className:"search-close-icon",style:{display:this.state.hasSearchedKeyword?"block":"none"},onClick:this.handleSearchCloseIcon.bind(this)}),n.createElement("input",{type:"text",ref:"searchInput",onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:Fotor.globalConfig.lang.common_search_holder})),this.state.searching&&!this.state.searched&&!o&&n.createElement("div",{className:"clearfix search-tags"},n.createElement("div",{className:"clearfix",style:{display:t.length>0?"block":"none"}},Fotor.globalConfig.lang.common_search_record_title,n.createElement("a",{className:"pull-right clear-all",onClick:this.clearAll,title:Fotor.globalConfig.lang.design_workspace_photo_clearButton})),n.createElement("div",{className:"clearfix",style:{display:t.length>0?"block":"none"}},t.map(function(t){if(t)return n.createElement("a",{key:t,onClick:function(a){return e.handleSearch(t)},className:"search-tag"},t,n.createElement("span",{onClick:function(a){return e.handleRemoveTag(a,t)}}))})),n.createElement("div",{className:"marginT20"},Fotor.globalConfig.lang.common_search_guess_title),n.createElement("div",{className:"clearfix"},a.map(function(t){if(t)return n.createElement("a",{key:t,onClick:function(a){return e.handleSearch(t)},className:"search-tag"},t)})))))}},{key:"handleFocus",value:function(){var e=r(this.refs.searchInput).val();""==e&&""!=this.props.tool.state.keyword&&(this.state.searched=!1),this.setState({searching:!0}),""==e?this.props.tool.setSearching(!0,""):this.props.tool.setSearching(!0,e)}},{key:"handleKeyDown",value:function(e){13==e.keyCode&&this.doSearch(),e.stopPropagation()}},{key:"doSearch",value:function(){var e=r(this.refs.searchInput).val();""!==(e=e.trim())&&(this.setState({searched:!0,hasSearchedKeyword:!0}),this.props.tool.setSearching(!0,e),this.props.handleSelectSet(0))}},{key:"handleKeyUp",value:function(e){var t=r(this.refs.searchInput).val();t=t.trim(),""!==t?this.setState({hasSearchedKeyword:!0}):this.handleSearchCloseIcon(),e.stopPropagation()}},{key:"handleBack",value:function(){r(this.refs.searchInput).val(""),this.props.tool.setSearching(!1,""),this.setState({searching:!1,searched:!1,hasSearchedKeyword:!1})}},{key:"handleSearchIcon",value:function(){r(this.refs.backBtn).parent().hasClass("active")||(this.handleFocus(),r(this.refs.searchInput).focus()),"block"==r(this.refs.backBtn).css("display")&&this.doSearch()}},{key:"handleSearch",value:function(e){r(this.refs.searchInput).val(e),this.doSearch()}},{key:"handleRemoveTag",value:function(e,t){var a=this.getCookiekeywords(),r=[];a.forEach(function(e){e!=t&&r.push(e)}),FotorUtils.Cookie.set("searchSticker",r.join("||"),Fotor.globalConfig.stickerRecentKeywordCookieSaveTime),this.forceUpdate(),e.stopPropagation()}},{key:"clearAll",value:function(e){FotorUtils.Cookie.set("searchSticker","",Fotor.globalConfig.stickerRecentKeywordCookieSaveTime),this.forceUpdate(),e.stopPropagation()}},{key:"handleSearchCloseIcon",value:function(e){r(this.refs.searchInput).val(""),this.setState({hasSearchedKeyword:!1,searched:!1}),this.props.tool.cancelSearch(),e&&e.stopPropagation()}}]),t}(c.Component);t.default=h,e.exports=t.default}).call(t,a(1),a(0))},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.EventEmitter={_events:{},dispatch:function(e,t){if(this._events[e])for(var a=0;a<this._events[e].length;a++)this._events[e][a](t)},subscribe:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},unSubscribe:function(e){this._events&&this._events[e]&&delete this._events[e]}}},function(e,t,a){var r=a(917);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,"@keyframes rotationAndZoomOut {\n  0% {\n    transform: scale(1) rotate(0deg);\n    opacity: 1; }\n  30% {\n    transform: scale(1.5) rotate(180deg);\n    opacity: 1; }\n  60% {\n    transform: scale(0.8) rotate(360deg);\n    opacity: 1; }\n  90% {\n    transform: scale(0.3) rotate(540deg);\n    opacity: 1; }\n  100% {\n    transform: scale(0.1) rotate(720deg);\n    opacity: 0; } }\n\n#sticker-favor-animate {\n  position: absolute;\n  z-index: 100;\n  width: 100px;\n  height: 100px;\n  padding: 7px;\n  display: flex;\n  -webkit-display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center; }\n  #sticker-favor-animate div {\n    position: absolute;\n    top: 7px;\n    bottom: 7px;\n    left: 7px;\n    right: 7px;\n    display: flex;\n    -webkit-display: flex;\n    flex-flow: row wrap;\n    align-items: center;\n    justify-content: center; }\n    #sticker-favor-animate div img {\n      max-width: 100%;\n      max-height: 100%; }\n  #sticker-favor-animate img {\n    max-width: 100%;\n    max-height: 100%; }\n  #sticker-favor-animate.rotationAndZoomOut {\n    opacity: 0;\n    transform: scale(0.1) rotate(720deg);\n    animation: rotationAndZoomOut .6s; }\n\n#sticker-pop-favor-animate {\n  position: fixed;\n  z-index: 100;\n  width: 100px;\n  height: 100px;\n  padding: 7px;\n  display: flex;\n  -webkit-display: flex;\n  flex-flow: row wrap;\n  align-items: center;\n  justify-content: center;\n  display: none; }\n  #sticker-pop-favor-animate div {\n    position: absolute;\n    top: 7px;\n    bottom: 7px;\n    left: 7px;\n    right: 7px;\n    display: flex;\n    -webkit-display: flex;\n    flex-flow: row wrap;\n    align-items: center;\n    justify-content: center; }\n    #sticker-pop-favor-animate div img {\n      max-width: 100%;\n      max-height: 100%; }\n  #sticker-pop-favor-animate img {\n    max-width: 100%;\n    max-height: 100%; }\n  #sticker-pop-favor-animate.rotationAndZoomOut {\n    opacity: 0;\n    transform: scale(0.1) rotate(720deg);\n    animation: rotationAndZoomOut .6s;\n    /*animation: rotation360 infinite 1s;*/ }\n\n.sticker-filter {\n  margin: 20px 0;\n  padding-left: 4px; }\n  .sticker-filter a {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    margin-right: 30px;\n    background: url("+r(a(918))+") no-repeat; }\n    .sticker-filter a.sticker-filter-type1 {\n      background-position: 0 0; }\n      .sticker-filter a.sticker-filter-type1:hover, .sticker-filter a.sticker-filter-type1.active {\n        background-position: 0 -16px; }\n      .sticker-filter a.sticker-filter-type1:active {\n        background-position: 0 -32px; }\n    .sticker-filter a.sticker-filter-type2 {\n      background-position: -16px 0; }\n      .sticker-filter a.sticker-filter-type2:hover, .sticker-filter a.sticker-filter-type2.active {\n        background-position: -16px -16px; }\n      .sticker-filter a.sticker-filter-type2:active {\n        background-position: -16px -32px; }\n    .sticker-filter a.sticker-filter-type3 {\n      background-position: -32px 0; }\n      .sticker-filter a.sticker-filter-type3:hover, .sticker-filter a.sticker-filter-type3.active {\n        background-position: -32px -16px; }\n      .sticker-filter a.sticker-filter-type3:active {\n        background-position: -32px -32px; }\n    .sticker-filter a:last-child {\n      margin-right: 0; }\n\n#sticker-top-name {\n  display: inline-block;\n  padding: 0 14px;\n  background: rgba(0, 0, 0, 0.3);\n  color: white;\n  font-size: 12px;\n  line-height: 30px;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  top: 114px;\n  z-index: 10;\n  border-radius: 4px; }\n\n#sticker-to-top {\n  width: 30px;\n  height: 30px;\n  border-radius: 4px;\n  background: rgba(0, 0, 0, 0.3);\n  position: absolute;\n  top: 114px;\n  right: 40px;\n  z-index: 10;\n  cursor: pointer; }\n  #sticker-to-top:after {\n    content: '';\n    position: absolute;\n    width: 14px;\n    height: 14px;\n    left: 50%;\n    top: 50%;\n    margin-left: -7px;\n    margin-top: -7px;\n    background: url("+r(a(919))+") no-repeat; }\n  #sticker-to-top:hover, #sticker-to-top:active {\n    background: rgba(0, 0, 0, 0.4); }\n  #sticker-to-top:hover:after, #sticker-to-top:active:after {\n    background-position: left -14px; }\n\n#sticker-top-search-filter {\n  width: 200px;\n  position: absolute;\n  z-index: 10;\n  left: 50%;\n  top: 110px;\n  margin-left: -100px; }\n  #sticker-top-search-filter .search-select-dropdown .select-drop {\n    background: #ebebf0; }\n\n@media (max-width: 1279px) {\n  body.no-ads #sticker-top-search-filter {\n    width: 150px;\n    margin-left: -75px; } }\n\n@media (max-width: 1439px) {\n  body.ads #sticker-top-search-filter {\n    width: 150px;\n    margin-left: -75px; } }\n\n.black #sticker-top-search-filter .search-select-dropdown .select-drop {\n  background: rgba(33, 33, 38, 0.97); }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABACAYAAABcIPRGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowOTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEMkY1ODU2N0MxODIxMUU3OTg2NDg2Q0IwNTA3N0M4RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEMkY1ODU2NkMxODIxMUU3OTg2NDg2Q0IwNTA3N0M4RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA5NEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA5NEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pYZhRwAAAlpJREFUeNrsWr1OAkEQ5uQKWtHO+ASaQ0OvjTbWPoBExTeg1ZhYyCNAgQ9AiY02xt5EFB+AaOtZSoGsc8luspx7u7c/yJLMJF8wy6z7DXMzsx8h6PV6pGBnL4AoY71C/+5LfI4BN4ANzXMHgFrgIACZBfRVdsYzYMvw/w9C7hBTIymyMsIiH5aZhMuP5rmbS4X5G+OQRf6CkuXxZ7PPlgTQzHozdHgQceSTthXAvip9NvYq6U46Plnk7wHbtNibogwQR51GZpFBVtLk9wCfgG+fa+BcQZ7VxFQAgSX6gi5B6HqBG2QqH0buWkJ+JkUc5ViPNPY2uAEnJe+6C5kOsiy7U5H3fQ40uJr4lwyY2oR+kEWNa02RzwCxBP9IEMWjIfJhM2KsceaY7nnzYZCd0G400cxasucoHL13fLhChJr1yB45J0Vs20bbBmImsU1AB/UA6gHUA6gHUA+gHkA9gHoA9QDqgfnpARcBoB5APYB6APUA6gHUA6gHUA+gHkA9gHpgMfVAWFqvnVkGEAPKGevMLiU+Q8AVYNng3KGLDJRzrMt8dgzIs727SRG3LAOo09eWYC1tIh8WXFvzWpPsL/vQhVS/6qpSCD+IRdADT4Irx0zmQN2RT9pKgLVZTuI4x3qsuZcnfwBYpdeKvigDdcsA8jSBrkFW0uRvASNuiHlZA1UFeVYTUxmwbaOHkiHVzeGTDiCkz7yI/EyK2HaQpY392ldJ3nUXMh1kWfahIu/7HKgIBpiXeoBw+jpvPQYu26jtIIvptxCnBmd++TDIHmnBEs2sJXsefgUYAE9Hg2gMl52VAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAqCAYAAACDdWrxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowNjRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyOTkzMzU0QUMxODIxMUU3Qjk2MUJCRkE1NzNFOTQyMiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyOTkzMzU0OUMxODIxMUU3Qjk2MUJCRkE1NzNFOTQyMiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA2NEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA2NEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+VasMPgAAATdJREFUeNrsk71KA0EUhbMmhsRYptkmgYAgbGeRwoew9CW0tbMULQQLgzZC6tSJKCJpLKzyBFZqkyaFhbXjd+GMZpeJSCBFwl74ij1zzuz83cg5V5in1gpz1kKChyJYpYAWwRHs63sDziF1GFHmcGwFx7AHn9I2oQ8n8PXjtKBYh1MYwRC2xVCajZW834fKcCHDA7SmJmxJG8lT9sEqXGvgFhpTIY9pA3nMW7U9XrLiXXiHAxjPOMgYrqABzzZbAjdQD/wpS13eJFqNJ7dEwTMRrsBd2RV13G91pKV82VARugp8CCetOCtoj7cn4wR2xERaTx2UClagL8NYz9CPJdKcPBUfrMGjBt5gK7Bv017lMW/NxHsJL9D844E35bG6M6ENTxD/oztiedt5d+TdkXfHCnTHtwADAFjZYV4RDEfVAAAAAElFTkSuQmCC"},function(e,t,a){(function(t,r){var n=a(20).default,o=a(5),i=o({displayName:"StickerAdmin",componentDidMount:function(){var e=t(this.refs.ajaxFrame),a=t(e).find(".ajax-item"),r=t(e).find(".ajax-show"),n=t(e).find(".ajax-hide"),o=t(e).find("#ajax-nav").find("li");t(e).css("display","block"),t(a).eq(0).removeClass("hidden");var i=t(e).height()+40;t(e).css({top:-i+"px"}),t(r).on("click",function(){t(e).stop().animate({top:"0px"},300)}),t(n).on("click",function(){var a=t("#ajax-frame").height()+40;t(e).stop().animate({top:-a+"px"},300)}),t(n).trigger("click"),t(o).on("click",function(){var e=t(o).index(this);t(o).removeClass("active"),t(this).addClass("active"),t(a).addClass("hidden"),t(a).eq(e).removeClass("hidden")})},selectPage:function(e){var a=t(e.target).parent();t(a).find("li").index(t(e.target));t(a).find("li").removeClass("active"),t(e.target).addClass("active")},render:function(){return r.createElement("div",{id:"ajax-frame",ref:"ajaxFrame"},r.createElement("a",{className:"ajax-show"},"↓"),r.createElement("a",{className:"ajax-hide"},"↑"),r.createElement("a",{className:"ajax-hide ajax-hide-top"},"↑"),r.createElement("ul",{id:"ajax-nav",className:"ul-no-style clearfix"},r.createElement("li",{className:"active",onClick:this.selectPage},"分类"),r.createElement("li",{onClick:this.selectPage},"Sticker")),r.createElement("div",{className:"ajax-scroll"},r.createElement(n,{className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},r.createElement(s,{data:this.props.data,calltoParent:this.props.calltoParent,tool:this.props.tool}),r.createElement(l,{data:this.props.data,calltoParent:this.props.calltoParent,tool:this.props.tool}))))}}),s=o({displayName:"AdminStickerCategoryAdd",componentDidMount:function(){this.addCategory(),this.removeCategory()},addCategory:function(){var e=this;t("#addCategory").on("submit",function(){if(""==t("#add_bgColor").val()||""==t("#add_title").val())return alert("背景颜色和标题不能为空"),!1;t("#addCategory .uploading").fadeIn("fast");var a=FotorUtils.Cookie.get("X-XSRF-TOKEN");return t("#csrf").val(a),Fotor.services.ajaxPostForm(t(this),function(a){a.status?(e.props.tool.loadData(!0),e.showSuccess("#addCategory"),t("#addCategory")[0].reset()):Fotor.popup.doPopup({title:"操作失败",content:"不要太悲剧，又错了<br />错误代码:"+a.code,confirmBtnText:"点我点我点我",cancelBtnText:"嗯哼，点我还不一样滴"},function(){}),t("#addCategory .uploading").fadeOut("fast")}),!1})},removeCategory:function(){var e=this;t("#removeCategory").on("submit",function(){var a=t("#cid").val(),r="id="+a;return Fotor.services.ajaxPostData(t(this).attr("action"),r,function(t){t.status?(e.props.tool.loadData(!0),e.showSuccess("#removeCategory")):Fotor.popup.doPopup({title:"操作失败",content:"不要太悲剧，又错了<br />错误代码:"+t.code,confirmBtnText:"点我点我点我",cancelBtnText:"嗯哼，点我还不一样滴"},function(){})}),!1})},showSuccess:function(e){t(e).find(".success").slideDown(300),setTimeout(function(){t(e).find(".success").slideUp(300)},2e3)},render:function(){return r.createElement("div",{className:"ajax-item hidden"},r.createElement("div",{className:"ajax-title"},"分类"),r.createElement("div",{className:"ajax-content clearfix"},r.createElement("form",{id:"addCategory",method:"post",encType:"multipart/form-data",action:"https://gw.fotor.com/sticker/saveGroup"},r.createElement("div",{className:"success"},"操作成功!"),r.createElement("div",{className:"uploading"},r.createElement("div",{className:"loading-square"},r.createElement("span",{className:"span1"}),r.createElement("span",{className:"span2"}),r.createElement("span",{className:"span3"}))),r.createElement("input",{type:"hidden",name:"_csrf",id:"csrf"}),r.createElement("ul",{className:"ul-no-style"},r.createElement("li",null,r.createElement("p",{className:"input-title"},"背景图片")),r.createElement("li",{className:"input-container"},r.createElement("input",{type:"file",accept:"image/*",name:"bgImg"})),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",null,r.createElement("p",{className:"input-title"},"可用语言 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("input",{type:"checkbox",name:"language",value:"zh_CN"})," 中文    ",r.createElement("input",{type:"checkbox",name:"language",value:"en_US"})," 英文"))),r.createElement("li",null,r.createElement("p",{className:"input-title"},"背景颜色(#FFFFFF) ",r.createElement("span",{className:"red"},"*"))),r.createElement("li",{className:"input-container"},r.createElement("input",{type:"text",name:"bgColor",id:"add_bgColor",defaultValue:"#ffffff"})),r.createElement("li",null,r.createElement("p",{className:"input-title"},"标题 ",r.createElement("span",{className:"red"},"*"))),r.createElement("li",{className:"input-container"},r.createElement("input",{type:"text",name:"title",id:"add_title"})),r.createElement("li",null,r.createElement("p",{className:"input-title"},"类型 ",r.createElement("span",{className:"red"},"*"))),r.createElement("li",{className:"input-container"},r.createElement("select",{name:"innerCategory"},r.createElement("option",{value:"0"},"普通"),r.createElement("option",{value:"1"},"容器"),r.createElement("option",{value:"2"},"九宫格"),r.createElement("option",{value:"3"},"打组"),r.createElement("option",{value:"4"},"shape")))),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",{className:"span5 pull-left"},r.createElement("p",{className:"input-title"},"一行显示几个 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{name:"colsNum",defaultValue:"2"},r.createElement("option",{value:"1"},"1"),r.createElement("option",{value:"2"},"2"),r.createElement("option",{value:"3"},"3"),r.createElement("option",{value:"4"},"4"),r.createElement("option",{value:"5"},"5")))),r.createElement("li",{className:"span5 pull-right"},r.createElement("p",{className:"input-title"},"是否VIP专享? ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{name:"vip"},r.createElement("option",{value:"false"},"否"),r.createElement("option",{value:"true"},"是"))))),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",{className:"span5 pull-left"},r.createElement("p",{className:"input-title"},"发布状态 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{name:"state"},r.createElement("option",{value:"1"},"内部测试"),r.createElement("option",{value:"2"},"下线"),r.createElement("option",{value:"0"},"正式发布"))))),r.createElement("ul",{className:"ul-no-style"},r.createElement("li",{className:"input-button"},r.createElement("input",{type:"submit",value:"Submit"}))))),r.createElement("div",{className:"ajax-box marginT40"},r.createElement("div",{className:"ajax-title"},"删除分类"),r.createElement("div",{className:"ajax-content"},r.createElement("form",{id:"removeCategory",method:"post",encType:"multipart/form-data",action:"https://gw.fotor.com/sticker/deleteGroup"},r.createElement("div",{className:"success"},"操作成功!"),r.createElement("ul",{className:"ul-no-style"},r.createElement("li",{className:"input-title"},"分类  ",r.createElement("span",{className:"red"},"*")),r.createElement("li",{className:"input-container"},r.createElement("select",{className:"category",name:"category",id:"cid"},r.createElement("option",{value:""},"选择"),this.props.data.map(function(e,t){return r.createElement("option",{value:e.id,key:t},e.title)}))),r.createElement("li",{className:"input-button"},r.createElement("input",{type:"submit",value:"Delete"})))))))}}),o=a(5),l=o({displayName:"AdminStickerAdd",getInitialState:function(){return{stickers:[]}},findStickers:function(e){var a=t("#remove_category").val(),r=[];this.props.data.map(function(e,t){e.id==a&&e.items.map(function(e,t){r.push(e)})}),this.setState({stickers:r,thumb:""})},setStickerThumb:function(e){var a=t(e.target).val();a=a.split("|"),this.setState({thumb:a[1]}),t("#ids").val(a[0])},componentDidMount:function(){Fotor.app.on("stickerClickByAdmin",this.updateStickerData),this.addSticker(),this.removeSticker()},updateStickerData:function(e){var a=e.params[0];if(a&&null!=a.groupId&&void 0!=a.groupId&&t("#addSticker_groupId").find("option[value='"+a.groupId+"']").attr("selected",!0),a&&null!=a.name&&void 0!=a.name&&(t("#addSticker_stickerName")[0].value=a.name),a&&null!=a.fileScale&&void 0!=a.fileScale&&(t("#addSticker_scale")[0].value=a.fileScale),a&&null!=a.tagMeta&&void 0!=a.tagMeta&&""!=a.tagMeta){var r=JSON.parse(a.tagMeta);t("#addSticker_stickerLabelA")[0].value=r.level1,t("#addSticker_stickerLabelB")[0].value=r.level2,t("#addSticker_stickerLabelC")[0].value=r.level3}a&&null!=a.innerCategory&&void 0!=a.innerCategory&&t("#innerCategorySelect").find("option[value='"+a.innerCategory+"']").attr("selected",!0),a&&null!=a.hasBorder&&void 0!=a.hasBorder&&t("#hasBorderSelect").find("option[value='"+a.hasBorder+"']").attr("selected",!0),a&&null!=a.stretchMode&&void 0!=a.stretchMode&&t("#stretchModeSelect").find("option[value='"+a.stretchMode+"']").attr("selected",!0),a&&null!=a.vip&&void 0!=a.vip&&t("#vipSelect").find("option[value='"+a.vip+"']").attr("selected",!0),a&&null!=a.cacheAble&&void 0!=a.cacheAble&&t("#cacheAbleSelect").find("option[value='"+a.cacheAble+"']").attr("selected",!0),t("#stateSelect").find("option[value='1']").attr("selected",!0)},componentWillUnmount:function(){Fotor.app.off("stickerClickByAdmin",this.updateStickerData)},addCollageCell:function(){var e=new fabric.CollageShapeImage({width:400,height:400});Fotor.mainCanvas.canvas.add(e)},saveStickerThumb:function(){Fotor.styleSaveManager.initThumbCanvas(),Fotor.styleSaveManager.getStickerThumb(),Fotor.styleSaveManager.thumbCanvas.toBlob(function(e){saveAs(e,"sticker.png"),Fotor.styleSaveManager.thumbCanvas=null,Fotor.styleSaveManager.thumbContext=null,Fotor.styleSaveManager.DrawCanvas=null,Fotor.styleSaveManager.DrawContext=null})},saveStickerJson:function(){var e=Fotor.canvas.getActiveObject();if(null!=e){var t=e.toDatalessObject();delete t.left,delete t.top,delete t.isLocked,delete t.scale,delete t.scaleX,delete t.scaleY,delete t.angle;var a=new Blob([JSON.stringify(t)],{type:"text/plain;charset=utf-8"});saveAs(a,"sticker.json")}},addSticker:function(){var e=this;t("#addSticker").on("submit",function(){if(""==t("#addSticker_groupId").val()||""==t("#addSticker_stickerName").val()||""==t("#addSticker_scale").val())return alert("请输入必填项"),!1;t("#addSticker .uploading").fadeIn("fast");var a=FotorUtils.Cookie.get("X-XSRF-TOKEN");return t(this).find("input[name=_csrf]").val(a),Fotor.services.ajaxPostForm(t(this),function(a){a.status?(e.props.tool.loadData(!0),e.showSuccess("#addSticker"),t("#addSticker")[0].reset()):Fotor.popup.doPopup({title:"操作失败",content:"不要太悲剧，又错了! 错误代码:"+a.code,confirmBtnText:"确定",cancelBtnText:"取消"},function(){}),t("#addSticker .uploading").fadeOut("fast")},function(){e.props.tool.loadData(!0),e.showSuccess("#addSticker"),t("#addSticker")[0].reset(),t("#addSticker .uploading").fadeOut("fast")}),!1})},removeSticker:function(){var e=this;t("#removeSticker").on("submit",function(){var a=t("#ids").val(),r="id="+a;return Fotor.services.ajaxPostData(t(this).attr("action"),r,function(a){a.status?(e.props.tool.loadData(!0,function(){e.findStickers(),t("select[name=stickerId]").val("")}),e.showSuccess("#removeSticker"),e.setState({thumb:""})):Fotor.popup.doPopup({title:"操作失败",content:"不要太悲剧，又错了! 错误代码:"+a.code,confirmBtnText:"确定",cancelBtnText:"取消"},function(){})}),!1})},showSuccess:function(e){t(e).find(".success").slideDown(300),setTimeout(function(){t(e).find(".success").slideUp(300)},2e3)},render:function(){return r.createElement("div",{className:"ajax-item hidden"},r.createElement("div",{className:"ajax-title"},"添加Sticker"),r.createElement("div",{className:"ajax-content"},r.createElement("button",{onClick:this.addCollageCell},"添加拼图容器")," ",r.createElement("button",{onClick:this.saveStickerThumb},"保存缩略图"),r.createElement("button",{onClick:this.saveStickerJson},"保存Json"),r.createElement("form",{id:"addSticker",method:"post",encType:"multipart/form-data",action:"https://gw.fotor.com/sticker/save"},r.createElement("div",{className:"success"},"操作成功!"),r.createElement("div",{className:"uploading"},r.createElement("div",{className:"loading-square"},r.createElement("span",{className:"span1"}),r.createElement("span",{className:"span2"}),r.createElement("span",{className:"span3"}))),r.createElement("input",{type:"hidden",name:"_csrf"}),r.createElement("input",{id:"sticker_type",name:"sticker_type",value:"",type:"hidden"}),r.createElement("ul",{className:"ul-no-style"},r.createElement("li",null,r.createElement("p",{className:"input-title"},"分类 ",r.createElement("span",{className:"red"},"*"))),r.createElement("li",{className:"input-container"},r.createElement("select",{className:"category",name:"groupId",id:"addSticker_groupId"},r.createElement("option",{value:""},"选择"),this.props.data.map(function(e,t){return r.createElement("option",{value:e.id,key:t},e.title)})))),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",{className:"span5 pull-left"},r.createElement("p",{className:"input-title"},"名称 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("input",{type:"text",name:"stickerName",id:"addSticker_stickerName",defaultValue:"My Sticker"}))),r.createElement("li",{className:"span5 pull-right"},r.createElement("p",{className:"input-title"},"缩放比 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("input",{type:"text",name:"scale",id:"addSticker_scale",defaultValue:"1"})))),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",null,r.createElement("p",{className:"input-title"},"标签1 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("textarea",{type:"text",rows:"3",name:"stickerLabelA",id:"addSticker_stickerLabelA"}))),r.createElement("li",null,r.createElement("p",{className:"input-title"},"标签2 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("textarea",{type:"text",rows:"3",name:"stickerLabelB",id:"addSticker_stickerLabelB"}))),r.createElement("li",null,r.createElement("p",{className:"input-title"},"标签3 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("textarea",{type:"text",rows:"3",name:"stickerLabelC",id:"addSticker_stickerLabelC"})))),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",{className:"span5 pull-left"},r.createElement("p",{className:"input-title"},"类型 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{id:"innerCategorySelect",name:"innerCategory"},r.createElement("option",{value:"0"},"普通"),r.createElement("option",{value:"1"},"容器"),r.createElement("option",{value:"2"},"九宫格"),r.createElement("option",{value:"3"},"打组"),r.createElement("option",{value:"4"},"shape"),r.createElement("option",{value:"5"},"美术自定义")))),r.createElement("li",{className:"span5 pull-right"},r.createElement("p",{className:"input-title"},"是否允许修改边框? ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{id:"hasBorderSelect",name:"hasBorder"},r.createElement("option",{value:"true"},"是"),r.createElement("option",{value:"false"},"否"))))),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",{className:"span5 pull-left"},r.createElement("p",{className:"input-title"},"方向 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{id:"stretchModeSelect",name:"stretchMode"},r.createElement("option",{value:"any"},"任意"),r.createElement("option",{value:"equal"},"等比例"),r.createElement("option",{value:"horizontal"},"横向"),r.createElement("option",{value:"vertical"},"竖向"),r.createElement("option",{value:"horizontalOnly"},"只能横向（禁放缩）"),r.createElement("option",{value:"verticalOnly"},"只能竖向（禁放缩）")))),r.createElement("li",{className:"span5 pull-right"},r.createElement("p",{className:"input-title"},"是否VIP专享? ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{id:"vipSelect",name:"vip"},r.createElement("option",{value:"false"},"否"),r.createElement("option",{value:"true"},"是"))))),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",{className:"span5 pull-left"},r.createElement("p",{className:"input-title"},"缓存模式 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{id:"cacheAbleSelect",name:"cacheAble"},r.createElement("option",{value:"true"},"开启"),r.createElement("option",{value:"false"},"关闭")))),r.createElement("li",{className:"span5 pull-left"},r.createElement("p",{className:"input-title"},"上线模式 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("select",{id:"stateSelect",name:"state"},r.createElement("option",{value:"0"},"上线"),r.createElement("option",{value:"1"},"内部测试"),r.createElement("option",{value:"2"},"下线"),r.createElement("option",{value:"3"},"修改中"))))),r.createElement("ul",{className:"ul-no-style clearfix"},r.createElement("li",{className:"span5 pull-left"},r.createElement("p",{className:"input-title"},"缩略图 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("input",{type:"file",accept:"image/*",name:"thumb"}))),r.createElement("li",{className:"span5 pull-right"},r.createElement("p",{className:"input-title"},"文件 ",r.createElement("span",{className:"red"},"*")),r.createElement("p",{className:"input-container"},r.createElement("input",{type:"file",name:"sticker"})))),r.createElement("ul",{className:"ul-no-style"},r.createElement("li",{className:"input-button"},r.createElement("input",{type:"submit",value:"Submit"}))))),r.createElement("div",{className:"ajax-box marginT40"},r.createElement("div",{className:"ajax-title"},"删除Sticker"),r.createElement("div",{className:"ajax-content"},r.createElement("form",{id:"removeSticker",method:"post",action:"/sticker/deleteSticker"},r.createElement("div",{className:"success"},"操作成功!"),r.createElement("ul",{className:"ul-no-style"},r.createElement("li",{className:"input-title"},"Sticker分类 ",r.createElement("span",{className:"red"},"*")),r.createElement("li",{className:"input-container"},r.createElement("select",{className:"category",name:"remove_category",id:"remove_category",onChange:this.findStickers},r.createElement("option",{value:""},"选择"),this.props.data.map(function(e,t){return r.createElement("option",{value:e.id,key:t},e.title)}))),r.createElement("li",{className:"input-title"},"Sticker名称 ",r.createElement("span",{className:"red"},"*")),r.createElement("li",{className:"input-container clearfix"},r.createElement("select",{name:"stickerId",onChange:this.setStickerThumb},r.createElement("option",{value:""},"选择"),this.state.stickers.map(function(e,t){return r.createElement("option",{value:e.id+"|//pub-static.haozhaopian.net"+e.thumb,key:t},e.name)})),r.createElement("input",{type:"hidden",id:"ids"}),r.createElement("div",{className:"sticker-preview clearfix"},r.createElement("img",{src:this.state.thumb,width:"30",height:"30"}))),r.createElement("li",{className:"input-button"},r.createElement("input",{type:"submit",value:"Delete"})))))))}});o({displayName:"AdminStickerOrder",componentDidMount:function(){this.stickerOrder()},stickerOrder:function(){var e=this;this.initSort(),t("#stickerOrder").on("submit",function(){if(""==t("input[name=ids]").val())Fotor.popup.doPopup({title:"操作失败",content:"顺序没有变化呢，亲",confirmBtnText:"嗯",cancelBtnText:"嗯"},function(){});else{t("#stickerOrder .uploading").fadeIn("fast");var a=FotorUtils.Cookie.get("X-XSRF-TOKEN");t(this).find("input[name=_csrf]").val(a),Fotor.services.ajaxPostForm(t(this),function(a){a.status?(e.props.calltoParent(),e.showSuccess("#stickerOrder")):Fotor.popup.doPopup({title:"操作失败",content:"不要太悲剧，又错了<br />错误代码:"+a.code,confirmBtnText:"点我点我点我",cancelBtnText:"嗯哼，点我还不一样"},function(){}),t("#stickerOrder .uploading").fadeOut("fast")})}return!1})},showSuccess:function(e){t(e).find(".success").slideDown(300),setTimeout(function(){t(e).find(".success").slideUp(300)},2e3)},stickerReOrder:function(){var e=t("#sortList li").map(function(e){return t(this).find("b").html(e+1),t(this).children().attr("data-id")}).get();t("input[name=ids]").val(e.join(","))},componentDidUpdate:function(){this.resetSort()},initSort:function(){},resetSort:function(){t("#sortList ul").remove();var e=t("#backupList").html();t("#sortList").html(e),this.initSort()},render:function(){return r.createElement("div",{className:"ajax-item hidden"},r.createElement("div",{className:"ajax-title"},"分类排序"),r.createElement("div",{className:"ajax-content"},r.createElement("form",{id:"stickerOrder",method:"post",encType:"multipart/form-data",action:"https://gw.fotor.com/sticker/changeStickerGroupSort"},r.createElement("div",{className:"success"},"操作成功!"),r.createElement("div",{className:"uploading"},r.createElement("div",{className:"loading-square"},r.createElement("span",{className:"span1"}),r.createElement("span",{className:"span2"}),r.createElement("span",{className:"span3"}))),r.createElement("div",{id:"sortList"},r.createElement("ul",{className:"order-list clearfix"},this.props.data.map(function(e,t){return r.createElement("li",{value:e.id,key:t},r.createElement("div",{"data-id":e.id},r.createElement("b",null,t+1)," ",e.title))}))),r.createElement("div",{id:"backupList",className:"hidden"},r.createElement("ul",{className:"order-list clearfix"},this.props.data.map(function(e,t){return r.createElement("li",{value:e.id,key:t},r.createElement("div",{"data-id":e.id},r.createElement("b",null,t+1)," ",e.title))}))),r.createElement("input",{type:"hidden",name:"_csrf"}),r.createElement("input",{type:"hidden",name:"ids"}),r.createElement("div",{className:"ul-no-style"},r.createElement("div",{className:"input-button"},r.createElement("input",{type:"submit",value:"Submit"}))))))}});e.exports=i}).call(t,a(1),a(0))},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}var o=a(12),i=n(o),s=a(34),l=(n(s),a(36)),c=n(l);a(922);var h=(a(53).default,a(20).default,a(10)),d=a(924),u=a(925),p=a(926),m=a(929),f=a(930),g=a(931),v=a(5),b=v({displayName:"StickerUserOwn",mixins:[h,Fotor.mixin],getInitialState:function(){return{showFavorList:!1,showRecentList:!1,showMineList:!1}},componentWillUnmount:function(){},componentDidMount:function(){},showLoginPanel:function(){var e=Fotor.vipResManager.getLoginContent("useYourOwn");FotorUser.show(e,!1)},showFavorList:function(){if(Fotor.loginStateManager.isLogin()){var e=!this.state.showFavorList;this.state.showRecentList;e&&!1,this.setState({showFavorList:e,showRecentList:!1,showMineList:!1})}else{var t=Fotor.vipResManager.getLoginContent("favor");FotorUser.show(t,!1)}},toggleMineSticker:function(){if(Fotor.loginStateManager.isLogin()){var e=this.state.showMineList;this.setState({showFavorList:!1,showRecentList:!1,showMineList:!e})}else{var t=Fotor.vipResManager.getLoginContent("favor");FotorUser.show(t,!1)}},showRecentlyUsedList:function(){if(Fotor.loginStateManager.isLogin()){var e=!this.state.showRecentList;this.state.showFavorList;e&&!1,this.setState({showFavorList:!1,showRecentList:e,showMineList:!1})}else{var t=Fotor.vipResManager.getLoginContent("recentSticker");FotorUser.show(t,!1)}},hideFavorList:function(){this.state.showFavorList&&this.setState({showFavorList:!1})},hideRecentList:function(){this.state.showRecentList&&this.setState({showRecentList:!1})},hideMineList:function(){this.state.showMineList&&this.setState({showMineList:!1})},render:function(){var e=this,a=this,r=this.props.displayFormat;return t.createElement("div",null,0==r&&t.createElement("div",{id:"sticker-own-list"},!Fotor.designerMode&&t.createElement("div",{className:"clearfix"},t.createElement(Fotor.ui.Button,{ref:"stickerTitle",className:"marginT15",text:Fotor.globalConfig.lang.design_workspace_material_stickerUserOwnTitle,onClick:this.onMyClick})),Fotor.designerMode&&t.createElement(p,{scroller:this.props.scroller,showTip:this.props.showTip,hideTip:this.props.hideTip,tool:a.props.tool,displayFormat:r}),t.createElement(d,{scroller:this.props.scroller,showTip:this.props.showTip,hideTip:this.props.hideTip,tool:a.props.tool,displayFormat:r}),t.createElement(u,{scroller:this.props.scroller,showTip:this.props.showTip,hideTip:this.props.hideTip,tool:a.props.tool,displayFormat:r}),t.createElement("div",{className:"background-image-space"})),1==r&&t.createElement("div",{id:"sticker-own-list"},t.createElement("div",{className:"sticker-grid-layout clearfix"},t.createElement("div",{className:"sticker-grid-item"},t.createElement("div",{className:"sticker-grid-item-inner",ref:"stickerTitle",onClick:this.onMyClick},t.createElement("div",{className:"sticker-grid-symbol symbol7"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_stickerUserOwnTitle.toLowerCase()))),t.createElement("div",{className:"sticker-grid-item",onClick:function(){return e.showFavorList()}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol6"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_favorStickerTitle.toLowerCase()))),t.createElement("div",{className:"sticker-grid-item",onClick:function(){return e.showRecentlyUsedList()}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol9"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_recentlyUsedStickerTitle.toLowerCase()))),t.createElement("div",{style:{display:this.state.showMineList?"block":"none"}},t.createElement(g,{scroller:this.props.scroller,showTip:this.props.showTip,hideTip:this.props.hideTip,tool:a.props.tool,displayFormat:r})),t.createElement("div",{style:{display:this.state.showFavorList?"block":"none"}},t.createElement(m,{scroller:this.props.scroller,showTip:this.props.showTip,hideTip:this.props.hideTip,tool:a.props.tool,displayFormat:r})),t.createElement("div",{style:{display:this.state.showRecentList?"block":"none"}},t.createElement(f,{scroller:this.props.scroller,showTip:this.props.showTip,hideTip:this.props.hideTip,tool:a.props.tool,displayFormat:r}))),t.createElement("div",{className:"background-image-space space-no-mgt"})))},onMyClick:function(){if(Fotor.designerMode)return void this.toggleMineSticker();"design"==Fotor.routerManager.moduleName?Fotor.routerManager.goto("/design/"+Fotor.projectManager.currentProjectId+"/upload"):"editor"==Fotor.routerManager.moduleName?Fotor.routerManager.goto("/editor/upload"):"collage"==Fotor.routerManager.moduleName&&(Fotor.app.trigger("NAV_PLUG","upload"),Fotor.app.trigger(c.default.CHANGE,!0,"upload"),Fotor.app.trigger(c.default.CHANGE,!1,"sticker"))},onClick:function(){var e=this;if(Fotor.loginStateManager.isLogin()){var t=(r(this.refs.stickerTitle),r(this.refs.stickerGroup));"block"==r(t).css("display")?(this.refs.stickerTitle.deactivate(),r(t).slideUp("fast",function(){e.props.scroller&&e.props.scroller.handleWindowResize()})):(this.refs.stickerTitle.activate(),r(t).slideDown("fast"))}else this.showLoginPanel(),Fotor.loginStateManager.addAction(this.fold);this.forceUpdate()},fold:function(){Fotor.loginStateManager.off(i.default.LOGIN,this.fold);var e=(r(this.refs.stickerTitle),r(this.refs.stickerGroup));this.refs.stickerTitle.activate(),r(e).slideDown("fast")},handleClickUserOwnSticker:function(){FotorAnalytic.pageView("/resourceUsage/sticker/custom/upload",Fotor.routerManager.getToolPath())}});e.exports=b}).call(t,a(0),a(1))},function(e,t,a){var r=a(923);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){t=e.exports=a(2)(!1),t.push([e.i,"/*-----------------------------------------\r\n * User Own\r\n * ----------------------------------------*/\n#sticker-own-list .sticker-grid-layout .sticker-grid-item {\n  opacity: 1 !important; }\n\n.background-image-space.space-no-mgt {\n  margin-top: 0; }\n\n.black #sticker-own-list .sticker-group {\n  background: rgba(255, 255, 255, 0.95); }\n",""])},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}var o=a(12),i=n(o),s=a(34),l=n(s),c=a(53).default,h=a(10),d=a(5),u=d({displayName:"FavorList",mixins:[h,Fotor.mixin],isMount:!1,getInitialState:function(){return{items:[]}},loadData:function(e){var t=this;e=!!e,Fotor.services.loadData("FavorStickers",Fotor.globalConfig.config.api.stickersFavor,Fotor.globalConfig.config.designMode,e,t.getFaveDataHandler)},getFaveDataHandler:function(e){var t=this;e&&this.isMount&&(t.setState({items:e}),t.props.tool.saveFavorData(e))},componentWillUnmount:function(){this.isMount=!1,Fotor.app.off(l.default.STICKER_FAVOR_UPDATE,this.loadData),Fotor.loginStateManager.off(i.default.LOGIN,this.loadData)},componentDidMount:function(){this.isMount=!0,this.loadData(!0),Fotor.app.on(l.default.STICKER_FAVOR_UPDATE,this.loadData),Fotor.loginStateManager.on(i.default.LOGIN,this.loadData)},onClick:function(){var e=this;if(Fotor.loginStateManager.isLogin()){var a=(t(this.refs.stickerTitle),t(this.refs.stickerGroup));"block"==t(a).css("display")?(this.refs.stickerTitle.deactivate(),t(a).slideUp("fast",function(){e.props.scroller&&e.props.scroller.handleWindowResize()})):(this.refs.stickerTitle.activate(),t(a).slideDown("fast")),this.forceUpdate()}else{var r=Fotor.vipResManager.getLoginContent("favor");FotorUser.show(r,!1),Fotor.loginStateManager.addAction(this.fold)}},fold:function(){Fotor.loginStateManager.off(i.default.LOGIN,this.fold);var e=t(this.refs.stickerTitle),a=t(this.refs.stickerGroup);t(e).addClass("title-drop-active"),t(a).slideDown("fast")},render:function(){var e=this,t=Fotor.globalConfig.lang.design_workspace_material_favorStickerGuide;return this.state.items&&this.state.items.length>0&&(t=this.state.items.map(function(t,a){return r.createElement(p,{data:t,key:a,removeItem:e.removeItem,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool})})),r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"stickerTitle",isEditor:"editor"==Fotor.routerManager.moduleName,autoActive:!1,text:Fotor.globalConfig.lang.design_workspace_material_favorStickerTitle,onClick:this.onClick}),r.createElement("div",{ref:"stickerGroup",className:"clearfix sticker-group sticker-group-4"},t))},removeItem:function(e){var t=[];this.state.items.map(function(a,r){a.id!=e&&t.push(a)}),this.setState({items:t})}}),d=a(5),p=d({displayName:"StickerFavorItem",handleClick:function(e,a){this.props.tool.markPosition();var r=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin()||Fotor.designerMode)r.doClickAction(e,a);else{var n=t.Deferred();n.promise().then(function(){r.doClickAction(e,a)});var o='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(o,n,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var r=FotorUtils.Object.simpleClone(this.props.data);if(r.innerCategory=Number(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fileScale=r.scale,r=FotorUtils.Object.simpleClone(r),r.fromFavor=!0,a){var n=t("#canvas").offset(),o={x:(e.pageX?e.pageX:e.clientX)-n.left,y:(e.pageY?e.pageY:e.clientY)-n.top};o.x=o.x<-50?-50:o.x,"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r,o):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r,o):Fotor.mainCanvas.placeObject("fotor/sticker",r,o)}else"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r):Fotor.mainCanvas.placeObject("fotor/sticker",r);FotorUtils.Ajax.request(Fotor.globalConfig.config.api.addUserMruStyle,{method:"post",data:{styleId:r.id,styleType:2},success:function(e){e.status&&(FotorAnalytic.pageView("/resourceUsage/sticker/addUserMruStyle_sticker",Fotor.routerManager.getToolPath()),Fotor.app.trigger(l.default.STICKER_RECENT_UPDATE))}}),FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){this.props.tool.markPosition();var a=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragStart(e);else{var r=t.Deferred();r.promise().then(function(){a.doDragStart(e)});var n='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(n,r,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragStart:function(e){var t="//pub-static.haozhaopian.net"+this.props.data.thumb,a=(this.props.data.url,document.createElement("img"));a.src=t;var r=FotorUtils.Object.simpleClone(this.props.data);r.innerCategory=parseInt(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fromFavor=!0;try{e.dataTransfer.setDragImage(a,a.width/2,a.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";var n;n="4"==r.innerCategory?"fotor/shape":"5"==r.innerCategory?"fotor/ArtCustom":"fotor/sticker",Fotor.dragHelper.setCurrentDragObject(r,n),e.dataTransfer.setData("text",n),FotorUtils.Ajax.request(Fotor.globalConfig.config.api.addUserMruStyle,{method:"post",data:{styleId:r.id,styleType:2},success:function(e){e.status&&(FotorAnalytic.pageView("/resourceUsage/sticker/addUserMruStyle_sticker",Fotor.routerManager.getToolPath()),Fotor.app.trigger(l.default.STICKER_RECENT_UPDATE))}}),FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},findParent:function(e){if(t(e).hasClass("sticker-item"))return e;var a=t(e).parent();return t(a).hasClass("sticker-item")?a:this.findParent(a)},render:function(){return r.createElement("div",{className:"sticker-item-wrapper"},r.createElement("div",{className:"sticker-item",draggable:"true",onClick:this.handleClick,onDragStart:this.handleDragStart},r.createElement("span",{className:this.props.data.vip?"search-vip":""}),r.createElement("span",{className:"remove-favor-icon",onClick:this.handleRemove,onMouseOver:this.showTip,onMouseOut:this.hideTip}),r.createElement(c,{"data-display":this.props.display},r.createElement("img",{src:"//pub-static.haozhaopian.net"+this.props.data.thumb}))))},handleRemove:function(e){var t=this,a=t.props.data.id;FotorUtils.Ajax.request(Fotor.globalConfig.config.api.removeStickerFavor,{method:"post",data:"stickerId="+a,success:function(e){t.props.removeItem(a),t.hideTip(),Fotor.app.trigger(l.default.STICKER_FAVOR_REMOVE,a),FotorAnalytic.pageView("/resourceUsage/sticker/"+t.props.data.groupId+"/"+t.props.data.id+"/removeFavor",Fotor.routerManager.getToolPath())}}),e.stopPropagation()},showTip:function(e){var a=t(e.target),r=a.offset().left,n=a.offset().top;r+=25,n-=7,this.props.showTip(r,n,Fotor.globalConfig.lang.design_workspace_material_removeFavorStickerTips)},hideTip:function(){this.props.hideTip()}});e.exports=u}).call(t,a(1),a(0))},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}var o=a(12),i=n(o),s=a(34),l=n(s),c=a(53).default,h=a(10),d=a(5),u=d({displayName:"RecentlyList",mixins:[h,Fotor.mixin],isMount:!1,getInitialState:function(){return{items:[]}},loadData:function(e){var t=this;e=!!e,Fotor.services.loadData("RecentlyStickers",Fotor.globalConfig.config.api.getUserMruSticker,Fotor.globalConfig.config.designMode,e,t.getRecentDataHandler)},getRecentDataHandler:function(e){var t=this;e&&this.isMount&&(t.setState({items:e}),t.props.tool.saveRecentData(e))},componentWillUnmount:function(){this.isMount=!1,Fotor.app.off(l.default.STICKER_RECENT_UPDATE,this.loadData),Fotor.loginStateManager.off(i.default.LOGIN,this.loadData)},componentDidMount:function(){this.isMount=!0,this.loadData(!0),Fotor.app.on(l.default.STICKER_RECENT_UPDATE,this.loadData),Fotor.loginStateManager.on(i.default.LOGIN,this.loadData)},onClick:function(){var e=this;if(Fotor.loginStateManager.isLogin()){var a=(t(this.refs.stickerTitle),t(this.refs.stickerGroup));"block"==t(a).css("display")?(this.refs.stickerTitle.deactivate(),t(a).slideUp("fast",function(){e.props.scroller&&e.props.scroller.handleWindowResize()})):(this.refs.stickerTitle.activate(),t(a).slideDown("fast")),this.forceUpdate()}else{var r=Fotor.vipResManager.getLoginContent("recentSticker");FotorUser.show(r,!1),Fotor.loginStateManager.addAction(this.fold)}},fold:function(){Fotor.loginStateManager.off(i.default.LOGIN,this.fold);var e=t(this.refs.stickerTitle),a=t(this.refs.stickerGroup);t(e).addClass("title-drop-active"),t(a).slideDown("fast")},render:function(){var e=this,t=Fotor.globalConfig.lang.design_workspace_material_recentStickerGuide;return this.state.items&&this.state.items.length>0&&(t=this.state.items.map(function(t,a){return r.createElement(p,{data:t,key:a,removeItem:e.removeItem,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool})})),r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"stickerTitle",isEditor:"editor"==Fotor.routerManager.moduleName,autoActive:!1,text:Fotor.globalConfig.lang.design_workspace_material_recentlyUsedStickerTitle.toUpperCase(),onClick:this.onClick}),r.createElement("div",{ref:"stickerGroup",className:"clearfix sticker-group sticker-group-4"},t))},removeItem:function(e){var t=[];this.state.items.map(function(a,r){a.id!=e&&t.push(a)}),this.setState({items:t})}}),d=a(5),p=d({displayName:"StickerRecentlyItem",handleClick:function(e,a){this.props.tool.markPosition();var r=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin()||Fotor.designerMode)r.doClickAction(e,a);else{var n=t.Deferred();n.promise().then(function(){r.doClickAction(e,a)});var o='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(o,n,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var r=FotorUtils.Object.simpleClone(this.props.data);if(r.innerCategory=Number(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fileScale=r.scale,r=FotorUtils.Object.simpleClone(r),r.fromFavor=!0,a){var n=t("#canvas").offset(),o={x:(e.pageX?e.pageX:e.clientX)-n.left,y:(e.pageY?e.pageY:e.clientY)-n.top};o.x=o.x<-50?-50:o.x,"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r,o):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r,o):Fotor.mainCanvas.placeObject("fotor/sticker",r,o)}else"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r):Fotor.mainCanvas.placeObject("fotor/sticker",r);FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){this.props.tool.markPosition();var a=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragStart(e);else{var r=t.Deferred();r.promise().then(function(){a.doDragStart(e)});var n='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(n,r,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragStart:function(e){var t="//pub-static.haozhaopian.net"+this.props.data.thumb,a=(this.props.data.url,document.createElement("img"));a.src=t;var r=FotorUtils.Object.simpleClone(this.props.data);r.innerCategory=parseInt(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fromFavor=!0;try{e.dataTransfer.setDragImage(a,a.width/2,a.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";var n;n="4"==r.innerCategory?"fotor/shape":"5"==r.innerCategory?"fotor/ArtCustom":"fotor/sticker",Fotor.dragHelper.setCurrentDragObject(r,n),e.dataTransfer.setData("text",n),FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},findParent:function(e){if(t(e).hasClass("sticker-item"))return e;var a=t(e).parent();return t(a).hasClass("sticker-item")?a:this.findParent(a)},render:function(){return r.createElement("div",{className:"sticker-item-wrapper"},r.createElement("div",{className:"sticker-item",draggable:"true",onClick:this.handleClick,onDragStart:this.handleDragStart},r.createElement("span",{className:this.props.data.vip?"search-vip":""}),r.createElement(c,{"data-display":this.props.display},r.createElement("img",{src:"//pub-static.haozhaopian.net"+this.props.data.thumb}))))}});e.exports=u}).call(t,a(1),a(0))},function(e,t,a){(function(t,r,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=a(12),s=o(i),l=a(34),c=(o(l),a(35)),h=o(c);a(927);var d=(a(53).default,a(10)),u=a(5),p=u({displayName:"MineList",mixins:[d,Fotor.mixin],isMount:!1,getInitialState:function(){return{items:[]}},componentWillUnmount:function(){this.isMount=!1,Fotor.userResourceManager.off(h.default.CHANGE,this.handlePhotosChanged)},componentDidMount:function(){this.isMount=!0,this.handlePhotosChanged(),Fotor.userResourceManager.on(h.default.CHANGE,this.handlePhotosChanged)},handlePhotosChanged:function(){this.isMount&&this.setState({items:Fotor.userResourceManager.photos})},onClick:function(){var e=this;if(Fotor.loginStateManager.isLogin()){var a=(t(this.refs.stickerTitle),t(this.refs.stickerGroup));"block"==t(a).css("display")?(this.refs.stickerTitle.deactivate(),t(a).slideUp("fast",function(){e.props.scroller&&e.props.scroller.handleWindowResize()})):(this.refs.stickerTitle.activate(),t(a).slideDown("fast")),this.forceUpdate()}else{var r=Fotor.vipResManager.getLoginContent("recentSticker");FotorUser.show(r,!1),Fotor.loginStateManager.addAction(this.fold)}},fold:function(){Fotor.loginStateManager.off(s.default.LOGIN,this.fold);var e=t(this.refs.stickerTitle),a=t(this.refs.stickerGroup);t(e).addClass("title-drop-active"),t(a).slideDown("fast")},handleUploadSticker:function(e){if(FotorUser.getLoginedUser()){var a=t(this.refs.stickerGroup);"block"==t(a).css("display")||(this.refs.stickerTitle.activate(),t(a).slideDown("fast")),Fotor.userResourceManager.startImportPhoto(),e.stopPropagation(),e.preventDefault(),FotorAnalytic.event("upload_panel","openimage","openimage_uploadResource"),FotorAnalytic.pageView("/count/try_open_photo_uploadResource/"+Fotor.routerManager.moduleName+"/"+Fotor.routerManager.childModuleName,Fotor.routerManager.getToolPath())}else{var r=Fotor.vipResManager.getLoginContent("useYourOwn");FotorUser.show(r,!1)}},render:function(){var e=this,t=Fotor.globalConfig.lang.designerapp_havenot_uploadsticker||"您还没有自己的贴纸",a=this.state.items;return a&&a.length>0&&(t=a.map(function(t,n){return r.createElement(m,{data:t,key:t.resId+(a.length-(n+1)),removeItem:e.removeItem,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool})})),r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"btn-upload-sticker-wrap"},r.createElement("button",{className:"button",onClick:this.handleUploadSticker},"上传新的贴纸")),r.createElement(Fotor.ui.TitleDrop,{ref:"stickerTitle",isEditor:"editor"==Fotor.routerManager.moduleName,autoActive:!1,text:"用自己的",onClick:this.onClick}),r.createElement("div",{ref:"stickerGroup",className:"clearfix sticker-group sticker-group-4"},t))},removeItem:function(e){var t=[];this.state.items.map(function(a,r){a.id!=e&&t.push(a)}),this.setState({items:t})}}),u=a(5),m=u({displayName:"StickerMineItem",progressID:0,componentWillUnmount:function(){clearInterval(this.progressID)},getInitialState:function(){return{num:0,checkingID:0,minHeight:40,thumbUrl:""}},componentDidMount:function(){var e=this;this.props.data.on(Fotor.PhotoFileState.FILE_THUMB_READY,function(){e.forceUpdate()}),this.progressID=setInterval(function(){e.progress()},300)},progress:function(){var e=this,a=n.findDOMNode(e.refs.progressBar),r=n.findDOMNode(e.refs.progressCover);if(e.props.data.progress<0)e.props.data.fileState,t(e.refs.progressBar).css("display","none"),clearInterval(e.checkingID);else{if(t(a).css("width",100*e.props.data.progress+"%"),"fileUploadError"==e.props.data.fileState)return void clearInterval(this.progressID);1==e.props.data.progress&&(clearInterval(this.progressID),t(r).addClass("upload-item-progress-fade-out"))}},handleClick:function(e,a){this.props.tool.markPosition();var r=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())r.doClickAction(e,a);else{var n=t.Deferred();n.promise().then(function(){r.doClickAction(e,a)});var o='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(o,n,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var r=this.props.data instanceof Fotor.PhotoFile?this.props.data.toSimpleObject():FotorUtils.Object.simpleClone(this.props.data);if(r.innerCategory=Number(r.innerCategory||"0"),-1==r.url.indexOf("//")&&-1==r.url.indexOf(";base64")&&(r.url="%USER_RESOURCES%"+r.url),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fileScale=r.scale,r.fromFavor=!0,a){var n=t("#canvas").offset(),o={x:(e.pageX?e.pageX:e.clientX)-n.left,y:(e.pageY?e.pageY:e.clientY)-n.top};o.x=o.x<-50?-50:o.x,"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r,o):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r,o):Fotor.mainCanvas.placeObject("fotor/sticker",r,o)}else"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r):Fotor.mainCanvas.placeObject("fotor/sticker",r);FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){this.props.tool.markPosition();var a=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragStart(e);else{var r=t.Deferred();r.promise().then(function(){a.doDragStart(e)});var n='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(n,r,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragStart:function(e){var t="";this.props.data.fileUrl&&(t=this.props.data.fileUrl.replace("https:",""));var a=this.props.data.thumb||this.props.data.thumbUrl||t;-1==a.indexOf("//")&&-1==a.indexOf(";base64")&&(a="%USER_RESOURCES%"+a);var r=document.createElement("img");r.src=a;var n=this.props.data instanceof Fotor.PhotoFile?this.props.data.toSimpleObject():FotorUtils.Object.simpleClone(this.props.data);-1==n.url.indexOf("//")&&-1==n.url.indexOf(";base64")&&(n.url="%USER_RESOURCES%"+n.url),n.innerCategory=Number(n.innerCategory||"0"),0!=n.innerCategory&&5!=n.innerCategory&&(n.hasBorder=!1),n.fromFavor=!0;try{e.dataTransfer.setDragImage(r,r.width/2,r.height/2)}catch(e){}e.dataTransfer.effectAllowed="move";var o;o="4"==n.innerCategory?"fotor/shape":"5"==n.innerCategory?"fotor/ArtCustom":"fotor/sticker",Fotor.dragHelper.setCurrentDragObject(n,o),e.dataTransfer.setData("text",o),FotorAnalytic.pageView("/resourceUsage/sticker/"+n.groupId+"/"+n.id+"/click",Fotor.routerManager.getToolPath())},findParent:function(e){if(t(e).hasClass("sticker-item"))return e;var a=t(e).parent();return t(a).hasClass("sticker-item")?a:this.findParent(a)},handleDeleteStickerItem:function(e){var t=this;Fotor.userResourceManager.removePhoto(t.props.data.resId||t.props.data.fileId),e.stopPropagation()},showTip:function(e){var a=t(e.target),r=a.offset().left,n=a.offset().top;r+=25,n-=7,this.props.showTip(r,n,Fotor.globalConfig.lang.design_start_myProject_deleteHoverTips)},hideTip:function(){this.props.hideTip()},render:function(){return r.createElement("div",{className:"sticker-item-wrapper"},r.createElement("div",{className:"sticker-item sticker-item-animate",draggable:"true",onClick:this.handleClick,onDragStart:this.handleDragStart},r.createElement("span",{className:this.props.data.vip?"search-vip":""}),r.createElement("i",{className:"remove-favor-icon","data-id":this.props.data.id,onClick:this.handleDeleteStickerItem,onMouseOver:this.showTip,onMouseOut:this.hideTip}),r.createElement("div",null,r.createElement("img",{src:this.props.data.thumb?"%USER_RESOURCES%"+this.props.data.thumb:this.props.data.thumbUrl})),r.createElement("div",{className:"upload-item-progress",ref:"progressCover"},r.createElement("div",{ref:"progressBar"}))))}});e.exports=p}).call(t,a(1),a(0),a(15))},function(e,t,a){var r=a(928);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){t=e.exports=a(2)(!1),t.push([e.i,".btn-upload-sticker-wrap {\n  margin: 6px 18px 0 4px; }\n  .btn-upload-sticker-wrap .button {\n    border: 0 none;\n    width: 100%;\n    margin: 0;\n    outline: none !important; }\n\n.sticker-grid-expand .btn-upload-sticker-wrap {\n  margin: 6px 0 10px; }\n\n.sticker-item-animate {\n  animation: stickerItemFadeOut 1s; }\n\n@keyframes stickerItemFadeOut {\n  0% {\n    opacity: 0; }\n  1% {\n    opacity: .4; }\n  40% {\n    opacity: .6; }\n  100% {\n    opacity: 1; } }\n\nbody.no-ads .sticker-group.sticker-group-4 .sticker-item-wrapper .sticker-item .upload-item-progress {\n  width: 90%;\n  height: 6px;\n  left: auto;\n  top: auto;\n  bottom: 5px;\n  margin: 0;\n  left: 5%;\n  border-radius: 5px;\n  overflow: hidden; }\n  body.no-ads .sticker-group.sticker-group-4 .sticker-item-wrapper .sticker-item .upload-item-progress div {\n    position: absolute;\n    left: 0;\n    bottom: 0;\n    top: 0;\n    right: auto;\n    width: 0;\n    height: 6px;\n    background: #978640;\n    transition: all .3s !important; }\n  body.no-ads .sticker-group.sticker-group-4 .sticker-item-wrapper .sticker-item .upload-item-progress.upload-item-progress-fade-out div {\n    display: none; }\n",""])},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}var o=a(12),i=n(o),s=a(34),l=n(s),c=a(53).default,h=a(10),d=a(5),u=d({displayName:"FavorGridList",mixins:[h,Fotor.mixin],getInitialState:function(){return{items:[]}},loadData:function(e){var t=this;e=!!e,Fotor.services.loadData("FavorStickers",Fotor.globalConfig.config.api.stickersFavor,Fotor.globalConfig.config.designMode,e,t.getFaveDataHandler)},getFaveDataHandler:function(e){var t=this;e&&(t.setState({items:e}),t.props.tool.saveFavorData(e))},componentWillUnmount:function(){Fotor.app.off(l.default.STICKER_FAVOR_UPDATE,this.loadData),Fotor.loginStateManager.off(i.default.LOGIN,this.loadData)},componentDidMount:function(){this.loadData(!0),Fotor.app.on(l.default.STICKER_FAVOR_UPDATE,this.loadData),Fotor.loginStateManager.on(i.default.LOGIN,this.loadData)},onClick:function(){var e=this;if(Fotor.loginStateManager.isLogin()){var a=(t(this.refs.stickerTitle),t(this.refs.stickerGroup));"block"==t(a).css("display")?(this.refs.stickerTitle.deactivate(),t(a).slideUp("fast",function(){e.props.scroller&&e.props.scroller.handleWindowResize()})):(this.refs.stickerTitle.activate(),t(a).slideDown("fast")),this.forceUpdate()}else{var r=Fotor.vipResManager.getLoginContent("favor");FotorUser.show(r,!1),Fotor.loginStateManager.addAction(this.fold)}},fold:function(){Fotor.loginStateManager.off(i.default.LOGIN,this.fold);var e=t(this.refs.stickerTitle),a=t(this.refs.stickerGroup);t(e).addClass("title-drop-active"),t(a).slideDown("fast")},render:function(){var e=this,t=Fotor.globalConfig.lang.design_workspace_material_favorStickerGuide;return this.state.items&&this.state.items.length>0&&(t=this.state.items.map(function(t,a){return r.createElement(p,{data:t,key:a,removeItem:e.removeItem,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool})})),r.createElement("div",{className:"sticker-grid-expand"},r.createElement("div",{className:"sticker-grid-expand-bar middle"}),r.createElement("div",{className:"sticker-grid-expand-list"},r.createElement("div",{className:"clearfix sticker-group sticker-group-3",style:{display:"block"}},t)))},removeItem:function(e){var t=[];this.state.items.map(function(a,r){a.id!=e&&t.push(a)}),this.setState({items:t})}}),d=a(5),p=d({displayName:"StickerGridFavorItem",handleClick:function(e,a){this.props.tool.markPosition();var r=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin()||Fotor.designerMode)r.doClickAction(e,a);else{var n=t.Deferred();n.promise().then(function(){r.doClickAction(e,a)});var o='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(o,n,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var r=FotorUtils.Object.simpleClone(this.props.data);if(r.innerCategory=Number(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fileScale=r.scale,r=FotorUtils.Object.simpleClone(r),r.fromFavor=!0,a){var n=t("#canvas").offset(),o={x:(e.pageX?e.pageX:e.clientX)-n.left,y:(e.pageY?e.pageY:e.clientY)-n.top};o.x=o.x<-50?-50:o.x,"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r,o):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r,o):Fotor.mainCanvas.placeObject("fotor/sticker",r,o)}else"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r):Fotor.mainCanvas.placeObject("fotor/sticker",r);FotorUtils.Ajax.request(Fotor.globalConfig.config.api.addUserMruStyle,{method:"post",data:{styleId:r.id,styleType:2},success:function(e){e.status&&(FotorAnalytic.pageView("/resourceUsage/sticker/addUserMruStyle_sticker",Fotor.routerManager.getToolPath()),Fotor.app.trigger(l.default.STICKER_RECENT_UPDATE))}}),FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){this.props.tool.markPosition();var a=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragStart(e);else{var r=t.Deferred();r.promise().then(function(){a.doDragStart(e)});var n='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(n,r,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragStart:function(e){var t="//pub-static.haozhaopian.net"+this.props.data.thumb,a=(this.props.data.url,document.createElement("img"));a.src=t;var r=FotorUtils.Object.simpleClone(this.props.data);r.innerCategory=parseInt(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fromFavor=!0;try{e.dataTransfer.setDragImage(a,a.width/2,a.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";var n;n="4"==r.innerCategory?"fotor/shape":"5"==r.innerCategory?"fotor/ArtCustom":"fotor/sticker",Fotor.dragHelper.setCurrentDragObject(r,n),e.dataTransfer.setData("text",n),FotorUtils.Ajax.request(Fotor.globalConfig.config.api.addUserMruStyle,{method:"post",data:{styleId:r.id,styleType:2},success:function(e){e.status&&(FotorAnalytic.pageView("/resourceUsage/sticker/addUserMruStyle_sticker",Fotor.routerManager.getToolPath()),Fotor.app.trigger(l.default.STICKER_RECENT_UPDATE))}}),FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},findParent:function(e){if(t(e).hasClass("sticker-item"))return e;var a=t(e).parent();return t(a).hasClass("sticker-item")?a:this.findParent(a)},render:function(){return r.createElement("div",{className:"sticker-item-wrapper"},r.createElement("div",{className:"sticker-item",draggable:"true",onClick:this.handleClick,onDragStart:this.handleDragStart},r.createElement("span",{className:this.props.data.vip?"search-vip":""}),r.createElement("span",{className:"remove-favor-icon",onClick:this.handleRemove,onMouseOver:this.showTip,onMouseOut:this.hideTip}),this.props.data.vip||this.props.groupData&&this.props.groupData.vip&&r.createElement("span",{className:"search-vip"}),r.createElement(c,{"data-display":this.props.display},r.createElement("img",{src:"//pub-static.haozhaopian.net"+this.props.data.thumb}))))},handleRemove:function(e){var t=this,a=t.props.data.id;FotorUtils.Ajax.request(Fotor.globalConfig.config.api.removeStickerFavor,{method:"post",data:"stickerId="+a,success:function(e){t.props.removeItem(a),t.hideTip(),Fotor.app.trigger(l.default.STICKER_FAVOR_REMOVE,a),FotorAnalytic.pageView("/resourceUsage/sticker/"+t.props.data.groupId+"/"+t.props.data.id+"/removeFavor",Fotor.routerManager.getToolPath())}}),e.stopPropagation()},showTip:function(e){var a=t(e.target),r=a.offset().left,n=a.offset().top;r+=25,n-=7,this.props.showTip(r,n,Fotor.globalConfig.lang.design_workspace_material_removeFavorStickerTips)},hideTip:function(){this.props.hideTip()}});e.exports=u}).call(t,a(1),a(0))},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}var o=a(12),i=n(o),s=a(34),l=n(s),c=a(53).default,h=a(10),d=a(5),u=d({displayName:"FavorRecentList",mixins:[h,Fotor.mixin],getInitialState:function(){return{items:[]}},loadData:function(e){var t=this;e=!!e,Fotor.services.loadData("RecentlyStickers",Fotor.globalConfig.config.api.getUserMruSticker,Fotor.globalConfig.config.designMode,e,t.getRecentDataHandler)},getRecentDataHandler:function(e){var t=this;e&&(t.setState({items:e}),t.props.tool.saveRecentData(e))},componentWillUnmount:function(){Fotor.app.off(l.default.STICKER_RECENT_UPDATE,this.loadData),Fotor.loginStateManager.off(i.default.LOGIN,this.loadData)},componentDidMount:function(){this.loadData(!0),Fotor.app.on(l.default.STICKER_RECENT_UPDATE,this.loadData),Fotor.loginStateManager.on(i.default.LOGIN,this.loadData)},onClick:function(){var e=this;if(Fotor.loginStateManager.isLogin()){var a=(t(this.refs.stickerTitle),t(this.refs.stickerGroup));"block"==t(a).css("display")?(this.refs.stickerTitle.deactivate(),t(a).slideUp("fast",function(){e.props.scroller&&e.props.scroller.handleWindowResize()})):(this.refs.stickerTitle.activate(),t(a).slideDown("fast")),this.forceUpdate()}else{var r=Fotor.vipResManager.getLoginContent("recentSticker");FotorUser.show(r,!1),Fotor.loginStateManager.addAction(this.fold)}},fold:function(){Fotor.loginStateManager.off(i.default.LOGIN,this.fold);var e=t(this.refs.stickerTitle),a=t(this.refs.stickerGroup);t(e).addClass("title-drop-active"),t(a).slideDown("fast")},render:function(){var e=this,t=Fotor.globalConfig.lang.design_workspace_material_recentStickerGuide;return this.state.items&&this.state.items.length>0&&(t=this.state.items.map(function(t,a){return r.createElement(p,{data:t,key:a,removeItem:e.removeItem,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool})})),r.createElement("div",{className:"sticker-grid-expand"},r.createElement("div",{className:"sticker-grid-expand-bar right"}),r.createElement("div",{className:"sticker-grid-expand-list"},r.createElement("div",{className:"clearfix sticker-group sticker-group-3",style:{display:"block"}},t)))},removeItem:function(e){var t=[];this.state.items.map(function(a,r){a.id!=e&&t.push(a)}),this.setState({items:t})}}),d=a(5),p=d({displayName:"StickerGridRecentItem",handleClick:function(e,a){this.props.tool.markPosition();var r=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin()||Fotor.designerMode)r.doClickAction(e,a);else{var n=t.Deferred();n.promise().then(function(){r.doClickAction(e,a)});var o='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(o,n,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var r=FotorUtils.Object.simpleClone(this.props.data);if(r.innerCategory=Number(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fileScale=r.scale,r=FotorUtils.Object.simpleClone(r),r.fromFavor=!0,a){var n=t("#canvas").offset(),o={x:(e.pageX?e.pageX:e.clientX)-n.left,y:(e.pageY?e.pageY:e.clientY)-n.top};o.x=o.x<-50?-50:o.x,"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r,o):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r,o):Fotor.mainCanvas.placeObject("fotor/sticker",r,o)}else"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r):Fotor.mainCanvas.placeObject("fotor/sticker",r);FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){this.props.tool.markPosition();var a=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragStart(e);else{var r=t.Deferred();r.promise().then(function(){a.doDragStart(e)});var n='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(n,r,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragStart:function(e){var t="//pub-static.haozhaopian.net"+this.props.data.thumb,a=(this.props.data.url,document.createElement("img"));a.src=t;var r=FotorUtils.Object.simpleClone(this.props.data);r.innerCategory=parseInt(r.innerCategory),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fromFavor=!0;try{e.dataTransfer.setDragImage(a,a.width/2,a.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";var n;n="4"==r.innerCategory?"fotor/shape":"5"==r.innerCategory?"fotor/ArtCustom":"fotor/sticker",Fotor.dragHelper.setCurrentDragObject(r,n),e.dataTransfer.setData("text",n),FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},findParent:function(e){if(t(e).hasClass("sticker-item"))return e;var a=t(e).parent();return t(a).hasClass("sticker-item")?a:this.findParent(a)},render:function(){return r.createElement("div",{className:"sticker-item-wrapper"},r.createElement("div",{className:"sticker-item",draggable:"true",onClick:this.handleClick,onDragStart:this.handleDragStart},r.createElement("span",{className:this.props.data.vip?"search-vip":""}),this.props.data.vip||this.props.groupData&&this.props.groupData.vip&&r.createElement("span",{className:"search-vip"}),r.createElement(c,{"data-display":this.props.display},r.createElement("img",{src:"//pub-static.haozhaopian.net"+this.props.data.thumb}))))}});e.exports=u}).call(t,a(1),a(0))},function(e,t,a){(function(t,r,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=a(12),s=o(i),l=a(34),c=(o(l),a(35)),h=o(c),d=a(53).default,u=a(10),p=a(5),m=p({displayName:"MineGridList",mixins:[u,Fotor.mixin],isMount:!1,getInitialState:function(){return{items:[]}},componentWillUnmount:function(){this.isMount=!1,Fotor.userResourceManager.off(h.default.CHANGE,this.handlePhotosChanged)},componentDidMount:function(){this.isMount=!0,this.handlePhotosChanged(),Fotor.userResourceManager.on(h.default.CHANGE,this.handlePhotosChanged)},handlePhotosChanged:function(){this.isMount&&this.setState({items:Fotor.userResourceManager.photos})},onClick:function(){var e=this;if(Fotor.loginStateManager.isLogin()){var a=(t(this.refs.stickerTitle),t(this.refs.stickerGroup));"block"==t(a).css("display")?(this.refs.stickerTitle.deactivate(),t(a).slideUp("fast",function(){e.props.scroller&&e.props.scroller.handleWindowResize()})):(this.refs.stickerTitle.activate(),t(a).slideDown("fast")),this.forceUpdate()}else{var r=Fotor.vipResManager.getLoginContent("recentSticker");FotorUser.show(r,!1),Fotor.loginStateManager.addAction(this.fold)}},fold:function(){Fotor.loginStateManager.off(s.default.LOGIN,this.fold);var e=t(this.refs.stickerTitle),a=t(this.refs.stickerGroup);t(e).addClass("title-drop-active"),t(a).slideDown("fast")},handleUploadSticker:function(e){if(FotorUser.getLoginedUser())Fotor.userResourceManager.startImportPhoto(),e.stopPropagation(),e.preventDefault(),FotorAnalytic.event("upload_panel","openimage","openimage_uploadResource"),FotorAnalytic.pageView("/count/try_open_photo_uploadResource/"+Fotor.routerManager.moduleName+"/"+Fotor.routerManager.childModuleName,Fotor.routerManager.getToolPath());else{var t=Fotor.vipResManager.getLoginContent("useYourOwn");FotorUser.show(t,!1)}},render:function(){var e=this,t=Fotor.globalConfig.lang.designerapp_havenot_uploadsticker||"您还没有自己的贴纸";return this.state.items&&this.state.items.length>0&&(t=this.state.items.map(function(t,a){return r.createElement(f,{data:t,key:t.resId,removeItem:e.removeItem,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool})})),r.createElement("div",{className:"sticker-grid-expand"},r.createElement("div",{className:"sticker-grid-expand-bar left"}),r.createElement("div",{className:"btn-upload-sticker-wrap"},r.createElement("button",{className:"button",onClick:this.handleUploadSticker},"上传新的贴纸")),r.createElement("div",{className:"sticker-grid-expand-list"},r.createElement("div",{className:"clearfix sticker-group sticker-group-3",style:{display:"block"}},t)))},removeItem:function(e){var t=[];this.state.items.map(function(a,r){a.id!=e&&t.push(a)}),this.setState({items:t})}}),p=a(5),f=p({displayName:"StickerGridMineItem",progressID:0,componentWillUnmount:function(){clearInterval(this.progressID)},getInitialState:function(){return{num:0,checkingID:0,minHeight:40,thumbUrl:""}},componentDidMount:function(){var e=this;this.props.data.on(Fotor.PhotoFileState.FILE_THUMB_READY,function(){e.forceUpdate()}),this.progressID=setInterval(function(){e.progress()},300)},progress:function(){var e=this,a=n.findDOMNode(e.refs.progressBar),r=n.findDOMNode(e.refs.progressCover);if(e.props.data.progress<0)e.props.data.fileState,t(e.refs.progressBar).css("display","none"),clearInterval(e.checkingID);else{if(t(a).css("width",100*e.props.data.progress+"%"),"fileUploadError"==e.props.data.fileState)return void clearInterval(this.progressID);1==e.props.data.progress&&(clearInterval(this.progressID),t(r).addClass("upload-item-progress-fade-out"))}},handleClick:function(e,a){this.props.tool.markPosition();var r=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())r.doClickAction(e,a);else{var n=t.Deferred();n.promise().then(function(){r.doClickAction(e,a)});var o='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(o,n,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var r=this.props.data instanceof Fotor.PhotoFile?this.props.data.toSimpleObject():FotorUtils.Object.simpleClone(this.props.data);if(r.innerCategory=Number(r.innerCategory||"0"),-1==r.url.indexOf("//")&&-1==r.url.indexOf(";base64")&&(r.url="%USER_RESOURCES%"+r.url),0!=r.innerCategory&&5!=r.innerCategory&&(r.hasBorder=!1),r.fileScale=r.scale,r.fromFavor=!0,a){var n=t("#canvas").offset(),o={x:(e.pageX?e.pageX:e.clientX)-n.left,y:(e.pageY?e.pageY:e.clientY)-n.top};o.x=o.x<-50?-50:o.x,"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r,o):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r,o):Fotor.mainCanvas.placeObject("fotor/sticker",r,o)}else"4"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/shape",r):"5"==r.innerCategory?Fotor.mainCanvas.placeObject("fotor/ArtCustom",r):Fotor.mainCanvas.placeObject("fotor/sticker",r);FotorAnalytic.pageView("/resourceUsage/sticker/"+r.groupId+"/"+r.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){this.props.tool.markPosition();var a=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragStart(e);else{var r=t.Deferred();r.promise().then(function(){a.doDragStart(e)});var n='<div class="vip-upgrade-tip '+FotorUtils.I18N.getLocale()+' text-left clearfix"><div class="vip-upgrade-title">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_title+'</div> <div class="clearfix"><ul class="vip-upgrade-list clearfix"><li class="focus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.common_vip_upgrad_feature_4+"</li></ul></div></div>";Fotor.common.User.useVipResource(n,r,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragStart:function(e){var t="";this.props.data.fileUrl&&(t=this.props.data.fileUrl.replace("//pub-static.haozhaopian.net","").replace("https:",""));var a=this.props.data.thumb||this.props.data.thumbUrl||t;-1==a.indexOf("//")&&-1==a.indexOf(";base64")&&(a="%USER_RESOURCES%"+a);var r=document.createElement("img");r.src=a;var n=this.props.data instanceof Fotor.PhotoFile?this.props.data.toSimpleObject():FotorUtils.Object.simpleClone(this.props.data);-1==n.url.indexOf("//")&&-1==n.url.indexOf(";base64")&&(n.url="%USER_RESOURCES%"+n.url),n.innerCategory=Number(n.innerCategory||"0"),0!=n.innerCategory&&5!=n.innerCategory&&(n.hasBorder=!1),n.fromFavor=!0;try{e.dataTransfer.setDragImage(r,r.width/2,r.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";var o;o="4"==n.innerCategory?"fotor/shape":"5"==n.innerCategory?"fotor/ArtCustom":"fotor/sticker",Fotor.dragHelper.setCurrentDragObject(n,o),e.dataTransfer.setData("text",o),FotorAnalytic.pageView("/resourceUsage/sticker/"+n.groupId+"/"+n.id+"/click",Fotor.routerManager.getToolPath())},findParent:function(e){if(t(e).hasClass("sticker-item"))return e;var a=t(e).parent();return t(a).hasClass("sticker-item")?a:this.findParent(a)},handleDeleteStickerItem:function(e){var t=this;Fotor.userResourceManager.removePhoto(t.props.data.resId||t.props.data.fileId),e.stopPropagation()},showTip:function(e){var a=t(e.target),r=a.offset().left,n=a.offset().top;r+=25,n-=7,this.props.showTip(r,n,Fotor.globalConfig.lang.design_start_myProject_deleteHoverTips)},hideTip:function(){this.props.hideTip()},render:function(){return r.createElement("div",{className:"sticker-item-wrapper"},r.createElement("div",{className:"sticker-item sticker-item-animate",draggable:"true",onClick:this.handleClick,onDragStart:this.handleDragStart},this.props.data.vip||this.props.groupData&&this.props.groupData.vip&&r.createElement("span",{className:"search-vip"}),r.createElement("i",{className:"remove-favor-icon","data-id":this.props.data.id,onClick:this.handleDeleteStickerItem,onMouseOver:this.showTip,onMouseOut:this.hideTip}),r.createElement(d,{"data-display":this.props.display},r.createElement("img",{src:this.props.data.thumb?"%USER_RESOURCES%"+this.props.data.thumb:this.props.data.thumbUrl})),r.createElement("div",{className:"upload-item-progress",ref:"progressCover"},r.createElement("div",{ref:"progressBar"}))))}});e.exports=m}).call(t,a(1),a(0),a(15))},function(e,t,a){(function(t){var r=a(933),n=a(5),o=n({displayName:"StickerList",getInitialState:function(){return{}},componentDidMount:function(){},render:function(){var e=this;return t.createElement(t.Fragment,null,this.props.items.map(function(a,n){return Fotor.hideVipContent&&a.vip?"":t.createElement(r,{data:a,key:n,scroller:e.props.scroller,showTip:e.props.showTip,hideTip:e.props.hideTip,showHelpTip:e.props.showHelpTip,hideHelpTip:e.props.hideHelpTip,stickerList:e.props.stickerList,stickerGroupIndex:n,tool:e.props.tool,favorItems:e.props.favorItems,showFavorAnimation:e.props.showFavorAnimation})}))}});e.exports=o}).call(t,a(0))},function(e,t,a){(function(t,r,n){var o=a(777),i=a(5),s=i({displayName:"StickerGroup",getInitialState:function(){return{display:!1,specialIcon:""}},componentDidMount:function(){var e=this;window.specialIcon&&(this.state.specialIcon=window.specialIcon);var a=Fotor.routerManager.sampleToolName;if(void 0!=a&&a==this.props.data.id){var e=this;setTimeout(function(){e.onClick()},500),Fotor.routerManager.sampleToolName=void 0}Fotor.toolbarManager&&Fotor.toolbarManager.isExpandItem(this.props.data.id)&&(this.refs.stickerTitle.activate(),this.setState({display:!0}),setTimeout(function(){var a=t.findDOMNode(e.refs.stickerGroup);r(a).css("display","block")},100))},onClick:function(e){var a=this,n=t.findDOMNode(this.refs.stickerTitle),o=t.findDOMNode(this.refs.stickerGroup);"block"==r(o).css("display")?(this.refs.stickerTitle.deactivate(),setTimeout(function(){r(o).slideUp("fast",function(){var e=a.props.scroller,t=e.computeSizes(),n=e.state.topPosition,o=t.realHeight-t.containerHeight;o=o<0?0:o,n>o?r(e.content).stop().animate({"margin-top":-o},300,function(){e&&e.handleWindowResize()}):e.handleWindowResize(),a.state.display=!1,a.forceUpdate()})},100),Fotor.toolbarManager.removeItem(this.props.data.id)):(this.state.display=!0,a.forceUpdate(),this.refs.stickerTitle.activate(),setTimeout(function(){r(o).slideDown("fast",function(){a.props.scroller.handleWindowResize();var e=r(o).height(),t=r(n).offset(),i=r(a.props.stickerList).height(),s=r(a.props.stickerList).offset(),l=r(a.props.stickerList).find(".scrollarea-content").css("margin-top");l=Math.floor(l.replace("px","")),l=isNaN(l)?0:l;var c=e+48+32-19;if(t.top+c>i+s.top){var h=t.top-s.top-l;c<i&&(h-=i-c),a.props.scroller.scrollYTo(h)}if(t.top<80){var h=t.top-s.top-l;a.props.scroller.scrollYTo(h)}})},100),Fotor.toolbarManager.addItem(this.props.data.id))},handleCopyId:function(){var e=this,t=document.getElementById("firstStickerGroupId"+e.props.stickerGroupIndex);r(t).focus(),t.select(),document.execCommand("Copy")},render:function(){var e=this,t=this.props.data.bgColor;t&&""!=t&&"-1"==t.indexOf("#")&&(t="#"+t);var r={backgroundColor:t};null!=this.props.data.bgImg&&""!=this.props.data.bgImg&&(r.backgroundImage="url(//pub-static.haozhaopian.net"+this.props.data.bgImg+")");var i=!1,s=!1;if(this.props.data&&this.props.data.metaData&&"string"==typeof this.props.data.metaData){var l=JSON.parse(this.props.data.metaData);l&&l.tipType&&1==l.tipType&&(i=!0),l&&l.tipType&&2==l.tipType&&(s=!0)}var c="";this.state.specialIcon&&""!=this.state.specialIcon.festival&&void 0!=this.state.specialIcon[this.state.specialIcon.festival]&&null!=this.state.specialIcon[this.state.specialIcon.festival]&&this.state.specialIcon[this.state.specialIcon.festival].stickerCatIds.forEach(function(t){e.props.data.id==t&&(c=[],c.type=e.state.specialIcon.festival,c.icons=e.state.specialIcon[e.state.specialIcon.festival].icons,c.width=e.state.specialIcon[e.state.specialIcon.festival].width,c.height=e.state.specialIcon[e.state.specialIcon.festival].height,c.random=e.state.specialIcon[e.state.specialIcon.festival].random)});var h="ff2a9be5-7843-4ea5-abd2-0e13209159ea"==this.props.data.id;return n.createElement(n.Fragment,null,n.createElement(Fotor.ui.TitleDrop,{ref:"stickerTitle",autoActive:!1,isEditor:"editor"==Fotor.routerManager.moduleName,vip:!Fotor.hideVipIcon&&this.props.data.vip,specialIcon:c,helpTip:!!h&&Fotor.globalConfig.lang.common_stickerlist_shapeImage_helpTip,helpTipGif:!!h&&a(781),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,isNew:i,isHot:s,isShapeImage:h,text:this.props.data.title.toUpperCase(),onClick:this.onClick}),n.createElement("div",{ref:"stickerGroup",className:"clearfix sticker-group sticker-group-"+this.props.data.cols,style:r},Fotor.loginStateManager.isAdmin()&&n.createElement("div",{style:{backgroundColor:"black",textAlign:"center",color:"white",padding:"5px 0 5px 35px",position:"relative"}},n.createElement("div",{style:{width:"30px",height:"20px",background:"white",color:"black",borderRadius:"50%",textAlign:"center",position:"absolute",left:"5px",top:"50%",marginTop:"-10px"}},e.props.data.sortNum),n.createElement("div",{style:{whiteSpace:"nowrap"}},e.props.data.id),n.createElement("button",{onClick:e.handleCopyId,style:{position:"absolute",right:"5px",top:"50%",transform:"translateY(-50%)"}},"复制"),n.createElement("input",{type:"text",style:{width:"1px",height:"1px",position:"absolute",top:"10px",right:"10px",zIndex:-1,padding:0,margin:0,border:"0 none"},defaultValue:e.props.data.id,id:"firstStickerGroupId"+e.props.stickerGroupIndex})),this.state.display&&this.props.data.items.map(function(t,a){return Fotor.hideVipContent&&t.vip?"":n.createElement(o,{groupData:e.props.data,data:t,display:e.state.display,key:t.id,cols:e.props.data.cols,innerCategory:e.props.data.innerCategory,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool,isFavor:e.isFavor(t.id),showFavorAnimation:e.props.showFavorAnimation})})))},isFavor:function(e){var t=!1;return this.props.favorItems&&this.props.favorItems.length>0&&this.props.favorItems.map(function(a){a.id==e&&(t=!0)}),t}});e.exports=s}).call(t,a(15),a(1),a(0))},function(e,t,a){(function(t,r){var n=a(935),o=function(e){return e&&e.__esModule?e:{default:e}}(n);a(939);var i=a(5),s=i({displayName:"StickerGridList",getInitialState:function(){return{barStyle:"left",showExpand1:!1,showExpand2:!1,showExpand3:!1,shouldShowTopName:!1,curType:Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_image_shape,loading:!1,items:[],catId:1,stickerIndex:1,reachedBottom:!1,tag:"",loadFinish:!1,isLoadingMore:!1}},componentDidMount:function(){this.pageNo=1,this.mounted=!0},componentWillReceiveProps:function(e){},componentWillUnmount:function(){this.mounted=!1},showExpanded:function(e,t,a,n){!Fotor.frameMode&&this.props.tool.refs.stickerUserOwn.hideFavorList(),!Fotor.frameMode&&this.props.tool.refs.stickerUserOwn.hideRecentList(),!Fotor.frameMode&&this.props.tool.refs.stickerUserOwn.hideMineList();var o=!1,i=this,s=r(".sticker-grid-item-"+t);if(s.hasClass("showExpend")?(s.removeClass("showExpend"),r(".sticker-grid-layout").removeClass("showExpend"),o=!0):(r(".sticker-grid-item").removeClass("showExpend"),s.addClass("showExpend"),r(".sticker-grid-layout").addClass("showExpend")),FotorAnalytic.pageView("/count/stickerGridExpand/"+e,Fotor.routerManager.getToolPath()),t<4?o?this.setState({showExpand1:!1,showExpand2:!1,showExpand3:!1}):this.setState({showExpand1:!0,showExpand2:!1,showExpand3:!1}):t<7?o?this.setState({showExpand1:!1,showExpand2:!1,showExpand3:!1}):this.setState({showExpand1:!1,showExpand2:!0,showExpand3:!1}):o?this.setState({showExpand1:!1,showExpand2:!1,showExpand3:!1}):this.setState({showExpand1:!1,showExpand2:!1,showExpand3:!0}),this.setState({barStyle:a,curType:n}),o){var l=i.props.scroller;r(l.content).stop().animate({"margin-top":0},300,function(){l&&l.scrollYTo(0)})}else this.setState({catId:e,stickerIndex:t},function(){this.loadData(e,"")})},loadMore:function(){this.state.beingSearch||this.state.loadFinish||!r(this.refs.stickerGridLayout).hasClass("showExpend")||(this.pageNo++,this.setState({isLoadingMore:!0}),this.loadMoreData(this.state.catId,this.state.tag))},loadMoreData:function(e,t){var a=this;this.state.beingSearch=!0,this.setState({loadFinish:!1},function(){var r=Fotor.globalConfig.config.api.stickerSearchCategory+"?lang=en_US&category="+e;t&&(r+="&tag="+t),Fotor.services.loadData("search_sticker_"+e+"_"+encodeURIComponent(t)+"_"+FotorUtils.I18N.getLocale(),r,Fotor.globalConfig.designMode,!1,function(e,r,n){a.setDataLater(e,r,t)},!0,60,a.pageNo)})},loadData:function(e,t){var a=this;this.state.beingSearch=!0,this.pageNo=1,this.setState({items:[],loadFinish:!1,loading:!0,tag:t},function(){var r=Fotor.globalConfig.config.api.stickerSearchCategory+"?lang=en_US&category="+e;t&&(r+="&tag="+encodeURIComponent(t)),Fotor.services.loadData("search_sticker_"+e+"_"+encodeURIComponent(t)+"_"+FotorUtils.I18N.getLocale(),r,Fotor.globalConfig.designMode,!1,function(e,r,n){a.setDataLater(e,r,t)},!0,60,1)})},setDataLater:function(e,t,a){var r=this,n=this;if(this.state.beingSearch)if(this.mounted)t?(this.state.loadFinish=!0,this.state.loadingNextPage=!1,FotorAnalytic.pageView("/search/sticker/"+Fotor.projectManager.currentProjectData.categoryId+"/"+a.toLowerCase()+"/results/"+e.length,Fotor.routerManager.getToolPath())):this.state.loadingNextPage=!0,this.setState({items:(this.state.items||[]).concat(e),loading:!1,searched:!0,beingSearch:!1,isLoadingMore:!1},function(){if(1==n.pageNo){var e=n.props.scroller,t=e.computeSizes(),a=-200;this.state.stickerIndex>6?a=-440:this.state.stickerIndex>3&&(a=-330),t.realHeight-t.containerHeight>500&&(e.handleWindowResize(),setTimeout(function(){e.scrollYTo(-a)},200))}});else{var o=setTimeout(function(){r.setDataLater(e)},100);this.timeID.push(o)}},showTopName:function(){!this.state.shouldShowTopName&&r(this.refs.stickerGridLayout).hasClass("showExpend")&&this.setState({shouldShowTopName:!0})},hideTopName:function(){this.state.shouldShowTopName&&this.setState({shouldShowTopName:!1})},scrollToTop:function(){var e=this,t=e.props.scroller,a=200;this.state.stickerIndex>6?a=440:this.state.stickerIndex>3&&(a=330),t.scrollYTo(a)},render:function(){var e=this,a=this,n=this.state,i=n.barStyle,s=n.showExpand1,l=n.showExpand2,c=n.showExpand3,h=n.shouldShowTopName,d=n.curType,u=n.items,p=n.loading,m=n.catId;return h?(r("#sticker-top-name").text(d).fadeIn(),r("#sticker-to-top").fadeIn()):(r("#sticker-top-name").text("").hide(),r("#sticker-to-top").hide()),t.createElement("div",{className:"sticker-grid-layout clearfix",ref:"stickerGridLayout"},t.createElement("div",{className:"sticker-grid-item sticker-grid-item-1",onClick:function(t){return e.showExpanded(1,1,"left",Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_image_shape)}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol1"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_image_shape))),t.createElement("div",{className:"sticker-grid-item sticker-grid-item-2",onClick:function(t){return e.showExpanded(7,2,"middle",Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_grids)}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol88"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_grids))),t.createElement("div",{className:"sticker-grid-item sticker-grid-item-3",onClick:function(t){return e.showExpanded(2,3,"right",Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_shapes)}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol2"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_shapes))),t.createElement("div",{style:{clear:"both"}}),s&&t.createElement(o.default,{barStyle:i,items:u,loading:p,showTip:a.props.showTip,hideTip:a.props.hideTip,tool:a.props.tool,loadData:a.loadData,catId:m,favorItems:a.props.favorItems,showFavorAnimation:a.props.showFavorAnimation}),t.createElement("div",{className:"sticker-grid-item sticker-grid-item-4",onClick:function(t){return e.showExpanded(3,4,"left",Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_line)}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol3"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_line))),t.createElement("div",{className:"sticker-grid-item sticker-grid-item-5",onClick:function(t){return e.showExpanded(4,5,"middle",Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_Illustrations)}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol4"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_Illustrations))),t.createElement("div",{className:"sticker-grid-item sticker-grid-item-6",onClick:function(t){return e.showExpanded(5,6,"right",Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_icons)}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol5"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_icons))),l&&t.createElement(o.default,{barStyle:i,items:u,loading:p,showTip:a.props.showTip,hideTip:a.props.hideTip,tool:a.props.tool,loadData:a.loadData,catId:m,favorItems:a.props.favorItems,showFavorAnimation:a.props.showFavorAnimation}),t.createElement("div",{className:"sticker-grid-item sticker-grid-item-7",onClick:function(t){return e.showExpanded(8,7,"left",Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_texture||"纹理")}},t.createElement("div",{className:"sticker-grid-item-inner"},t.createElement("div",{className:"sticker-grid-symbol symbol10"}),t.createElement("div",{className:"sticker-grid-name"},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_texture||"纹理"))),c&&t.createElement(o.default,{barStyle:i,items:u,loading:p,showTip:a.props.showTip,hideTip:a.props.hideTip,tool:a.props.tool,loadData:a.loadData,catId:m,favorItems:a.props.favorItems,showFavorAnimation:a.props.showFavorAnimation}),this.state.isLoadingMore&&t.createElement("div",{className:"loading-page",style:{display:this.state.loadFinish?"none":"block"}},t.createElement("span",null),t.createElement("span",null),t.createElement("span",null),t.createElement("span",null),t.createElement("span",null)))}});e.exports=s}).call(t,a(0),a(1))},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}var o=a(8),i=(n(o),a(6));n(i);a(936);var s=a(777),l=a(5),c=l({displayName:"StickerGridGroup",getInitialState:function(){return{items:[],loading:!0,catId:this.props.catId}},componentDidMount:function(){},componentWillReceiveProps:function(e){this.setState({items:e.items||[],loading:e.loading}),e.catId!=this.state.catId&&(this.setState({catId:e.catId}),t(".sticker-grid-expand-tags a").removeClass("active").eq(0).addClass("active"))},loadDataTag:function(e,a){t(e.target).hasClass("active")||(t(e.target).parent().find("a").removeClass("active"),t(e.target).addClass("active"),this.props.loadData&&this.props.loadData(this.props.catId,a))},isFavor:function(e){var t=!1;return this.props.favorItems&&this.props.favorItems.length>0&&this.props.favorItems.map(function(a){a.id==e&&(t=!0)}),t},refreshPhotoFileUrl:function(e){var t=this,a=Fotor.photoManager.getPhotoById(this.target.imageSource.resId);""!=a.fileUrl?(this.target.imageSource.fileUrl=a.fileUrl,e&&e()):setTimeout(function(){return t.refreshPhotoFileUrl(e)},100)},showEffectIframe:function(){window.open("https://www.fotor.com.cn/app.html#/editor/sample/basic/magicwand")},render:function(){var e=this,t=this,n=this.props.barStyle,o=this.props.catId,i=[];switch(o){case 1:i=Fotor.globalConfig.lang.design_workspace_material_sticker_image_shape_hot_tag?Fotor.globalConfig.lang.design_workspace_material_sticker_image_shape_hot_tag.split("||"):[];break;case 2:i=Fotor.globalConfig.lang.design_workspace_material_sticker_shapes_hot_tag?Fotor.globalConfig.lang.design_workspace_material_sticker_shapes_hot_tag.split("||"):[];break;case 3:i=Fotor.globalConfig.lang.design_workspace_material_sticker_line_hot_tag?Fotor.globalConfig.lang.design_workspace_material_sticker_line_hot_tag.split("||"):[];break;case 4:i=Fotor.globalConfig.lang.design_workspace_material_sticker_Illustrations_hot_tag?Fotor.globalConfig.lang.design_workspace_material_sticker_Illustrations_hot_tag.split("||"):[];break;case 5:i=Fotor.globalConfig.lang.design_workspace_material_sticker_icons_hot_tag?Fotor.globalConfig.lang.design_workspace_material_sticker_icons_hot_tag.split("||"):[]}return r.createElement("div",{className:"sticker-grid-expand"},r.createElement("div",{className:"sticker-grid-expand-bar "+n}),r.createElement("div",{className:"sticker-grid-expand-tags",style:{display:!this.state.loading&&i.length>0?"block":"none"}},r.createElement("a",{className:"active",onClick:function(t){return e.loadDataTag(t,"")}},Fotor.globalConfig.lang.design_workspace_material_sticker_package_type_all),i.map(function(t,a){if(t)return r.createElement("a",{key:a,onClick:function(a){return e.loadDataTag(a,t)}},t)})),6==this.props.catId&&r.createElement("div",{className:"magic-clip-wrap"},r.createElement("div",{className:"magic-clip-title"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand),r.createElement("div",{className:"magic-clip-tip"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_feature),r.createElement("img",{src:a(938),width:"130",height:"96"}),r.createElement("button",{ref:"magicBtn",className:"button magic-clip-btn",onClick:this.showEffectIframe},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_create)),r.createElement("div",{className:"sticker-grid-expand-list",style:{minHeight:this.state.loading?"150px":"70px"}},this.state.loading&&r.createElement("div",{className:"toolbar-loading"},r.createElement("div",{className:"loading-round"},r.createElement("div",null),r.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),!this.state.loading&&r.createElement("div",{className:"clearfix sticker-group sticker-group-3",style:{display:this.state.items.length>0?"block":"none"}},this.state.items.map(function(e){return Fotor.hideVipContent&&e.vip?"":r.createElement(s,{data:e,display:!0,key:e.id,cols:3,showTip:t.props.showTip,hideTip:t.props.hideTip,tool:t.props.tool,isSearch:!0,isFavor:t.isFavor(e.id),showFavorAnimation:t.props.showFavorAnimation})})),!this.state.loading&&0==this.state.items.length&&r.createElement("div",{className:"text-center results-found"},Fotor.globalConfig.lang.common_search_resultNotice.replace("d%",0))))}});e.exports=c}).call(t,a(1),a(0))},function(e,t,a){var r=a(937);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){t=e.exports=a(2)(!1),t.push([e.i,"/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n.sticker-grid-expand {\n  clear: both;\n  padding: 0 10px; }\n  .sticker-grid-expand .sticker-grid-expand-bar {\n    height: 0;\n    border-top: 1px solid #d2d1d7;\n    position: relative;\n    margin-bottom: 10px; }\n    .sticker-grid-expand .sticker-grid-expand-bar:before {\n      content: '';\n      position: absolute;\n      left: 34px;\n      bottom: 0;\n      width: 0;\n      height: 0;\n      border-style: solid;\n      border-width: 0 10px 10px 10px;\n      border-color: transparent transparent #d2d1d7 transparent; }\n    .sticker-grid-expand .sticker-grid-expand-bar:after {\n      content: '';\n      position: absolute;\n      left: 34px;\n      bottom: -1px;\n      width: 0;\n      height: 0;\n      border-style: solid;\n      border-width: 0 10px 10px 10px;\n      border-color: transparent transparent #ebebf0 transparent; }\n    .sticker-grid-expand .sticker-grid-expand-bar.middle:before, .sticker-grid-expand .sticker-grid-expand-bar.middle:after {\n      left: 140px; }\n    .sticker-grid-expand .sticker-grid-expand-bar.right:before, .sticker-grid-expand .sticker-grid-expand-bar.right:after {\n      left: auto;\n      right: 34px; }\n  .sticker-grid-expand .sticker-grid-expand-tags a {\n    display: inline-block;\n    position: relative;\n    margin: 0 8px 10px 0;\n    padding: 0 17px;\n    line-height: 30px;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    background: #f5f5f5;\n    color: #787878;\n    cursor: pointer;\n    border-radius: 2px;\n    -moz-border-radius: 2px;\n    -webkit-border-radius: 2px;\n    max-width: 263px;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden; }\n    .sticker-grid-expand .sticker-grid-expand-tags a:hover, .sticker-grid-expand .sticker-grid-expand-tags a.active {\n      background: #fff;\n      border-color: rgba(0, 0, 0, 0.2);\n      color: #787878; }\n\n.magic-clip-wrap {\n  border: 1px solid #d2d1d7;\n  padding: 10px;\n  font-size: 12px; }\n  .magic-clip-wrap .magic-clip-title {\n    color: #A99765; }\n  .magic-clip-wrap .magic-clip-tip {\n    color: #787878; }\n  .magic-clip-wrap img {\n    display: block;\n    width: 50%;\n    height: auto;\n    margin: 10px auto 0; }\n\n.button.magic-clip-btn {\n  margin: 10px auto 0;\n  border: 0 none;\n  display: block;\n  height: 26px;\n  padding: 0;\n  line-height: 26px;\n  outline: none !important;\n  width: 100%; }\n\n@media (max-width: 1279px) {\n  body.no-ads .sticker-grid-expand .sticker-grid-expand-bar:before, body.no-ads .sticker-grid-expand .sticker-grid-expand-bar:after {\n    left: 21px; }\n  body.no-ads .sticker-grid-expand .sticker-grid-expand-bar.middle:before, body.no-ads .sticker-grid-expand .sticker-grid-expand-bar.middle:after {\n    left: 105px; }\n  body.no-ads .sticker-grid-expand .sticker-grid-expand-bar.right:before, body.no-ads .sticker-grid-expand .sticker-grid-expand-bar.right:after {\n    left: auto;\n    right: 21px; } }\n\n@media (max-width: 1439px) {\n  body.ads .sticker-grid-expand .sticker-grid-expand-bar:before, body.ads .sticker-grid-expand .sticker-grid-expand-bar:after {\n    left: 21px; }\n  body.ads .sticker-grid-expand .sticker-grid-expand-bar.middle:before, body.ads .sticker-grid-expand .sticker-grid-expand-bar.middle:after {\n    left: 105px; }\n  body.ads .sticker-grid-expand .sticker-grid-expand-bar.right:before, body.ads .sticker-grid-expand .sticker-grid-expand-bar.right:after {\n    left: auto;\n    right: 21px; } }\n\n.sticker-grid-expand-list {\n  position: relative; }\n  .sticker-grid-expand-list .sticker-group {\n    margin-left: 0;\n    margin-right: 0; }\n    .sticker-grid-expand-list .sticker-group .sticker-item div img {\n      min-height: 1px; }\n  .sticker-grid-expand-list .results-found {\n    margin: 0;\n    background: white; }\n\nbody.black .sticker-grid-expand .sticker-grid-expand-bar {\n  border-top: 1px solid #454547; }\n  body.black .sticker-grid-expand .sticker-grid-expand-bar:before {\n    border-color: transparent transparent #454547 transparent; }\n  body.black .sticker-grid-expand .sticker-grid-expand-bar:after {\n    border-color: transparent transparent #3c3c3e transparent; }\n\nbody.black .sticker-grid-expand .sticker-grid-expand-tags a {\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  background: rgba(0, 0, 0, 0.1);\n  color: #a0a0a0; }\n  body.black .sticker-grid-expand .sticker-grid-expand-tags a:hover, body.black .sticker-grid-expand .sticker-grid-expand-tags a:active, body.black .sticker-grid-expand .sticker-grid-expand-tags a.active {\n    border-color: rgba(255, 255, 255, 0.2);\n    background: rgba(0, 0, 0, 0.2);\n    color: #b8b8b8; }\n",""])},function(e,t,a){e.exports=a.p+"images/magic_clipperb97d8e919b782aebaad67bb417ef9fd0.gif"},function(e,t,a){var r=a(940);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,".sticker-grid-layout {\n  margin: 0 -10px;\n  padding-right: 20px; }\n  .sticker-grid-layout.showExpend .sticker-grid-item {\n    opacity: .3; }\n    .sticker-grid-layout.showExpend .sticker-grid-item.showExpend {\n      opacity: 1; }\n  .sticker-grid-layout .sticker-grid-item {\n    width: 33.333%;\n    padding: 0 10px 20px;\n    box-sizing: border-box;\n    float: left;\n    opacity: 1;\n    transition: opacity .3s; }\n    .sticker-grid-layout .sticker-grid-item .sticker-grid-item-inner {\n      max-width: 80px;\n      margin: 0 auto;\n      cursor: pointer; }\n    .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol {\n      width: 100%;\n      padding-top: 100%;\n      background-position: center;\n      background-repeat: no-repeat;\n      position: relative;\n      top: 0;\n      margin: 0 auto;\n      transition: top .3s ease-out;\n      border-radius: 5px; }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol1 {\n        background-image: url("+r(a(941))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol2 {\n        background-image: url("+r(a(942))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol3 {\n        background-image: url("+r(a(943))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol4 {\n        background-image: url("+r(a(944))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol5 {\n        background-image: url("+r(a(945))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol6 {\n        background-image: url("+r(a(946))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol7 {\n        background-image: url("+r(a(947))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol8 {\n        background-image: url("+r(a(948))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol88 {\n        background-image: url("+r(a(949))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol9 {\n        background-image: url("+r(a(950))+"); }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-symbol.symbol10 {\n        background-image: url("+r(a(951))+"); }\n    .sticker-grid-layout .sticker-grid-item .sticker-grid-name {\n      font-size: 12px;\n      text-align: center;\n      color: #646464;\n      margin: 10px 0 0;\n      line-height: 1;\n      transition: all .3s ease-out;\n      text-transform: capitalize; }\n      .sticker-grid-layout .sticker-grid-item .sticker-grid-name i {\n        width: 12px;\n        height: 12px;\n        background: url("+r(a(952))+") no-repeat center top;\n        display: inline-block;\n        margin-left: 5px;\n        vertical-align: middle;\n        position: relative;\n        top: -1px; }\n        .sticker-grid-layout .sticker-grid-item .sticker-grid-name i:hover {\n          background-position: center bottom; }\n    .sticker-grid-layout .sticker-grid-item:hover .sticker-grid-symbol {\n      top: -4px;\n      box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);\n      transition: top .3s ease-out; }\n    .sticker-grid-layout .sticker-grid-item:hover .sticker-grid-name {\n      color: #323232; }\n\nbody.black .sticker-grid-layout .sticker-grid-item .sticker-grid-name {\n  color: #c8c8c8; }\n\nbody.black .sticker-grid-layout .sticker-grid-item:hover .sticker-grid-name {\n  color: white; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowRTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBN0VFNzIxRUM1MTgxMUU3QTdGQUYyM0NBODQzODdFRCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBN0VFNzIxREM1MTgxMUU3QTdGQUYyM0NBODQzODdFRCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNEMzgzQ0VGODNDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBFNEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+PnbBegAAAvlJREFUeNrs3c9uElEUBvBzZwYohdJoSgsNtbELo7aL4sqFceWmPoC77n0Co0+gPkKX7lnbxKVP0ERdaTU1/mkXakypRgqM5wx3KFUgM9MZmCnfl5yEDAHm/mbOvTPQpGqzdkQ6l7gecd3lWuSyCOlNk+sL13Oux1wfZaOhn7zD9ZrrvoYE3v+xtI0YvdJmDuBlrhrXDIw8p6DNlgXwAdcsTHxHzB4K4AYsAmdDACtwCJyKAJpwCBzTgMHZAkAAAhCAAEQACEAAAhABIAABCEAEgAAEIAARAAIQgJOQ0P+EYyGv6PayRfmMitVA639sernXpIO6He8z8FYM8SSyT7JvsW/hQgzxotw3zIEABCAAcRkzjiPH8/nKBYNK+c4x3K+36f2PNrVtAHrKykWDlgonDbA023n87nsbLewl7pl3attM8maUse2x8rgNgAMic56XbZgDB2RXz3Vl3cpfGW/Xx/w3nVI0N62oyS854Ne27AkDlNX27be2U34jcKvzprOSSyoFRTv7LWq0cB3oG0+SSytaL5uUNgE4NMU+eF1EbunqGBATA1jMKbo+AK93Xhw1opEUvNXicLx/ETPmOQRM8addY4ibFZPWFkya8rCEzWs85eMiURDXR4Q4MsAUD0YGVcoryvIAZT6rli1GVEPxpG1VgCvs7plonQNAwauWTMqnT0vIGSiDzPZBlN9WHLwzfG5WI05ZCQZMa7xcuj9FFzGleu6TldPqYdzaycGJEtGIGk/adhCem4xGlLYTvKsh4Z0cJBcx/LttK9IzT6N4iUz4NxZNsoxovlRwERMB6Bevd5WOMlG0cehvmdFt6xcvqQn9mF+Ziy/e72M7/oC1Nw36dRy/HzZkn57tNEJ/X7VZO7IJmYxvYwAIQASAAAQgABEAAhCAAEQACEAAAhCACADHDdgCQ+C0BPAzHALnkwBuwyFwtgXwKddPWPiOmD0RwA9c97gOYeI5h9psz12FX3CtcW1R5988YGHps2Bomy1tJWb0V4ABANHneBQHd/3VAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowRTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBREZCMjYxQkM1MTgxMUU3QTIxRkRFQkQ4NjQ4M0I3MiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBREZCMjYxQUM1MTgxMUU3QTIxRkRFQkQ4NjQ4M0I3MiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNEMzgzQ0VGODNDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBFNEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AXAx3gAABAFJREFUeNrsndtOE1EUhtd0Zno+0hZKRRFRFIFwEAlQjIcgil7rhU/gExh9AKM+Ak9gTLyGxFtj4o1Rg4kmRA0GEBCKUITaoeJew2BISm13O1Nm6PqTdUGhazdf1t7rsAeQHo7NgKZjzB4wu8EszkwC0l5tMZtjNs7sEbNv+KJN++Ywsw/M7mogCV6uJI0NMprUmKkAm5g9Z+YjRkXLrzFrRID3mAWICbeQ2X0EOEosStYoAmwgDiWrAQGKxKFkiTZiUJ4IIAEkgASQAJIIIAEkgASQRAAJIAEkgCQCWEkd+OWR1y3CnZsREASAp+NLsLaepQjk0dXBAERCEoSDEowMBmkL86gx7oDWE65/X7ccd0JTg4MAFrUwW3lkMPcyEKPQZhMIYCGdO+uFaI2c8zpu5fPtHgL4P7mdNrjQm/8ef6jHDx63SADz6VKfH5z2/Es77AJc6fMTwP1UH7VD5+nCW7SjxQ1Hau0EMCdJJAJqzaf3z1YFQN6oKjZaqwJgqedaofOyagCWmlkLZeyq6IXLre2wZnz3aQM2038gFpWhjtWPPo8IsrxzQCrKNqR+ZWEhqcD8DwXWN7KHC2C53QV2LbeuhWF2IZP3eHCwbR4JydDWDJBc3YKPnzdh6adi/S2sV38b9Ing9xZ3BNQEJEj0+KDrjBtEg9tCQwFKogDDA/pNWGIRGXh4NMadkOj2gV0WrAmwv9OrRo5ekiVB3aY8CrFo7O/0gSgK1gKI222gS//sibND3ogK+SXoOOWyFsDLrH7DiNFb2JngVuYVbudIULYGwKMxO7SddBt2NGAJ43Xzf/TWZpf5AWKEjCSMH83HInbuPhmzc7GZ/MAAdrd6oC4sGw4Qaz8Ewqu4zhMeXQG6WNt1sbdyc7xa1pFInNk1HJDMC3CIFa8IsWKNPFsqWsMHBM9P0wLEcVWlFeCsM2Wdi2pdAebrVY1U+vf24ZnGPJtYLuv914eC6lDASOHkxlLDBB7hSMpqa5gK4PLqluXWMBXAucWM5dYwFUB8MitpYBSib72f/jLdbQ1Okg3z/UV/36YDiGP46bm07n7R59KKcvgBoianNmFlTb+tjL7QpyHdkBkBZrPb8Pp9SheI6AN9oc+qAYjKsIL31dtUWdsZ34s+Mopx3Yqp/8AORg3eB8/MK+owtNjxlXqtyRKGEWeepQDuTSwv3yjqA+n1UVkdY+FUZfduJKNdrC8mFfh+GC/W9RKCmZpGS5vmM9HviRBAAkgACSCJABJAAkgASQSQABJAAkjiBpglDCUriwBniUPJmkGAE8ShZE0gwCfMVokFt5DZYwT4ldltZiliUrRSGrPp3Sz8glk7szHY+TcPlFj2SRgamzGNFTKDvwIMAN2B9p4Yu0DnAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowRTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBNDE3NkIxOUM1MTgxMUU3QjY3NkZEMUU0QUFDMDM5MSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBNDE3NkIxOEM1MTgxMUU3QjY3NkZEMUU0QUFDMDM5MSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNEMzgzQ0VGODNDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBFNEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+BIGouwAABDhJREFUeNrsnW1ok1cUx0/6xLaJpqG+NJim0VpfRzuR6vZBxjaRDXUgvgtOtEOHgvjNMmHg/CAqyD4IfuimQz8MxOnGJiqIOEQQVBDfq7VdfUk6W6tWktg2Nnbn3D1PaGxakpinSfT/DweS556c+9xf7j333txALLXXa0iXl20r23w2N5uVoL7qYWthO8m2k+2hXMzTC+ey3WTboIMEvP6y6myE0Q2dmQJYznaUzQFGCatIZzZOANayOcEkaQmz7wTgPLBIWfMEoAccUpZHAGrgkLK0PDB4OwEgAAIgAAIgBIAACIAACAEgAAIgAEJJKe1nH4tL12RtY3/3H0IPxBAGQMjUHGhGnkEPBEAIAAHwPZlEpjiqaJnnG/X8N98vdDdwIyvLsrYHyg07rE5lxs1nYxmGcJZIm71xxg/pDNjW/S9NHDGNuiKddMx/kNrDrVlZli5Zaq/X9KIfYQgDIAACIPReA/x8zALy2MaThR85vRPJlIrzR9NHIz+ll5EgNQXvUHOogXp6X+UewEyfidi1EVTlnEnTiqbT/dA9agzWK6jogck2zDKMF9EfUAUvpFs6H1BD8BY9D7cjB6a8YzApN76zPVDyX04O4UydiRi5N+cnkUxJ8ts9znN+zne9NHTb+3cG4N9PTmAhjZ0IAJpQgSUzn9FQ1ZtndiPWjNtMX7oWD7oOkzLxGcxPri/11CQcS+odCoimTiJzSxbSVMeHytw2Lx1+9BN1Rl7G+Ng0O60s+1b5iOL5CZQlnrU0q/iTAX3ixZL6T7f+YSrAtJ+JGKpyVtNC96pobxld4KLKompeo9VTKBJQ11wFblpfvoW89oro+8RP9rKNIfbrCfSDF89noFjlwyfT4y6/OhsxbYdjxpmIq7CUNlV8T/l5Bf3Kwq+76YhvP/VyrSvK1kV9jLWbAVz85Cx3sqMyBl4isfqq+3UX7WvaQa0MMicAFmo22jxxG43KL1Gvn4bb6Gzbce6NXw8K64jvgCpZ7okPQnT5+XlqCNxUZ7yDxfqz5VeaU/JVzD3sbdyuTueyeghL0l7t3URl9gnRxuxv3qO+CakPXFW9ya4NV401GiyNE59/QnfVULvdx+9NeMd8B6m12x/j82asnzmW7EiaeHhXF88mzWJVfu5CL117cSntu5Q0A9Q470yiUtt4daOHH9UpMKIg56orHRdobGGZymEi+anFgfs/UserZ9EYoTh+Bjyj8aEEYkl97eHHnCtnKcBNoTvKJ90ATcmBH4/8jBzWIjrT9lfcZcYXrkXqucyQAzXI8HMMc8bASzaWzMSBng66+Oxc7kwi2IlAAAiAAAiAEAACIAACIASAAAiAAAgBoHkAI8CQsiIC0A8OKcsnAE+BQ8o6JQB3s70Ai6QlzHYJwGa25WwBMElYAZ3ZA2MWPs1WyVZH///NAyaWOBOGzqZOZyXM6D8BBgADoPuel1j+cAAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowRTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCMTU0OTZEOUM1MTgxMUU3OEU2OEE2NjM0RUE3OEEyQSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCMTU0OTZEOEM1MTgxMUU3OEU2OEE2NjM0RUE3OEEyQSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNEMzgzQ0VGODNDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBFNEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+RuonmgAABIVJREFUeNrsnVtsFFUYx/8zZ2Z3u5ZSCrUXS22LAaOC9YLSqBgVNCUaVIIPvvtOQiQYHnwgxMubjyTGd6NFJcZGwduTGkASE5AgUKjthlKgtFv20rkcvzNdrCvLsjvLzk6z3z/5ms3O7O7kl+96zuxWmx0aQE7dZO+QbSHrJDPA+q9ssgTZN2TvkY2qJ7UcwE1kB8iWMKeSNEO2jeywTn96yT5neGWpKcfsXgVwF9lSZlK2FLPdCuAgs/CtQQWwizn4VpcCKJiDbwmdGVQmBsgAGSADZIAsBsgAGSADZDFABsgAGSCLAQapOth50yDaN0DcvR7u1ROwx75nDywZnRGHed92GB0boYkG6C0PsQeW7BmNK2H0vALNXNhsdC4dYYAlhWzbEzA6N+YFmJscgTPxKwMsKhGD2fMy9KZVeU9LKwn7/Nf0wGWAt/S7eDvM3q3QIs3/O+ISvIOQdoqr8C0dr/VRiHueh6bdvMFoJ36GOzvGbUxhchEY3YMQzfcXPOxO/0V570hVL2HRAtQa2uZDNrqs4HE5dw3WBXUjlWSANzne8nUQKzdTyBa+fCkdWCNfUd+S4Ukkv7kzYRA40bK26GkOTRsydZFHubyQjS2H0fsq9NiK4vCm/oRz+TjPwnmO1/Iged6L0PRI0fNk5grs0WFeTFggZ8DoeoFyXv9tT5WuRXnvSyq9FgP0QpYaYqOPQpaqbSmy//6WPPBy4NcZWoDm6jfzFgKK5r0rf3hLVTUJkrAClOnJks5z0xOwxw7VLsuEFaDKZ27yfHHIThb2yEGiaNfsOmsQwmq5aT1V1Zeouq6lHNdKnXHUq6AutSB24ifKZ4e8YmCdOwCz73XoS3oK5z2quDJ7tba5enZoQAb2YXd1Ivr4u1RVizfCMjWB7LG9cCZ/95pns+81gtibn/cmj1HoHq59oxDY+LWiHw3PfXJbeB7oeBtiT3/ked+8J37hLYj+m/dSCdjjP4aj0wrM8wY+pNakqYwXCUT6d0J0PLMAcfoM5Nz0fN6jeTcMCiQHRvvfppak0Ve+jD6yC+nJo5B2miAOha/Xr/oHNK+movFkZTNw95bwDktVd3EVgpXmT2+DqE4Bao3dlV/k0lV1DDByB74EKmL1C1Bas5W/R3aqfgG6105XDnDmXB17YPpSxe8Rhomjdo20Ea/Mg2dGCOAP9QtQtD7m/8VOBtmje0MzdQQOUKcWxuh81l/o2ylkftlNOfQUwqyqjXJq7o1u2Ofta5QdtslRZH/bQ+F7FmHXnQeo6RDtTyH68A5o8Y4yyVmwzn6GuZMfB7IpHkqARtcmmA+8VRY81SuqxVHrzKeQ1xNYTKrSgqoGfdkaiLYBiOY10Jp6vHtYvBUZO+Pdr+deH4c7dcpbGPXuHA14OzLkOVB6cJQtTixh6gMZIIsBMkAGyABZDJABMkAGyGKADJABMkBWPkCHMfiWowCOMwffGlMAh5mDbw0rgB+QTTOLsqWYva8AqpuP3yBLMpOSlcwxu3CjCn9Hpn5UZT/m/80DF5YCBSPHZn+OlWKGfwQYAGnkUV+h5r6ZAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowRTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCNTYzQzVCMEM1MTgxMUU3ODM4N0ZCMDg5OEJEMDg5MiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCNTYzQzVBRkM1MTgxMUU3ODM4N0ZCMDg5OEJEMDg5MiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNEMzgzQ0VGODNDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBFNEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Rhx9tgAABCNJREFUeNrsnd1OE0EUx89sCyIfbfmWCiWIMTHRN/DSxOAD+Aw+gdEnUN8A3oALriV6661eYWJCQLACUqClUL7p7nr+wzZUaEs/t8v2/JOTEHY6Z/fHmZ1zZgZQs9PH5CjG9o7tJVuULUiifGXZNtg+sb1ni+ObhnPxOdsPttcOSIF3XUGHDRgtOMw0wAm2ObYeYVS2Qg6zcQB8wxYWJhULzN4C4JSwqFpTADgqHKrWKAAGhEPVChjCoDYJQAEoAAWgABQJQAEoAAWgSAAKQAEoAEUVyTN7H0oRhfsUhSIGdfUoau/gmwsqfS2btenshOgwY9N+2qK9lE22LQC1AnwHw/cNGooaFGxTBdu0tSs2oq6QoiFumz23aWvDosS6RWa2hQH2DRo0NmloQBXdNIOOjgdocMSgP8sWpbat1gKI4RqbZADR2l7BAP/gcYB6woriy2ZThrXRDHh46Frh5Qt9oU+lWgDgGEde70D93aJP9O1rgHjnDUUb5xJ9w4cvAWK2xYTRaMUeGtqX7wAiVal0tq1qVuQZGr58BVAZ1NChW2goK8NHAMO9qmiSfBk5RO13bo5QtEHbm6IQPn2TB4Z6S/+cULph2CENQZm2kyicGA8MG7rcQ76HKgSlXSmf6aTpjwjs7C4dDd1couVyOAACqGLwcrkkPlOLz1sFsONu6etHh/9HEkD150Hsz4NX7DOV+rxVQzgQKB0NmbRNbW02J8OX7SIAZhuXX+dpd8fWn6nFp29WY3LCgoDiqTPSnwex/zqEdNJu6uJBU4awaZZX5Se3LEqnirfFNbSpp89bAfDkuPy2ycTFgulV4XvJRPmRd3rsowg8OqgsGgqlMTuJyobt4YGPInB/1/13lls+XQJo62V4twRf8OkbgBYHw/Zf96IQ+yWWS+5cq/A31yxXohA+UOb5Ko3RaUWWKL7U+AeLL7u7U+fq8i0S4EYOZfSd2nJ3wnJ9TyS+ZHIpVv+HRJ/o25eVSL6wFPXrp0k7m/WDiL7QZzO2NZtSC+NBVxdNvSCAfZKbFltLTRjYWE9utdjGen7tu5eyaHjU0KcMsGcSiih9hOOqRmKGXkAF9PMzW7/vEpjZW/loh44iBrC+atFG3KJnL9pp4F7ht0pnl9KWPbPo29dzsj2yIOOZ420AMlzGxhMOF9neWc3y1vnAcvZzAx773VI5YCkABaAArFu9bNanTcsCxDJUPdq0LMDvnN+VOm2Aa2jjJXnqLxQB0Oe5U3r0NEijExdHd6HMnk1rKyYtLpi6CvGS1Oz0sbfuSCYRASgSgAJQAApAkQAUgAJQAIoEoAAUgH4HaAqGqmUC4LpwqFprADgvHKrWPAB+ZNsTFhULzD4A4ArbK7aMMClbGYfZ79ws/IXtCdsMXfybB5lYCkwYDpsZhxWY0T8BBgC7/WC8VK2KQgAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowRTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5NzFDQzc5MkM1MTgxMUU3Qjg4MkE0RDZFNkMzMzIxNCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NzFDQzc5MUM1MTgxMUU3Qjg4MkE0RDZFNkMzMzIxNCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNEMzgzQ0VGODNDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBFNEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+8jhKWQAAA21JREFUeNrs3UtPE1EUB/Bz73R4lGdBIyCUZ6KJiKbBhXHrBt37GfwERj+BumLBii+gibpVjAvjxrgzGnSn8hCMioRHhUDLzHjOdAzFEkuH0hmm/5OcTTvn3ubHnXvnTqdBbYxPkBdJzjuc1zi7OGOEyI8dzm+czzjvcs7Li9p78yrnB86bHiTwCiPm2YjRtGfmAvZzPuFsgtGBo9kz6xXAW5wtMCk5xOy2AI7BwneMCWA3HHxHtwAacPAdhobB4QKAAAQgAAGIACAAAQhABAABCEAAIgAIwGMUofv2TSVaybwwQjrZQ7ql2X3NXlsne/4r7byfJntlBYD7yykyr1wmM3WRz4u9J4ZuS7gZGxmm7Nt3lH39hshxAJiPV3t9jIyhgSITjiZzNEW6tZW2n06FAjEUc6B5abQ4Xl7IsVKDRUQGX7yeMVI+0FNubdUDGmfPsIbpY9iaudqqB+zqOkRtJwBVQ/wQtQ0AdLLZQGqjA7i6FkhtZACtmdlAaqMDODtH9s+lkuukRmpxIc27iczLVyxplaBu5WqwE/FG0/cfvDV7Tk4mU/xgXjjkWKnBTiR/UH2Zoe2Hj/87r8l7Ww8euceG5h7IxviEQyEL1dxERm+SVFNj7ixP/yZrbp6c9XTYPmo4n8YXqJ3pj3QcIjyAWpOqqyXd3u7eVFXx+O4emec9Z3OTnJVVspeXydna5onTBuCeGwPdp0l3nCJVU8OfSp46Vrvv82vuli+RIM3HyQJiLSy6sNUNqBTpkyfIGBokVV+3F63wYP60MVKcxkAf6c4Osj59JnvpV6CXM8GtwobBEP0UO3+O8eqL4BViSo3UShvSVnUB8nxn9PeR0ddbIlwhpLQhbf37PUqkAWWuM5I95RvM8g0et1kVgHIPzxgccOe/cs6l0mYQ9wd1pU9dWUXdlbbcfxhuU9qu9Klc0d5Ubc2R3oaXtqWP6AK2tR3tCJGLcekjqoDydEEU+ghuBDY2RqKPQOfAKPQR3CpczkuXIPsIai/sZLJ8uaGOvI/IArqPpUUs8IQqAAEIQAAiAAhAAAIQAUAAAhCACAACEIAARACwcoAWGHyHJYCLcPAdCwI4BQffMSWA9znXYFFyiNk9AZRfrdzgTMPkwJH2zOb+rsIvOIc5Jyn3bx6wsOyzYHg2k56VmNEfAQYA8zLJhOS3/wQAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowRTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo5RjM3QzlENEM1MTgxMUU3OEY5MUM3MzMyMTk0NTAxMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5RjM3QzlEM0M1MTgxMUU3OEY5MUM3MzMyMTk0NTAxMCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkNEMzgzQ0VGODNDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBFNEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+AsSXgwAAAipJREFUeNrs3TFLG2EYwPH3zA0FSRppbEVsSodihQxdRKqCS5a4665Tt25FP0HrR3DxA1ShW4WOpbFWRyu6iUl0STpoKEi5S/o86ZsSMJHLScIp/z88xFwgws/kfXNJQGdpb9fY0jKrMvMyozKuodY8mXOZzzLvZQp6cMDemJX5KfPGQoJ3PdfaqNGBNWsAPpfZkoljFLiENXumgO9kHmLSdWq2ooA5LEKXU8AxHEI3poAxHEIXG8DgdgEIIIAAAkgAAggggAQggAACSAACCCCABCCAd6JIfgPBdRyz+DRtXj9KNa5//1UxH4sF49XrAAZpQfCyT0b+X9ef/9RqZqtU5CkcpGn7yGttbvgxa2DQBl030DEA2YUJQAABBJAzkT4VkzOM2dSweRlPmAex7r9V9/bFeMfbrnzfHFcvzbdK2fh9PGPpK+CM4L1KDvXkvvUPovft1WsmX6ncz6fwRDzR89+RSSRZA9lEOnQka1SvO7y8uL+bSF4WeEcuw24iN9XcRPStr37mLO3tRu5Nto3JqbbHl/d/8DqQNZAABBBAACnKgL89L9AxADu00+bF8NdyOZKAkfyoa7NYaJyxtH6w/umsGEnASJ6JsAYCSAACCCCABCCAAAJIAAIIIIAEIIAAAkgAAhg9QB+G0PkKeIZD6EoKuI1D6LYVcE3mAouuU7MPCngisyhTxSRwVWt22tyFv8hkZNbNv3/zwMbSZsOwNuvWSs3MXwEGACgmcvKWRPt9AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpGOTdGMTE3NDA3MjA2ODExOTdBNURFOEZEMDhCQzQ0NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGRDFGMTg4NjUyOTMxMUU4QjY3OUYyOUEyNUEyREM0RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGRDFGMTg4NTUyOTMxMUU4QjY3OUYyOUEyNUEyREM0RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjc3OTJBMUJEOTM1MkU4MTFBMDNERTE5NDBDQTg5MUY0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkY5N0YxMTc0MDcyMDY4MTE5N0E1REU4RkQwOEJDNDQ2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+7zCfhAAABDFJREFUeNrsnNtLFFEcx7/n7Kip6wWz3G7ShTLKMn1QguiudIOi6KF6DLq89VQPQfQW/QFF0lsRQlASFBVRUD10JSwsKLpAEWVXs/W26+7pd3Zn1XTc1nHH3dl+X/ghOwzDzOf8zu97fnMGxf7GTpjKpthHsYOiksIL1mD5KVopmihOUQT0QWECnEZxmWIJc0pILRSbKD5KM/MY3uikWV2hyNEA9zI8W6qi2KMB7mQWtrVTA6xhDrZVHauBLHuK1EDWGMQAGSADZIAMkMUAGSADZIAsBsgAGSADZI1KhlMXLisU2NdgIC8n+vv+qzCaH4WwdK4HW2oHxs3p49dbwrj1POSuDMzPEWjrUPj6O/UZ8uknsHC6xLoqZ3JF78qpZF/06PYsvG1TeP5BIWgx+M/eW2fE4nKP5fGxnO+lwTy8zUCwT+DI+YA7MjA3m0Z9hrCEN97y9ypIAeRkKUeub+A/0A+/y0zk9ef0Anj8UtBdAE/fDMatUeOtiV4R+fvdr9wBcJ4vvZaXBzdHH/PQuaA7AO5e44l7w064bSLnZ6SJeCcIVM8S8BULbK2TePNZ4WpLCN9+K7hBRqrhra+WyDY0rCiwynKBOT4DJ6/14UuSIGasC9fMhglv+DpyXbUHZ+70/d8u/C/5imV/5g3V3CnJMyInXdgRu9QunIgTi3F04ZgTu8qFz90Vcd1zyUwRafms1PYr3O+mY3XnXQ6+tUvpgu0auW23RX8foMa/5Z072sSUAvzSoXCC3Lb1g0JPIAru/TcNNoyO7uTVK+3CTjlxynvhr7RUOWu6rVMLYO6FuRfmXjiteuF86mCWzhOYWCCo9QvjwoMQfnWplPTCrtuV0+1fw2KBsiIafalQMVVgb72B4jyRkvuRboNXT/BiO30DNQ5xIWa0C48VXkwlJsTGG32Z3wsX5FINqxAoyRcRZ7z3UsHfo2zDGwrx9guFrl6Vmb2wr0hSDZOYVAB4qIZNLgQaqgQKc62nX6k3MXiDIa6NnC8yrxcuIRirK+WwLUb9+mplpYAQxl9ummjmDcvwCcCKBYKmcwjtdL2M6IX1NFqzSI64P6sfup4ys8ScbnbhDZ3OTrvzuLyRnlQosGqhRJYRvwZpuBryw9cKNbNgG95QiO2dQFi5COBgFy4rElhJ8AxPYk+g31Avm5+8e9EQ9RLGyp2TIUe+jYlJf9CzfIGMmEWq1d4FHGt2SSunHbi8VFAhl5AyPXbXivNcNIVjLjzSfkcmib9QZYAMkAFaOV66qaPbRQAv3g9HNonSRb1BgeYHznwu6+g6kKcwiwEyQAbIAFkMkAEyQAbIYoAMkAEyQBYDTD7AAGOwLb8G+IQ52FarBtjEHGyrSQNspHjKLEatZ5qdBthLsRHRf7DPSkw64TZodjEX/khRR3GA4jFFJzMapk6TjWZUazLDHwEGAL94ZWP5Sk1IAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3BpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFMjBBQjc1MTkzQkZFNzExOUIyNEU1QjZDMDU3MzQ2MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMkQ3RTQxM0RCRkYxMUU4QjQyRkYyQTg3QjU2MzYwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyMkQ3RTQxMkRCRkYxMUU4QjQyRkYyQTg3QjU2MzYwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmU4MDExN2YxLWFmYzQtNDNlZi05ZWMzLWU1ZTg2MTc3ZjQ0NyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMjBBQjc1MTkzQkZFNzExOUIyNEU1QjZDMDU3MzQ2MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pp/dg/8AAAGnSURBVHja7Ni9SsNQGIfx0xJaEAUdOjm6il+DSi9BvQG7VB3U0cvRQXHLDegltJOISke72aUdVPoBjSX6vnoCBRHakxQjPg/8ERRC/fUkhWbKlaax5WTHsl3Zomza0HAdWU3my05lgf7Ss3+cl13JVnD6MT1Qm3b7sh1ZI2tPHnjjpVbXsrwCHoHn1LLsUAFLWDhXUsA1HJxbjZ6B5NbnM5BiBCCAAAIIIAEIIIAAEoAAAgggAQgggADSiHlJX3BpLmcOFmbMbC7ee7NXbX39lGslUW8Qmmqrb556g3SfwCTwJtGUlzXFQj79t3Aa8YYReQbyIQIgAQgggAASgAACCOC/z0v7C7ystzmBnMDfPIHFQqLXi75n5ARyCwNIAAIIIIAAEoAAAghgUr0EYWr/2de3MP2AF/X2RF5o3J7ljT1/TP6rsUy50nznRuQZCCCAABKAAAIIIAEIIIAAEoAAAgggAQjgXwAMYHCuo4C3ODhXU0AfB+d8BTyT3WMxdg9qp4B92bbsDpOR0wO3pXbRp3BDtiE7kd3Iuhh9q2tt1GjdmpkPAQYAjnZHjjcBYQEAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NDIyRUJGOUQ2RDRDMTFFOEI0MDNFNDk2NDAwQUFDMTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NDIyRUJGOUU2RDRDMTFFOEI0MDNFNDk2NDAwQUFDMTAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo0MjJFQkY5QjZENEMxMUU4QjQwM0U0OTY0MDBBQUMxMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo0MjJFQkY5QzZENEMxMUU4QjQwM0U0OTY0MDBBQUMxMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmXc7BoAAANrSURBVHja7JvLTxNxEMdnH31RQFQEEgIeAOMB4uOgxBCVq4+LxqDcMBE9etYzf4EHX4kc8eLF6NkYCHowRISDClwMJKIEKlAKfTqz3ZattHZZmlDY7zf5Ju3uzrb5dGZ+j2yV0HAPmfKy77FvsdvZlQRZtcqeZA+xn7CjclA3Tzay37BPglNBSUJ1mu5jX2HPqWbmAd72JKzesn0C8C7gOdIJdr8A7AULx+oVgKfBwbFOZXog5ExGD4R2IAAEQAAEQACEABAAARAAIQAEQAAEQAgAAXAPSd+tD/bUdlKg9Q4perAk90vFwxSZfk6xhY/uyMBAy+2SwRPJveSeKGH0QHuKzLwwyq5UMkp4ZtA9PVB6VaZfHeh6uQmW+5itFsD9M6M/IzcxCqOEARDaHwAVtTTXuApgKpl96Wu8Sor3YGF2fE6uyRfrqpWIVcnoIqm+2vQv6q8jf9M1SqxOU3x5ipIbC+njfF6vbiOtsjUnAyXW9QDjoQny1nfnlKhWdcywnVjXl3D05zupRSe1b8a6HGBi5TvFfo9ugVN0Ms4xEotBRFYgU8/+gaEUgT5txGAUzg6mGxSeGKDo/Psi2Zei2K9hCk8OGDG7LZ3KSAIkMvWY4kvj5G++TmqgXvapMrsFlIzM0/qPV7yGHi2faWtouCdVNl9G9ZG/pY9H5Av/KWEeODgD12cGKZWIoISt8IIdDxnexSL9TyFv3XkKtj8wYlDCpgJt/TnzvuT6PPe6EUrGQulf2lNDnrounmjXG++1qjYjZu3bI2SggPMcObc5PeES3Zh9nV5lyFKNLa/lmJzLSGLsTLb3PUBvQ3e2bCXz4stfC688+Jxcky3nhm4A1Gs6LNk3UnwCbbnGGutagKr3kGVzYMnG5sNS3lj3jsI5+3t2ZlWpArEunsbsVenl/OVknqd4KtOjcGzFWI0AYPGGSHpVK2nVx0n1HbZUbYISa7MUXxzLbrICYB75m2/w8rciTzpqpAWPklbRxGvhD1gL4+GinS7d8HARtKsA8XDRDmV9uAgZiBKGABAAARAAIQAEQAAEQAgAARAAARACQAAEQJcAjAKDY60KwDFwcKxJATgEDo41JACfssfBYtv6IuwEoPzZ4jL7M5jYliTcJWGXGYXn2GfZ99mf2GEw2qKwyUYYnTGZ0V8BBgCOsh04fxcbGwAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3BpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpFMjBBQjc1MTkzQkZFNzExOUIyNEU1QjZDMDU3MzQ2MCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyMzQ5N0ZGQ0RCRjExMUU4QjQyRkYyQTg3QjU2MzYwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyMzQ5N0ZGQkRCRjExMUU4QjQyRkYyQTg3QjU2MzYwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjExMzlkMDY4LWQ3NWYtNGZmOS05YzE2LWE2NDMzZTYyZWRlNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpFMjBBQjc1MTkzQkZFNzExOUIyNEU1QjZDMDU3MzQ2MCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PlKq6SsAAAIkSURBVHja7JtPK21RGMZfrj91EyUlXROm5F/5k6mZe78AM5PLDB9EpnyC8wUYmpqQkJGBUiQlRccth9vxPmydI5G9lfPi99QzWO/ubZ/1a+21Vk+dquLCrCWqc8+4J9zd7gZD5cq799w595K7oGJN8vCXe8XdB6cXpQU1knjK/cd9XJ2sPOClk1ituusFcBp4mdTr/iuAk7DIrEkBHIBDZvU/7oEom+73QPQOARCAAAQgABEAAQhAACIAAvDTqeZD3/bDX9feafaz0ezfpdnRgdn/23h9IQFqMoNjZg1NpVpbh9nG2uuT+ui+sJ+wVkL5ZCSNVY/UFxagPqM09Ur1hQWoPShNvVJ9YQFqA89fPK1prHqkvpSqKi7MFjmFI53CtXVmPaNmza1m56dmu+tmN4WHZ/rxh/sx+kIC1GQm5s1a2kq1rmGz3GJpUhH6wu6BWgnlk5E0Vj1SX1iA+ozS1CvVFxag9qA09Ur1hQWoDfzs5GlNY9Uj9YW+xrx2Kkbq4x5IGkMaQxpDGkMaQxpDGsMpTBpDGkMaQxpDGkMaQxpDGkMawz2QNIY0hjSGNIY0hjSGU5g0hjSGNIY0hjSGNIY0hjSGNCbQPfALiv/KARCAAAQgAiAAAQhABEAAAvA7AiyAIbPyArgFh8zaE8AcHDIrJ4DL7h1YpNau2Angtfu3exsmb5YW3LjYPZ7Cx+5h95x7030Fo2e6StiI0VDCzO4EGACRal2PrW7KXAAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAYCAYAAADOMhxqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MDlhMmMzNC1kMWEwLTMwNDQtYWNjZC0yNmMwMzYwOGY0YjkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ2RkMxNkJGRDA5MTFFOEJBRjFDRUE3RjQzRDY5NDgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MUQ2RkMxNkFGRDA5MTFFOEJBRjFDRUE3RjQzRDY5NDgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTA5YTJjMzQtZDFhMC0zMDQ0LWFjY2QtMjZjMDM2MDhmNGI5IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjUwOWEyYzM0LWQxYTAtMzA0NC1hY2NkLTI2YzAzNjA4ZjRiOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PiLaLvAAAAGCSURBVHjanJKxS0JRFMbvE/N/iDalIWjpCTXWYFNzQdJqtSQ4+aQ53FssXSMHG5tsasvBWoSGsKaGpvYK7Hf0U1/2QPHB753Lud+553Lu5/V6PWdfqVRKEI5hH1bd4OtAHS7K5fKXJWISLxFakIICLIqCci1pnBcEQULiG045cxEf4lPCLmxYwQmLZcR528zlcneEjLRHtVqtqqJzwotdKQvXEtspSUQecQ+KoUamycb5+fBoGYQNQkOCJLyGCp5gLR51ZzoVdeftUHoBvmM63Z+oOYSAjp+hnI26E9ecbfYPwx2EqYjGpqlbh0vY1OiGV+pCZmKsW6b17KX1KLdwD1fwLO0KHEi8w+jf+y9tC3sUeIMKfIiKcuvSuNGUms2mBTPWj6ILrylwIy+l0+mpXpLGeb7vj7zUbrcjvYR47CUK+l5CnNfmHy+Rryr/30sk+15CNJuXEM7nJTrN5yU6zuYlhNO9pNENr9SFzMRYx17So0z1Ep0HXrLFNC9J434FGAA/mrJZ+zuvSAAAAABJRU5ErkJggg=="},function(e,t,a){(function(r,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(0);a(954);var h=a(777),d=function(e){function t(e){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={items:[],keyword:"",loading:!1,loadingNextPage:!1,loadFinish:!0,searched:!1,beingSearch:!1,recordKeywords:a.getCookiekeywords(),catId:0,shoudShowSearchFilter:!1,reachedBottom:!1,isLoadingMore:!1,totalResults:0},a.mounted=!1,a.timeID=[],a.pageNo=1,a.fotorStickerPageSize=42,a.openclipStickerPageSize=18,a.openclipStickerTotal=0,a.fotorStickerLoadFinshed=!1,a.openclipStickerLoadfinshed=!1,a.isFilterMode=!1,a}return s(t,e),l(t,[{key:"getCookiekeywords",value:function(){var e=FotorUtils.Cookie.get("searchSticker");return e=e?e.split("||"):[]}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.setState({searched:!1})}},{key:"componentDidMount",value:function(){this.mounted=!0}},{key:"componentWillReceiveProps",value:function(e){""!=e.keyword&&void 0!=e.keyword&&e.keyword!=this.state.keyword&&(this.setState({keyword:e.keyword}),this.addKeyword(e.keyword))}},{key:"shuffle",value:function(e){var t,a,r;for(t=e.length-1;t>0;t--)a=Math.floor(Math.random()*(t+1)),r=e[t],e[t]=e[a],e[a]=r;return e}},{key:"isSearchFinish",value:function(){return this.state.loadFinish}},{key:"addKeyword",value:function(e){if(""!=e&&void 0!=e){e!==this.state.keyword&&this.loadData(0,e);var t=this.getCookiekeywords();-1===t.indexOf(e)&&(t.length>=8&&t.splice(7,10),t.splice(0,0,e),this.setState({recordKeywords:t}),FotorUtils.Cookie.set("searchSticker",t.join("||"),Fotor.globalConfig.stickerRecentKeywordCookieSaveTime))}}},{key:"getApi",value:function(e,t){FotorAnalytic.pageView("/search/sticker/"+t.toLowerCase()+"/start",Fotor.routerManager.getToolPath());var a=Fotor.globalConfig.config.api.stickerSearchCategory+"?lang=en_US";return 0!=e&&(a+="&category="+e),t&&(a+="&tag="+encodeURIComponent(t)),a}},{key:"loadMore",value:function(){this.state.beingSearch||this.state.loadFinish||(this.pageNo++,this.setState({isLoadingMore:!0}),this.loadMoreData(this.state.catId,this.state.keyword))}},{key:"loadMoreData",value:function(e,t){var a=this;this.state.beingSearch=!0,this.setState({loadFinish:!1});var r=a.getApi(e,t),n=!!this.fotorStickerLoadFinshed;a.openclipStickerPageSize=this.fotorStickerLoadFinshed?60:12,a.loadFotorSticker(e,encodeURIComponent(t),r,a.pageNo,n)}},{key:"loadData",value:function(e,t){var a=this;this.pageNo=1,this.state.beingSearch=!0,this.setState({keyword:t,loading:!0,loadFinish:!1,items:[],catId:e},function(){var r=a.getApi(e,t);a.loadFotorSticker(e,encodeURIComponent(t),r,1,!1)})}},{key:"loadFotorSticker",value:function(e,t,a,r,n){var o=this;o.isFilterMode||o.openclipStickerLoadfinshed||o.loadOpenClipSticker(t,o.openclipStickerPageSize,r,n),n||Fotor.services.loadData("search_sticker_"+e+"_"+t,a,Fotor.globalConfig.designMode,!1,function(e,a,n){if(o.fotorStickerLoadFinshed=a,o.isFilterMode)1==r&&o.setState({totalResults:n}),o.setDataLater(e,t);else if(o.openclipStickerLoadfinshed)1==r&&o.setState({totalResults:n}),o.setDataLater(e,t);else var i=setInterval(function(){if(o.openclipStickerLoaded){clearInterval(i),1==r&&o.setState({totalResults:n+o.openclipStickerTotal});var a=e.concat(o.curPageOpenClipStickerData);o.setDataLater(o.shuffle(a),t),o.openclipStickerLoaded=!1}},200)},!0,o.fotorStickerPageSize,r,!1,t)}},{key:"loadOpenClipSticker",value:function(e,t,a,r){var n=this;Fotor.services.loadOpenClipData(e,"openclipart_sticker_"+e,Fotor.globalConfig.config.api.getOpenClipSticker+"?query="+e,Fotor.globalConfig.designMode,!1,function(t,a,o){n.openclipStickerLoaded=!0,n.curPageOpenClipStickerData=t,n.openclipStickerTotal=o,n.openclipStickerLoadfinshed=a,r&&n.setDataLater(t,e)},!0,t,a)}},{key:"setDataLater",value:function(e,t){var a=this;if(this.state.beingSearch)if(this.mounted){var r=!1;r=this.isFilterMode?this.fotorStickerLoadFinshed:this.fotorStickerLoadFinshed&&this.openclipStickerLoadfinshed,r?(this.state.loadFinish=!0,this.state.loadingNextPage=!1,FotorAnalytic.pageView("/search/sticker/"+Fotor.projectManager.currentProjectData.categoryId+"/"+t.toLowerCase()+"/results/"+e.length,Fotor.routerManager.getToolPath())):this.state.loadingNextPage=!0,this.setState({items:(this.state.items||[]).concat(e),loading:!1,searched:!0,beingSearch:!1,isLoadingMore:!1})}else{var n=setTimeout(function(){a.setDataLater(e)},100);this.timeID.push(n)}}},{key:"cancelSearch",value:function(){this.clearTimeId(),this.state.beingSearch=!1,this.isFilterMode=!1,this.setState({items:[],keyword:"",loading:!1,loadingNextPage:!1,loadFinish:!0,searched:!1,catId:0})}},{key:"resetSearch",value:function(){this.setState({catId:0}),this.isFilterMode=!1}},{key:"clearTimeId",value:function(){this.timeID.map(function(e){return clearTimeout(e)})}},{key:"handleSelectChange",value:function(e){this.isFilterMode=0!=e,this.setState({catId:e},function(){this.loadData(e,this.state.keyword)})}},{key:"handlePopDrag",value:function(){var e=this.state.keyword;this.props.triggerPopDrag&&this.props.triggerPopDrag(e)}},{key:"ShowSearchFilter",value:function(){this.setState({shoudShowSearchFilter:!0})}},{key:"hideSearchFilter",value:function(){this.setState({shoudShowSearchFilter:!1})}},{key:"render",value:function(){var e=this;return this.state.shoudShowSearchFilter?r("#sticker-to-top").fadeIn():r("#sticker-to-top").hide(),n.createElement("div",{className:"clearfix",style:{minHeight:"200px"}},this.state.loading&&n.createElement("div",{className:"toolbar-loading marginT40"},n.createElement("div",{className:"loading-round"},n.createElement("div",null),n.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),""!=this.state.keyword&&void 0!=this.state.keyword&&n.createElement("div",{className:"clearfix search-select-wrap"},n.createElement("span",{title:Fotor.globalConfig.lang.design_workspace_material_sticker_tip_display_all,className:"icon-pop-search",onClick:this.handlePopDrag.bind(this)})),!this.state.loading&&this.state.searched&&this.state.totalResults>0&&n.createElement("div",{className:"text-center results-found"}),!this.state.loading&&this.state.searched&&0==this.state.totalResults&&n.createElement("div",{className:"text-center results-found"},Fotor.globalConfig.lang.common_search_resultNotice.replace("d%",0)),!this.state.loading&&n.createElement("div",{ref:"stickerGroup",id:"search-results",className:"clearfix sticker-group sticker-group-3",style:{display:this.state.items.length>0?"block":"none"}},this.state.items.map(function(t){return n.createElement(h,{data:t,display:!0,key:t.id+"_"+Math.random(),cols:3,showTip:e.props.showTip,hideTip:e.props.hideTip,tool:e.props.tool,isSearch:!0,isFavor:e.isFavor(t.id),showFavorAnimation:e.props.showFavorAnimation})})),this.state.isLoadingMore&&n.createElement("div",{className:"loading-page",style:{display:this.state.loadFinish?"none":"block"}},n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null),n.createElement("span",null)))}},{key:"isFavor",value:function(e){var t=!1;return this.props.favorItems&&this.props.favorItems.length>0&&this.props.favorItems.map(function(a){a.id==e&&(t=!0)}),t}}]),t}(c.Component);t.default=d,e.exports=t.default}).call(t,a(1),a(0))},function(e,t,a){var r=a(955);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,".search-select-wrap {\n  margin: 10px 18px 0 4px; }\n  .search-select-wrap .icon-pop-search {\n    width: 16px;\n    height: 16px;\n    background: url("+r(a(956))+") no-repeat right top;\n    float: left;\n    cursor: pointer;\n    margin-top: 4px; }\n    .search-select-wrap .icon-pop-search:hover {\n      background-position: right -16px; }\n    .search-select-wrap .icon-pop-search:active {\n      background-position: right -32px; }\n  .search-select-wrap .search-select-dropdown {\n    width: 66.666%;\n    float: left;\n    margin-left: 11.666%; }\n    .search-select-wrap .search-select-dropdown .select-drop {\n      height: 30px;\n      line-height: 30px; }\n      .search-select-wrap .search-select-dropdown .select-drop .drop {\n        top: 31px; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAABACAYAAABcIPRGAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDowOTRDNDVEMjgxQzFFNzExQkMwOEFFNDZDRkQ5OEY5QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEMkY1ODU2N0MxODIxMUU3OTg2NDg2Q0IwNTA3N0M4RCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEMkY1ODU2NkMxODIxMUU3OTg2NDg2Q0IwNTA3N0M4RCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjA5NEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjA5NEM0NUQyODFDMUU3MTFCQzA4QUU0NkNGRDk4RjlCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pYZhRwAAAlpJREFUeNrsWr1OAkEQ5uQKWtHO+ASaQ0OvjTbWPoBExTeg1ZhYyCNAgQ9AiY02xt5EFB+AaOtZSoGsc8luspx7u7c/yJLMJF8wy6z7DXMzsx8h6PV6pGBnL4AoY71C/+5LfI4BN4ANzXMHgFrgIACZBfRVdsYzYMvw/w9C7hBTIymyMsIiH5aZhMuP5rmbS4X5G+OQRf6CkuXxZ7PPlgTQzHozdHgQceSTthXAvip9NvYq6U46Plnk7wHbtNibogwQR51GZpFBVtLk9wCfgG+fa+BcQZ7VxFQAgSX6gi5B6HqBG2QqH0buWkJ+JkUc5ViPNPY2uAEnJe+6C5kOsiy7U5H3fQ40uJr4lwyY2oR+kEWNa02RzwCxBP9IEMWjIfJhM2KsceaY7nnzYZCd0G400cxasucoHL13fLhChJr1yB45J0Vs20bbBmImsU1AB/UA6gHUA6gHUA+gHkA9gHoA9QDqgfnpARcBoB5APYB6APUA6gHUA6gHUA+gHkA9gHpgMfVAWFqvnVkGEAPKGevMLiU+Q8AVYNng3KGLDJRzrMt8dgzIs727SRG3LAOo09eWYC1tIh8WXFvzWpPsL/vQhVS/6qpSCD+IRdADT4Irx0zmQN2RT9pKgLVZTuI4x3qsuZcnfwBYpdeKvigDdcsA8jSBrkFW0uRvASNuiHlZA1UFeVYTUxmwbaOHkiHVzeGTDiCkz7yI/EyK2HaQpY392ldJ3nUXMh1kWfahIu/7HKgIBpiXeoBw+jpvPQYu26jtIIvptxCnBmd++TDIHmnBEs2sJXsefgUYAE9Hg2gMl52VAAAAAElFTkSuQmCC"},,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"images/star4x4_01ef32be3ead74eaf53550053f0c89cf1a.png"},function(e,t,a){e.exports=a.p+"images/star4x4_05aeffaa06452f3e4518b38aebf65e34ad.png"},function(e,t,a){e.exports=a.p+"images/star4x4_04eed4abf27d8e58f334d7c584de06a9eb.png"},function(e,t,a){e.exports=a.p+"images/star4x4_032bdb1aec54fddc352ffe7a6f503611cf.png"},,function(e,t,a){function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n={check_CRM:function(e){return"[object String]"!=Object.prototype.toString.call(e)||"CRMProcessingSuccess"==e},create:function(e){function t(){var e={};return e.name="toneCurve",e.create=function(e){var t={};return t._process={},t.m_context=e,t.m_chrome=0,t.m_curve=new Array(256),t.m_data=new Array(1024),t.tex_num=0,t.m_curve_tex=0,t.m_formula_list=0,t.m_shader=0,t.init_shader=0,t.chrome_shader=0,t.shader_uniform={},t.shader_procession={},t.shader_setup=function(e){if(!this.m_curve_tex&&(this.m_curve_tex=q(this.m_context.m_context,null,256,1,this.m_context.m_context.RGBA,this.m_context.m_context.UNSIGNED_BYTE,4,0,this.m_context.m_context.LINEAR),!this.m_curve_tex))throw"out of memmory in toneMapParcer";e.shader_texture("curve",this.m_curve_tex);for(var t=0;t<256;++t)this.m_data[4*t]=Math.min(256*this.m_curve[t],256),this.m_data[4*t+1]=Math.min(256*this.m_curve[t],256),this.m_data[4*t+2]=Math.min(256*this.m_curve[t],256),this.m_data[4*t+3]=255;this.m_context.m_context.texSubImage2D(this.m_context.m_context.TEXTURE_2D,0,0,0,256,1,this.m_context.m_context.RGBA,this.m_context.m_context.UNSIGNED_BYTE,new Uint8Array(this.m_data)),e.shader_texture("chrome",this.m_chrome[this.tex_num])},t.init={},t.initChromeTemplate="\t    \tvarying vec2 textureCoordinate;            void main()    {    gl_FragColor = vec4(textureCoordinate.x,0.0,textureCoordinate.y,1.0);    }",t.fshToneCurveTemplate="\t    \tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;        \t\t\t\tuniform sampler2D curve;    uniform sampler2D chrome;    vec3 color_limite(vec3 src,float lum)    {        vec3 vl = vec3(lum);        vec3 vc = src - vl;        vec3 fac = min((vec3(1.0) - vl) / max(vc,vec3(0.00001)),vec3(1.0));        vc = vc * vec3(min(fac.r,min(fac.g,fac.b)));        return vl + vc;    }        void main()    {\t\tvec4 src = texture2D(inputImageTexture, textureCoordinate);    vec4 dst;    \t\t\t{    vec3 lsrc = max(src.rgb * vec3(1.0 / 12.82),pow((src.rgb + vec3(0.055)) * vec3(1.0 / 1.055),vec3(2.4)));    vec3 csrc = lsrc * vec3(0.299,0.587,0.114);    float lum = csrc.r + csrc.g + csrc.b;    csrc /= vec3(lum+0.00001);    {        float lv  = min(lum * 12.82,pow(lum,(1.0 / 2.4)) * 1.055 - 0.055);        float lvn = texture2D(curve, vec2(lv,0.5)).g;        lum = max(lvn * (1.0 / 12.82),pow((lvn + 0.055) * (1.0 / 1.055),2.4));    }    {        csrc.rb = texture2D(chrome, vec2(csrc.r,csrc.b)).rb;        csrc.g = 1.0 - csrc.r - csrc.b;    }    csrc *= vec3(lum +0.00001);    lsrc = csrc * vec3(1.0/0.299,1.0/0.587,1.0/0.114);    lsrc = color_limite(lsrc,lum);    src.rgb = min(lsrc * 12.82,pow(lsrc,vec3(1.0 / 2.4)) * vec3(1.055) - vec3(0.055));    dst = src;}        gl_FragColor = dst;    }",t.init=function(e,t){for(var a=0;a<256;++a)this.m_curve[a]=(a+.5)*(1/256);this.m_chrome||(this.m_chrome=new Array(2),this.m_chrome[0]=lt(256,256),this.m_chrome[1]=lt(256,256)),this.init_shader||(this.init_shader=new gt(null,this.initChromeTemplate,this.m_context.m_context));var r=nt(this.m_context.m_context,null,this.init_shader,256,256,t);r.draw_to(this.m_chrome[0]),r=null,this.tex_num=0;do{var n=e.fetch_symbol();this.m_formula_list||(this.m_formula_list=w());var o=this.m_formula_list.get_formula_Item_with_symbol(n);o&&o!={}&&o.color!={}||parcer.error("invalid curve process name",n),null!=o.luminance&&o.luminance(e,this.m_curve),null!=o.shader_process&&(o.shader_process(e,this.m_context.m_context,this.m_chrome[this.tex_num],this.m_chrome[0==this.tex_num?1:0],t),this.tex_num=0==this.tex_num?1:0)}while(e.pre_test_symbol("toneCurve"))},t.gpu_process=function(e,t,a){try{var r=at(t);this.init(e,a.m_frame_buffer),this.m_shader||(this.m_shader=new gt(null,this.fshToneCurveTemplate,this.m_context.m_context));var n=nt(this.m_context.m_context,a,this.m_shader);if(n.shader_texture("inputImageTexture",t.current()),this.shader_setup(n),n.draw_to(t.new_temporary()),this.m_context.m_context.getError())throw"CGEPTPTemplate::gpu_process";t.push_to_current(),r.destroy()}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{r.destroy()}},t.destroy=function(){this.m_shader&&(this.m_shader.destroy(),this.m_shader=0),this.init_shader&&(this.init_shader.destroy(),this.init_shader=0),this.m_chrome&&(this.m_context.m_context.deleteTexture(this.m_chrome[0]),this.m_context.m_context.deleteTexture(this.m_chrome[1]),this.m_chrome[0]=0,this.m_chrome[1]=0),this.m_curve_tex&&this.m_context.m_context.deleteTexture(this.m_curve_tex),this.m_formula_list.destroy()},t},e}function a(e){var t={};return t.runself=function(t,a,r,n){n*=.01;for(var o=n,i=0;i<256;++i){var s=t[i],l=a[i],c=r[i];s=e.run_float(s,s,o),l=e.run_float(l,l,o),c=e.run_float(c,c,o),t[i]=s,a[i]=l,r[i]=c}},t.run=function(t,a,r,n,o,i,s,l,c){n=(n+.5)*(1/256),o=(o+.5)*(1/256),i=(i+.5)*(1/256),s*=1/255,l*=.01,s*=l;for(var h=0;h<256;++h){var d=t[h],u=a[h],p=r[h];c?(d=e.run_float(n,d,s),u=e.run_float(o,u,s),p=e.run_float(i,p,s)):(d=e.run_float(d,n,s),u=e.run_float(u,o,s),p=e.run_float(p,i,s)),t[h]=d,a[h]=u,r[h]=p}},t}function r(e){var t={};return t.opacity=a(ft.createCGEBlendOpacity()),t.darken=a(ft.createCGEBlendDarken()),t.lighten=a(ft.createCGEBlendLighten()),t.multiply=a(ft.createCGEBlendMultiply()),t.screen=a(ft.createCGEBlendScreen()),t.colorDodge=a(ft.createCGEBlendColorDodge()),t.colorBurn=a(ft.createCGEBlendColorBurn()),t.linearDodge=a(ft.createCGEBlendLinearDodge()),t.linearBurn=a(ft.createCGEBlendLinearBurn()),t.hardLight=a(ft.createCGEBlendHardLight()),t.softLight=a(ft.createCGEBlendSoftLight()),t.vividLight=a(ft.createCGEBlendVividLight()),t.linearLight=a(ft.createCGEBlendLinearLight()),t.pinLight=a(ft.createCGEBlendPinLight()),t.hardMix=a(ft.createCGEBlendHardMix()),t.difference=a(ft.createCGEBlendDifference()),t.exclude=a(ft.createCGEBlendExclude()),t.add=a(ft.createCGEBlendAdd()),t.overlay=a(ft.createCGEBlendOverlay()),t[e]}function n(e){var t={};return t.name=e.name,t.create=function(){var t={};return t.luminance=function(t,a){e.init(t),e.run(a)},t.color=function(t,a,r,n){e.init(t),e.run(a),e.run(r),e.run(n)},t},t}function o(){var e={};return e.name="graph",e.create=function(){function e(e){var t=n.length,a=new Array(t-1),r=new Array(t);r[0]=a[0]=0;for(var i=1;i!=t-1;++i){var s=(n[i]-n[i-1])/(n[i+1]-n[i-1]),l=s*r[i-1]+2;r[i]=(s-1)/l,a[i]=(o[i+1]-o[i])/(n[i+1]-n[i])-(o[i]-o[i-1])/(n[i]-n[i-1]),a[i]=(6*a[i]/(n[i+1]-n[i-1])-s*a[i-1])/l}r[t-1]=0;for(var i=t-2;i>=0;--i)r[i]=r[i]*r[i+1]+a[i];for(var c=-1,h=0,i=0;i<256;++i){for(var d=e[i];h<t&&d>n[h];)c=h,++h;if(h!=t)if(-1!=c){var u=n[h]-n[c],p=(n[h]-d)/u,m=(d-n[c])/u,f=p*o[c]+m*o[h]+((p*p*p-p)*r[c]+(m*m*m-m)*r[h])*(u*u)/6;e[i]=Math.max(0,Math.min(f,1))}else e[i]=Math.max(0,Math.min(o[0],1));else e[i]=Math.max(0,Math.min(o[t-1],1))}}function t(){for(var e=0;e<n.length;++e)for(var t=e+1;t<n.length;++t)if(n[e]>n[t]){var a;a=n[e],n[e]=n[t],n[t]=a,a=o[e],o[e]=o[t],o[t]=a}}function a(e){for(n=[],o=[];e.test_symbol("point");){var a=e.fetch_float()*(1/255);n.push(a);var r=e.fetch_float()*(1/255);o.push(r)}t(),n.length<2&&e.error("more than 2 points needed")}var r={},n=new Array,o=new Array;return r.luminance=function(t,r){a(t),e(r)},r.color=function(t,r,i,s){for(var l=["red","green","blue","rgb"],c=-1;-1!=(c=t.lookup_symbol(l));)switch(n=[],o=[],a(t),c){case 0:e(r);break;case 1:e(i);break;case 2:e(s);break;case 3:e(r),e(i),e(s)}},r},e}function i(){var e={};return e.name="mixSelf",e.create=function(){function e(e){n=e.fetch_symbol(),a=e.fetch_float()}var t={},a=0,n="";return t.luminance=function(e,t){e.error("invalid curve operation","mixSelf")},t.color=function(t,o,i,s){a=0,n="",e(t);var l=r(n);l||t.error("invalid blend mode",c.mode),l.runself(o,i,s,a)},t},e}function s(){var e={};return e.name="whiteBalance",e.create=function(){function e(e){a=5400*e.fetch_float()+6500,r=e.fetch_float(),a<1200?a=1200:a>12e3&&(a=12e3),r<.02?r=.02:r>5&&(r=5);var t;a/=1e3,t=a<4?.27475/(a*a*a)-.98598/(a*a)+1.17444/a+.145986:a<7?-4.607/(a*a*a)+2.9678/(a*a)+.09911/a+.244063:-2.0064/(a*a*a)+1.9018/(a*a)+.24748/a+.23704;var o=-3*t*t+2.87*t-.275,i=t/o,s=(1-t-o)/o;n[0]=3.24074*i-1.53726-.498571*s,n[1]=.969258*-i+1.87599+.0415557*s,n[2]=.0556352*i-.203996+1.05707*s,n[1]/=r;for(var l=Math.max(Math.max(n[0],n[1]),n[2]),c=0;c<3;++c)n[c]/=l,n[c]=1/n[c];for(var h=.299*n[0]+.587*n[1]+.114*n[2],d=0;d<3;++d)n[d]/=h}function t(e,t,a){for(var r=0;r<256;++r)e[r]=e[r]*n[0],t[r]=t[r]*n[1],a[r]=a[r]*n[2]}var a=0,r=0,n=new Array(3),o={};return o.luminance=function(e,t){e.error("invalid curve operation","mixSelf")},o.color=function(o,i,s,l){a=0,r=0,n=new Array(3),e(o),t(i,s,l)},o},e}function l(){var e={};return e.name="mixColor",e.create=function(){function e(e){t=!1,d=e.fetch_symbol(),a=e.fetch_float(),n=e.fetch_float(),o=e.fetch_float(),i=e.fetch_float(),s=e.fetch_float(),e.test_symbol("swap")&&(t=!0)}var t,a,n,o,i,s,l={},h=0,d="";return l.luminance=function(e,t){e.error("invalid curve operation","mixSelf")},l.color=function(l,u,p,m){h=0,d="",e(l);var f=r(d);f||l.error("invalid blend mode",c.mode),f.run(u,p,m,a,n,o,i,s,t)},l},e}function h(e){var t={};return t.name=e.name,t.create=function(){var t={};return t.shader_process=function(t,a,r,n,o){this.m_shader||(this.m_shader=new gt(null,e.shader_step(),a));var i=nt(a,null,this.m_shader,256,256,o);if(i.shader_texture("inputChromeMap",r),e.sendUniform(i,t),i.draw_to(n),a.getError())throw"curveFormula"},t.destroy=function(){this.m_shader&&(this.m_shader.destroy(),this.m_shader=0)},t.m_shader=0,t},t}function d(){this.name="saturate",this.amount=0,this.shader_step=function(){return"varying vec2 textureCoordinate;    uniform sampler2D inputChromeMap;     uniform float is;        float get_sat(float red,float blue)    {    float sr = red/(-0.299);    float sb = blue/(-0.114);    float sg = (red+blue)/(0.587);    return max(sr,max(sb,sg));  return sr;      }        void main()    {\t\t    vec4 src = texture2D(inputChromeMap, textureCoordinate);    float red = src.r-0.299;    float blue = src.b-0.114;    float sat = get_sat(red,blue);    float mul = is;    if(mul>2.0)        {        float p1 = (sat-3.0)*sat+3.0;        mul = p1*(mul-2.0) + (2.0-sat)*(3.0-mul);        }        else if(mul>1.0)        {        mul = (2.0-sat)*(mul-1.0) + (2.0-mul);        }    vec4 dst = vec4(red*mul+0.299,0.0,blue*mul+0.114,1.0);        gl_FragColor = dst;    }"},this.sendUniform=function(e,t){var a=t.fetch_float(),r={};r.is=a,e.shader.uniforms(r)}}function u(){this.name="hue",this.amount=0,this.shader_step=function(){return"varying vec2 textureCoordinate;    uniform sampler2D inputChromeMap;     uniform vec4 m;     uniform float psv;        float get_sat(float red,float blue)    {    float sr = red/(-0.299);    float sb = blue/(-0.114);    float sg = (red+blue)/(0.587);    return max(sr,max(sb,sg));  return sr;      }        void main()    {\t\t    vec4 src = texture2D(inputChromeMap, textureCoordinate);    float red = src.r-0.299;    float blue = src.b-0.114;    float sat = get_sat(red,blue);    sat = min(sat,1.0);    float tr = red*m.x+blue*m.y;    float tb = red*m.z+blue*m.w;    red = tr;    blue = tb;    blue = max(min(0.91137,blue),-0.91137);    float nsat = get_sat(red,blue);    sat = nsat*psv + sat*(1.0 -psv);    if(nsat/2.0 >sat){        sat = nsat/2.0;    }    sat = min(sat,1.0);    float mul = sat/nsat;    mul = min(mul,2.0);    vec4 dst = vec4(red*mul+0.299,0.0,blue*mul+0.114,1.0);    gl_FragColor = dst;}"},this.sendUniform=function(e,t){var a=t.fetch_float(),r=a/180*3.1415926535,n=[];n[0]=Math.cos(r),n[1]=Math.sin(r),n[2]=-Math.sin(r),n[3]=Math.cos(r);var o=.25;if(t.check_symbol("factor")){o=t.fetch_float()}var i=(t.fetch_float(),t.fetch_float(),{});i.m=n,i.psv=o,e.shader.uniforms(i)}}function p(){function e(e){var t=(e+.5)*(1/256);return 256*(t=t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4))+.5}this.name="singleColor";var t,a;this.amount=0,this.shader_step=function(){return"varying vec2 textureCoordinate;    uniform sampler2D inputChromeMap;     uniform float r;     uniform float b;     uniform float w;        float get_sat(float red,float blue)    {    float sr = red/(-0.299);    float sb = blue/(-0.114);    float sg = (red+blue)/(0.587);    return max(sr,max(sb,sg));  return sr;      }        void main()    {\t\t    vec4 src = texture2D(inputChromeMap, textureCoordinate);    float red = src.r-0.299;    float blue = src.b-0.114;    float cr = red;    float cb = blue;    float n = 1.0/sqrt(cr*cr+cb*cb);    cr *=n;    cb *=n; \tfloat vp = cr * r + cb * b;    float fac;    if(vp>0.0)        {            float vs = (cr * b - cb * r) * w;            fac = vp / (vp * vp + vs * vs);        }        else        {            fac = 0.0;        }    vec4 dst = vec4(red*fac+0.299,0.0,blue*fac+0.114,1.0);    gl_FragColor = dst;}"},this.sendUniform=function(r,n){var o=n.fetch_float(0,1);o=Math.pow(20,1-o);var i=["hue","color",0];if(0==n.lookup_symbol(i,!0)){var s=n.fetch_float();s=s/180*3.1415,t=Math.sin(s),a=Math.cos(s)}else{var l=.299*n.fetch_float(0,256);l=e(l),l*=.299;var c=.587*n.fetch_float(0,256);c=e(c),c*=.587;var h=.114*n.fetch_float(0,256);h=e(h),h*=.114;var d=l+c+h,u=1/(d+.00256);l*=u,c*=u,h*=u,t=l-.299,a=h-.114,u=1/Math.sqrt(t*t+a*a),t*=u,a*=u}var p={};p.w=o,p.r=t,p.b=a,r.shader.uniforms(p)}}function m(){this.name="RGB",this.amount=0,this.shader_step=function(){return"varying vec2 textureCoordinate;    uniform sampler2D inputChromeMap;     uniform float rr;     uniform float bb;        float get_sat(float red,float blue)    {    float sr = red/(-0.299);    float sb = blue/(-0.114);    float sg = (red+blue)/(0.587);    return max(sr,max(sb,sg));  return sr;      }        void main()    {\t\t    vec4 src = texture2D(inputChromeMap, textureCoordinate);    float red = src.r-0.299;    float blue = src.b-0.114;    red = red +rr;    blue = blue +bb;    blue = max(min(0.91137695,blue),-0.91137695);    float sat = get_sat(red,blue);    if(sat >1.0)    {         red = red/sat;         blue = blue/sat;    }    vec4 dst = vec4(red+0.299,0.0,blue+0.114,1.0);        gl_FragColor = dst;    }"},this.sendUniform=function(e,t){var a=3*t.fetch_float()/1e3,r=3*t.fetch_float()/1e3,n={};n.rr=a,n.bb=r,e.shader.uniforms(n)}}function f(){this.name="brightness",this.amount=0,this.init=function(e){this.amount=e.fetch_float()},this.run=function(e){for(var t=0;t<256;++t){var a=e[t];if(0!=this.amount){var r;r=1.41421/this.amount,a=this.amount>0?1-a-r/1.41421+Math.sqrt(1-1.4121*r+2.82842*a*r+.5*r*r):1-a-r/1.41421-Math.sqrt(1-1.41421*r+2.82842*a*r+.5*r*r)}e[t]=Math.min(a,1)}}}function g(){this.name="contrast",this.amount=0,this.init=function(e){this.amount=e.fetch_float()},this.run=function(e){for(var t=0;t<256;++t){var a=e[t];a=(a-.5)*this.amount+.5,e[t]=a,e[t]=Math.max(0,Math.min(a,1))}}}function v(){this.name="exposure",this.amount=0,this.init=function(e){this.amount=e.fetch_float()},this.run=function(e){for(var t=0;t<256;++t){var a=e[t];a*=Math.pow(2,this.amount),e[t]=a,e[t]=Math.max(0,Math.min(a,1))}}}function b(){this.name="brightnessPS",this.amount=0,this.init=function(e){this.amount=e.fetch_float(),this.amount=50*this.amount+50},this.run=function(e){var t,a,r,n,o;r=.6,n=.96,this.amount<25?(o=this.amount/25,t=.24*o+.39,a=(.52-.235)*o+.235):this.amount<50?(o=(this.amount-25)/25,t=.37*o+.63,a=.48*o+.52):this.amount<75?(o=(this.amount-50)/25,t=(1.6-1)*o+1,a=1*o+1,r=-.25*o+.6,n=(.85-.96)*o+.96):(o=(this.amount-75)/25,t=1*o+1.6,a=2.3*o+2,r=(.2-.35)*o+.35,n=(.65-.85)*o+.85);for(var i=(1-t*r)/Math.pow(1-r,a),s=1-Math.pow(1-n,a)*(1-t*r)/Math.pow(1-r,a),l=0;l<256;++l){var c=e[l],h=t*c,d=1-Math.pow(1-c,a)*i,u=(c-n)/(.997-n),p=s*(1-u)+u;c=t>1?Math.min(Math.min(h,d),p):Math.max(Math.max(h,d),p),e[l]=c,e[l]=Math.min(Math.max(c,0),1)}}}function _(){this.name="contrastPS",this.amount=0,this.init=function(e){this.amount=e.fetch_float()},this.run=function(e){var t,a;t=.4+.012*this.amount,a=1.6-.012*this.amount;for(var r=16*t+8*a-24,n=10-2*a-8*t,o=0;o<256;++o){var i=e[o];i-=.5,i=((r*i*i+n)*i*i+t)*i+.5,e[o]=Math.max(0,Math.min(i,1))}}}function y(){this.name="exposurePS",this.amount=0,this.init=function(e){this.amount=e.fetch_float(),this.amount=25*(this.amount+2)},this.run=function(e){var t,a;t=Math.pow(1.775415,(this.amount-50)/10),a=Math.pow(1.643751,(this.amount-50)/10);for(var r=0;r<256;++r){var n=e[r],o=1-Math.pow(1.01-n,t),i=1-.55*Math.pow(1.01-n,a);n=Math.min(o,i),e[r]=n,e[r]=Math.max(0,Math.min(n,1))}}}function x(){this.name="level",this.dark=0,this.light=0,this.gamma=0,this.init=function(e){this.dark=e.fetch_float(),this.light=e.fetch_float(),this.gamma=e.fetch_float()},this.run=function(e){for(var t=1/(this.light-this.dark+1e-4),a=0;a<256;++a){var r=e[a];r=(r-this.dark)*t,r=Math.max(0,r),r=Math.pow(r,this.gamma),r=Math.min(1,r),e[a]=r,e[a]=Math.max(0,Math.min(r,1))}}}function C(){this.name="shadowHighlight",this.shadow=0,this.highlight=0,this.l=0,this.d=0,this.init=function(e){this.shadow=e.fetch_float(),this.highlight=e.fetch_float(),this.shadow>0&&(this.shadow*=.68),this.shadow=Math.tan(.007853975*(this.shadow+100)),this.highlight=-this.highlight,this.highlight>0&&(this.highlight*=.68),this.highlight=Math.tan(.007853975*(this.highlight+100)),this.l=this.highlight,this.d=this.shadow},this.run=function(e){for(var t=0;t<256;t++){var a=e[t];a=a<.5?4*(this.d-1)*a*a*a+4*(1-this.d)*a*a+this.d*a:4*(this.l-1)*a*a*a+8*(1-this.l)*a*a+(5*this.l-4)*a+1-this.l,e[t]=a,e[t]=Math.max(0,Math.min(a,1))}}}function w(){for(var e={},t=[n(new f),n(new g),n(new v),n(new b),n(new _),n(new y),n(new x),n(new C),s(),o(),i(),l(),h(new d),h(new m),h(new u),h(new p)],a=0;a<t.length;++a)e[t[a].name]={},e[t[a].name]={parcer:null,create:t[a].create};return e.get_formula_Item_with_symbol=function(e){var t=this[e];if(t=={})throw"create_dispatch_parcer";return t.parcer||(t.parcer=t.create(this.m_context)),t.parcer},e.destroy=function(){this.saturate.parcer&&this.saturate.parcer.destroy(),this.RGB.parcer&&this.RGB.parcer.destroy(),this.hue.parcer&&this.hue.parcer.destroy(),this.singleColor.parcer&&this.singleColor.parcer.destroy()},e}function A(){return self={filter:function(e,t,a,r,n,o){e.gpu_process(t,a,r,n,o)},copy:function(e,t,a,r,n){ct(e,t,a,r,n)}},self}function E(){var e={};return e.m_shader=0,e.s_fshFragFilterProcTemplate="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate + sft * cd);    }    void main()    {        vec4 dst = vec4(0.0);    %s        gl_FragColor = dst;    }",e.destroy=function(){this.m_shader&&(this.m_shader.destroy(),this.m_shader=0)},e.gpu_process=function(e,t,a,r,n){if(!this.m_shader){var o=this.s_fshFragFilterProcTemplate.replace(/%s/g,this.shader_procession());this.m_shader=new gt(null,o,this.m_context.m_context)}var i=nt(this.m_context.m_context,null,this.m_shader,a,r,n);i.shader_texture("inputImageTexture",t);var s={};if(s.sft=[1/a,1/r],i.shader.uniforms(s),i.draw_to(e),this.m_context.m_context.getError())throw"cgeFragDownProcTemplate"},e}function F(){return self={src_width:0,src_height:0,dst_width:0,dst_height:0,x_start:0,y_start:0,emb_width:0,emb_height:0,get_trans:function(e){e[0]=this.dst_width/this.emb_width,e[1]=this.dst_height/this.emb_height,e[2]=-this.x_start/this.emb_width,e[3]=-this.y_start/this.emb_height},get_rev_trans:function(e){e[0]=this.emb_width/this.dst_width,e[1]=this.emb_height/this.dst_height,e[2]=this.x_start/this.dst_width,e[3]=this.y_start/this.dst_height}},self}function k(e){return{x_ofs:0,y_ofs:0,m_shader:0,m_context:e,gpu_process:function(e,t,a,r,n,o,i){this.m_shader=pt(this.m_shader,"varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    void main()    {        gl_FragColor = texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw);    }");var s=nt(this.m_context,null,this.m_shader,a,r,i);s.shader_texture("inputImageTexture",t);var l,c;l=this.m_context.getTexParameter(this.m_context.TEXTURE_2D,this.m_context.TEXTURE_MIN_FILTER),c=this.m_context.getTexParameter(this.m_context.TEXTURE_2D,this.m_context.TEXTURE_MAG_FILTER),this.m_context.NEAREST==l&&this.m_context.NEAREST==c||(this.m_context.texParameteri(this.m_context.TEXTURE_2D,this.m_context.TEXTURE_MIN_FILTER,this.m_context.NEAREST),this.m_context.texParameteri(this.m_context.TEXTURE_2D,this.m_context.TEXTURE_MAG_FILTER,this.m_context.NEAREST));var h=[];h[0]=a/n,h[1]=r/o,h[2]=-this.x_ofs/n,h[3]=-this.y_ofs/o;var d={};if(d.m=h,s.shader.uniforms(d),s.draw_to(e),this.m_context.NEAREST==l&&this.m_context.NEAREST==c||(this.m_context.bindTexture(this.m_context.TEXTURE_2D,t),this.m_context.texParameteri(this.m_context.TEXTURE_2D,this.m_context.TEXTURE_MIN_FILTER,l),this.m_context.texParameteri(this.m_context.TEXTURE_2D,this.m_context.TEXTURE_MAG_FILTER,c)),this.m_context.getError())throw"CGEEmbedFilter::gpu_process"},destroy:function(){this.m_shader&&this.m_shader.destroy()}}}function M(e,t,a,r,n,o){function i(e,t,a,r,n,o,i,s,l,c){e.x_ofs=s,e.y_ofs=l,e.gpu_process(t,a,r,n,o,i,c)}r=null==r?0:r,n=null!=n&&n,o=null==o?0:o;var s=A();if(s.r_start=0,s.r_end=0,s.m_context=e,s.m_size=[],s.m_images=[],s.m_base_images=[],s.m_factor=t,s.m_progressive=n,s.m_ctn=o,s.m_base_level=-1,s.m_base_size=-1,s.m_embed_filter=0,s.m_param=r,s._create_=function(e,t,a){var r=!1;return null!=a&&(r=a),lt(e,t,r)},s.map_create=function(e,t){if("top"!=t){if("back"!=t){if(isNaN(t)){for(var a=this.r_start;a<this.r_end;++a)if(this.m_images[a].length==e)this.m_images[a].push(this._create_(this.m_size[a].width,this.m_size[a].height,this.m_param));else if(this.m_images[a].length<e)throw"CGEPyramid::map_create";if(this.m_ctn&&this.r_start<=this.m_base_level&&this.m_base_level<this.r_end)if(this.m_base_images.length==e)this.m_base_images.push(this._create_(this.m_base_size,this.m_base_size,this.m_param));else if(this.m_base_images.length<e)throw"CGEPyramid::map_create"}else if(this.m_images[t].length==e)this.m_images[t].push(this._create_(this.m_size[t].width,this.m_size[t].height,this.m_param));else if(this.m_images[t].length<e)throw"CGEPyramid::map_create"}else if(this.m_images[this.r_end-1].length==e)this.m_images[this.r_end-1].push(this._create_(this.m_size[this.r_end-1].width,this.m_size[this.r_end-1].height,this.m_param));else if(this.m_images[this.r_end-1].length<e)throw"CGEPyramid::map_create"}else if(this.m_images[0].length==e)this.m_images[0].push(this._create_(this.m_size[0].width,this.m_size[0].height,this.m_param));else if(this.m_images[0].length<e)throw"CGEPyramid::map_create"},o){for(var l=Math.max(t.dst_width,t.dst_height),c=o;c<l;)n&&(s.m_size[s.m_size.length]={width:c/2,height:c}),s.m_size[s.m_size.length]={width:c,height:c},c*=2;!s.m_size.length||c==t.dst_width&&c==t.dst_height?s.m_ctn=!1:(s.m_base_level=s.m_size.length,s.m_base_size=c,s.m_base_xo=(t.dst_width-c)/2,s.m_base_xo=s.m_base_xo<0?Math.ceil(s.m_base_xo):Math.floor(s.m_base_xo),s.m_base_yo=(t.dst_height-c)/2,s.m_base_yo=s.m_base_yo<0?Math.ceil(s.m_base_yo):Math.floor(s.m_base_yo))}var h=s.m_factor.dst_width,d=s.m_factor.dst_height;do{s.m_progressive&&s.m_size.length&&(s.m_size[s.m_size.length]={width:h/2,height:d}),s.m_size[s.m_size.length]={width:h,height:d},h*=2,d*=2}while(h<s.m_factor.src_width&&d<s.m_factor.src_height&&h<a&&d<a);s.m_images=new Array(s.m_size.length);for(var u=0;u<s.m_images.length;++u)s.m_images[u]=[];return s.r_start=0,s.r_end=s.m_images.length,s.map_create(0),s.destroy=function(){this.m_embed_filter&&this.m_embed_filter.destroy();for(var e=[];this.m_images.length;){for(;this.m_images[this.m_images.length-1].length;)this.m_images[this.m_images.length-1][this.m_images[this.m_images.length-1].length-1]&&e.push(this.m_images[this.m_images.length-1][this.m_images[this.m_images.length-1].length-1]),this.m_images[this.m_images.length-1][this.m_images[this.m_images.length-1].length-1]=null,this.m_images[this.m_images.length-1].pop();this.m_images[this.m_images.length-1]=null,this.m_images.pop()}for(;this.m_base_images.length;)e.push(this.m_base_images[this.m_base_images.length-1]),this.m_base_images[this.m_base_images.length-1]=null,this.m_base_images.pop();if(e.length){for(var t=0;t<e.length;++t)this.m_context.m_context?this.m_context.context().deleteTexture(e[t]):this.m_context.deleteTexture(e[t]);e=null}this.m_size=[]},s.load_from=function(e,t,a){this.m_factor.get_trans(e.m_m),this.filter(e,this.m_images[this.m_images.length-1][0],t,this.m_size[this.m_size.length-1].width,this.m_size[this.m_size.length-1].height,a)},s.base_move_up=function(e,t){if(this.m_ctn){this.m_embed_filter||(this.m_embed_filter=k(this.m_context));var a=this.m_size[this.m_base_level].width,r=this.m_size[this.m_base_level].height;i(this.m_embed_filter,this.m_images[this.m_base_level][e],this.m_base_images[e],a,r,this.m_base_size,this.m_base_size,this.m_base_xo,this.m_base_yo,t)}},s.base_move_down=function(e,t){if(this.m_ctn){this.m_embed_filter||(this.m_embed_filter=k(this.m_context));var a=this.m_size[this.m_base_level].width,r=this.m_size[this.m_base_level].height;i(this.m_embed_filter,this.m_base_images[e],this.m_images[this.m_base_level][e],this.m_base_size,this.m_base_size,a,r,-this.m_base_xo,-this.m_base_yo,t)}},s.draw_downward=function(e,t,a,r){for(var n=null==a?0:a,o=null==r?0:r,i=this.m_images.length-2;i>=n;--i)this.m_ctn&&i+1==this.m_base_level?(this.base_move_down(o,t),this.filter(e,this.m_images[i][o],this.m_base_images[o],this.m_size[i].width,this.m_size[i].height,t)):this.filter(e,this.m_images[i][o],this.m_images[i+1][o],this.m_size[i].width,this.m_size[i].height,t)},s.map1=function(e,t,a,r){this.map_create(t);for(var n=this.r_start;n<this.r_end;++n)this.filter(e,this.m_images[n][t],this.m_images[n][a],this.m_size[n].width,this.m_size[n].height,r)},s.mapN=function(e,t,a,r,n){this.map_create(t);for(var o=this.r_start;o<this.r_end;++o){for(var i=new Array(10),s=0;s<r;++s)i[s]=this.m_images[o][a[s]];this.filter(e,this.m_images[o][t],i,this.m_size[o].width,this.m_size[o].height,n)}},s}function S(e){var t=e,a=0,r={};return r.s_fshFragMixLogDebugResizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        float dlum = 256.0*src.y - 0.5 + src.x;        float rlum = 256.0*src.w - 0.5 + src.z;        float lum = rlum;        src.x = 77.5 / 256.0;        src.y = 29.5 / 256.0;        float flum = floor(lum);        src.z = lum - flum;        src.w = (flum + 0.5) * (1.0/256.0);        gl_FragColor = src;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragMixLogDebugResizeProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);if(s.shader_texture("inputImageTexture",r),ut(r,!1),s.draw_to(e),ut(r,!0),t.m_context.getError())throw"createFragMixLogDebugResizeFilter::gpu_process"},r.destroy=function(){a&&a.destroy()},r}function T(e){var t=e,a=0,r={};return r.m_m=new Array(4),r.m_contrast=0,r.m_strength=0,r.m_dark=0,r.m_light=0,r.m_end_fac=0,r.s_fshFragStructureSharpenUpProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTexture;    uniform vec4 m;    uniform float contrast;    uniform float strength;    uniform float end_fac;    uniform vec2 darklight;    uniform vec2 darklight_inv;    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        float slum = 255.0*src.w + src.z;        vec4 sub = texture2D(subImageTexture,textureCoordinate * m.xy + m.zw);        float dlum = 255.0*sub.y + sub.x;        float rlum = 255.0*sub.w + sub.z;        float sl1 = (slum - 0.5) * (1.0 / 255.0);        vec2 dh;        dh.x = darklight.x - sl1;        dh.y = sl1 - darklight.y;        dh *= darklight_inv;        dh = max(dh,0.0);        dh *= dh;        dh = max(1.0 - dh,0.0);        float lt= (slum - ((slum - 128.0) * end_fac + dlum - rlum) * contrast - 128.0) * strength;        lt *= mix(dh.x, dh.y, step(0.0, lt));        slum -= lt;        slum = clamp(slum,0.5,255.5);        float fslum = floor(slum);        src.z = slum - fslum;        src.w = fslum * (1.0/255.0);        gl_FragColor = src;    }",r.init=function(e,t,a,r,n){this.m_contrast=e,this.m_strength=t,this.m_dark=a,this.m_light=r,this.m_end_fac=n},r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragStructureSharpenUpProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r[0]),s.shader_texture("subImageTexture",r[1]);var l={};if(l.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],l.contrast=this.m_contrast,l.strength=this.m_strength,l.darklight=[this.m_dark,this.m_light],l.darklight_inv=[1/this.m_dark,1/(1-this.m_light)],l.end_fac=this.m_end_fac,s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function D(e){var t=e,a=0,r={};return r.m_fac=0,r.m_relax=0,r.s_fshFragStructureSharpenIterate="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform float fac;    uniform float relax;    uniform vec2 sft;    uniform vec4 w_th;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate + sft * cd);    }    void main()    {        vec4 dst = vec4(0.0);        vec4 wt = step(w_th,vec4(textureCoordinate.xy,-textureCoordinate.xy));        vec4 src = get_sample(vec2( 0.0,-1.0)) * wt.y;        src += get_sample(vec2(-1.0, 0.0)) * wt.x;        src += get_sample(vec2( 1.0, 0.0)) * wt.z;        src += get_sample(vec2( 0.0, 1.0)) * wt.w;        float wf = wt.x + wt.y + wt.z + wt.w;        wf = 1.0 / wf;        vec4 srcn = get_sample(vec2( 0.0, 0.0));        vec4 v1 = vec4(src.wy,srcn.wy);        vec4 v2 = vec4(src.zx,srcn.zx);        v1 = v1 * 255.0 + v2;        v1 *= vec4(wf,wf,1.0,1.0);        float lum = dot(v1,vec4(-fac * relax,relax,fac * relax,1.0 - relax));        float flum = floor(lum);        dst.x = lum - flum;        dst.y = flum * (1.0/255.0);        float frefn = floor(v1.z);        dst.z = v1.z - frefn;        dst.w = frefn * (1.0/255.0);        gl_FragColor = dst;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragStructureSharpenIterate,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r);var l=1/n,c=1/o,h={};if(h.sft=[l,c],h.fac=this.m_fac,h.relax=this.m_relax,h.w_th=[l,c,l-1,c-1],s.shader.uniforms(h),s.draw_to(e),t.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function R(e){var t=e,a=0,r={};return r.s_fshFragStructureSharpenUpProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTexture;    void main()    {        vec4 dst;        vec4 src = texture2D(inputImageTexture, textureCoordinate);        float slum = 255.0*src.w + src.z;        float fslum = floor(slum);        dst.z = slum - fslum;        dst.w = fslum * (1.0/255.0);        vec4 sub = texture2D(subImageTexture,textureCoordinate);        float dlum = 255.0*sub.y + sub.x;        dlum = clamp(dlum,0.5,255.5);        float fdlum = floor(dlum);        dst.x = dlum - fdlum;        dst.y = fdlum * (1.0/255.0);        gl_FragColor = dst;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragStructureSharpenUpProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);if(s.shader_texture("inputImageTexture",r[0]),s.shader_texture("subImageTexture",r[1]),s.draw_to(e),t.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){a&&a.destroy(),a=0},r}function I(e){var t=e,a=0,r=ae();return r.s_fshFragStructureSharpenDownResizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-3.0/8.0,-3.0/8.0));        src += get_sample(vec2( 3.0/8.0,-3.0/8.0));        src += get_sample(vec2(-3.0/8.0, 3.0/8.0));        src += get_sample(vec2( 3.0/8.0, 3.0/8.0));        float dlum = (255.0*src.w + src.z)*0.25;        float fdlum = floor(dlum);        src.z = dlum - fdlum;        src.w = fdlum * (1.0/255.0);        src.xy = src.zw;        gl_FragColor = src;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragStructureSharpenDownResizeProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r);var l={};if(l.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],l.sft=[1/n,1/o],s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createFragStructureSharpenDownResizeProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function N(e){var t=ee();return t.m_context=e,t.shader_procession=function(){return"\t\t\t\tvec4 src = get_sample(vec2(-3.0/8.0,-3.0/8.0));        src += get_sample(vec2( 3.0/8.0,-3.0/8.0));        src += get_sample(vec2(-3.0/8.0, 3.0/8.0));        src += get_sample(vec2( 3.0/8.0, 3.0/8.0));        float dlum = (255.0*src.w + src.z)*0.25;        float fdlum = floor(dlum);        dst.z = dlum - fdlum;        dst.w = fdlum * (1.0/255.0);        dst.xy = dst.zw;            "},t}function P(e){var t=E();return t.m_context=e,t.m_shader=0,t.shader_procession=function(){return"vec4 src;        src = get_sample(vec2( 0.0, 0.0));        float ref = 255.0*src.w + src.z;        float fref = floor(ref);        dst.z = ref - fref;        dst.w = fref * (1.0/255.0);        dst.x = 0.5;        dst.y = 0.5;        "},t}function B(e){var t=e,a=0,r={};return r.m_factor=0,r.s_fshFragNewStructureSharpenUpProc="   varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTextureR;    uniform sampler2D subImageTextureD;    uniform float fac;    void main()    {        vec4 dst = texture2D(inputImageTexture, textureCoordinate);        vec2 slum;        slum.x = dst.y*255.0 + dst.x*(255.0 / 256.0);        slum.y = dst.w*255.0 + dst.z*(255.0 / 256.0);        vec4 sub_r = texture2D(subImageTextureR, textureCoordinate);        vec2 rlum;        rlum.x = sub_r.y*255.0 + sub_r.x*(255.0 / 256.0);        rlum.y = sub_r.w*255.0 + sub_r.z*(255.0 / 256.0);        vec4 sub_d = texture2D(subImageTextureD, textureCoordinate);        vec2 dlum;        dlum.x = sub_d.y*255.0 + sub_d.x*(255.0 / 256.0);        dlum.y = sub_d.w*255.0 + sub_d.z*(255.0 / 256.0);        dlum = (slum - rlum)*fac + dlum;        vec2 fdlum = floor(dlum);        dst.x = (dlum.x - fdlum.x)*(256.0 / 255.0);        dst.y = fdlum.x / 255.0;        dst.z = (dlum.y - fdlum.y)*(256.0 / 255.0);        dst.w = fdlum.y / 255.0;        gl_FragColor = dst;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragNewStructureSharpenUpProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r[0]),s.shader_texture("subImageTextureR",r[1]),s.shader_texture("subImageTextureD",r[2]);var l={};if(l.fac=this.m_factor,s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){a&&a.destroy(),a=0},r}function z(e){function t(){var e=(n.m_contrast_dark>0?-2.9167*Math.abs(n.m_contrast_dark):1.0667*Math.abs(n.m_contrast_dark))+(n.m_contrast_light>0?2.9167*Math.abs(n.m_contrast_light):-1.0667*Math.abs(n.m_contrast_light));e/=16777216;var t=(n.m_contrast_dark>0?7.4167*Math.abs(n.m_contrast_dark):-3.2*Math.abs(n.m_contrast_dark))+(n.m_contrast_light>0?-4.25*Math.abs(n.m_contrast_light):1.0667*Math.abs(n.m_contrast_light));t/=65536;var a=(n.m_contrast_dark>0?-6.2208*Math.abs(n.m_contrast_dark):3.1333*Math.abs(n.m_contrast_dark))+(n.m_contrast_light>0?1.4708*Math.abs(n.m_contrast_light):.0667*Math.abs(n.m_contrast_light));a/=256;var r=(n.m_contrast_dark>0?1.7208*Math.abs(n.m_contrast_dark):-1*Math.abs(n.m_contrast_dark))+(n.m_contrast_light>0?Math.abs(n.m_contrast_light)*(.8625-1):Math.abs(n.m_contrast_light)*(.9333-1));return r+=1,[e,t,a,r]}var a=e,r=0,n={};return n.m_contrast_dark=0,n.m_contrast_light=0,n.m_m=new Array,n.m_details=0,n.m_dark=0,n.m_light=0,n.init=function(e,t,a,r,n){this.m_contrast_dark=e,this.m_contrast_light=t,this.m_details=a,this.m_dark=r,this.m_light=n},n.s_fshFragNewStructureSharpenUpsizeProc="   varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTexture;    uniform vec4 m;    uniform vec4 contrast;    uniform float details;    uniform vec2 darklight;    uniform vec2 darklight_inv;    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        float slum = 255.0*src.w + src.z * (255.0 / 256.0);        vec4 sub = texture2D(subImageTexture, textureCoordinate * m.xy + m.zw);        float a = (255.0 / 256.0)*sub.y + sub.x * (255.0 / 65536.0);        float b = 255.0*sub.w + sub.z * (255.0 / 256.0);        float sl1 = slum * (1.0 / 256.0);        vec2 dh;        dh.x = darklight.x - sl1;        dh.y = sl1 - darklight.y;        dh *= darklight_inv;        dh = max(dh, 0.0);        dh *= dh;        dh = max(1.0 - dh, 0.0);        float lo = a *  slum + b;        float hi = slum - lo;        lo = (((contrast.x * lo + contrast.y) * lo + contrast.z) * lo+contrast.w)*lo;        float lt = slum - lo - hi * details;        lt *= mix(dh.x, dh.y, step(0.0, lt));        slum -= lt;        slum = clamp(slum, 0.0, 255.996);        float fslum = floor(slum);        src.z = (slum - fslum) * (256.0 / 255.0);        src.w = fslum * (1.0 / 255.0);        gl_FragColor = src;    }",n.gpu_process=function(e,n,o,i,s){r||(r=new gt(null,this.s_fshFragNewStructureSharpenUpsizeProc,a.m_context));var l=nt(a.m_context,null,r,o,i,s);l.shader_texture("inputImageTexture",n[0]),l.shader_texture("subImageTexture",n[1]);var c=t(),h={};if(h.m=this.m_m,h.contrast=c,h.details=this.m_details,h.darklight=[this.m_dark,this.m_light],h.darklight_inv=[1/this.m_dark,1/this.m_light],l.shader.uniforms(h),l.draw_to(e),a.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},n.destroy=function(){r&&r.destroy(),r=0},n}function U(e){var t=e,a=0,r={};return r.m_esp=0,r.s_fshFragNewStructureSharpenFator="  \tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform float esp;    void main()    {        vec4 dst = texture2D(inputImageTexture, textureCoordinate);        vec2 lum;        lum.x = dst.y*255.0 + dst.x*(255.0 / 256.0);        lum.y = dst.w*255.0 + dst.z*(255.0 / 256.0);        float var = lum.y * 256.0 - lum.x * lum.x;        var = max(var, 0.0);        float a = var /(var + esp * (65536.0 * 4.0));        float b = (1.0 - a) * lum.x;        vec2 dlum = vec2(a * 256.0, b);        vec2 fdlum = floor(dlum);        dst.x = (dlum.x - fdlum.x)*(256.0 / 255.0);        dst.y = fdlum.x / 255.0;        dst.z = (dlum.y - fdlum.y)*(256.0 / 255.0);        dst.w = fdlum.y / 255.0;        gl_FragColor = dst;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragNewStructureSharpenFator,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r);var l={};if(l.esp=this.m_esp,s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){a&&a.destroy(),a=0},r}function G(e){var t=e,a=0,r=ae();return r.s_fshFragNewStructureSharpenDownsizeProc="    varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(-3.0 / 8.0, 3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, 3.0 / 8.0));        vec2 dlum;        dlum.x = (255.0*src.w + src.z * (255.0 / 256.0))*0.25;        dlum.y = dlum.x * dlum.x * (1.0 / 256.0);        vec2 fdlum = floor(dlum);        src.xz = dlum - fdlum;        src.yw = fdlum;        src *= vec4((256.0 / 255.0), 1.0 / 255.0, (256.0 / 255.0), 1.0 / 255.0);        gl_FragColor = src;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragNewStructureSharpenDownsizeProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r);var l={};if(l.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],l.sft=[1/n,1/o],s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createFragStructureSharpenDownResizeProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function O(e){var t=ee();return t.m_context=e,t.shader_procession=function(){return"\t\t\t\tvec4 src = get_sample(vec2(-3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(-3.0 / 8.0, 3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, 3.0 / 8.0));        src *= vec4(0.25);        vec2 dlum;        dlum.x = src.w*255.0 + src.z*(255.0 / 256.0);        dlum.y = src.y*256.0 + src.x*(255.0 / 256.0);        vec2 fdlum = floor(dlum);        src.z = (dlum.x - fdlum.x)*(256.0 / 255.0);        src.w = fdlum.x / 255.0;        src.x = (dlum.y - fdlum.y)*(256.0 / 255.0);        src.y = fdlum.y / 255.0;        dst = src; "},t}function j(){var e={};return e.name="newStructureSharpen",e.create=function(){function e(e){function t(){y&&(y.destroy(),y=0)}function a(e,t,a,r,n,o){e.gpu_process(t,a,r,n,o)}function r(e,t,a){if(!(a<=0||t<=0)){var r,n,o,i;t>a?(r=32,n=32*a/t,32*a%t&&++n,++n,o=32,i=32*a/t):0!=a&&(r=32*t/a,n=32,32*t%a&&++r,++r,o=32*t/a,i=32),e.src_width=t,e.src_height=a,e.dst_width=Math.floor(r),e.dst_height=Math.floor(n),e.x_start=0,e.y_start=0,e.emb_width=Math.floor(o),e.emb_height=Math.floor(i)}}function n(e){e.assume_symbol("radius"),s=e.fetch_float(1e-4,16),e.assume_symbol("esp"),l=.01*e.fetch_float(.001,100),e.get_log()!=g?(m=!0,f=e.get_log()):m=!1,e.test_symbol("contrastDarkLight")?(c=e.fetch_float(-1,1),h=e.fetch_float(-1,1)):(c=0,h=0),e.assume_symbol("details"),d=e.fetch_float(0,5),e.test_symbol("preserveDarkLight")?(u=e.fetch_float(0,.5),p=e.fetch_float(.5,1)):(u=0,p=1)}function o(e,t){var r=A();e.draw_downward(k,t),e.map_create(1);for(var n=new Array(e.m_images.length),o=0;o<n.length;++o){var i=Math.max(e.m_size[o].width,e.m_size[o].height)/16*s;n[o]=Math.exp(-i*i)}for(var o=1;o<e.m_images.length;++o)if(w.m_factor=n[o],e.m_base_level==o){var l=[e.m_base_images[0],e.m_images[o-1][0],e.m_images[o-1][1]];a(w,e.m_base_images[1],l,e.m_base_size,e.m_base_size,t),e.base_move_up(1,t)}else{var l=[e.m_images[o][0],e.m_images[o-1][0],e.m_images[o-1][1]];1==o&&r.copy(e.m_images[o-1][1],e.m_images[o-1][0],e.m_size[o-1].width,e.m_size[o-1].height,t),r.filter(w,e.m_images[o][1],l,e.m_size[o].width,e.m_size[o].height,t)}}function i(e,t,r,i,s,v,b){if(n(e),m){g="",t.load_from(C,i,b),o(t,b),S.m_esp=l,a(S,t.m_images[t.m_images.length-1][0],t.m_images[t.m_images.length-1][1],t.m_size[t.m_size.length-1].width,t.m_size[t.m_size.length-1].height,b),o(t,b);var y;y=g,g=f,f=y}_.get_rev_trans(E.m_m),E.init(c,h,d,u,p);var x=[];x[0]=i,x[1]=t.m_images[t.m_images.length-1][1],a(E,r,x,s,v,b)}var s,l,c,h,d,u,p,m,f,g,v,b,_,y,x,C,w,E,k,S;y=0,v=0,b=0,x=e,g="",_=F(),C=G(x),k=O(x),w=B(x),E=z(x),S=U(x);var T={};return T.destroy=function(){t(),C&&C.destroy(),k&&k.destroy(),w&&w.destroy(),E&&E.destroy(),S&&S.destroy()},T.size_change=function(e,a){v==e&&b==a||(v=e,b=a,g="",r(_,v,b),t())},T.gpu_process=function(e,t,a){try{at(t);this.size_change(a.m_width,a.m_height),y||(y=M(x.context(),_,4099,!0,!1,2),g=0),i(e,y,t.new_temporary(),t.current(),a.m_width,a.m_height,a.m_frame_buffer),t.push_to_current()}catch(e){throw"CGEPTPTemplete::gpu_process"}},T}return e}(),e}function L(){var e={};return e.name="structureSharpen",e.create=function(){function e(e){function t(){C&&(C.destroy(),C=0)}function a(e,t,a,r,n,o){e.gpu_process(t,a,r,n,o)}function r(e,t,a){if(!(a<=0||t<=0)){var r,n,o,i;t>a?(r=32,n=32*a/t,32*a%t&&++n,++n,o=32,i=32*a/t):0!=a&&(r=32*t/a,n=32,32*t%a&&++r,++r,o=32*t/a,i=32),e.src_width=t,e.src_height=a,e.dst_width=Math.floor(r),e.dst_height=Math.floor(n),e.x_start=0,e.y_start=0,e.emb_width=Math.floor(o),e.emb_height=Math.floor(i)}}function n(e){e.assume_symbol("iterateTimes"),v=Math.floor(e.fetch_float(1,20)+.5),e.assume_symbol("factor"),l=e.fetch_float(0,1),c=e.fetch_float(.1,10),e.assume_symbol("relaxation"),h=e.fetch_float(0,2),d=e.fetch_float(0,2),u=e.fetch_float(.1,5),e.assume_symbol("strength"),m=e.fetch_float(0,100),e.assume_symbol("contrast"),p=e.fetch_float(0,5),e.assume_symbol("darkLight"),f=e.fetch_float(0,.5),g=e.fetch_float(.5,1)}function o(e,t,a){e.load_from(B,t,a),e.draw_downward(z,a)}function i(e,t,r){e.map_create(1);for(var n=new Array(e.m_images.length),o=new Array(e.m_images.length),i=0;i<n.length;++i){var s=i/c,p=Math.exp(-s*s);n[i]=1-p+l*p}var s=(Math.log(Math.max(e.m_factor.src_width,e.m_factor.src_height))/Math.log(2)-1)/c,p=Math.exp(-s*s);r.end_fac=1-p+l*p;for(var i=0;i<o.length;++i){var s=i/u,p=Math.exp(-s*s);o[i]=d*(1-p)+h*p}e.r_start=0,e.r_end=1,e.map1(U,1,0,t);var m=1;ut(e.m_images[0][0],!1),ut(e.m_images[0][1],!1);for(var i=0;i<e.m_images.length;++i){E.m_fac=n[i],E.m_relax=o[i];for(var f=0;f<v;++f)e.map1(E,1-m,m,t),m=1-m;if(ut(e.m_images[i][0],!0),ut(e.m_images[i][1],!0),i<e.m_images.length-1){var g=i+1;if(e.r_start=g,e.r_end=g+1,e.m_base_level==g){var b=[e.m_base_images[0],e.m_images[g-1][m]];a(k,e.m_base_images[1],b,e.m_base_size,e.m_base_size,t),e.base_move_up(1,t)}else{var b=[e.m_images[g][0],e.m_images[g-1][m]];a(k,e.m_images[g][1],b,e.m_size[g].width,e.m_size[g].height,t)}m=1,ut(e.m_images[g][0],!1),ut(e.m_images[g][1],!1)}}return m}function s(e,t,r,s,l,c,h){e.get_log()!=b&&(o(t,s,h),b=e.get_log()),n(e);var d={},u=i(t,h,d),v=d.end_fac;x.get_rev_trans(A.m_m),A.init(p,.01*m,f,g,v);var _=new Array(3);_[0]=s,_[1]=t.m_images[t.m_images.length-1][u],a(A,r,_,l,c,h)}var l,c,h,d,u,p,m,f,g,v,b,_,y,x,C,w,A,E,k,B,z,U,G;C=0,_=0,y=0,w=e,b="",x=F(),A=T(w),E=D(w),k=R(w),B=I(w),z=N(w),U=P(w),G=S(w);var O={};return O.destroy=function(){t(),A&&A.destroy(),E&&E.destroy(),k&&k.destroy(),B&&B.destroy(),z&&z.destroy(),U&&U.destroy(),G&&G.destroy()},O.size_change=function(e,a){_==e&&y==a||(_=e,y=a,b="",r(x,_,y),t())},O.gpu_process=function(e,t,a){try{at(t);this.size_change(a.m_width,a.m_height),C||(C=M(w.context(),x,1025,!0,!1,2),b=0),s(e,C,t.new_temporary(),t.current(),a.m_width,a.m_height,a.m_frame_buffer),t.push_to_current()}catch(e){throw"CGEPTPTemplete::gpu_process"}},O}return e}(),e}function H(e){var t=0,a=0,r=e,n=0,o={};return o.init=function(e,r){t=e,a=r},o.m_m=new Array(4),o.s_fshBlurSharpenResizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTexture;    uniform vec4 m;    uniform float amount;    uniform float end_fac;    uniform float highlight;    uniform float highlight_inv;    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        float slum = 255.0*src.w + src.z;        vec4 sub = texture2D(subImageTexture,textureCoordinate * m.xy + m.zw);        float dlum = 255.0*sub.y + sub.x;        float rlum = 255.0*sub.w + sub.z;        slum = ((slum - rlum) * end_fac + dlum) * (1.0 - amount) + slum * amount;        slum = clamp(slum,0.5,255.5);        float fslum = floor(slum);        src.z = slum - fslum;        src.w = fslum * (1.0/255.0);        gl_FragColor = src;    }",o.gpu_process=function(e,o,i,s,l){n||(n=new gt(null,this.s_fshBlurSharpenResizeProc,r.m_context));var c=nt(r.m_context,null,n,i,s,l);c.shader_texture("inputImageTexture",o[0]),c.shader_texture("subImageTexture",o[1]);var h={};if(h.m=this.m_m,h.amount=t,h.end_fac=a,c.shader.uniforms(h),c.draw_to(e),r.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},o.destroy=function(){n&&(n.destroy(),n=0)},o}function Z(e){var t=0,a=e,r={};return r.m_factor=0,r.m_m=new Array(4),r.s_fshFragBlurSharpenUpProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTexture;    uniform float fac;    void main()    {        vec4 dst = texture2D(inputImageTexture, textureCoordinate);        float slum = 255.0*dst.w + dst.z;        vec4 sub = texture2D(subImageTexture,textureCoordinate);        float rlum = 255.0*sub.w + sub.z;        float dlum = 255.0*sub.y + sub.x;        dlum = (slum - rlum)*fac + dlum;        dlum = clamp(dlum,0.5,255.5);        float fdlum = floor(dlum);        dst.x = dlum - fdlum;        dst.y = fdlum * (1.0/255.0);        gl_FragColor = dst;    }",r.gpu_process=function(e,r,n,o,i){t||(t=new gt(null,this.s_fshFragBlurSharpenUpProc,a.m_context));var s=nt(a.m_context,null,t,n,o,i);s.shader_texture("inputImageTexture",r[0]),s.shader_texture("subImageTexture",r[1]);var l={};if(l.fac=this.m_factor,s.shader.uniforms(l),s.draw_to(e),a.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){t&&(t.destroy(),t=0)},r}function Y(e){var t=0,a=e,r={};return r.m_factor=0,r.m_m=new Array(4),r.s_fshFragBlurSharpenDownResizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(-3.0 / 8.0, 3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, 3.0 / 8.0));        gl_FragColor = src * 0.25;    }",r.gpu_process=function(e,r,n,o,i){t||(t=new gt(null,this.s_fshFragBlurSharpenDownResizeProc,a.m_context));var s=nt(a.m_context,null,t,n,o,i);s.shader_texture("inputImageTexture",r);var l={};if(l.m=this.m_m,l.sft=[1/n,1/o],s.shader.uniforms(l),s.draw_to(e),a.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){t&&(t.destroy(),t=0)},r}function W(e){var t=ee();return t.m_context=e,t.shader_procession=function(){return"vec4 src = get_sample(vec2(-3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(-3.0 / 8.0, 3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, 3.0 / 8.0));        dst = src * 0.25;"},t}function Q(e){var t=0,a=e,r={};return r.m_amount=0,r.m_end_fac=0,r.init=function(e,t){this.m_amount=e,this.m_end_fac=t},r.m_m=new Array(4),r.s_fshFragBlurSharpenResizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTextureR;    uniform sampler2D subImageTextureD;    uniform vec4 m;    uniform float amount;    uniform float end_fac;    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        vec4 sub_r = texture2D(subImageTextureR, textureCoordinate * m.xy + m.zw);        vec4 sub_d = texture2D(subImageTextureD, textureCoordinate * m.xy + m.zw);        gl_FragColor = ((src - sub_r) * end_fac + sub_d) *(1.0 - amount) +src * amount;    }",r.gpu_process=function(e,r,n,o,i){t||(t=new gt(null,this.s_fshFragBlurSharpenResizeProc,a.m_context));var s=nt(a.m_context,null,t,n,o,i);s.shader_texture("inputImageTexture",r[0]),s.shader_texture("subImageTextureR",r[1]),s.shader_texture("subImageTextureD",r[2]);var l={};if(l.m=this.m_m,l.amount=this.m_amount,l.end_fac=this.m_end_fac,s.shader.uniforms(l),s.draw_to(e),a.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){t&&(t.destroy(),t=0)},r}function V(e){var t=0,a=e,r={};return r.m_factor=0,r.s_fshFragBlurSharpenUpProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTextureR;    uniform sampler2D subImageTextureD;    uniform float fac;    void main()    {        vec4 dst = texture2D(inputImageTexture, textureCoordinate);        vec4 sub_r = texture2D(subImageTextureR, textureCoordinate);        vec4 sub_d = texture2D(subImageTextureD, textureCoordinate);        gl_FragColor = (dst - sub_r)*fac + sub_d;    }",r.gpu_process=function(e,r,n,o,i){t||(t=new gt(null,this.s_fshFragBlurSharpenUpProc,a.m_context));var s=nt(a.m_context,null,t,n,o,i);s.shader_texture("inputImageTexture",r[0]),s.shader_texture("subImageTextureR",r[1]),s.shader_texture("subImageTextureD",r[2]);var l={};if(l.fac=this.m_factor,s.shader.uniforms(l),s.draw_to(e),a.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){t&&(t.destroy(),t=0)},r}function J(){var e={};return e.name="blurSharpen",e.create=function(){function e(e,t,a){if(!(a<=0||t<=0)){var r,n,o,i;t>a?(r=32,n=32*a/t,32*a%t&&++n,++n,o=32,i=32*a/t):(r=32*t/a,n=32,32*t%a&&++r,++r,o=32*t/a,i=32),e.src_width=t,e.src_height=a,e.dst_width=r,e.dst_height=n,e.x_start=0,e.y_start=0,e.emb_width=o,e.emb_height=i}}function t(t){var a,r,n,o,i,s,l,c,h,d,u;s=0,l=t,i=F(),d=Y(t),u=W(t),h=V(t),c=Q(t);var p={};return p=A(),p.destroy=function(){this.clear(),d&&d.destroy(),u&&u.destroy()},p.clear=function(){s&&(s.destroy(),s=0)},p.size_change=function(t,a){this.m_width==t&&this.m_height==a||(this.m_width=t,this.m_height=a,this.m_last_src="",e(i,this.m_width,this.m_height),this.clear())},p.init=function(e){e.assume_symbol("amount"),r=e.fetch_float(-100,500),e.assume_symbol("radius"),n=e.fetch_float(0,4)},p.draw_up_textures=function(e,t,a){e.map_create(1);for(var r=new Array(e.m_images.length),o=0;o<r.length;++o){var i=Math.max(e.m_size[o].width,e.m_size[o].height)/16*n;r[o]=Math.exp(-i*i)}var i=Math.max(e.m_factor.src_width,e.m_factor.src_height)/16*n;a=Math.exp(-i*i);for(var o=1;o<e.m_images.length;++o)if(h.m_factor=r[o],e.m_base_level==o){var s=[e.m_base_images[0],e.m_images[o-1][0],e.m_images[o-1][1]];1==o&&this.copy(e.m_images[o-1][1],e.m_images[o-1][0],e.m_size[o-1].width,e.m_size[o-1].height,t),this.filter(h,e.m_base_images[1],s,e.m_base_size,e.m_base_size,t),e.base_move_up(1,t)}else{var s=[e.m_images[o][0],e.m_images[o-1][0],e.m_images[o-1][1]];1==o&&this.copy(e.m_images[o-1][1],e.m_images[o-1][0],e.m_size[o-1].width,e.m_size[o-1].height,t),this.filter(h,e.m_images[o][1],s,e.m_size[o].width,e.m_size[o].height,t)}return a},p.draw_temp_textures=function(e,t,a){e.load_from(d,t,a),e.draw_downward(u,a)},p.process=function(e,t,a,n,s,l,h){e.get_log()!=o&&(this.draw_temp_textures(t,n,h),o=e.get_log()),this.init(e);var d=1;d=this.draw_up_textures(t,h,d),i.get_rev_trans(c.m_m),c.init(.01*r+1,d);var u=new Array(3);u[0]=n,u[1]=t.m_images[t.m_images.length-1][0],u[2]=t.m_images[t.m_images.length-1][1],this.filter(c,a,u,s,l,h)},p.gpu_process=function(e,t,r){try{a=at(t),this.size_change(r.m_width,r.m_height),s||(s=M(l.context(),i,4099,!0,!1,2),o=0),this.process(e,s,t.new_temporary(),t.current(),r.m_width,r.m_height,r.m_frame_buffer),t.push_to_current(),a.destroy()}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{a.destroy()}},p}return t}(),e}function X(){var e={};return e.name="blurSharpen",e.create=function(){function e(e,t,a){if(!(a<=0||t<=0)){var r,n,o,i;t>a?(r=32,n=32*a/t,32*a%t&&++n,++n,o=32,i=32*a/t):(r=32*t/a,n=32,32*t%a&&++r,++r,o=32*t/a,i=32),e.src_width=t,e.src_height=a,e.dst_width=r,e.dst_height=n,e.x_start=0,e.y_start=0,e.emb_width=o,e.emb_height=i}}function t(t){var a,r,n,o,i,s,l,c,h,d,u,p;s=0,l=t,i=F(),c=H(l),h=Z(l),d=I(l),u=N(l),p=S(l);var m={};return m=A(),m.destroy=function(){this.clear(),c.destroy(),h.destroy(),d.destroy(),u.destroy(),p.destroy()},m.clear=function(){s&&(s.destroy(),s=0)},m.size_change=function(t,a){this.m_width==t&&this.m_height==a||(this.m_width=t,this.m_height=a,this.m_last_src="",e(i,this.m_width,this.m_height),this.clear())},m.init=function(e){e.assume_symbol("amount"),r=e.fetch_float(-100,500),e.assume_symbol("radius"),n=e.fetch_float(0,1)},m.draw_up_textures=function(e,t){var a=1;e.map_create(1);for(var r=new Array(e.m_images.length),o=0;o<r.length;++o){var i=Math.max(e.m_size[o].width,e.m_size[o].height)/16*n;r[o]=Math.exp(-i*i)}var i=Math.max(e.m_factor.src_width,e.m_factor.src_height)/16*n;a=Math.exp(-i*i);for(var o=1;o<e.m_images.length;++o)if(h.m_factor=r[o],e.m_base_level==o){var s=[e.m_base_images[0],e.m_images[o-1][1]];1==o&&(s[1]=e.m_images[0][0]),this.filter(h,e.m_base_images[1],s,e.m_base_size,e.m_base_size,t),e.base_move_up(1,t)}else{var s=[e.m_images[o][0],e.m_images[o-1][1]];1==o&&(s[1]=e.m_images[0][0]),this.filter(h,e.m_images[o][1],s,e.m_size[o].width,e.m_size[o].height,t)}return a},m.draw_temp_textures=function(e,t,a){e.load_from(d,t,a),e.draw_downward(u,a)},m.process=function(e,t,a,n,s,l,h){e.get_log()!=o&&(this.draw_temp_textures(t,n,h),o=e.get_log()),this.init(e);var d=this.draw_up_textures(t,h);i.get_rev_trans(c.m_m),c.init(.01*r+1,d);var u=new Array(3);u[0]=n,u[1]=t.m_images[t.m_images.length-1][1],this.filter(c,a,u,s,l,h)},m.gpu_process=function(e,t,r){try{a=at(t),this.size_change(r.m_width,r.m_height),s||(s=M(l.context(),i,1025,!0,!1,2),o=0),this.process(e,s,t.new_temporary(),t.current(),r.m_width,r.m_height,r.m_frame_buffer),t.push_to_current(),a.destroy()}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{a.destroy()}},m}return t}(),e}function q(e,t,a,r,n,o,i,s,l,c){c=c||e.CLAMP_TO_EDGE,i=i?4:i,null==s&&(s=0),l=l?e.LINEAR:l,c=c?e.CLAMP_TO_EDGE:c;var h,d=e,u=(d.LUMINANCE,d.LUMINANCE_ALPHA,d.RGB,d.RGBA,[1,2,1,4]);if(i<=0||i>4)return 0;var p=u[i-1];return d.activeTexture(d.TEXTURE1+s),h=d.createTexture(),t=null!=t?new Uint8Array(t):null,d.bindTexture(d.TEXTURE_2D,h),d.pixelStorei(d.UNPACK_ALIGNMENT,p),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,a,r,0,d.RGBA,d.UNSIGNED_BYTE,t),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,l),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,l),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,c),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,c),h}function K(){var e={};return e.name="toneMapStart",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.cal_fac=function(e){e.key=Math.pow(2,5-this.m_key/20),e.key_base=1/Math.log(e.key+1)},t.shader_uniform=function(){return"uniform float key;                uniform float key_base;"},t.shader_procession=function(){return"\t\t\t\tvec3 lsrc = max(src.rgb * vec3(1.0 / 12.82),pow((src.rgb + vec3(0.055)) * vec3(1.0 / 1.055),vec3(2.4)));                vec3 csrc = lsrc * vec3(0.299,0.587,0.114);                float lum = csrc.r + csrc.g + csrc.b;                csrc /= vec3(lum+0.00001);                lum = log(1.0 + key * lum) * key_base;                lum = lum * 255.0 + 0.5;                float flum = floor(lum);                dst.x = csrc.r;                dst.y = csrc.b;                dst.z = lum - flum;                dst.w = flum * (1.0/255.0);"},t.shader_setup=function(e){var t,a,r={};this.cal_fac(r),t=r.key,a=r.key_base;var n={};n.key=t,n.key_base=a,e.shader.uniforms(n)},t.m_formula_list=0,t.init=function(e){e.assume_symbol("key"),this.m_key=e.fetch_float(-100,100),e.m_key=this.m_key,e.m_mode="CPM_LUV_MIX_LOG"},t}return e}(),e}function $(){var e={};return e.name="toneMapEnd",e.m_key=0,e.create=function(){function e(e,t){return"BPSSemicolon"!=e.get_current_status()?0:(e.next(),e.cmp_symbol("toneMapStart")?(e.next(),e.cmp_symbol("key")?(e.next(),t!=e.get_float()?0:4):0):0)}function t(t){var a={};return a.cal_fac=function(e){var t=Math.pow(2,5-this.m_key/20);e.key_base=Math.log(t+1),e.key=1/t},a.m_shader=0,a.s_fshCGEToneMapEnd="varying vec2 textureCoordinate;        uniform sampler2D inputImageTexture;        uniform sampler2D srcTexForAlpha;        uniform float key;        uniform float key_base;        vec3 color_limite(vec3 src,float lum)        {            vec3 vl = vec3(lum);            vec3 vc = src - vl;            vec3 fac = min((vec3(1.0) - vl) / max(vc,0.00001),1.0);            vc = vc * vec3(min(fac.r,min(fac.g,fac.b)));            return vl + vc;        }        void main()        {            vec4 src = texture2D(inputImageTexture, textureCoordinate);            vec3 csrc;            float lum;            csrc.r = src.x;            csrc.b = src.y;            csrc.g = 1.0 - src.x - src.y;            lum = src.w + (- 0.5 + src.z)*(1.0 / 255.0);            lum = (exp(lum * key_base) - 1.0) * key;            lum = min(lum,0.9999);            csrc *= vec3(lum);            vec3 lsrc = csrc * vec3(1.0/0.299,1.0/0.587,1.0/0.114);            lsrc = color_limite(lsrc,lum);            lsrc = min(lsrc,0.9999);                         src.rgb = min(lsrc * 12.82,pow(lsrc,vec3(1.0 / 2.4)) * vec3(1.055) - vec3(0.055));            src.a =texture2D(srcTexForAlpha, textureCoordinate).w;            gl_FragColor = src;        } ",a.init=function(t){var a={};for(var r in t.m_parcer)a[r]=t.m_parcer[r];var n;if(n=e(a,t.m_key)){for(var o=0;o<n;++o)t.m_parcer.next();return t.log("start merged"),!1}return this.m_key=t.m_key,t.m_mode="CPM_SRGB",a=null,!0},a.gpu_process=function(e,t,a){try{var r=at(t);this.m_shader||(this.m_shader=new gt(null,this.s_fshCGEToneMapEnd,this.m_context.m_context));var n=nt(this.m_context.m_context,a,this.m_shader);if(!this.init(e))return;n.shader_texture("inputImageTexture",t.current()),n.shader_texture("srcTexForAlpha",t.get_src());var o,i,s={};this.cal_fac(s),o=s.key,i=s.key_base;var l={};if(l.key=o,l.key_base=i,n.shader.uniforms(l),n.draw_to(t.new_temporary()),this.m_context.m_context.getError())throw"CGEPTPTemplate::gpu_process";t.push_to_current(),r.destroy()}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{this.m_context.m_context.deleteTexture(this.m_curve_tex)}},a.m_context=t,a.destroy=function(){this.m_shader&&(this.m_shader.destroy(),this.m_shader=0)},a}return t}(),e}function ee(){var e={};return e.m_shader=0,e.s_fshFragDownProcTemplate="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate + sft * cd);    }    void main()    {        vec4 dst;%s        gl_FragColor = dst;    }",e.qunimaB="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate + sft * cd);    }    void main()    {        vec4 dst;        gl_FragColor = vec4(1.0);    }",e.gpu_process=function(e,t,a,r,n){var o=this.s_fshFragDownProcTemplate.replace(/%s/g,this.shader_procession());this.m_shader||(this.m_shader=new gt(null,o,this.m_context.m_context));var i=nt(this.m_context.m_context,null,this.m_shader,a,r,n);i.shader_texture("inputImageTexture",t);var s={};if(s.sft=[1/a,1/r],i.shader.uniforms(s),i.draw_to(e),this.m_context.m_context.getError())throw"cgeFragDownProcTemplate"},e.destroy=function(){this.m_shader&&(this.m_shader.destroy(),this.m_shader=0)},e}function te(e){var t=ee();return t.m_context=e,t.shader_procession=function(){return"dst = get_sample(vec2(0.0,0.0));"},t}function ae(){var e={};return e.m_m=[1,1,0,0],e}function re(e,t){var a={};return a=ae(),a.m_context=t,a.m_shader=0,a.m_linear=e,a.destroy=function(){this.m_shader&&(this.m_shader.destroy(),this.m_shader=0)},a.s_fshFragLinearResizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    void main()    {        gl_FragColor = texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw);    }",a.gpu_process=function(e,t,a,r,n){this.m_shader||(this.m_shader=new gt(null,this.s_fshFragLinearResizeProc,this.m_context.m_context));var o=nt(this.m_context.m_context,null,this.m_shader,a,r,n);o.shader_texture("inputImageTexture",t);var i={};if(i.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],o.shader.uniforms(i),o.draw_to(e),this.m_context.m_context.getError())throw"CGEPTPTemplate::gpu_process"},a}function ne(e){var t={};return t.m_shader=0,t.s_fshFragFilterProcTemplate="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate + sft * cd);    }    void main()    {        vec4 dst = vec4(0.0);    %s        gl_FragColor = dst;    }",t.destroy=function(){this.m_shader&&(this.m_shader.destroy(),this.m_shader=0)},t.gpu_process=function(t,a,r,n,o){if(!this.m_shader){for(var i="varying vec2 textureCoordinate;            uniform vec2 sft;",s=0;s<e;++s)i+="uniform sampler2D inputImageTexture"+(s+1).toString()+";                ";for(var s=0;s<e;++s)i+="vec4 get_sample"+(s+1).toString()+"(vec2 cd){                ",i+="return texture2D(inputImageTexture"+(s+1).toString()+", textureCoordinate + sft * cd);}                ";i+="void main(){ vec4 dst = vec4(0.0);            ",i+=this.shader_procession(),i+="gl_FragColor = dst;}",this.m_shader=new gt(null,i,this.m_context.m_context)}for(var l=nt(this.m_context.m_context,null,this.m_shader,r,n,o),s=0;s<e;++s)l.shader_texture("inputImageTexture"+(s+1).toString(),a[s]);var c={};if(c.sft=[1/r,1/n],l.shader.uniforms(c),l.draw_to(t),this.m_context.m_context.getError())throw"cgeFragDownProcTemplate"},t}function oe(e){var t=e,a=0,r=0,n={};return n.m_m=new Array(4),n.m_px=0,n.m_py=0,n.m_th=new Array(3),n.m_us_x=0,n.m_us_y=0,n.m_top=!1,n.s_fshFragTiltShiftUpProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D inputImageTextureUp;    uniform vec2 upsft;    uniform mat2 trans;    uniform vec2 pos;    uniform float th;    void main()    {        vec4 src;        vec2 ncodin = (textureCoordinate - pos) * trans;        if(dot(ncodin,ncodin) < th)        {            src = texture2D(inputImageTexture, textureCoordinate);        }        else        {            src = texture2D(inputImageTextureUp, textureCoordinate + upsft);        }        gl_FragColor = src;    }    ",n.s_fshFragTiltShiftUpTopProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D inputImageTexture1;    uniform sampler2D inputImageTexture2;    uniform sampler2D inputImageTextureUp;    uniform vec2 upsft;    uniform mat2 trans;    uniform vec2 pos;    uniform vec3 th;    void main()    {        vec4 src;        vec2 ncodin = (textureCoordinate - pos) * trans;        float dt = dot(ncodin,ncodin);        if(dt < th.z)        {            src = texture2D(inputImageTexture2, textureCoordinate);        }        else if(dt < th.y)        {            src = texture2D(inputImageTexture1, textureCoordinate);        }        else if(dt < th.x)        {            src = texture2D(inputImageTexture, textureCoordinate);        }        else        {            src = texture2D(inputImageTextureUp, textureCoordinate + upsft);        }        gl_FragColor = src;    }",n.gpu_process=function(e,n,o,i,s){var l={};this.m_top?(r||(r=new gt(null,this.s_fshFragTiltShiftUpTopProc,t.context())),l=nt(t.context(),null,r,o,i,s)):(a||(a=new gt(null,this.s_fshFragTiltShiftUpProc,t.context())),l=nt(t.context(),null,a,o,i,s)),l.shader_texture("inputImageTexture",n[0]),l.shader_texture("inputImageTextureUp",n[1]),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MIN_FILTER,t.context().LINEAR),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MAG_FILTER,t.context().LINEAR);var c={};this.m_top?(l.shader_texture("inputImageTexture1",n[2]),l.shader_texture("inputImageTexture2",n[3]),c.th=this.m_th):c.th=this.m_th[0],c.upsft=[this.m_us_x,this.m_us_y];var h={};if(h.trans=this.m_m,l.shader.uniformMat4(h),c.pos=[this.m_px,this.m_py],l.shader.uniforms(c),l.draw_to(e),t.context().bindTexture(t.context().TEXTURE_2D,n[1]),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MIN_FILTER,t.context().NEAREST),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MAG_FILTER,t.context().NEAREST),t.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},n.destroy=function(){a&&(a.destroy(),a=0),r&&(r.destroy(),r=0)},n}function ie(e){var t=e,a=0,r={};return r.m_m1=new Array(4),r.m_m2=new Array(4),r.m_trans=new Array(4),r.m_center=new Array(2),r.m_th=0,r.m_bsth=0,r.s_fshTiltShiftResizeProc="\tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D inputImageTextureS1;    uniform sampler2D inputImageTextureS2;    uniform vec4 m1;    uniform vec4 m2;    uniform mat2 trans;    uniform vec2 center;    uniform float th;    uniform float bsth;    void main()    {        vec4 src;        vec2 subtc = textureCoordinate;        vec2 ncodin = (subtc - center) * trans;        float p = sqrt(dot(ncodin,ncodin)) - th;        vec4 c1 = texture2D(inputImageTexture,textureCoordinate);        vec4 c2 = texture2D(inputImageTextureS1, subtc * m1.xy + m1.zw);        vec4 c3 = texture2D(inputImageTextureS2, subtc * m2.xy + m2.zw);        float fac = fract(max(log(max(p,bsth)) * -1.44269504,0.0));        fac = min((1.0 - fac),fac) * 2.0;        src = mix(c2,c3,vec4(clamp(fac * 2.0 - 0.5,0.0,1.0)));        src = mix(c1,src,clamp(p / bsth,0.0,1.0));        gl_FragColor = src;    }",r.s_fshFragTiltShiftUpTopProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D inputImageTexture1;    uniform sampler2D inputImageTexture2;    uniform sampler2D inputImageTextureUp;    uniform vec2 upsft;    uniform mat2 trans;    uniform vec2 pos;    uniform vec3 th;    void main()    {        vec4 src;        vec2 ncodin = (textureCoordinate - pos) * trans;        float dt = dot(ncodin,ncodin);        if(dt < th.z)        {            src = texture2D(inputImageTexture2, textureCoordinate);        }        else if(dt < th.y)        {            src = texture2D(inputImageTexture1, textureCoordinate);        }        else if(dt < th.x)        {            src = texture2D(inputImageTexture, textureCoordinate);        }        else        {            src = texture2D(inputImageTextureUp, textureCoordinate + upsft);        }        gl_FragColor = src;    }",r.gpu_process=function(e,r,n,o,i){var s={};a||(a=new gt(null,this.s_fshTiltShiftResizeProc,t.context())),s=nt(t.context(),null,a,n,o,i),s.shader_texture("inputImageTexture",r[0]),s.shader_texture("inputImageTextureS1",r[1]),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MIN_FILTER,t.context().LINEAR),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MAG_FILTER,t.context().LINEAR),s.shader_texture("inputImageTextureS2",r[2]),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MIN_FILTER,t.context().LINEAR),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MAG_FILTER,t.context().LINEAR);var l={};l.m1=this.m_m1,l.m2=this.m_m2,l.center=[this.m_center[0],this.m_center[1]],l.th=this.m_th,l.bsth=this.m_bsth;var c={};if(c.trans=this.m_trans,s.shader.uniformMat4(c),s.shader.uniforms(l),s.draw_to(e),t.context().bindTexture(t.context().TEXTURE_2D,r[1]),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MIN_FILTER,t.context().LINEAR),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MAG_FILTER,t.context().LINEAR),t.context().bindTexture(t.context().TEXTURE_2D,r[2]),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MIN_FILTER,t.context().NEAREST),t.context().texParameteri(t.context().TEXTURE_2D,t.context().TEXTURE_MAG_FILTER,t.context().NEAREST),t.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){a&&a.destroy()},r}function se(e){var t=ee();return t.m_context=e,t.shader_procession=function(){return"vec4 src = get_sample(vec2(-0.25,-0.25));        dst =  src * src * src;        src = get_sample(vec2( 0.25,-0.25));        dst += src * src * src;        src = get_sample(vec2(-0.25, 0.25));        dst += src * src * src;        src = get_sample(vec2( 0.25, 0.25));        dst += src * src * src;        dst = pow(dst * vec4(0.25),vec4(1.0 / 3.0));"},t}function le(e){var t=E();return t.m_context=e,t.shader_procession=function(){return"vec4 src = get_sample(vec2(-1.0,-1.0));        dst =  src * src * src;        src = get_sample(vec2( 0.0,-1.0));        dst += src * src * src;        src = get_sample(vec2(-1.0, 0.0));        dst += src * src * src;        src = get_sample(vec2( 0.0, 0.0));        dst += src * src * src;        dst = pow(dst * vec4(0.25),vec4(1.0 / 3.0));        "},t}function ce(e){var t=E();return t.m_context=e,t.shader_procession=function(){return"vec4 src = get_sample(vec2(-1.0, 0.0));        dst =  src * src * src;        src = get_sample(vec2( 1.0, 0.0));        dst += src * src * src;        dst = pow(dst * vec4(0.5),vec4(1.0 / 3.0));        "},t}function he(e){var t=E();return t.m_context=e,t.shader_procession=function(){return"vec4 src = get_sample(vec2(-2.0,-1.0));        dst =  src * src * src;        src = get_sample(vec2(-2.0, 1.0));        dst += src * src * src;        src = get_sample(vec2( 2.0,-1.0));        dst += src * src * src;        src = get_sample(vec2( 2.0, 1.0));        dst += src * src * src;        dst = pow(dst * vec4(0.25),vec4(1.0 / 3.0));        "},t}function de(e){var t=ne(2);return t.m_context=e,t.shader_procession=function(){return"vec4 src = get_sample1(vec2(-1.0,-2.0));        dst += src * src * src;        src = get_sample1(vec2( 0.0,-2.0));        dst += src * src * src;        src = get_sample1(vec2(-1.0, 1.0));        dst += src * src * src;        src = get_sample1(vec2( 0.0, 1.0));        dst += src * src * src;        dst *= vec4(0.25);        src = get_sample2(vec2(-1.0,0.0));        dst += src * src * src;        src = get_sample2(vec2( 1.0,0.0));        dst += src * src * src;        dst = pow(dst * vec4(1.0 / 3.0),vec4(1.0 / 3.0));        "},t}function ue(e){var t=ne(2);return t.m_context=e,t.shader_procession=function(){return"vec4 src = get_sample1(vec2(-3.0,-3.0));        dst += src * src * src;        src = get_sample1(vec2( 2.0,-3.0));        dst += src * src * src;        src = get_sample1(vec2(-3.0, 2.0));        dst += src * src * src;        src = get_sample1(vec2( 2.0, 2.0));        dst += src * src * src;        dst *= vec4(0.125);        src = get_sample2(vec2( 0.0,-3.0));        dst += src * src * src;        src = get_sample2(vec2(-2.0,-1.0));        dst += src * src * src;        src = get_sample2(vec2( 2.0,-1.0));        dst += src * src * src;        src = get_sample2(vec2(-2.0, 1.0));        dst += src * src * src;        src = get_sample2(vec2( 2.0, 1.0));        dst += src * src * src;        src = get_sample2(vec2( 0.0, 3.0));        dst += src * src * src;        dst = pow(dst * vec4(1.0 / 6.5),vec4(1.0 / 3.0));        "},t}function pe(e){var t=ne(3);return t.m_context=e,t.shader_procession=function(){return"vec4 src = get_sample1(vec2(-5.0,6.0));        dst = src * src * src;        src = get_sample1(vec2( 4.0,6.0));        dst += src * src * src;        src = get_sample1(vec2(-7.0,4.0));        dst += src * src * src;        src = get_sample1(vec2( 6.0,4.0));        dst += src * src * src;        src = get_sample1(vec2(-7.0,-5.0));        dst += src * src * src;        src = get_sample1(vec2( 6.0,-5.0));        dst += src * src * src;        src = get_sample1(vec2(-5.0,-7.0));        dst += src * src * src;        src = get_sample1(vec2( 4.0,-7.0));        dst += src * src * src;        dst *= vec4(0.125);        src = get_sample2(vec2( 2.0,7.0));        dst += src * src * src;        src = get_sample2(vec2(-2.0,7.0));        dst += src * src * src;        src = get_sample2(vec2( 4.0,5.0));        dst += src * src * src;        src = get_sample2(vec2( 0.0,5.0));        dst += src * src * src;        src = get_sample2(vec2(-4.0,5.0));        dst += src * src * src;        src = get_sample2(vec2( 4.0,-5.0));        dst += src * src * src;        src = get_sample2(vec2( 0.0,-5.0));        dst += src * src * src;        src = get_sample2(vec2(-4.0,-5.0));        dst += src * src * src;        src = get_sample2(vec2( 2.0,-7.0));        dst += src * src * src;        src = get_sample2(vec2(-2.0,-7.0));        dst += src * src * src;        dst *= vec4(0.25);        src = get_sample3(vec2(-4.0,2.0));        dst += src * src * src;        src = get_sample3(vec2( 4.0,2.0));        dst += src * src * src;        src = get_sample3(vec2(-4.0,-2.0));        dst += src * src * src;        src = get_sample3(vec2( 4.0,-2.0));        dst += src * src * src;        dst = pow(dst * vec4(1.0 / 6.75),vec4(1.0 / 3.0));        "},t}function me(){var e={};return e.name="tiltShift",e.create=function(){function e(e){function t(e,t,a,r){if(!(a<=0||t<=0)){var n,o,i,s;t>a?(n=r,o=(r-1)*a/t,(r-1)*a%t&&++o,++o,i=r-1,s=(r-1)*a/t):(n=(r-1)*t/a,o=r,(r-1)*t%a&&++n,++n,i=(r-1)*t/a,s=r-1),e.src_width=t,e.src_height=a,e.dst_width=n,e.dst_height=o,e.x_start=0,e.y_start=0,e.emb_width=i,e.emb_height=s}}function a(e){e[0]=-d,e[1]=h,e[2]=h,e[3]=d;var t=Math.max(b,_),a=.5*t*c/1.4,r=[1*u/a,0,0,1/a],n=[b,0,0,_];e[0]*=r[0]*n[0],e[1]*=r[0]*n[3],e[2]*=r[3]*n[0],e[3]*=r[3]*n[3];var o=1,i=1,s=1;switch(g){case 0:break;case 1:o=i=s=b;break;case 2:o=i=s=_;break;case 3:o=i=s=t;break;case 4:o=b,i=_,s=t}var l={};return l.px=o*m/b,l.py=i*f/_,l.th=s*p/a,l}function r(e,t,a,r,n,o,i){var s=r.dst_width/r.emb_width,l=r.dst_height/r.emb_height;e[0]*=s,e[1]*=l,e[2]*=s,e[3]*=l;var c={};return c.fac=Math.pow(.5,.5*(n+1)),c.px=t/s+o,c.py=a/l+i,c}function n(e,t,n){for(var o=0;o<e.m_images.length;++o){var i,s,l=I.m_m,c=(I.m_px,I.m_py,e.m_size[o]),h=.5/c.width,d=.5/c.height,u=a(l);i=u.th,u=r(l,u.px,u.py,e.m_factor,2*o+n,h,d),I.m_px=u.px,I.m_py=u.py,I.m_m=l,s=u.fac,I.m_th[0]=(i+1*s)*(i+1*s),I.m_th[1]=(i+.5*s)*(i+.5*s),I.m_th[2]=(i+.25*s)*(i+.25*s);var p=new Array(4);p[0]=e.m_images[o][3],p[2]=e.m_images[o][2],p[3]=e.m_images[o][1],o?(p[1]=e.m_images[o-1][0],I.m_us_x=h,I.m_us_y=d):(p[1]=p[1]=e.m_images[o][5],I.m_us_x=0,I.m_us_y=0),o==e.m_images.length-1?I.m_top=!0:I.m_top=!1,z.filter(I,e.m_images[o][0],p,c.width,c.height,t)}}function o(e,t,a){e.load_from(x,t,a),e.draw_downward(w,a),e.map1(E,1,0,a),e.map1(k,2,1,a);var r=new Array(3);r[0]=0,r[1]=2,e.mapN(D,3,r,2,a),e.r_end=1,e.map1(S,4,2,a),r[2]=4,e.mapN(R,5,r,3,a),e.r_end=e.m_images.length,e.r_start=e.m_images.length-1,r[1]=1,e.mapN(T,2,r,2,a),e.r_start=0}function i(){B[0]&&(B[0].destroy(),B[0]=0),B[1]&&(B[1].destroy(),B[1]=0)}function s(e){var t=["pixel","width","height","longEdge","relative",0],a=["vector","ellipse",0],r=["angleAng","angleRad","angleVec",0];switch(e.assume_symbol("aperture"),c=e.fetch_float(),e.lookup_symbol(r,!0)){case 0:var n=3.14159265*e.fetch_float()/180;h=Math.cos(n),d=Math.sin(n);break;case 1:var n=e.fetch_float();h=Math.cos(n),d=Math.sin(n);break;case 2:h=e.fetch_float(),d=e.fetch_float();var o=1/Math.sqrt(h*h+d*d);h*=o,d*=o;break;default:throw"CGETiltshiftParser::init"}if(e.assume_symbol("measuringScale"),g=e.lookup_symbol(t,!0),e.assume_symbol("center"),m=e.fetch_float(),f=e.fetch_float(),0==e.lookup_symbol(a,!0))p=e.fetch_float(),u=0;else{var i=e.fetch_float(),s=e.fetch_float();if(i<s)p=i,u=p/(s+1e-5);else{p=s,u=p/(i+1e-5);var l;l=h,h=d,d=l,h=-h}}}var l,c,h,d,u,p,m,f,g,v,b,_,y,x,C,w,E,k,S,T,D,R,I,N,P=[],B=[];B[0]=0,B[1]=0,b=0,_=0,y=e,P=[F(),F()],I=oe(y),N=ie(y),x=re(!0,y),C=re(!1,y),w=se(y),E=le(y),k=ce(y),S=he(y),T=de(y),D=ue(y),R=pe(y);var z={};return z=A(),z.destroy=function(){i(),I.destroy(),N.destroy(),x.destroy(),C.destroy(),w.destroy(),E.destroy(),k.destroy(),S.destroy(),T.destroy(),D.destroy(),R.destroy()},z.size_change=function(e,a){b==e&&_==a||(b=e,_=a,v="",t(P[0],b,_,256),t(P[1],b,_,362),i())},z.process=function(e,t,r,i,l,c,h){this.size_change(l,c),t[0]||(t[0]=M(y,P[0],1500),t[1]=M(y,P[1],1500),v=""),e.get_log()!=v&&(o(t[0],i,h),o(t[1],i,h),v=e.get_log()),s(e),n(t[0],h,0),n(t[1],h,1),N.m_m1[0]=P[0].emb_width/P[0].dst_width,N.m_m1[1]=P[0].emb_height/P[0].dst_height,N.m_m1[2]=.5/t[0].m_size[t[0].m_size.length-1].width,N.m_m1[3]=.5/t[0].m_size[t[0].m_size.length-1].height,N.m_m2[0]=P[1].emb_width/P[1].dst_width,N.m_m2[1]=P[1].emb_height/P[1].dst_height,N.m_m2[2]=.5/t[1].m_size[t[1].m_size.length-1].width,N.m_m2[3]=.5/t[1].m_size[t[1].m_size.length-1].height;var d=(new Array(4),a(N.m_trans));N.m_center[0]=d.px,N.m_center[1]=d.py,N.m_th=d.th,N.m_bsth=Math.pow(.5,.5*(t[0].m_images.length+t[1].m_images.length+6-1));var u=new Array(3);u[0]=i,u[1]=t[0].m_images[t[0].m_images.length-1][0],u[2]=t[1].m_images[t[1].m_images.length-1][0],this.filter(N,r,u,l,c,h)},z.gpu_process=function(e,t,a){try{l=at(t),this.process(e,B,t.new_temporary(),t.current(),a.m_width,a.m_height,a.m_frame_buffer),t.push_to_current(),l.destroy()}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{l.destroy()}},z}return e}(),e}function fe(){var e={};return e.name="painter",e.create=function(){function e(e){function t(){return{position:[],size:[]}}function a(e,t,a,r,n){var o=e.length;if(o<1||n<1)throw"Invalid Parameters";if(1==o)return t.push({x:e[0].x*r[0],y:e[0].y*r[1]}),void a.push({x:0,y:0});for(var i=1;i<o;++i)for(var s={x:(e[i].x-e[i-1].x)*r[0],y:(e[i].y-e[i-1].y)*r[1]},l=Math.floor(Math.max(Math.ceil(Math.sqrt(s.x*s.x+s.y*s.y))/n,1)),c={x:s.x/l,y:s.y/l},h={x:e[i-1].x*r[0],y:e[i-1].y*r[1]},d=0;d<l;++d)t.push({x:h.x+c.x*d,y:h.y+c.y*d})}function r(e,t,a,r,n,o){var i=t+e,s=t-e,l=r-a,c=r+a,h=o+n,d=o-n;return[2/s,0,0,0,0,2/l,0,0,0,0,-2/d,0,-i/s,-c/l,-h/d,1]}function n(e){for(var t=[],a=0;a<e.length;++a)t[2*a]=e[a].x,t[2*a+1]=e[a].y;return t}function o(e,a,r){p=null,l=1,c=.1,h=.05,d=.1,m=0;var n=["lucency","eraser","hardEraser","texture",0];m=e.lookup_symbol(n,!0);var o=["coordinate","realPixel",0];e.assume_symbol("opacity"),d=e.fetch_float(0,1),e.assume_symbol("pointSize"),s=e.test_symbol("relToWidth")?e.fetch_float()*a:e.fetch_float(),e.assume_symbol("pointStride"),u=e.test_symbol("relToWidth")?e.fetch_float()*a:e.fetch_float();if(e.lookup_symbol(o,!0))for(;e.test_symbol("point");){var i=e.fetch_float()/a,f=e.fetch_float()/r;b.push({x:i,y:f})}else for(;e.test_symbol("point");){var i=e.fetch_float(),f=e.fetch_float();b.push({x:i,y:f})}e.test_symbol("rectangle")&&(p=t(),p.position[0]=e.fetch_float(),p.position[1]=e.fetch_float(),p.size[0]=e.fetch_float(),p.size[1]=e.fetch_float())}var i,s,l,c,h,d,u,p=null,m=0,f=0,g=0,v=e,b=[],_=0,y=0,x="attribute vec4 vPosition;            attribute vec2 vPointNorm;            uniform mat4 uMat;            uniform float pointSize;            void main()            {                gl_PointSize = pointSize;                gl_Position = (uMat * vPosition);            }",C={};return C=A(),C.destroy=function(){_&&(_.destroy(),_=0),y&&(y.destroy(),y=0)},C.gpu_process=function(e,t,C){try{C.m_width==f&&C.m_height==g||(i=r(0,C.m_width,0,C.m_height,-1,1),f=C.m_width,g=C.m_height),o(e,C.m_width,C.m_height);var w=d,A=s;v.context().enable(v.context().BLEND),m?(v.context().blendEquation(v.context().FUNC_ADD),v.context().blendFuncSeparate(v.context().ONE,v.context().ONE,v.context().ONE,v.context().ONE_MINUS_SRC_ALPHA),w=2==m?10:1,A=s):(v.context().blendEquation(v.context().FUNC_ADD),v.context().blendFunc(v.context().ZERO,v.context().ONE_MINUS_SRC_COLOR),A=1.15*s);var E=at(t);_||(_=new gt(x,"uniform vec4 vColor;            void main()            {               \t\tvec2 pos = gl_PointCoord*2.0 - 1.0;               \t\tfloat dis =  sqrt(pos.x*pos.x + pos.y*pos.y);               \t\tfloat a=0.0;                    if(dis<0.2){                        float fac = dis/0.2;                        a = 0.64*(1.0-fac)+0.41*fac;                    }                    else if(dis<0.4){                         float fac = (dis-0.2) / 0.2;                         a = 0.41*(1.0-fac)+0.24*fac;                    }                    else if(dis<0.7){                         float fac = (dis-0.4) / 0.3;                         a = 0.24*(1.0-fac)+0.08*fac;                    }                    else if(dis<0.83){                         float fac = (dis-0.7) / 0.13;                         a = 0.08*(1.0-fac)+0.06*fac;                    }                    else if(dis<0.89){                         float fac = (dis-0.83) / 0.03;                         a = 0.06*(1.0-fac)+0.008*fac;                    }                    else if(dis<1.0){                         float fac = (dis-0.89) / 0.11;                         a = 0.008*(1.0-fac);                    }                gl_FragColor =vColor*vec4(0.0, 0.0, 0.0, a);            }",v.m_context)),y||(y=new gt(x,"uniform vec4 vColor;            void main()            {               \t\tvec2 pos = gl_PointCoord*2.0 - 1.0;               \t\tfloat dis =  sqrt(pos.x*pos.x + pos.y*pos.y);               \t\tfloat a=0.0;               \t\tif(dis<0.89){               \t\t    float fac = (dis) / 0.89;                       a = 0.9*(1.0-fac)+0.1*fac;               \t\t}               \t\telse if(dis<1.0){                        float fac = (dis - 0.89) / 0.11;                        a = 0.1*(1.0 - fac);                }                gl_FragColor =vColor*vec4(0.0, 0.0, 0.0, a);            }",v.m_context)),v.context().bindFramebuffer(v.context().FRAMEBUFFER,C.m_frame_buffer),v.context().framebufferTexture2D(v.context().FRAMEBUFFER,v.context().COLOR_ATTACHMENT0,v.context().TEXTURE_2D,t.current(),0);var F;F=m?y:_,v.context().useProgram(F.program);var k=[],M=[],S=[];if(S[0]=C.m_width,S[1]=C.m_height,a(b,k,M,S,u),0==k.length)return;b=[];var T=k.length;null==v.context().engineVertexBuffer&&(v.context().engineVertexBuffer=v.context().createBuffer()),v.context().bindBuffer(v.context().ARRAY_BUFFER,v.context().engineVertexBuffer),v.context().bufferData(v.context().ARRAY_BUFFER,new Float32Array(n(k)),v.context().STATIC_DRAW);var D=v.context().getAttribLocation(F.program,"vPosition");v.context().vertexAttribPointer(D,2,v.context().FLOAT,!1,0,new Float32Array(n(k))),v.context().enableVertexAttribArray(D);var R={};R.uMat=i,R.pointSize=A,R.vColor=[l,c,h,w],p?(R.trans=[C.m_width/p.size[0],C.m_height/p.size[1],-p.position[0]*(C.m_width/p.size[0]),-p.position[1]*(C.m_height/p.size[1])],v.context().viewport(p.position[0],p.position[1],p.size[0],p.size[1])):v.context().viewport(0,0,C.m_width,C.m_height),F.uniforms(R),v.context().drawArrays(v.context().POINTS,0,T),v.context().disable(v.context().BLEND)}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{E.destroy()}},C}return e}(),e}function ge(){var e={};return e.name="colorPainter",e.create=function(){function e(e){function t(e,t,a,r,n){var o=e.length;if(o<1||n<1)throw"Invalid Parameters";if(1==o)return t.push({x:e[0].x*r[0],y:e[0].y*r[1]}),void a.push({x:0,y:0});for(var i=1;i<o;++i)for(var s={x:(e[i].x-e[i-1].x)*r[0],y:(e[i].y-e[i-1].y)*r[1]},l=Math.floor(Math.max(Math.ceil(Math.sqrt(s.x*s.x+s.y*s.y))/n,1)),c={x:s.x/l,y:s.y/l},h={x:e[i-1].x*r[0],y:e[i-1].y*r[1]},d=0;d<l;++d)t.push({x:h.x+c.x*d,y:h.y+c.y*d})}function a(e,t,a,r,n,o){var i=t+e,s=t-e,l=r-a,c=r+a,h=o+n,d=o-n;return[2/s,0,0,0,0,2/l,0,0,0,0,-2/d,0,-i/s,-c/l,-h/d,1]}function r(e){for(var t=[],a=0;a<e.length;++a)t[2*a]=e[a].x,t[2*a+1]=e[a].y;return t}function n(e,t,a){s=1,l=.1,c=.05,h=.1;var r=["coordinate","realPixel",0];e.assume_symbol("pointSize"),i=e.test_symbol("relToWidth")?e.fetch_float()*t:e.fetch_float(),e.assume_symbol("pointStride"),d=e.test_symbol("relToWidth")?e.fetch_float()*t:e.fetch_float(),s=e.fetch_float(0,255),l=e.fetch_float(0,255),c=e.fetch_float(0,255);if(e.lookup_symbol(r,!0))for(;e.test_symbol("point");){var n=e.fetch_float()/t,o=e.fetch_float()/a;f.push({x:n,y:o})}else for(;e.test_symbol("point");){var n=e.fetch_float(),o=e.fetch_float();f.push({x:n,y:o})}}var o,i,s,l,c,h,d,u=0,p=0,m=e,f=[],g=0,v=0,b={};return b=A(),b.destroy=function(){g&&(g.destroy(),g=0),v&&(v.destroy(),v=0)},b.gpu_process=function(e,h,v){try{v.m_width==u&&v.m_height==p||(o=a(0,v.m_width,0,v.m_height,-1,1),u=v.m_width,p=v.m_height),n(e,v.m_width,v.m_height);var b=i;m.context().enable(m.context().BLEND),m.context().blendEquation(m.context().FUNC_ADD),m.context().blendFunc(m.context().ONE,m.context().ONE_MINUS_SRC_ALPHA);var _=at(h);g||(g=new gt("attribute vec4 vPosition;            attribute vec2 vPointNorm;            uniform mat4 uMat;            uniform float pointSize;            void main()            {                gl_PointSize = pointSize;                gl_Position = (uMat * vPosition);            }","uniform sampler2D brushTexture;            uniform vec4 vColor;            void main()            {                 vec2 coord = gl_PointCoord - vec2(0.5);                 float radius = coord.x*coord.x + coord.y*coord.y;                 radius = sqrt(radius);                 if(radius<0.5)gl_FragColor = vColor;                 else gl_FragColor = vec4(0.0);            }",m.m_context)),m.context().bindFramebuffer(m.context().FRAMEBUFFER,v.m_frame_buffer),m.context().framebufferTexture2D(m.context().FRAMEBUFFER,m.context().COLOR_ATTACHMENT0,m.context().TEXTURE_2D,h.current(),0),m.context().useProgram(g.program);var y=[],x=[],C=[];if(C[0]=v.m_width,C[1]=v.m_height,t(f,y,x,C,d),0==y.length)return;f=[];var w=y.length;null==m.context().engineVertexBuffer&&(m.context().engineVertexBuffer=m.context().createBuffer()),m.context().bindBuffer(m.context().ARRAY_BUFFER,m.context().engineVertexBuffer),m.context().bufferData(m.context().ARRAY_BUFFER,new Float32Array(r(y)),m.context().STATIC_DRAW);var A=m.context().getAttribLocation(g.program,"vPosition");m.context().vertexAttribPointer(A,2,m.context().FLOAT,!1,0,new Float32Array(r(y))),m.context().enableVertexAttribArray(A);var E={};E.uMat=o,E.pointSize=b,E.vColor=[s/255,l/255,c/255,1],m.context().viewport(0,0,v.m_width,v.m_height),g.uniforms(E),m.context().drawArrays(m.context().POINTS,0,w),m.context().disable(m.context().BLEND)}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{_.destroy()}},b}return e}(),e}function ve(){var e={};return e.name="magicPainter",e.create=function(){function e(e){function t(e,t){var a=F,r=(Math.random()+Math.random()+Math.random()+Math.random()+Math.random()+Math.random()-3)*a*.5,n=2*Math.PI*Math.random();y[2*t]=e[0]+r*Math.cos(n),y[2*t+1]=e[1]+r*Math.sin(n)}function a(e,t){var a=k,r=a*Math.random(),n=2*Math.PI*Math.random();y[2*t]=e[0]+r*Math.cos(n),y[2*t+1]=e[1]+r*Math.sin(n)}function r(e,r){if(Math.random()<=M){t(e,r);var n=(Math.random()+Math.random()+Math.random()+Math.random()+Math.random()+Math.random()-3)*p*.08333333+p;n=Math.min(Math.max(0,n),1),w[r]=n}else{a(e,r);var n=(Math.random()+Math.random()+Math.random()+Math.random()+Math.random()+Math.random()-3)*p*.08333333+p;n=Math.min(Math.max(0,n),1),w[r]=n}var o;o="noExist"==I?2*Math.PI*Math.random():I+(Math.random()+Math.random()+Math.random()+Math.random()+Math.random()+Math.random()-3)*Math.PI*.1666666+Math.PI,x[2*r]=Math.cos(o),x[2*r+1]=Math.sin(o),C[r]=s+s*(Math.random()-.5)*.6,E[r]=16*Math.random()}function n(e,t,a){var n=e.length;if(n<1||a<1)throw"Invalid Parameters";if(1==n)return y=new Float32Array(2),x=new Float32Array(2),C=new Float32Array(1),w=new Float32Array(1),E=new Float32Array(1),D=1,void r(e[0],0);for(var o=[],i=1;i<n;++i)for(var s={x:(e[i].x-e[i-1].x)*t[0],y:(e[i].y-e[i-1].y)*t[1]},l=Math.floor(Math.max(Math.ceil(Math.sqrt(s.x*s.x+s.y*s.y))/a,1)),c={x:s.x/l,y:s.y/l},h={x:e[i-1].x*t[0],y:e[i-1].y*t[1]},d=0;d<l;++d)o.push([h.x+c.x*d,h.y+c.y*d]);D=o.length,y=new Float32Array(2*D),x=new Float32Array(2*D),C=new Float32Array(D),w=new Float32Array(D),E=new Float32Array(D);for(var u=0;u<D;++u)r(o[u],u)}function o(e,t,a,r,n,o){var i=t+e,s=t-e,l=r-a,c=r+a,h=o+n,d=o-n;return[2/s,0,0,0,0,2/l,0,0,0,0,-2/d,0,-i/s,-c/l,-h/d,1]}function i(e,t,a){I="noExist",z=[],y=0,x=0,C=0,w=0,E=0,D=0,T=null,h=1,d=.1,u=.05,p=.1,R=0;var r=["add","opacity","texture",0];R=e.lookup_symbol(r,!0);var n=["coordinate","realPixel",0];e.assume_symbol("opacity"),p=e.fetch_float(0,1),e.assume_symbol("pointStride"),m=e.test_symbol("relToWidth")?e.fetch_float()*t:e.fetch_float();if(e.assume_symbol("texSize"),s=e.fetch_float(),e.assume_symbol("outsideRadius"),F=e.fetch_float(),e.assume_symbol("innerRadius"),k=e.fetch_float(),e.assume_symbol("numRatio"),M=e.fetch_float(),e.assume_symbol("file"),S=e.fetch_string(),e.test_symbol("angle")&&(I=e.fetch_float()),e.lookup_symbol(n,!0))for(;e.test_symbol("point");){var o=e.fetch_float()/t,i=e.fetch_float()/a;z.push({x:o,y:i})}else for(;e.test_symbol("point");){var o=e.fetch_float(),i=e.fetch_float();z.push({x:o,y:i})}}var s,l,c,h,d,u,p,m,f,g,v,b,_,y,x,C,w,E,F,k,M,S,T=null,D=0,R=0,I="noExist",N=0,P=0,B=e,z=[],U=0,G={};return G=A(),G.destroy=function(){U&&(U.destroy(),U=0)},G.gpu_process=function(e,t,a){try{var r=at(t);a.m_width==N&&a.m_height==P||(c=o(0,a.m_width,0,a.m_height,-1,1),N=a.m_width,P=a.m_height),i(e,a.m_width,a.m_height);var s=[];s[0]=a.m_width,s[1]=a.m_height;var h=B.context();n(z,s,m),h.enable(h.BLEND),R?h.blendFuncSeparate(h.ONE_MINUS_DST_ALPHA,h.ONE,h.ONE_MINUS_DST_ALPHA,h.ONE):h.blendFuncSeparate(h.SRC_ALPHA,h.ONE,h.ONE,h.ONE),U||(U=new gt("attribute vec4 vPosition;            attribute float pointSize;            attribute float attrOpacity;            attribute float attrTexNum;            attribute vec2 attrDirection;            varying float opacity;            varying float texNum;            varying vec2 direction;            uniform mat4 uMat;            void main()            {                gl_PointSize = pointSize;                gl_Position = (uMat * vPosition);                opacity = attrOpacity;                texNum = attrTexNum;                direction = attrDirection;            }","varying float opacity;                    varying float texNum;                    varying vec2 direction;                    uniform sampler2D star1;                    uniform float reOpacity;            void main()            {               \t\tvec4 dst;               \t\tfloat vn = floor(texNum / 4.0);                    float hn = floor(texNum - vn*4.0);                    vec2 coord = (gl_PointCoord - vec2(0.5));                    coord = vec2(coord.x*direction.x - coord.y*direction.y,                            coord.x*direction.y + coord.y*direction.x);                             coord = coord + vec2(0.5, 0.5);                                                  coord = coord / 4.0;                    coord.x = coord.x + vn*0.25;                    coord.y = coord.y + hn*0.25;                                        dst = texture2D(star1,coord);                                        dst.a = dst.a*opacity;                    if(reOpacity>1.0)                        dst.xyz = dst.xyz*vec3(dst.a);                                    gl_FragColor =dst;            }",B.m_context)),B.context().bindFramebuffer(B.context().FRAMEBUFFER,a.m_frame_buffer),B.context().framebufferTexture2D(B.context().FRAMEBUFFER,B.context().COLOR_ATTACHMENT0,B.context().TEXTURE_2D,t.current(),0),B.context().useProgram(U.program);var d,u,p,A,F;if(d=h.getAttribLocation(U.program,"vPosition"),h.enableVertexAttribArray(d),f||(f=h.createBuffer(h.ARRAY_BUFFER)),h.bindBuffer(h.ARRAY_BUFFER,f),h.vertexAttribPointer(d,2,h.FLOAT,!1,0,0),u=h.getAttribLocation(U.program,"pointSize"),h.enableVertexAttribArray(u),g||(g=h.createBuffer(h.ARRAY_BUFFER)),h.bindBuffer(h.ARRAY_BUFFER,g),h.vertexAttribPointer(u,1,h.FLOAT,!1,0,0),p=h.getAttribLocation(U.program,"attrOpacity"),h.enableVertexAttribArray(p),v||(v=h.createBuffer(h.ARRAY_BUFFER)),h.bindBuffer(h.ARRAY_BUFFER,v),h.vertexAttribPointer(p,1,h.FLOAT,!1,0,0),A=h.getAttribLocation(U.program,"attrTexNum"),h.enableVertexAttribArray(A),b||(b=h.createBuffer(h.ARRAY_BUFFER)),h.bindBuffer(h.ARRAY_BUFFER,b),h.vertexAttribPointer(A,1,h.FLOAT,!1,0,0),F=h.getAttribLocation(U.program,"attrDirection"),h.enableVertexAttribArray(F),_||(_=h.createBuffer(h.ARRAY_BUFFER)),h.bindBuffer(h.ARRAY_BUFFER,_),h.vertexAttribPointer(F,2,h.FLOAT,!1,0,0),h.bindBuffer(h.ARRAY_BUFFER,f),h.bufferData(h.ARRAY_BUFFER,y,h.STATIC_DRAW),h.bindBuffer(h.ARRAY_BUFFER,g),h.bufferData(h.ARRAY_BUFFER,C,h.STATIC_DRAW),h.bindBuffer(h.ARRAY_BUFFER,v),h.bufferData(h.ARRAY_BUFFER,w,h.STATIC_DRAW),h.bindBuffer(h.ARRAY_BUFFER,b),h.bufferData(h.ARRAY_BUFFER,E,h.STATIC_DRAW),h.bindBuffer(h.ARRAY_BUFFER,_),h.bufferData(h.ARRAY_BUFFER,x,h.STATIC_DRAW),!(l=B.get_resource_texture(S)))throw new error(S);var k={};k.star1=l.texture,U.textures(k);var M={};M.uMat=c,M.reOpacity=R?2:0,U.uniforms(M),B.context().viewport(0,0,a.m_width,a.m_height),B.context().drawArrays(B.context().POINTS,0,D),B.context().disable(B.context().BLEND)}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{r.destroy(),B.release_resource_texture(l)}},G}return e}(),e}function be(){var e={};return e.name="magicDust",e.create=function(){function e(e){function t(e,t,a,r,n,o,i,s,l){s.bindFramebuffer(s.FRAMEBUFFER,l),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0);for(var c=0;c<f;++c){e[2*c]=Math.random()*o[0],e[2*c+1]=Math.random()*o[1];var h=2*Math.PI*Math.random();t[2*c]=Math.cos(h),t[2*c+1]=Math.sin(h);var d=new Uint8Array(4);s.readPixels(e[2*c],e[2*c+1],1,1,s.RGBA,s.UNSIGNED_BYTE,d);var u=.299*d[0]+.587*d[1]+.114*d[2];a[c]=60*Math.random(),r[c]=u<10?0:u<80?2*(Math.random()+Math.random()+Math.random()+Math.random()+Math.random()+Math.random()-4.5):Math.random()+Math.random()-1+u/256*.5,r[c]=Math.min(1,r[c]),n[c]=.5}}function a(e,t,a,r,n,o){var i=t+e,s=t-e,l=r-a,c=r+a,h=o+n,d=o-n;return[2/s,0,0,0,0,2/l,0,0,0,0,-2/d,0,-i/s,-c/l,-h/d,1]}function r(e,t,a){f=e.fetch_float(),h=e.fetch_string(),d=e.fetch_string(),u=e.fetch_string()}var n,o,i,s,l,c,h=0,d=0,u=0,p=0,m=0,f=2e3,g=e,v=0,b={};return b=A(),b.destroy=function(){v&&(v.destroy(),v=0)},b.gpu_process=function(e,h,u){try{u.m_width==p&&u.m_height==m||(n=a(0,u.m_width,0,u.m_height,-1,1),p=u.m_width,m=u.m_height),r(e,u.m_width,u.m_height);var b=new Float32Array(2*f),_=new Float32Array(2*f),y=new Float32Array(f),x=new Float32Array(f),C=new Float32Array(f),w=[];w[0]=u.m_width,w[1]=u.m_height;var A=g.context();t(b,_,y,x,C,w,h.current(),A,u.m_frame_buffer),g.context().enable(g.context().BLEND),g.context().blendFunc(g.context().ONE,g.context().ONE);var E=at(h);v||(v=new gt("attribute vec4 vPosition;            attribute float pointSize;            attribute float attrOpacity;            attribute float attrTexNum;            attribute vec2 attrDirection;            varying float opacity;            varying float texNum;            varying vec2 direction;            uniform mat4 uMat;            void main()            {                gl_PointSize = pointSize;                gl_Position = (uMat * vPosition);                opacity = attrOpacity;                texNum = attrTexNum;                direction = attrDirection;            }","varying float opacity;                    varying float texNum;                    varying vec2 direction;                    uniform sampler2D star1;            void main()            {               \t\tvec4 dst;               \t\tvec2 coord = (gl_PointCoord - vec2(0.5));                    coord = vec2(coord.x*direction.x - coord.y*direction.y,                            coord.x*direction.y + coord.y*direction.x);                             coord = coord + vec2(0.5, 0.5);                    dst = texture2D(star1,coord);                    dst.xyz = dst.xyz*vec3(opacity);                                    gl_FragColor =dst;            }",g.m_context)),g.context().bindFramebuffer(g.context().FRAMEBUFFER,u.m_frame_buffer),g.context().framebufferTexture2D(g.context().FRAMEBUFFER,g.context().COLOR_ATTACHMENT0,g.context().TEXTURE_2D,h.new_temporary(),0),g.context().useProgram(v.program);var F,k,M,S,T;F=A.getAttribLocation(v.program,"vPosition"),A.enableVertexAttribArray(F),o=A.createBuffer(A.ARRAY_BUFFER),A.bindBuffer(A.ARRAY_BUFFER,o),A.vertexAttribPointer(F,2,A.FLOAT,!1,0,0),k=A.getAttribLocation(v.program,"pointSize"),A.enableVertexAttribArray(k),i=A.createBuffer(A.ARRAY_BUFFER),A.bindBuffer(A.ARRAY_BUFFER,i),A.vertexAttribPointer(k,1,A.FLOAT,!1,0,0),M=A.getAttribLocation(v.program,"attrOpacity"),A.enableVertexAttribArray(M),s=A.createBuffer(A.ARRAY_BUFFER),A.bindBuffer(A.ARRAY_BUFFER,s),A.vertexAttribPointer(M,1,A.FLOAT,!1,0,0),S=A.getAttribLocation(v.program,"attrTexNum"),A.enableVertexAttribArray(S),l=A.createBuffer(A.ARRAY_BUFFER),A.bindBuffer(A.ARRAY_BUFFER,l),A.vertexAttribPointer(S,1,A.FLOAT,!1,0,0),T=A.getAttribLocation(v.program,"attrDirection"),A.enableVertexAttribArray(T),c=A.createBuffer(A.ARRAY_BUFFER),A.bindBuffer(A.ARRAY_BUFFER,c),A.vertexAttribPointer(T,2,A.FLOAT,!1,0,0),A.bindBuffer(A.ARRAY_BUFFER,o),A.bufferData(A.ARRAY_BUFFER,b,A.STATIC_DRAW),A.bindBuffer(A.ARRAY_BUFFER,i),A.bufferData(A.ARRAY_BUFFER,y,A.STATIC_DRAW),A.bindBuffer(A.ARRAY_BUFFER,s),A.bufferData(A.ARRAY_BUFFER,x,A.STATIC_DRAW),A.bindBuffer(A.ARRAY_BUFFER,l),A.bufferData(A.ARRAY_BUFFER,C,A.STATIC_DRAW),A.bindBuffer(A.ARRAY_BUFFER,c),A.bufferData(A.ARRAY_BUFFER,_,A.STATIC_DRAW);var D=g.get_resource_texture(d);if(!D)throw new error(d);var R={};R.star1=D.texture,v.textures(R);var I={};I.uMat=n,v.uniforms(I),g.context().viewport(0,0,u.m_width,u.m_height),g.context().drawArrays(g.context().POINTS,0,f),g.context().disable(g.context().BLEND),h.push_to_current()}catch(e){throw"CGEPTPTemplete::gpu_process"}finally{E.destroy()}},b}return e}(),e}function _e(e){var t=ae();return t.m_context=e,t.m_shader=0,t.s_fshFragToneEnhanceHistProc="varying vec2 textureCoordinate;            uniform sampler2D inputImageTexture;            uniform vec4 m;            void main()            {                vec2 cod = textureCoordinate * m.xy + m.zw;                cod = max(cod,-cod);                cod = min(cod,vec2(2.0)-cod);                vec4 src = texture2D(inputImageTexture, cod);                vec4 hst = vec4(src.w);                hst = (hst - vec4(-0.25,0.0,0.5,0.75)) * vec4(8.0);                hst = min(max(hst,0.0),4.0);                hst = abs( hst - vec4(2.0));                hst = hst - vec4(1.0);                hst = hst * (hst * hst - vec4(3.0))* vec4(0.25) + vec4(0.5);                gl_FragColor = hst;            }",t.gpu_process=function(e,t,a,r,n){this.m_shader||(this.m_shader=new gt(null,this.s_fshFragToneEnhanceHistProc,this.m_context.m_context));var o=nt(this.m_context.m_context,null,this.m_shader,a,r,n);o.shader_texture("inputImageTexture",t);var i={};if(i.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],o.shader.uniforms(i),o.draw_to(e),this.m_context.m_context.getError())throw"CGEPTPTemplate::gpu_process"},t.destroy=function(){this.m_shader&&(this.m_shader.destroy(),this.m_shader=0)},t}function ye(e){var t=0,a={m_m:new Array(4),m_al:0,a_au:0,m_bl:0,m_bu:0};return a.destroy=function(){t&&t.destroy(),t=0},a.m_context=e,a.s_fshToneEnhanceResizeProc="\t\tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D hisImageTexture;    uniform vec4 m;    uniform float al;    uniform float au;    uniform float bl;    uniform float bu;    void main()    {        vec4 hst = texture2D(hisImageTexture,textureCoordinate * m.xy + m.zw);        vec3 h = vec3((hst.x + hst.y/2.0),(1.0 + hst.x + hst.y - hst.z - hst.w)/2.0,(1.0 - hst.z/2.0 - hst.w));        vec3 ha = h - vec3(0.25,0.5,0.75);        float a = dot(ha , vec3(288.0/77.0,256.0/77.0,96.0/77.0));        a = max (al,min(au,a));        vec3 hb = h - vec3(0.25,0.5,0.75) - vec3(a) * vec3(9.0/64.0,1.0/8.0,3.0/64.0);        float b = dot(hb , vec3(-96.0/77.0,-256.0/77.0,-288.0/77.0));        b = max(bl,min(bu,b));        vec3 f = vec3(1.0,-2.0,1.0) * vec3(a) + vec3(1.0,-1.0,0.0) * vec3(b);        vec4 src = texture2D(inputImageTexture,textureCoordinate);        float v = src.w + (- 0.5 + src.z)*(1.0 / 255.0);        v = ((f.x * v + f.y) * v + (f.z + 1.0)) * v;        v = clamp(v,0.0,1.0);        src.w = v;        gl_FragColor = src;    }",a.gpu_process=function(e,a,r,n,o){t||(t=new gt(null,this.s_fshToneEnhanceResizeProc,this.m_context.m_context));var i=nt(this.m_context.m_context,null,t,r,n,o);i.shader_texture("inputImageTexture",a[0]),i.shader_texture("hisImageTexture",a[1]);var s={};if(s.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],s.al=this.m_al,s.au=this.m_au,s.bl=this.m_bl,s.bu=this.m_bu,i.shader.uniforms(s),i.draw_to(e),this.m_context.m_context.getError())throw"CGEPTPTemplate::gpu_process"},a}function xe(e){var t=0,a=0,r={m_fac:0};return r.destroy=function(){a&&(a.destroy(),a=0),t&&(t.destroy(),t=0)},r.m_context=e,r.s_fshFragToneEnhanceUpProc="\tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D subImageTexture;    uniform float fac;    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        vec4 sub = texture2D(subImageTexture,textureCoordinate);        vec4 dst = src* vec4(fac) + vec4(1.0 - fac) * sub;        gl_FragColor = dst;    }",r.gpu_process=function(e,t,r,n,o){a||(a=new gt(null,this.s_fshFragToneEnhanceUpProc,this.m_context.m_context));var i=nt(this.m_context.m_context,null,a,r,n,o);i.shader_texture("inputImageTexture",t[0]),i.shader_texture("subImageTexture",t[1]);var s={};if(s.fac=this.m_fac,i.shader.uniforms(s),i.draw_to(e),this.m_context.m_context.getError())throw"CGEPTPTemplate::gpu_process"},r}function Ce(){var e={};return e.name="toneEnhance",e.create=function(){function e(e,t,a){a<=0||t<=0||(e.src_width=t,e.src_height=a,e.dst_width=1,e.dst_height=1,t>a?(e.emb_width=1,e.x_start=0,e.emb_height=1/t*a,e.y_start=.5*(1-e.emb_height)):(e.emb_height=1,e.y_start=0,e.emb_width=1/a*t,e.x_start=.5*(1-e.emb_width)))}function t(t){var a=A();return a.m_context=t,a.m_pyramid_gpu=0,a.m_width=0,a.m_height=0,a.m_last_src="",a.m_factor=F(),a.m_up_resize_filter=ye(t),a.m_up_filter=xe(t),a.m_hst_filter=_e(t),a.m_down_filter=te(t),a.m_resize_filter=re(!0,t),a.destroy=function(){this.clear(),this.m_up_resize_filter.destroy(),this.m_up_filter.destroy(),this.m_hst_filter.destroy(),this.m_down_filter.destroy(),this.m_resize_filter.destroy()},a.clear=function(){this.m_pyramid_gpu&&(this.m_pyramid_gpu.destroy(),this.m_pyramid_gpu=0)},a.size_change=function(t,a){this.m_width==t&&this.m_height==a||(this.m_width=t,this.m_height=a,this.m_last_src="",e(this.m_factor,this.m_width,this.m_height),this.clear())},a.init=function(e){if(e.assume_symbol("dark"),this.m_dark_low=e.fetch_float(-1,3),this.m_dark_up=e.fetch_float(-1,3),this.m_dark_low>this.m_dark_up)throw"dark1 must less than dark2";if(e.assume_symbol("light"),this.m_light_low=e.fetch_float(-1,3),this.m_light_up=e.fetch_float(-1,3),this.m_light_low>this.m_light_up)throw"light1 must less than light2";this.m_blur_level=1,this.m_blur_factor=3.5,e.test_symbol("blurFactor")&&(this.m_blur_level+=6*e.fetch_float(0,1),this.m_blur_factor*=Math.pow(1/16,e.fetch_float(0,1)))},a.draw_up_textures=function(e,t){e.map_create(1);for(var a=new Array(e.m_images.length),r=0,n=0;n<a.length;++n){var o=(n-this.m_blur_level)/this.m_blur_factor,i=Math.exp(-o*o);a[n]=i/(r+i),r+=i}for(var n=1;n<e.m_images.length;++n){this.m_up_filter.m_fac=a[n];var s=1;1==n&&(s=0);var l=[e.m_images[n][0],e.m_images[n-1][s]];this.filter(this.m_up_filter,e.m_images[n][1],l,e.m_size[n].width,e.m_size[n].height,t)}},a.draw_temp_textures=function(e,t,a){e.load_from(this.m_hst_filter,t,a),e.draw_downward(this.m_down_filter,a)},a.process=function(e,t,a,r,n,o,i){e.get_log()!=this.m_last_src&&(this.draw_temp_textures(t,r,i),this.m_last_src=e.get_log()),this.init(e),this.draw_up_textures(t,i),this.m_factor.get_rev_trans(this.m_up_resize_filter.m_m),this.m_up_resize_filter.m_al=this.m_dark_low,this.m_up_resize_filter.m_au=this.m_dark_up,this.m_up_resize_filter.m_bl=this.m_light_low,this.m_up_resize_filter.m_bu=this.m_light_up;var s=new Array(3);s[0]=r,s[1]=t.m_images[t.m_images.length-1][1],this.filter(this.m_up_resize_filter,a,s,n,o,i)},a.gpu_process=function(e,t,a){try{at(t);this.size_change(a.m_width,a.m_height),this.m_pyramid_gpu||(this.m_pyramid_gpu=M(this.m_context.context(),this.m_factor,1025,!0),this.m_last_src=0),this.process(e,this.m_pyramid_gpu,t.new_temporary(),t.current(),a.m_width,a.m_height,a.m_frame_buffer),t.push_to_current()}catch(e){throw"CGEPTPTemplete::gpu_process"}},a}return t}(),e}function we(e){var t=e,a=0,r={};return r.m_factor=0,r.s_fshFragImageMattingDownsize32Proc="  varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-1.0 / 4.0, -1.0 / 4.0));        src += get_sample(vec2(1.0 / 4.0, -1.0 / 4.0));        src += get_sample(vec2(-1.0 / 4.0, 1.0 / 4.0));        src += get_sample(vec2(1.0 / 4.0, 1.0 / 4.0));        src *= vec4((255.0 / (256.0*65536.0)), (255.0 / (256.0*256.0)), (255.0 / 256.0), 255.0) * 0.25;        float dlum = (src.x + src.y + src.z + src.w)*65536.0;        float lum8 = dlum - floor(dlum);        dlum = dlum / 256.0;        float lum8_16 = dlum - floor(dlum);        dlum = dlum / 256.0;        float lum24_32 = floor(dlum);        float lum16_24 = dlum - lum24_32;        src.x = lum8*(256.0 / 255.0);        src.y = lum8_16*(256.0 / 255.0);        src.z = lum16_24*(256.0 / 255.0);        src.w = lum24_32 / 255.0;        gl_FragColor = src;    }    ",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragImageMattingDownsize32Proc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);t.m_context.bindTexture(t.m_context.TEXTURE_2D,r),t.m_context.texParameteri(t.m_context.TEXTURE_2D,t.m_context.TEXTURE_MIN_FILTER,t.m_context.NEAREST),t.m_context.texParameteri(t.m_context.TEXTURE_2D,t.m_context.TEXTURE_MAG_FILTER,t.m_context.NEAREST),s.shader_texture("inputImageTexture",r);var l={};if(l.sft=[1/n,1/o],s.shader.uniforms(l),s.draw_to(e),t.m_context.bindTexture(t.m_context.TEXTURE_2D,r),t.m_context.texParameteri(t.m_context.TEXTURE_2D,t.m_context.TEXTURE_MIN_FILTER,t.m_context.LINEAR),t.m_context.texParameteri(t.m_context.TEXTURE_2D,t.m_context.TEXTURE_MAG_FILTER,t.m_context.LINEAR),t.m_context.getError())throw"createFragNewStructureSharpenUpProc::gpu_process"},r.destroy=function(){a&&a.destroy(),a=0},r}function Ae(e){var t=e,a=0,r={};return r.m_m=[],r.s_fshFragImageMattingPaintingDownsizeProc="  varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(-3.0 / 8.0, 3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, 3.0 / 8.0));        src *= vec4(0.25);        vec2 dlum = vec2(src.r, max(src.r, src.g))*256.0;        dlum = clamp(dlum, 0.0, 255.996);        vec2 fdlum = floor(dlum);        src.x = (dlum.x - fdlum.x)*(256.0 / 255.0);        src.y = fdlum.x / 255.0;        src.z = (dlum.y - fdlum.y)*(256.0 / 255.0);        src.w = fdlum.y / 255.0;        gl_FragColor = src;    }",r.gpu_process=function(e,r,n,o,i,s){a||(a=new gt(null,this.s_fshFragImageMattingPaintingDownsizeProc,t.m_context));var l=nt(t.m_context,null,a,n,o,i);l.shader_texture("inputImageTexture",r[0]);var c={};if(c.m=this.m_m,c.sft=[1/n,1/o],l.shader.uniforms(c),l.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingPaintingDownSizeProc::gpu_process"},r.destroy=function(){a&&a.destroy(),a=0},r}function Ee(e){var t=e,a=0,r={};return r.m_m=[],r.s_fshFragNewStructureSharpenFator="  \tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(-3.0 / 8.0, 3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, 3.0 / 8.0));        src *= vec4(0.25);        float dlum = clamp(src.r*65536.0*256.0, 0.0, (65536.0 * 65536.0 - 1.0) / (256.0));        float lum8 = dlum - floor(dlum);        dlum = clamp(src.r*65536.0, 0.0, (65536.0*256.0 - 1.0) / (256.0));        float lum8_16 = dlum - floor(dlum);        dlum = clamp(src.r*256.0, 0.0, (65536.0 - 1.0) / (256.0));        float dlum24_32 = floor(dlum);        float dlum16_24 = dlum - dlum24_32;        src.x = lum8*(256.0 / 255.0);        src.y = lum8_16*(256.0 / 255.0);        src.z = dlum16_24*(256.0 / 255.0);        src.w = dlum24_32 / 255.0;        gl_FragColor = src;    }    ",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragNewStructureSharpenFator,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r[0]);var l={};if(l.m=this.m_m,l.sft=[1/n,1/o],s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingPaintingDownSize1_0Proc::gpu_process"},r.destroy=function(){a&&a.destroy(),a=0},r}function Fe(e){var t=e,a=0,r=ae();return r.s_fshFragImageMattingPainting1_1DownsizeProc="  varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(-3.0 / 8.0, 3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, 3.0 / 8.0));        src *= vec4(0.25);        float dlum = clamp(max(src.r,src.g)*65536.0*256.0, 0.0, (65536.0 * 65536.0 - 1.0) / (256.0));        float lum8 = dlum - floor(dlum);        dlum = clamp(max(src.r, src.g)*65536.0, 0.0, (65536.0*256.0 - 1.0) / (256.0));        float lum8_16 = dlum - floor(dlum);        dlum = clamp(max(src.r, src.g)*256.0, 0.0, (65536.0 - 1.0) / (256.0));        float dlum24_32 = floor(dlum);        float lum16_24 = dlum - dlum24_32;        src.x = lum8*(256.0 / 255.0);        src.y = lum8_16*(256.0 / 255.0);        src.z = lum16_24*(256.0 / 255.0);        src.w = dlum24_32 / 255.0;        gl_FragColor = src;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragImageMattingPainting1_1DownsizeProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r[0]);var l={};if(l.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],l.sft=[1/n,1/o],s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingPainting1_1DownSizeProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function ke(e){var t=e,a=0,r=ae();return r.m_m=[],r.s_fshFragImageMattingDownsizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec4 m;    uniform vec2 sft;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, -3.0 / 8.0));        src += get_sample(vec2(-3.0 / 8.0, 3.0 / 8.0));        src += get_sample(vec2(3.0 / 8.0, 3.0 / 8.0));        src = src*vec4(0.25);        gl_FragColor = src;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragImageMattingDownsizeProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r[0]);var l={};if(l.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],l.sft=[1/n,1/o],s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingDownSizeProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function Me(e){var t=e,a=[0,0],r=ae();r.m_filter_num=0,r.m_esp=0;var n=["    varying vec2 textureCoordinate;    uniform sampler2D painted1_0Texture;    uniform sampler2D painted1_1Texture;    uniform sampler2D srcTexture;    uniform vec2 sft;    uniform float esp;    vec4 get_sample(vec2 cd)    {        return texture2D(srcTexture, textureCoordinate + sft * cd);    }    float get_painted_sample(vec2 cd)    {        vec4 p1_0Src = texture2D(painted1_0Texture, textureCoordinate + sft * cd)*vec4((255.0 / (256.0*65536.0)), (255.0 / 65536.0), (255.0 / 256.0), 255.0);        vec4 p1_1Src = texture2D(painted1_1Texture, textureCoordinate + sft * cd)*vec4((255.0 / (256.0*65536.0)), (255.0 / 65536.0), (255.0 / 256.0), 255.0);        float p1_0 = (p1_0Src.x + p1_0Src.y + p1_0Src.z + p1_0Src.w);        float p1_1 = (p1_1Src.x + p1_1Src.y + p1_1Src.z + p1_1Src.w);        if (p1_1 <= 0.0) return 0.5;        return p1_0 / p1_1;    }    void main()    {        float res1 = get_painted_sample(vec2(-1.0, -1.0));        float res = res1;        float res2 = get_painted_sample(vec2(0.0, -1.0));        res += res2;        float res3 = get_painted_sample(vec2(1.0, -1.0));        res += res3;                float res4 = get_painted_sample(vec2(-1.0, 0.0));        res += res4;        float res5 = get_painted_sample(vec2(0.0, 0.0));        res += res5;        float res6 = get_painted_sample(vec2(1.0, 0.0));        res += res6;                float res7 = get_painted_sample(vec2(-1.0, 1.0));        res += res7;        float res8 = get_painted_sample(vec2(0.0, 1.0));        res += res8;        float res9 = get_painted_sample(vec2(1.0, 1.0));        res += res9;                res *=1.0 / 9.0;        float stp = res;                vec4 src1 = get_sample(vec2(-1.0, -1.0));        vec4 src2 = get_sample(vec2(0.0, -1.0));        vec4 src3 = get_sample(vec2(1.0, -1.0));                vec4 src4 = get_sample(vec2(-1.0, 0.0));        vec4 src5 = get_sample(vec2(0.0, 0.0));        vec4 src6 = get_sample(vec2(1.0, 0.0));                vec4 src7 = get_sample(vec2(-1.0, 1.0));        vec4 src8 = get_sample(vec2(0.0, 1.0));        vec4 src9 = get_sample(vec2(1.0, 1.0));                vec4 tsrc = src1 + src2 + src3 + src4 + src5 + src6 + src7 + src8 + src9;        tsrc *= vec4(1.0 / 9.0);        float tr = tsrc.r;        float tg = tsrc.g;        float tb = tsrc.b;        float trg = src1.r*src1.g + src2.r*src2.g + src3.r*src3.g + src4.r*src4.g + src5.r*src5.g + src6.r*src6.g + src7.r*src7.g + src8.r*src8.g + src9.r*src9.g;        trg *= (1.0 / 9.0);        float trb = src1.r*src1.b + src2.r*src2.b + src3.r*src3.b + src4.r*src4.b + src5.r*src5.b + src6.r*src6.b + src7.r*src7.b + src8.r*src8.b + src9.r*src9.b;        trb *= (1.0 / 9.0);        float tgb = src1.g*src1.b + src2.g*src2.b + src3.g*src3.b + src4.g*src4.b + src5.g*src5.b + src6.g*src6.b + src7.g*src7.b + src8.g*src8.b + src9.g*src9.b;        tgb *= (1.0 / 9.0);        vec4 tsrc2 = src1* src1 + src2* src2 + src3* src3 + src4* src4 + src5*src5 + src6*src6 + src7*src7 + src8*src8 + src9*src9;        tsrc2 *= vec4(1.0 / 9.0);        float tr2 = tsrc2.x;        float tg2 = tsrc2.y;        float tb2 = tsrc2.z;        vec4 tpsrc = src1*res1 + src2*res2 + src3*res3 + src4*res4+  src5*res5 + src6*res6 + src7*res7 + src8*res8 + src9*res9;        tpsrc *= vec4(1.0 / 9.0);        float tpr = tpsrc.x;        float tpg = tpsrc.y;        float tpb = tpsrc.z;        float brg = (trg  - tr * tg);        float brb = (trb  - tr * tb);        float bgb = (tgb  - tg * tb);        float br2 = tr2 - tr * tr + esp;        float bg2 = tg2 - tg * tg + esp;        float bb2 = tb2 - tb * tb + esp;        float ur = (tpr - stp * tr);        float ug = (tpg - stp * tg);        float ub = (tpb - stp * tb);        float bs = br2*bgb*bgb + bg2*brb*brb + bb2*brg*brg - 2.0 * bgb*brb*brg - bb2*bg2*br2;        float ar = (bgb*bgb - bb2*bg2)*ur + (bb2*brg - bgb*brb)*ug + (bg2*brb - bgb*brg)*ub;        float ag = (bb2*brg - bgb*brb)*ur + (brb*brb - bb2*br2)*ug + (bgb*br2 - brb*brg)*ub;        float ab = (bg2*brb - bgb*brg)*ur + (bgb*br2 - brb*brg)*ug + (brg*brg - bg2*br2)*ub;        bs = 1.0 / bs;        ar *= bs;        ag *= bs;        ab *= bs;        vec2 arag = vec2((ar + 64.0)*2.0, (ag + 64.0)*2.0);        arag = clamp(arag, 0.0, 255.996);        vec2 farag = floor(arag);        vec4 dst;        dst.xz = arag - farag;        dst.yw = farag;        dst *= vec4((256.0 / 255.0), 1.0 / 255.0, (256.0 / 255.0), 1.0 / 255.0);           if (dst.x > (513.0 / 512.0))            {                dst.x = 0.0;                dst.y += (1.0 / 255.0);            }            if (dst.z > (513.0 / 512.0))            {                dst.z = 0.0;                dst.w += (1.0 / 255.0);            }        gl_FragColor = dst;    }        ","    varying vec2 textureCoordinate;    uniform sampler2D painted1_0Texture;    uniform sampler2D painted1_1Texture;    uniform sampler2D srcTexture;    uniform vec2 sft;    uniform float esp;    vec4 get_sample(vec2 cd)    {        return texture2D(srcTexture, textureCoordinate + sft * cd);    }    float get_painted_sample(vec2 cd)    {        vec4 p1_0Src = texture2D(painted1_0Texture, textureCoordinate + sft * cd)*vec4((255.0 / (256.0*65536.0)), (255.0 / 65536.0), (255.0 / 256.0), 255.0);        vec4 p1_1Src = texture2D(painted1_1Texture, textureCoordinate + sft * cd)*vec4((255.0 / (256.0*65536.0)), (255.0 / 65536.0), (255.0 / 256.0), 255.0);        float p1_0 = (p1_0Src.x + p1_0Src.y + p1_0Src.z + p1_0Src.w);        float p1_1 = (p1_1Src.x + p1_1Src.y + p1_1Src.z + p1_1Src.w);        if (p1_1 <= 0.0) return 0.5;        if (p1_0 <= 0.0) return 0.0;        return p1_0 / p1_1;    }    void main()    {        float res1 = get_painted_sample(vec2(-1.0, -1.0));        float res = res1;        float res2 = get_painted_sample(vec2(0.0, -1.0));        res += res2;        float res3 = get_painted_sample(vec2(1.0, -1.0));        res += res3;                float res4 = get_painted_sample(vec2(-1.0, 0.0));        res += res4;        float res5 = get_painted_sample(vec2(0.0, 0.0));        res += res5;        float res6 = get_painted_sample(vec2(1.0, 0.0));        res += res6;                float res7 = get_painted_sample(vec2(-1.0, 1.0));        res += res7;        float res8 = get_painted_sample(vec2(0.0, 1.0));        res += res8;        float res9 = get_painted_sample(vec2(1.0, 1.0));        res += res9;             res *= 1.0 / 9.0;        float stp = res;            vec4 src1 = get_sample(vec2(-1.0, -1.0));        vec4 src2 = get_sample(vec2(0.0, -1.0));        vec4 src3 = get_sample(vec2(1.0, -1.0));                vec4 src4 = get_sample(vec2(-1.0, 0.0));        vec4 src5 = get_sample(vec2(0.0, 0.0));        vec4 src6 = get_sample(vec2(1.0, 0.0));        vec4 src7 = get_sample(vec2(-1.0, 1.0));        vec4 src8 = get_sample(vec2(0.0, 1.0));        vec4 src9 = get_sample(vec2(1.0, 1.0));        vec4 tsrc = src1 + src2 + src3 + src4 + src5 + src6 + src7 + src8 + src9;        tsrc *= vec4(1.0 / 9.0);        float tr = tsrc.r;        float tg = tsrc.g;        float tb = tsrc.b;        float trg = src1.r*src1.g + src2.r*src2.g + src3.r*src3.g + src4.r*src4.g + src5.r*src5.g + src6.r*src6.g + src7.r*src7.g + src8.r*src8.g + src9.r*src9.g;        trg *= 1.0 / 9.0;        float trb = src1.r*src1.b + src2.r*src2.b + src3.r*src3.b + src4.r*src4.b + src5.r*src5.b + src6.r*src6.b + src7.r*src7.b + src8.r*src8.b + src9.r*src9.b;        trb *= 1.0 / 9.0;        float tgb = src1.g*src1.b + src2.g*src2.b + src3.g*src3.b + src4.g*src4.b + src5.g*src5.b + src6.g*src6.b + src7.g*src7.b + src8.g*src8.b + src9.g*src9.b;        tgb *= 1.0 / 9.0;        vec4 tsrc2 = src1* src1 + src2* src2 + src3* src3 + src4* src4 + src5*src5 + src6*src6 + src7*src7 + src8*src8 + src9*src9;        tsrc2 *= vec4(1.0 / 9.0);        float tr2 = tsrc2.x;        float tg2 = tsrc2.y;        float tb2 = tsrc2.z;        vec4 tpsrc = src1*res1 + src2*res2 + src3*res3 + src4*res4 + src5*res5 + src6*res6 + src7*res7 + src8*res8 + src9*res9;        tpsrc *= vec4(1.0 / 9.0);        float tpr = tpsrc.x;        float tpg = tpsrc.y;        float tpb = tpsrc.z;        float brg = (trg - tr * tg);        float brb = (trb - tr * tb);        float bgb = (tgb - tg * tb);        float br2 = tr2 - tr * tr + esp;        float bg2 = tg2 - tg * tg + esp;        float bb2 = tb2 - tb * tb + esp;        float ur = (tpr - stp * tr);        float ug = (tpg - stp * tg);        float ub = (tpb - stp * tb);        float bs = br2*bgb*bgb + bg2*brb*brb + bb2*brg*brg - 2.0 * bgb*brb*brg - bb2*bg2*br2;        float ar = (bgb*bgb - bb2*bg2)*ur + (bb2*brg - bgb*brb)*ug + (bg2*brb - bgb*brg)*ub;        float ag = (bb2*brg - bgb*brb)*ur + (brb*brb - bb2*br2)*ug + (bgb*br2 - brb*brg)*ub;        float ab = (bg2*brb - bgb*brg)*ur + (bgb*br2 - brb*brg)*ug + (brg*brg - bg2*br2)*ub;        bs = 1.0 / bs;        ar *= bs;        ag *= bs;        ab *= bs;        float b = (stp - ar*tr - ag*tg - ab*tb);        vec2 arag = vec2((ab + 64.0)*2.0, (b + 64.0)*2.0); arag = clamp(arag, 0.0, 255.996);        vec2 farag = floor(arag);        vec4 dst;        dst.xz = arag - farag;        dst.yw = farag;        dst *= vec4((256.0 / 255.0), 1.0 / 255.0, (256.0 / 255.0), 1.0 / 255.0);if (dst.x > (513.0 / 512.0))            {                dst.x = 0.0;                dst.y += (1.0 / 255.0);            }            if (dst.z > (513.0 / 512.0))            {                dst.z = 0.0;                dst.w += (1.0 / 255.0);            }        gl_FragColor = dst;    }"];return r.gpu_process=function(e,r,o,i,s){a[this.m_filter_num]||(a[this.m_filter_num]=new gt(null,n[this.m_filter_num],t.m_context));var l=nt(t.m_context,null,a[this.m_filter_num],o,i,s);l.shader_texture("painted1_0Texture",r[0]),l.shader_texture("painted1_1Texture",r[1]),l.shader_texture("srcTexture",r[2]);var c={};if(c.esp=this.m_esp,c.sft=[1/o,1/i],l.shader.uniforms(c),l.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingDownSizeProc::gpu_process"},r.destroy=function(){a[0]&&(a[0].destroy(),a[0]=0),a[1]&&(a[1].destroy(),a[1]=0)},r}function Se(e){var t=e,a=0,r=ae();return r.m_fac=0,r.s_fshFragImageMattingGuideMapProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D axayImageTexture;    uniform sampler2D azbImageTexture;    uniform float fac;    uniform vec2 sft;    uniform vec4 m;    vec2 get_axay_sample(vec2 cd)    {        vec4 axay = texture2D(axayImageTexture, textureCoordinate*m.xy+m.zw + sft * cd)*        vec4((255.0 / 256.0), 255.0, (255.0 / 256.0), 255.0);        return vec2((axay.x + axay.y)/2.0 - 64.0, (axay.z + axay.w)/2.0 - 64.0);    }    vec2 get_azb_sample(vec2 cd)    {        vec4 azb = texture2D(azbImageTexture, textureCoordinate*m.xy+m.zw + sft * cd)*        vec4((255.0 / 256.0), 255.0, (255.0 / 256.0), 255.0);        return vec2((azb.x + azb.y)/2.0 - 64.0, (azb.z + azb.w)/2.0 - 64.0);    }    void main()    {        float axSum=0.0, aySum=0.0, azSum=0.0, bSum=0.0;        for (float i = -1.0; i <= 1.0;++i)        for (float n = -1.0; n <= 1.0; ++n)        {            vec2 axay = get_axay_sample(vec2(i, n));            vec2 azb = get_azb_sample(vec2(i, n));            axSum += axay.x;            aySum += axay.y;            azSum += azb.x;            bSum += azb.y;        }        float ax = axSum / 9.0;        float ay = aySum / 9.0;        float az = azSum / 9.0;        float b = bSum / 9.0;        vec4 src = texture2D(inputImageTexture, textureCoordinate);        vec4 dst;        dst.x = (ax*src.x + ay*src.y + az*src.z + b);        gl_FragColor = dst;        if(fac<0.5)return;        dst.x = float(dst.x>0.5);        gl_FragColor = dst;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragImageMattingGuideMapProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);s.shader_texture("inputImageTexture",r[0]),s.shader_texture("axayImageTexture",r[1]),s.shader_texture("azbImageTexture",r[2]);var l={};if(l.fac=this.m_fac,l.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],l.sft=[1/n,1/o],s.shader.uniforms(l),s.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingDownSizeProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function Te(e){var t=e,a=0,r=ae();return r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,"    varying vec2 textureCoordinate;    uniform sampler2D painted1_0Texture;    uniform sampler2D painted1_1Texture;    uniform sampler2D srcTexture;    float get_painted_sample()    { float res;    vec4 p1_0Src = texture2D(painted1_0Texture, textureCoordinate)        *vec4((255.0 / (256.0 * 65536.0)), (255.0 / (65536.0)), (255.0 / 256.0), 255.0);    vec4 p1_1Src = texture2D(painted1_1Texture, textureCoordinate)        *vec4((255.0 / (256.0 * 65536.0)), (255.0 / (65536.0)), (255.0 / 256.0), 255.0);    float p1_0 = (p1_0Src.x + p1_0Src.y + p1_0Src.z + p1_0Src.w);    float p1_1 = (p1_1Src.x + p1_1Src.y + p1_1Src.z + p1_1Src.w);    if (p1_1 <= 0.0) return -1.0;    res =floor(p1_0 / p1_1*254.0 + 0.5);    return res;    }    void main()    {        float res = get_painted_sample();        res = (res+1.0)/255.0;        vec4 dst = vec4(texture2D(srcTexture,textureCoordinate).xyz,res);        gl_FragColor = dst;    }        ",t.m_context));var s=nt(t.m_context,null,a,n,o,i);if(s.shader_texture("painted1_0Texture",r[0]),s.shader_texture("painted1_1Texture",r[1]),s.shader_texture("srcTexture",r[2]),s.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingDownSizeProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function De(e){var t=e,a=[0,0],r=ae();r.m_filter_num=0,r.m_esp=0,r.m_blend_flag=0,r.m_fac=0;var n=["    varying vec2 textureCoordinate;    uniform sampler2D srcTexture;    uniform sampler2D subTexture;    uniform vec2 sft;    uniform float esp;    uniform float bf;uniform float fac;    vec4 get_sample(vec2 cd)    {        return texture2D(srcTexture, textureCoordinate + sft * cd);    }    float get_painted_sample(vec2 cd,float p)    { float res = texture2D(subTexture, textureCoordinate + sft * cd).x;    res =  clamp(res*(1.0 + fac) - 0.5*fac, 0.0, 1.0);p = p*255.0 - 1.0;    if(p>-0.5)res = p/254.0;    return res;    }    void main()    {        vec4 src1 = get_sample(vec2(-1.0, -1.0));        vec4 src2 = get_sample(vec2(0.0, -1.0));        vec4 src3 = get_sample(vec2(1.0, -1.0));                vec4 src4 = get_sample(vec2(-1.0, 0.0));        vec4 src5 = get_sample(vec2(0.0, 0.0));        vec4 src6 = get_sample(vec2(1.0, 0.0));                vec4 src7 = get_sample(vec2(-1.0, 1.0));        vec4 src8 = get_sample(vec2(0.0, 1.0));        vec4 src9 = get_sample(vec2(1.0, 1.0));        float res1 = get_painted_sample(vec2(-1.0, -1.0),src1.a);        float res = res1;        float res2 = get_painted_sample(vec2(0.0, -1.0),src2.a);        res += res2;        float res3 = get_painted_sample(vec2(1.0, -1.0),src3.a);        res += res3;                float res4 = get_painted_sample(vec2(-1.0, 0.0),src4.a);        res += res4;        float res5 = get_painted_sample(vec2(0.0, 0.0),src5.a);        res += res5;        float res6 = get_painted_sample(vec2(1.0, 0.0),src6.a);        res += res6;                float res7 = get_painted_sample(vec2(-1.0, 1.0),src7.a);        res += res7;        float res8 = get_painted_sample(vec2(0.0, 1.0),src8.a);        res += res8;        float res9 = get_painted_sample(vec2(1.0, 1.0),src9.a);        res += res9;                res *=1.0 / 9.0;        float stp = res;                        vec4 tsrc = src1 + src2 + src3 + src4 + src5 + src6 + src7 + src8 + src9;        tsrc *= vec4(1.0 / 9.0);        float tr = tsrc.r;        float tg = tsrc.g;        float tb = tsrc.b;        float trg = src1.r*src1.g + src2.r*src2.g + src3.r*src3.g + src4.r*src4.g + src5.r*src5.g + src6.r*src6.g + src7.r*src7.g + src8.r*src8.g + src9.r*src9.g;        trg *= (1.0 / 9.0);        float trb = src1.r*src1.b + src2.r*src2.b + src3.r*src3.b + src4.r*src4.b + src5.r*src5.b + src6.r*src6.b + src7.r*src7.b + src8.r*src8.b + src9.r*src9.b;        trb *= (1.0 / 9.0);        float tgb = src1.g*src1.b + src2.g*src2.b + src3.g*src3.b + src4.g*src4.b + src5.g*src5.b + src6.g*src6.b + src7.g*src7.b + src8.g*src8.b + src9.g*src9.b;        tgb *= (1.0 / 9.0);        vec4 tsrc2 = src1* src1 + src2* src2 + src3* src3 + src4* src4 + src5*src5 + src6*src6 + src7*src7 + src8*src8 + src9*src9;        tsrc2 *= vec4(1.0 / 9.0);        float tr2 = tsrc2.x;        float tg2 = tsrc2.y;        float tb2 = tsrc2.z;        vec4 tpsrc = src1*res1 + src2*res2 + src3*res3 + src4*res4+  src5*res5 + src6*res6 + src7*res7 + src8*res8 + src9*res9;        tpsrc *= vec4(1.0 / 9.0);        float tpr = tpsrc.x;        float tpg = tpsrc.y;        float tpb = tpsrc.z;        float brg = (trg  - tr * tg);        float brb = (trb  - tr * tb);        float bgb = (tgb  - tg * tb);        float br2 = tr2 - tr * tr + esp;        float bg2 = tg2 - tg * tg + esp;        float bb2 = tb2 - tb * tb + esp;        float ur = (tpr - stp * tr);        float ug = (tpg - stp * tg);        float ub = (tpb - stp * tb);        float bs = br2*bgb*bgb + bg2*brb*brb + bb2*brg*brg - 2.0 * bgb*brb*brg - bb2*bg2*br2;        float ar = (bgb*bgb - bb2*bg2)*ur + (bb2*brg - bgb*brb)*ug + (bg2*brb - bgb*brg)*ub;        float ag = (bb2*brg - bgb*brb)*ur + (brb*brb - bb2*br2)*ug + (bgb*br2 - brb*brg)*ub;        float ab = (bg2*brb - bgb*brg)*ur + (bgb*br2 - brb*brg)*ug + (brg*brg - bg2*br2)*ub;        bs = 1.0 / bs;        ar *= bs;        ag *= bs;        ab *= bs;       vec2 arag = vec2((ar + 64.0)*2.0, (ag + 64.0)*2.0);            arag = clamp(arag, 0.0, 255.996);        vec2 farag = floor(arag);        vec4 dst;        dst.xz = arag - farag;        dst.yw = farag;        dst *= vec4((256.0 / 255.0), 1.0 / 255.0, (256.0 / 255.0), 1.0 / 255.0);            if (dst.x > (513.0 / 512.0))            {                dst.x = 0.0;                dst.y += (1.0 / 255.0);            }            if (dst.z > (513.0 / 512.0))        {            dst.z = 0.0;            dst.w += (1.0 / 255.0);            }        gl_FragColor = dst;    }        ","    varying vec2 textureCoordinate;    uniform sampler2D srcTexture;    uniform sampler2D subTexture;    uniform vec2 sft;    uniform float esp;     uniform float bf;uniform float fac;    vec4 get_sample(vec2 cd)    {        return texture2D(srcTexture, textureCoordinate + sft * cd);    }    float get_painted_sample(vec2 cd,float p)    { float res = texture2D(subTexture, textureCoordinate + sft * cd).x;    res =  clamp(res*(1.0 + fac) - 0.5*fac, 0.0, 1.0);p = p*255.0 - 1.0;       if(p>-0.5)res = p/254.0;    return res;    }    void main()    {       vec4 src1 = get_sample(vec2(-1.0, -1.0));        vec4 src2 = get_sample(vec2(0.0, -1.0));        vec4 src3 = get_sample(vec2(1.0, -1.0));                vec4 src4 = get_sample(vec2(-1.0, 0.0));        vec4 src5 = get_sample(vec2(0.0, 0.0));        vec4 src6 = get_sample(vec2(1.0, 0.0));                vec4 src7 = get_sample(vec2(-1.0, 1.0));        vec4 src8 = get_sample(vec2(0.0, 1.0));        vec4 src9 = get_sample(vec2(1.0, 1.0));        float res1 = get_painted_sample(vec2(-1.0, -1.0),src1.a);        float res = res1;        float res2 = get_painted_sample(vec2(0.0, -1.0),src2.a);        res += res2;        float res3 = get_painted_sample(vec2(1.0, -1.0),src3.a);        res += res3;                float res4 = get_painted_sample(vec2(-1.0, 0.0),src4.a);        res += res4;        float res5 = get_painted_sample(vec2(0.0, 0.0),src5.a);        res += res5;        float res6 = get_painted_sample(vec2(1.0, 0.0),src6.a);        res += res6;                float res7 = get_painted_sample(vec2(-1.0, 1.0),src7.a);        res += res7;        float res8 = get_painted_sample(vec2(0.0, 1.0),src8.a);        res += res8;        float res9 = get_painted_sample(vec2(1.0, 1.0),src9.a);        res += res9;                res *=1.0 / 9.0;        float stp = res;        vec4 tsrc = src1 + src2 + src3 + src4 + src5 + src6 + src7 + src8 + src9;        tsrc *= vec4(1.0 / 9.0);        float tr = tsrc.r;        float tg = tsrc.g;        float tb = tsrc.b;        float trg = src1.r*src1.g + src2.r*src2.g + src3.r*src3.g + src4.r*src4.g + src5.r*src5.g + src6.r*src6.g + src7.r*src7.g + src8.r*src8.g + src9.r*src9.g;        trg *= 1.0 / 9.0;        float trb = src1.r*src1.b + src2.r*src2.b + src3.r*src3.b + src4.r*src4.b + src5.r*src5.b + src6.r*src6.b + src7.r*src7.b + src8.r*src8.b + src9.r*src9.b;        trb *= 1.0 / 9.0;        float tgb = src1.g*src1.b + src2.g*src2.b + src3.g*src3.b + src4.g*src4.b + src5.g*src5.b + src6.g*src6.b + src7.g*src7.b + src8.g*src8.b + src9.g*src9.b;        tgb *= 1.0 / 9.0;        vec4 tsrc2 = src1* src1 + src2* src2 + src3* src3 + src4* src4 + src5*src5 + src6*src6 + src7*src7 + src8*src8 + src9*src9;        tsrc2 *= vec4(1.0 / 9.0);        float tr2 = tsrc2.x;        float tg2 = tsrc2.y;        float tb2 = tsrc2.z;        vec4 tpsrc = src1*res1 + src2*res2 + src3*res3 + src4*res4 + src5*res5 + src6*res6 + src7*res7 + src8*res8 + src9*res9;        tpsrc *= vec4(1.0 / 9.0);        float tpr = tpsrc.x;        float tpg = tpsrc.y;        float tpb = tpsrc.z;        float brg = (trg - tr * tg);        float brb = (trb - tr * tb);        float bgb = (tgb - tg * tb);        float br2 = tr2 - tr * tr + esp;        float bg2 = tg2 - tg * tg + esp;        float bb2 = tb2 - tb * tb + esp;        float ur = (tpr - stp * tr);        float ug = (tpg - stp * tg);        float ub = (tpb - stp * tb);        float bs = br2*bgb*bgb + bg2*brb*brb + bb2*brg*brg - 2.0 * bgb*brb*brg - bb2*bg2*br2;        float ar = (bgb*bgb - bb2*bg2)*ur + (bb2*brg - bgb*brb)*ug + (bg2*brb - bgb*brg)*ub;        float ag = (bb2*brg - bgb*brb)*ur + (brb*brb - bb2*br2)*ug + (bgb*br2 - brb*brg)*ub;        float ab = (bg2*brb - bgb*brg)*ur + (bgb*br2 - brb*brg)*ug + (brg*brg - bg2*br2)*ub;        bs = 1.0 / bs;        ar *= bs;        ag *= bs;        ab *= bs;        float b = (stp - ar*tr - ag*tg - ab*tb);        vec2 arag = vec2((ab + 64.0)*2.0, (b + 64.0)*2.0);        arag = clamp(arag, 0.0, 255.996);        vec2 farag = floor(arag);        vec4 dst;        dst.xz = arag - farag;        dst.yw = farag;        dst *= vec4((256.0 / 255.0), 1.0 / 255.0, (256.0 / 255.0), 1.0 / 255.0);        if (dst.x > (513.0 / 512.0))            {                dst.x = 0.0;                dst.y += (1.0 / 255.0);            }            if (dst.z > (513.0 / 512.0))            {                dst.z = 0.0;                dst.w += (1.0 / 255.0);            }        gl_FragColor = dst;    }"];return r.gpu_process=function(e,r,o,i,s){a[this.m_filter_num]||(a[this.m_filter_num]=new gt(null,n[this.m_filter_num],t.m_context));var l=nt(t.m_context,null,a[this.m_filter_num],o,i,s);l.shader_texture("subTexture",r[0]),l.shader_texture("srcTexture",r[1]);var c={};if(c.bf=this.m_blend_flag,c.esp=this.m_esp,c.sft=[1/o,1/i],c.fac=this.m_fac,l.shader.uniforms(c),l.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingDownSizeProc::gpu_process"},r.destroy=function(){a[0]&&(a[0].destroy(),a[0]=0),a[1]&&(a[1].destroy(),a[1]=0)},r}function Re(e){var t=e,a=0,r=ae();return r.s_fshFragImageMattingForeIterationProc="\tvarying vec2 textureCoordinate;    uniform sampler2D textureAfterFilter;    void main()    {        vec4 dst = texture2D(textureAfterFilter, textureCoordinate);                dst.x = clamp(dst.x*1.4 - 0.2,0.0,1.0);        gl_FragColor = dst;    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragImageMattingForeIterationProc,t.m_context));var s=nt(t.m_context,null,a,n,o,i);if(s.shader_texture("textureAfterFilter",r[0]),s.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingForeIterationProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function Ie(e){var t=e,a=0,r=ae();return r.m_m=[],r.m_filter_flag=0,r.s_fshFragImageMattingIterationProc="\tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D textureAfterFilter;    uniform vec4 m;    uniform vec2 sft;    uniform float filter_flag;    vec4 get_sample(vec2 cd)    {        return texture2D(inputImageTexture, textureCoordinate * m.xy + m.zw + sft * cd);    }    vec4 get_dst_sample(vec2 cd)    {        return texture2D(textureAfterFilter, textureCoordinate * m.xy + m.zw + sft * cd);    }    void main()    {        vec4 src = get_sample(vec2(-1.0 / 4.0, -1.0 / 4.0));        src += get_sample(vec2(1.0 / 4.0, -1.0 / 4.0));        src += get_sample(vec2(-1.0 / 4.0, 1.0 / 4.0));        src += get_sample(vec2(1.0 / 4.0, 1.0 / 4.0));        src = src*vec4(0.25);        src.r = float(src.r > 0.0);        src.g = float(src.g > 0.0);        vec4 dst = get_dst_sample(vec2(-1.0 / 4.0, -1.0 / 4.0));        dst += get_dst_sample(vec2(1.0 / 4.0, -1.0 / 4.0));        dst += get_dst_sample(vec2(-1.0 / 4.0, 1.0 / 4.0));        dst += get_dst_sample(vec2(1.0 / 4.0, 1.0 / 4.0));        dst = dst*vec4(0.25);        if (filter_flag > 0.5){            dst.r = float(dst.r>0.5);        }        src.r = src.r + max(min(dst.r*1.3-0.15, 1.0), 0.0) - src.g;        gl_FragColor = src;    }",r.gpu_process=function(e,r,n,o,i,s){a||(a=new gt(null,this.s_fshFragImageMattingIterationProc,t.m_context));var l=nt(t.m_context,null,a,n,o,i);l.shader_texture("inputImageTexture",s),l.shader_texture("textureAfterFilter",r[0]);var c={};if(c.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],c.sft=[1/n,1/o],c.filter_flag=this.m_filter_flag,l.shader.uniforms(c),l.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingForeIterationProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function Ne(e){var t=e,a=0,r=ae();return r.m_crop,r.m_rectangle,r.m_m=[],r.alpha_flag=0,r.s_fshFragImageMattingUpsizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D paintResTexture;    uniform sampler2D tempTexture;    uniform vec4 m;    uniform vec2 samplerSize;    uniform float alpha_flag;        uniform vec4 rectangle;    uniform float crop;    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);               float res = texture2D(paintResTexture, textureCoordinate).x;        if (alpha_flag < 0.5){            float line = texture2D(tempTexture, textureCoordinate*m.xy + m.zw).x*1.2 - 0.1;            line = clamp(line,0.0,1.0);            vec2 coord = textureCoordinate/samplerSize;            if(res>0.6&&(coord.x<4.0||coord.x>1.0/samplerSize.x-4.0||coord.y<4.0||coord.y>1.0/samplerSize.y-4.0))                                line = 0.6;             vec3 color = vec3(0.0/255.0,255.0/255.0,132.0/255.0);            vec3 dst = mix(src.xyz, vec3(1.0,0.0,54.0/255.0), (1.0 - res)*0.4);            dst = mix(dst, color, line*0.7);            vec4 dst4 = vec4(dst, mix(src.a,1.0,line));            gl_FragColor = dst4;            if(crop<0.5)return;        vec2 rc = textureCoordinate/samplerSize;        rc = rc - rectangle.xy;        float mi = min(rc.x,rc.y);        float mir = min(rectangle.z - rc.x,rectangle.w - rc.y);        mi = min(mi,mir);        if(mi<0.0)return;        if(mi>1.0)return;        color = vec3(172.0/255.0,151.0/255.0,94.0/255.0);        rc = rc/4.0 - floor(rc/4.0)- vec2(0.5);        float a = 0.0;        if(rc.x*rc.y>0.0)a = 1.0;        gl_FragColor = vec4(mix(dst4.xyz,color,a),1.0);        }        else            gl_FragColor = vec4(src.rgb*(src.a*res), src.a*res);    }",r.gpu_process=function(e,r,n,o,i,s){a||(a=new gt(null,this.s_fshFragImageMattingUpsizeProc,t.m_context));var l=nt(t.m_context,null,a,n,o,i);l.shader_texture("inputImageTexture",r[0]),l.shader_texture("paintResTexture",r[1]),l.shader_texture("tempTexture",r[2]);var c={};if(c.m=[this.m_m[0],this.m_m[1],this.m_m[2],this.m_m[3]],c.samplerSize=[1/n,1/o],c.alpha_flag=this.m_alpha_flag?1:0,c.crop=this.m_crop?1:0,c.rectangle=this.m_rectangle,l.shader.uniforms(c),l.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingForeIterationProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function Pe(e){var t=0,a=e,r={};return r.init=function(e,t){this.amount=e,this.end_fac=t},r.m_crop=!1,r.m_rectangle=0,r.m_amount=0,r.m_end_fac=0,r.m_m=new Array(4),r.s_fshFragImageMattingBlurUpsizeProc="varying vec2 textureCoordinate;            uniform sampler2D inputImageTexture;    uniform sampler2D inputMaskTexture;    uniform sampler2D subMaskTextureR;    uniform sampler2D subMaskTextureD;    uniform vec4 m;    uniform float amount;    uniform float end_fac;    uniform vec2 samplerSize;        uniform vec4 rectangle;    uniform float crop;    void main()    {        vec4 src = texture2D(inputMaskTexture, textureCoordinate);        vec4 sub_r = texture2D(subMaskTextureR, textureCoordinate * m.xy + m.zw);        vec4 sub_d = texture2D(subMaskTextureD, textureCoordinate * m.xy + m.zw);        float res = (((src - sub_r) * end_fac + sub_d) *(1.0 - amount) +src * amount).x*src.x;        res = res*res*res;        vec4 src2 = texture2D(inputImageTexture, textureCoordinate);        vec4 dst4 = vec4(src2.rgb, src2.a*res);         gl_FragColor = dst4;                 if(crop<0.5)return;        vec2 rc = textureCoordinate/samplerSize;        rc = rc - rectangle.xy;        float mi = min(rc.x,rc.y);        float mir = min(rectangle.z - rc.x,rectangle.w - rc.y);        mi = min(mi,mir);        if(mi<0.0)return;        if(mi>3.0)return;        vec3 color = vec3(172.0/255.0,151.0/255.0,94.0/255.0);        rc = rc/20.0 - floor(rc/20.0)- vec2(0.5);        float a = 0.0;        if(rc.x*rc.y>0.0)a = 1.0;        gl_FragColor = vec4(mix(dst4.xyz,color,a),a);          }",r.gpu_process=function(e,r,n,o,i){a.m_context.disable(a.m_context.BLEND),t||(t=new gt(null,this.s_fshFragImageMattingBlurUpsizeProc,a.m_context));var s=nt(a.m_context,null,t,n,o,i);s.shader_texture("inputImageTexture",r[0]),s.shader_texture("subMaskTextureR",r[1]),s.shader_texture("subMaskTextureD",r[2]),s.shader_texture("inputMaskTexture",r[3]);var l={};if(l.m=this.m_m,l.amount=this.m_amount,l.end_fac=this.m_end_fac,l.samplerSize=[1/n,1/o],l.crop=this.m_crop?1:0,l.rectangle=this.m_rectangle,s.shader.uniforms(l),s.draw_to(e),a.m_context.getError())throw"createFragStructureSharpenUpProc::gpu_process"},r.destroy=function(){t&&(t.destroy(),t=0)},r}function Be(e){var t=e,a=0,r=ae();return r.m_m=[],r.alpha_flag=0,r.s_fshFragImageMattingUpsizeProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform vec2 samplerSize;    float large(float a){       return float(a>0.5);        }    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);            float res00 = texture2D(inputImageTexture, (textureCoordinate + vec2(-1.0, -1.0)*samplerSize)).x;            float res01 = texture2D(inputImageTexture, (textureCoordinate + vec2(-1.0, 0.0)*samplerSize)).x;            float res02 = texture2D(inputImageTexture, (textureCoordinate + vec2(-1.0, 1.0)*samplerSize)).x;            float res10 = texture2D(inputImageTexture, (textureCoordinate + vec2(0.0, -1.0)*samplerSize)).x;            float res12 = texture2D(inputImageTexture, (textureCoordinate + vec2(0.0, 1.0)*samplerSize)).x;            float res20 = texture2D(inputImageTexture, (textureCoordinate + vec2(1.0, -1.0)*samplerSize)).x;            float res21 = texture2D(inputImageTexture, (textureCoordinate + vec2(1.0, 0.0)*samplerSize)).x;            float res22 = texture2D(inputImageTexture, (textureCoordinate + vec2(1.0, 1.0)*samplerSize)).x;   float ux = large(res20) * (1.0) + large(res10) * (2.0) + large(res00) * (1.0)                + large(res02) * (-1.0) + large(res12) * (-2.0) + large(res22) *(-1.0);            float uy = large(res02) * (1.0) + large(res01) * (2.0) +large(res00) *(1.0)                + large(res20) * (-1.0) + large(res21) *(-2.0) + large(res22) *(-1.0);            float fac2 = clamp(pow(ux*ux + uy*uy, 0.5),0.0,1.0);            gl_FragColor = vec4(vec3(fac2,fac2,fac2), 1.0);    }",r.gpu_process=function(e,r,n,o,i,s){a||(a=new gt(null,this.s_fshFragImageMattingUpsizeProc,t.m_context));var l=nt(t.m_context,null,a,n,o,i);l.shader_texture("inputImageTexture",r[0]);var c={};if(c.samplerSize=[1/n,1/o],l.shader.uniforms(c),l.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingForeIterationProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function ze(e){var t=e,a=0,r=ae();return r.m_rectangle=[],r.alpha_flag=0,r.s_fshFragImageMattingDrawProc="varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    void main()    {            gl_FragColor = texture2D(inputImageTexture, textureCoordinate);    }",r.gpu_process=function(e,r,n,o,i){a||(a=new gt(null,this.s_fshFragImageMattingDrawProc,t.m_context));var s=Math.floor(n/10+.5),l=Math.floor(o/10+.5),c=lt(s,l,!0),h=nt(t.m_context,null,a,s,l,i);h.shader_texture("inputImageTexture",r),h.draw_to(c),t.m_context.bindFramebuffer(t.m_context.FRAMEBUFFER,i),t.m_context.framebufferTexture2D(t.m_context.FRAMEBUFFER,t.m_context.COLOR_ATTACHMENT0,t.m_context.TEXTURE_2D,c,0);var d=new Uint8Array(s*l*4);t.m_context.readPixels(0,0,s,l,t.m_context.RGBA,t.m_context.UNSIGNED_BYTE,d);for(var u=[65536,65536],p=0,m=0,f=0;f<l;++f)for(var g=0;g<s;++g)d[4*(f*s+g)]>10&&(p<g&&(p=g),m<f&&(m=f),u[0]>g&&(u[0]=g),u[1]>f&&(u[1]=f));if(p=Math.min(10*(p+2),n),m=Math.min(10*(m+2),o),u[0]=Math.max(10*(u[0]-1),0),u[1]=Math.max(10*(u[1]-1),0),p-=u[0],m-=u[1],this.m_rectangle=[u[0],u[1],p,m],t.m_context.deleteTexture(c),t.m_context.getError())throw"createCGEFragImageMattingForeIterationProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function Ue(e){var t=e,a=0,r=ae();return r.m_m=[],r.alpha_flag=0,r.s_fshFragImageMattingTempUpProc="\tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    void main()    {        vec4 dst = texture2D(inputImageTexture, textureCoordinate);        dst.x = dst.x*2.0 - 0.5;        gl_FragColor = dst;    }    ",r.gpu_process=function(e,r,n,o,i,s){a||(a=new gt(null,this.s_fshFragImageMattingTempUpProc,t.m_context));var l=nt(t.m_context,null,a,n,o,i);if(l.shader_texture("inputImageTexture",r[0]),l.draw_to(e),t.m_context.getError())throw"createCGEFragImageMattingForeIterationProc::gpu_process"},r.destroy=function(){a&&(a.destroy(),a=0)},r}function Ge(){var e={};return e.name="imageMatting",e.create=function(){function e(e){function t(){_&&(_.destroy(),_=0),x&&(x.destroy(),x=0),w&&(y.m_context.deleteTexture(w),w=0)}function a(e,t,a,r,n,o){e.gpu_process(t,a,r,n,o)}function r(e,t,a){if(!(a<=0||t<=0)){var r,n,o,i;t>a?(r=32,n=32*a/t,32*a%t&&++n,++n,o=32,i=32*a/t):0!=a&&(r=32*t/a,n=32,32*t%a&&++r,++r,o=32*t/a,i=32),e.src_width=t,e.src_height=a,e.dst_width=Math.floor(r),e.dst_height=Math.floor(n),e.x_start=0,e.y_start=0,e.emb_width=Math.floor(o),e.emb_height=Math.floor(i)}}function n(e){e.assume_symbol("used"),E=e.test_symbol("cache")?-1:e.fetch_float(),e.assume_symbol("sharpenTimes"),S=e.fetch_float(0,6),e.assume_symbol("esp"),T=.01*e.fetch_float(.001,100),k=e.test_symbol("iteration")?e.fetch_float(0,10):2,D=!!e.test_symbol("alpha"),p=!1,C=!1,(p=e.test_symbol("blurResult"))&&(e.assume_symbol("amount"),d=e.fetch_float(-200,500),e.assume_symbol("radius"),u=e.fetch_float(0,4)),C=e.test_symbol("crop")}function o(e,t,a){e.load_from(K,t,a),e.draw_downward($,a)}function i(e,t,a){var r=A();e.map_create(1);for(var n=new Array(e.m_images.length),o=0;o<n.length;++o){var i=Math.max(e.m_size[o].width,e.m_size[o].height)/16*u;n[o]=Math.exp(-i*i)}var i=Math.max(e.m_factor.src_width,e.m_factor.src_height)/16*u;a=Math.exp(-i*i);for(var o=1;o<e.m_images.length;++o)if(ee.m_factor=n[o],e.m_base_level==o){var s=[e.m_base_images[0],e.m_images[o-1][0],e.m_images[o-1][1]];1==o&&r.copy(e.m_images[o-1][1],e.m_images[o-1][0],e.m_size[o-1].width,e.m_size[o-1].height,t),ee.gpu_process(e.m_base_images[1],s,e.m_base_size,e.m_base_size,t),e.base_move_up(1,t)}else{var s=[e.m_images[o][0],e.m_images[o-1][0],e.m_images[o-1][1]];1==o&&r.copy(e.m_images[o-1][1],e.m_images[o-1][0],e.m_size[o-1].width,e.m_size[o-1].height,t),ee.gpu_process(e.m_images[o][1],s,e.m_size[o].width,e.m_size[o].height,t)}return a}function s(e,t,a,r){r=null==r?0:r;for(var n=a+1;n<e.m_images.length;++n)if(e.m_base_level==n){var o=[e.m_images[n-1][r]];X.gpu_process(e.m_base_images[r],o,e.m_size[r].width,e.m_size[r].height,t),e.base_move_up(r,t)}else{var o=[e.m_images[n-1][r]];X.gpu_process(e.m_images[n][r],o,e.m_size[n].width,e.m_size[n].height,t)}}function l(e,t){for(var a=0;a<e.m_images.length;++a){var r=[];e.m_base_level==a?(r[0]=e.m_base_images[1],r[1]=e.m_base_images[2],r[2]=e.m_base_images[0],q.gpu_process(e.m_base_images[3],r,e.m_base_size,e.m_base_size,t),e.base_move_up(3,t)):(r[0]=e.m_images[a][1],r[1]=e.m_images[a][2],r[2]=e.m_images[a][0],q.gpu_process(e.m_images[a][3],r,e.m_size[a].width,e.m_size[a].height,t))}}function c(e,t,a,r,n,s,l,c){R!=E&&(o(t,c,l),ae.gpu_process(a,c,n,s,l),m=ae.m_rectangle,R=E);var h=1;h=i(t,l,h),b.get_rev_trans(te.m_m),te.init(.01*d+1,h);var u=new Array(3);u[0]=r,u[1]=t.m_images[t.m_images.length-1][0],u[2]=t.m_images[t.m_images.length-1][1],u[3]=c,te.m_crop=C,te.m_rectangle=C?m:[0,0,0,0],te.gpu_process(a,u,n,s,l)}function h(e,t,r,n,o,i,c,h,d){var u=new Array(7);A();if(I!=E){j.m_fac=0;for(var p=0;p<4;++p)t.map_create(p);t.map_create(4,2),t.map_create(5,2),b.get_trans(P.m_m),u[0]=h,b.get_trans(B.m_m),B.gpu_process(t.m_images[t.m_images.length-1][1],u,t.m_size[t.m_size.length-1].width,t.m_size[t.m_size.length-1].height,c),t.draw_downward(N,c,2,1),b.get_trans(z.m_m),u[0]=h,z.gpu_process(t.m_images[t.m_images.length-1][2],u,t.m_size[t.m_size.length-1].width,t.m_size[t.m_size.length-1].height,c),t.draw_downward(N,c,2,2),b.get_trans(U.m_m),u[0]=n,U.gpu_process(t.m_images[t.m_images.length-1][0],u,t.m_size[t.m_size.length-1].width,t.m_size[t.m_size.length-1].height,c),t.draw_downward(G,c,2),u[0]=t.m_images[2][1],u[1]=t.m_images[2][2],u[2]=t.m_images[2][0],O.m_esp=T,O.m_filter_num=0,O.gpu_process(t.m_images[2][4],u,t.m_size[2].width,t.m_size[2].height,c),O.m_filter_num=1,O.gpu_process(t.m_images[2][5],u,t.m_size[2].width,t.m_size[2].height,c),l(t,c),u[0]=t.m_images[2][3],u[1]=t.m_images[2][4],u[2]=t.m_images[2][5],j.m_m[0]=1,j.m_m[1]=1,j.m_m[2]=0,j.m_m[3]=0,j.gpu_process(t.m_images[2][0],u,t.m_size[2].width,t.m_size[2].height,c);for(var f=0;f<k*(t.m_images.length+1)+1;++f)L.m_fac=.06,L.m_blend_flag=1,u[0]=t.m_images[2][0],u[1]=t.m_images[2][3],L.m_esp=T,L.m_filter_num=0,L.gpu_process(t.m_images[2][1],u,t.m_size[2].width,t.m_size[2].height,c),L.m_filter_num=1,L.gpu_process(t.m_images[2][2],u,t.m_size[2].width,t.m_size[2].height,c),u[0]=t.m_images[2][3],u[1]=t.m_images[2][1],u[2]=t.m_images[2][2],j.gpu_process(t.m_images[2][0],u,t.m_size[2].width,t.m_size[2].height,c);for(var p=3;p<t.m_images.length;++p){if(L.m_blend_flag=1,t.m_base_level==p){var g=[t.m_images[p-1][0],t.m_base_images[3]];L.m_esp=T,L.m_filter_num=0,L.gpu_process(t.m_base_images[1],g,t.m_base_size,t.m_base_size,c),L.m_filter_num=1,L.gpu_process(t.m_base_images[2],g,t.m_base_size,t.m_base_size,c),g[0]=t.m_base_images[3],g[1]=t.m_base_images[1],g[2]=t.m_base_images[2],j.gpu_process(t.m_base_images[0],g,t.m_base_size,t.m_base_size,c),t.base_move_up(0,c)}else u[0]=t.m_images[p-1][0],u[1]=t.m_images[p][3],L.m_esp=T,L.m_filter_num=0,L.gpu_process(t.m_images[p][1],u,t.m_size[p].width,t.m_size[p].height,c),L.m_filter_num=1,L.gpu_process(t.m_images[p][2],u,t.m_size[p].width,t.m_size[p].height,c),u[0]=t.m_images[p][3],u[1]=t.m_images[p][1],u[2]=t.m_images[p][2],j.gpu_process(t.m_images[p][0],u,t.m_size[p].width,t.m_size[p].height,c);for(var v=k*(t.m_images.length-p+1)+1,f=0;f<v;++f)L.m_blend_flag=1,u[0]=t.m_images[p][0],u[1]=t.m_images[p][3],L.m_esp=T,L.m_filter_num=0,L.gpu_process(t.m_images[p][1],u,t.m_size[p].width,t.m_size[p].height,c),L.m_filter_num=1,L.gpu_process(t.m_images[p][2],u,t.m_size[p].width,t.m_size[p].height,c),u[0]=t.m_images[p][3],u[1]=t.m_images[p][1],u[2]=t.m_images[p][2],j.gpu_process(t.m_images[p][0],u,t.m_size[p].width,t.m_size[p].height,c)}L.m_fac=.3,b.get_trans(H.m_m),u[0]=t.m_images[t.m_images.length-1][0],H.gpu_process(t.m_images[t.m_images.length-1][2],u,t.m_size[t.m_size.length-1].width,t.m_size[t.m_size.length-1].height,c,h);for(var f=0;f<S;++f)Z.m_filter_flag=0,f>0&&(b.get_trans(Z.m_m),u[0]=d,Z.gpu_process(t.m_images[t.m_images.length-1][2],u,t.m_size[t.m_size.length-1].width,t.m_size[t.m_size.length-1].height,c,h)),L.m_blend_flag=1,u[0]=t.m_images[t.m_images.length-1][2],u[1]=t.m_images[t.m_images.length-1][3],L.m_esp=8e-5,L.m_filter_num=0,L.gpu_process(t.m_images[t.m_images.length-1][0],u,t.m_size[t.m_size.length-1].width,t.m_size[t.m_size.length-1].height,c),L.m_filter_num=1,L.gpu_process(t.m_images[t.m_images.length-1][1],u,t.m_size[t.m_size.length-1].width,t.m_size[t.m_size.length-1].height,c),u[0]=n,u[1]=t.m_images[t.m_images.length-1][0],u[2]=t.m_images[t.m_images.length-1][1],b.get_rev_trans(j.m_m),f==S-1&&(j.m_fac=1),j.gpu_process(d,u,o,i,c);I=E}b.get_rev_trans(Q.m_m),u[0]=n,u[1]=d,b.get_trans(U.m_m),u[0]=d,a(U,_.m_images[_.m_images.length-1][0],u,_.m_size[_.m_size.length-1].width,_.m_size[_.m_size.length-1].height,c),_.draw_downward(G,c,7),s(_,c,7),u[0]=_.m_images[_.m_images.length-1][0],J.gpu_process(_.m_images[_.m_images.length-1][1],u,_.m_size[_.m_size.length-1].width,_.m_size[_.m_size.length-1].height,c),_.draw_downward(G,c,7,1),s(_,c,7,1),u[0]=n,u[2]=_.m_images[_.m_images.length-1][1],u[1]=d,D&&(Q.m_m[0]=1,Q.m_m[1]=1,Q.m_m[2]=0,Q.m_m[3]=0),Q.m_alpha_flag=D,C?(ae.gpu_process(r,d,o,i,c),m=ae.m_rectangle,Q.m_rectangle=m):Q.m_rectangle=[0,0,0,0],Q.m_crop=C,Q.gpu_process(r,u,o,i,c)}var d,u,p,m,f,g,v,b,_,y,x,C,w=0,E=0,k=0,S=0,T=0,D=0,R=0,I=0;x=0,_=0,g=0,v=0,y=e,f="",b=F();var N=we(y),P=Ae(y),B=Ee(y),z=Fe(y),U=ke(y),G=W(y),O=Me(y),j=Se(y),L=De(y),H=Re(y),Z=Ie(y),Q=Ne(y),J=Be(y),X=Ue(y),q=Te(y),K=Y(y),$=W(y),ee=V(y),te=Pe(y),ae=ze(y),re={};return re.destroy=function(){t(),N&&N.destroy(),P&&P.destroy(),B&&B.destroy(),z&&z.destroy(),U&&U.destroy(),G&&G.destroy(),O&&O.destroy(),j&&j.destroy(),L&&L.destroy(),H&&H.destroy(),Z&&Z.destroy(),Q&&Q.destroy(),J&&J.destroy(),X&&X.destroy()},re.size_change=function(e,a){g==e&&v==a||(g=e,v=a,f="",R=0,I=0,r(b,g,v),t())},re.gpu_process=function(e,t,a){try{at(t);if(this.size_change(a.m_width,a.m_height),_||(_=M(y.context(),b,513,!0,!1,2)),n(e),p){if(!w)return;var r,o;return o=(new Date).getTime(),c(e,_,t.new_temporary(),t.current(),a.m_width,a.m_height,a.m_frame_buffer,w),t.push_to_current(),r=(new Date).getTime()-o,void console.log("time cost of rectangle:"+r)}w||(w=lt(a.m_width,a.m_height,!0));var i;i=E<0?y.lock_image(null,"matting"):t.load_view(E);var o=(new Date).getTime();h(e,_,t.new_temporary(),t.current(),a.m_width,a.m_height,a.m_frame_buffer,i,w);var r=(new Date).getTime()-o;console.log("time cost:"+r),t.push_to_current()}catch(e){throw"CGEPTPTemplete::gpu_process"}},re}return e}(),e}function Oe(e){var t=["varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D blendTexture;    uniform float opacity;    uniform vec4 trans;    uniform float flag;%s    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        vec2 cod = textureCoordinate*trans.xy + trans.zw;        cod = clamp(cod - floor(cod)*flag, 0.0, 1.0);        vec4 dst = texture2D(blendTexture, cod);        gl_FragColor = vec4(blend(src.rgb, dst.rgb, dst.a * opacity), src.a);    }","varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D blendTexture;    uniform sampler2D alphaTexture;    uniform vec4 trans;    uniform float flag;%s    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        vec2 cod = textureCoordinate*trans.xy + trans.zw;        cod = clamp(cod - floor(cod)*flag, 0.0, 1.0);        float a = texture2D(alphaTexture, cod).g;        vec4 dst = texture2D(blendTexture, textureCoordinate);        gl_FragColor = vec4(blend(src.rgb, dst.rgb, a), src.a);    }","varying vec2 textureCoordinate;\tuniform sampler2D inputImageTexture;\tuniform sampler2D blendTexture;\tuniform float opacity;\tuniform float reOpacity;%s\t\tvoid main()\t{\t\t\tvec4 src = texture2D(inputImageTexture, textureCoordinate);\t\t\tvec4 dst = texture2D(blendTexture, textureCoordinate);\t\t\tvec3 dst2 = src.rgb*(1.0-dst.a*opacity)+dst.rgb*opacity;\t\t\tif(reOpacity>1.0)                gl_FragColor =vec4(dst2,src.a);             else\t\t\t    gl_FragColor = vec4(blend(src.rgb, dst.rgb, dst.a* opacity), src.a);\t\t}","varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D blendTexture;    uniform float opacity;%s    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        vec4 dst = texture2D(blendTexture, textureCoordinate);        gl_FragColor = vec4(blend(src.rgb, dst.rgb, opacity), src.a);    }","varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D blendTexture;    uniform sampler2D alphaTexture;    uniform vec4 trans;    uniform float flag;%s    void main()    {        vec4 src = texture2D(inputImageTexture, textureCoordinate);        vec4 dst = texture2D(blendTexture, textureCoordinate);        float a = texture2D(alphaTexture, textureCoordinate).w;        gl_FragColor = vec4(blend(src.rgb, dst.rgb, a), src.a);    }","varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D blendTexture;    uniform sampler2D alphaTexture;    uniform vec4 trans;    uniform float opacity;%s    void main()    {        vec2 coord = textureCoordinate*trans.xy+trans.zw;                vec4 src = texture2D(inputImageTexture, coord);        vec4 dst = texture2D(blendTexture, coord);        float a = texture2D(alphaTexture, coord).w*opacity;        gl_FragColor =vec4(mix(src.rgb,dst.rgb,1.0-a),src.a);    }"],a=[0,0,0,0,0],r=e.shader_string(),n={};return n.check_shader=function(e,n){if(!a[e]){var o=t[e].replace(/%s/g,r);a[e]=new gt(null,o,n)}return a[e]},n.destroy=function(){a[0]&&a[0].destroy(),a[1]&&a[1].destroy(),a[2]&&a[2].destroy(),a[3]&&a[3].destroy(),a[4]&&a[4].destroy()},n}function je(){var e={};return e.opacity=Oe(ft.createCGEBlendOpacity()),e.darken=Oe(ft.createCGEBlendDarken()),e.lighten=Oe(ft.createCGEBlendLighten()),e.multiply=Oe(ft.createCGEBlendMultiply()),e.screen=Oe(ft.createCGEBlendScreen()),e.colorDodge=Oe(ft.createCGEBlendColorDodge()),e.colorBurn=Oe(ft.createCGEBlendColorBurn()),e.linearDodge=Oe(ft.createCGEBlendLinearDodge()),e.linearBurn=Oe(ft.createCGEBlendLinearBurn()),e.hardLight=Oe(ft.createCGEBlendHardLight()),e.softLight=Oe(ft.createCGEBlendSoftLight()),e.vividLight=Oe(ft.createCGEBlendVividLight()),e.linearLight=Oe(ft.createCGEBlendLinearLight()),e.pinLight=Oe(ft.createCGEBlendPinLight()),e.hardMix=Oe(ft.createCGEBlendHardMix()),e.difference=Oe(ft.createCGEBlendDifference()),e.exclude=Oe(ft.createCGEBlendExclude()),e.add=Oe(ft.createCGEBlendAdd()),e.overlay=Oe(ft.createCGEBlendOverlay()),e.destroy=function(){for(var e in this)this[e].destroy&&this[e].destroy()},e}function Le(){var e={};return e.name="blend",e.create=function(){function e(e){function t(e){var t=e.fetch_symbol();(m=x[t])||e.error("invalid blend mode",t)}function a(e){var t=["none","center","centerFit","rightTop","leftBottom","tile","stick",0];i=0,s=0;var a=["leftTop","leftBottom","rightTop","rightBottom",0];e.test_symbol("align")&&(i=e.lookup_symbol(t,!0)),6==i&&(w[0]=e.fetch_float(),w[1]=e.fetch_float(),u=e.fetch_float(),s=e.lookup_symbol(a,!0)),5==i&&(h=e.fetch_float(.05,1))}function r(e){v=0,F=[],E=[],c=!1;var r=["texture","layer","view","shit",0];switch(e.lookup_symbol(r,!0)){case 0:e.assume_symbol("file"),C=e.fetch_string(),a(e),t(e),d=.01*e.fetch_float(0,100),f=0;break;case 1:c=!1;var n=["file","alpha","layer",0];if(A=e.fetch_symbol(),t(e),"BPSNumber"==e.get_parcer_status())d=.01*e.fetch_float(0,100),f=3;else switch(e.lookup_symbol(n,!0)){case 0:C=e.fetch_string(),a(e),f=1;break;case 1:d=.01*e.fetch_float(0,100),f=2;break;case 2:C=e.fetch_symbol(),f=4}break;case 2:c=!0;var n=["file","alpha","cache",0];if(l=e.fetch_float(),t(e),"BPSNumber"==e.get_parcer_status())d=.01*e.fetch_float(0,100),f=3;else{var o;(o=e.lookup_symbol(n,!0))?2==o?(f=5,g=1,e.test_symbol("alpha")&&(g=e.fetch_float()),e.test_symbol("position")&&(F[0]=e.fetch_float(),F[1]=e.fetch_float(),e.assume_symbol("size"),E[0]=e.fetch_float(),E[1]=e.fetch_float())):(e.test_symbol("reOpacity")&&(v=2),d=.01*e.fetch_float(0,100),f=2):(C=e.fetch_string(),a(e),f=1)}break;default:throw"CGEBlendParser::init"}}function n(e,t,a,r,n){n[0]=1,n[1]=1,n[2]=0,n[3]=0,p=1;var o=e/a,l=t/r;if(o>l){var c=l/o;n[0]=1,n[1]=c}else{var c=o/l;n[0]=c,n[1]=1}switch(i){case 0:n[0]=1,n[1]=1;break;case 1:n[2]=.5*(1-n[0]),n[3]=.5*(1-n[1]);break;case 2:if(o<l){var c=l/o;n[0]=1,n[1]=c}else{var c=o/l;n[0]=c,n[1]=1}n[2]=.5*(1-n[0]),n[3]=.5*(1-n[1]),p=0;break;case 3:break;case 4:n[2]=1-n[0],n[3]=1-n[1];break;case 5:n[0]/=h,n[1]/=h;break;case 6:switch(o>l?(n[0]=u*o/l,n[1]=u,n[2]=-w[0]*u*o/l,n[3]=-w[1]*u):(n[0]=u,n[1]=u*l/o,n[2]=-w[0]*u,n[3]=-w[1]*u*l/o),s){case 0:break;case 1:n[3]=1-n[1]-n[3];break;case 2:n[2]=1-n[0]-n[2];break;case 3:n[2]=1-n[0]-n[2],n[3]=1-n[1]-n[3]}p=0;break;default:throw"CGEBlendParser::cal_trans"}}function o(e,t,a,r,o){var i=new Array(4);n(e,t,a,r,i);var s={};s.trans=i,o.shader.uniforms(s)}var i,s,l,c,h,d,u,p,m,f,g,v=0,b=0,_=0,y=e,x=je(),C="",w=[],A="",E=[],F=[],k={};return k.destroy=function(){x.destroy()},k.gpu_process=function(e,t,a){try{var n=(new Date).getTime();b=at(t),r(e);var i=nt(y.m_context,a,m.check_shader(f,y.context()));switch(i.shader_texture("inputImageTexture",t.current()),f){case 0:if(!(_=y.get_resource_texture(C)))throw C;i.shader_texture("blendTexture",_.texture),o(a.m_width,a.m_height,_.width,_.height,i);var s={};s.opacity=d,s.flag=p,i.shader.uniforms(s);break;case 1:case 2:case 3:case 4:case 5:var h;if(h=c?t.load_view(l):t.load_channel(A),h||e.error("invalid layer name",A),i.shader_texture("blendTexture",h),1==f){if(!(_=y.get_resource_texture(C)))throw C;i.shader_texture("alphaTexture",_.texture),o(a.m_width,a.m_height,_.width,_.height,i);var s={};s.flag=p,i.shader.uniforms(s)}else if(4==f){var u;u=t.load_channel(C),u||e.error("invalid layer name",C),i.shader_texture("alphaTexture",u)}else if(5==f){var x=y.lock_image(null,"painter");if(!x)throw new error("no painter cache");i.shader_texture("alphaTexture",x);var s={};s.opacity=g,i.shader.uniforms(s)}else{var s={};s.reOpacity=v,s.opacity=d,i.shader.uniforms(s)}}if(E.length){var w=[E[0]/a.m_width,E[1]/a.m_height,F[0]/a.m_width,F[1]/a.m_height],k={};k.trans=w,i.shader.uniforms(k),y.m_context.enable(y.m_context.BLEND),y.m_context.blendEquation(y.m_context.FUNC_ADD),y.m_context.blendFunc(y.m_context.ONE,y.m_context.ZERO),y.m_context.bindFramebuffer(y.m_context.FRAMEBUFFER,a.m_frame_buffer),y.m_context.framebufferTexture2D(y.m_context.FRAMEBUFFER,y.m_context.COLOR_ATTACHMENT0,y.m_context.TEXTURE_2D,t.new_temporary(),0),y.m_context.viewport(Math.floor(F[0]+.5),Math.floor(F[1]+.5),Math.floor(E[0]+.5),Math.floor(E[1]+.5)),y.m_context.drawArrays(y.m_context.TRIANGLE_FAN,0,4),y.m_context.disable(y.m_context.BLEND)}else{if(5==f){var k={};k.trans=[1,1,0,0],i.shader.uniforms(k)}i.draw_to(t.new_temporary())}if(t.push_to_current(),5==f&&y.unlock_image(null,null,"painter"),y.m_context.getError())throw new error("CGEPTPTemplate::gpu_process");b.destroy();(new Date).getTime()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{b.destroy(),_&&(y.release_resource_texture(_),_=0)}},k}return e}(),e}function He(){var e={};return e.name="curve",e.create=function(){function e(e){for(var t=0;t<256;++t)e[t]=(t+.5)*(1/256)}function t(t){var a={};return a=rt(),a.m_context=t,a.m_curve_tex=0,a.m_data=[],a.m_red=new Array(256),a.m_green=new Array(256),a.m_blue=new Array(256),a.shader_uniform=function(){return"uniform sampler2D curve;"},a.shader_procession=function(){return"dst.r = texture2D(curve, vec2(src.r,0.5)).x;              dst.g = texture2D(curve, vec2(src.g,0.5)).y;               dst.b = texture2D(curve, vec2(src.b,0.5)).z;              dst.a = src.a;"},a.shader_setup=function(e){this.m_curve_tex||(this.m_curve_tex=lt(256,1,!0)),e.shader_texture("curve",this.m_curve_tex),this.m_context.m_context.texSubImage2D(this.m_context.m_context.TEXTURE_2D,0,0,0,256,1,this.m_context.m_context.RGBA,this.m_context.m_context.UNSIGNED_BYTE,new Uint8Array(this.m_data))},a.m_formula_list=0,a.init=function(t){e(this.m_red),e(this.m_green),e(this.m_blue);do{var a=t.fetch_symbol();this.m_formula_list||(this.m_formula_list=w());var r=this.m_formula_list.get_formula_Item_with_symbol(a);r&&r!={}&&r.color!={}||t.error("invalid curve process name",a),r.color(t,this.m_red,this.m_green,this.m_blue)}while(t.pre_test_symbol("curve"));for(var n=0;n<256;++n)this.m_data[4*n]=Math.min(256*this.m_red[n],255),this.m_data[4*n+1]=Math.min(256*this.m_green[n],255),this.m_data[4*n+2]=Math.min(256*this.m_blue[n],255),this.m_data[4*n+3]=255},a}return t}(),e}function Ze(){var e={};return e.name="hueAlphaAdjust",e.create=function(){function e(e){function t(e){h||(h=lt(256,256,!0));var t=nt(s.m_context,null,c,256,256,e.m_frame_buffer),a={};a.m_red=o,a.m_blue=i,a.m_factor=n,c.uniforms(a),t.draw_to(h)}function a(e){var t=(e+.5)*(1/256);t=t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);return enten}function r(e,t,r){var t;e.assume_symbol("factor"),t=e.fetch_float(0,1),n=Math.pow(20,1-t);var s=["hue","color",0];if(0==e.lookup_symbol(s,!0)){var r=e.fetch_float();r=r/180*Math.PI,o=Math.sin(r),i=Math.cos(r)}else{var l=e.fetch_float(0,256);l=a(l),l*=.299;var c=e.fetch_float(0,256);c=a(c),c*=.587;var h=e.fetch_float(0,256);h=a(h),h*=.114;var d=l+c+h,u=1/d;l*=u,c*=u,h*=u,l-=.299,h-=.114,u=1/Math.sqrt(l*l+h*h),o=l*u,i=h*u}}var n,o,i,s=e,l=0,c=0,h=0,d={},u={};return u=A(),u.destroy=function(){l&&(l.destroy(),l=0),c&&(c.destroy(),c=0),h&&(s.m_context.deleteTexture(h),h=0)},u.gpu_process=function(e,a,n){try{d=at(a),r(e),c||(c=new gt(null,"varying vec2 textureCoordinate;     uniform float m_red;     uniform float m_blue;     uniform float m_factor;        void main()    {    float red = textureCoordinate.x-0.299;    float blue = textureCoordinate.y-0.114;    float cr = red;    float cb = blue;    float n = 1.0/sqrt(cr*cr+cb*cb);    cr *=n;    cb *=n;    float vp = cr*m_red+cb*m_blue;    float fac;    if(vp>0.0)    {        float vs = (cr*m_blue - cb*m_red)*m_factor;        fac = vp/(vp*vp+vs*vs);     }     else         fac = 0.0;     float ratio =0.125*25.0/8192.0;     float dst = fac;         if((red*red*0.3 + blue*blue)<ratio)            {                float x = (red*red*0.3 + blue*blue) / ratio;                dst = (1.0 - (x*x - 2.0*x + 1.0))*fac;            }      gl_FragColor = vec4(0.0,0.0,0.0,dst);    }",s.m_context)),l||(l=new gt(null,"varying vec2 textureCoordinate;            uniform sampler2D inputImageTexture;            uniform sampler2D chrome;            void main()            {                vec4 src = texture2D(inputImageTexture, textureCoordinate);                vec3 lsrc = max(src.rgb * vec3(1.0 / 12.82), pow((src.rgb + vec3(0.055)) * vec3(1.0 / 1.055), vec3(2.4)));                vec3 csrc = lsrc * vec3(0.299, 0.587, 0.114);                float lum = csrc.r + csrc.g + csrc.b;                csrc /= vec3(lum + 0.000001);                src.a = src.a - texture2D(chrome, vec2(csrc.r, csrc.b)).w;                gl_FragColor = src;            }",s.m_context)),t(n);var o=nt(s.m_context,n,l);if(o.shader_texture("inputImageTexture",a.current()),o.shader_texture("chrome",h),o.draw_to(a.new_temporary()),s.m_context.getError())throw new error("CGEPTPTemplate::gpu_process");a.push_to_current()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{d.destroy()}},u}return e}(),e}function Ye(){var e={};return e.name="RGB",e.create=function(){function e(e){function t(e){var t={};t.mid_tone=c,t.l_red=o,t.l_blue=i,t.d_red=r,t.d_blue=n,t.m_red=s,t.m_blue=l,d.uniforms(t)}function a(e){r=0,n=0,o=0,i=0,s=0,l=0,c=.5;for(var t=["dark","light","middle","midTone",0],a=-1;-1!=(a=e.lookup_symbol(t));)switch(a){case 0:r=e.fetch_float(),n=e.fetch_float();break;case 1:o=e.fetch_float(),i=e.fetch_float();break;case 2:s=e.fetch_float(),l=e.fetch_float();break;case 3:c=e.fetch_float()}r=3*r/1e3,n=3*n/1e3,o=3*o/1e3,i=3*i/1e3,s=3*s/1e3,l=3*l/1e3}var r,n,o,i,s,l,c,h=e,d=0,u={},p={};return p.destroy=function(){d&&(d.destroy(),d=0)},p.gpu_process=function(e,r,n){try{u=at(r),a(e),d||(d=new gt(null,"varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;     uniform float d_red;     uniform float d_blue;     uniform float l_red;     uniform float l_blue;     uniform float m_red;     uniform float m_blue;     uniform float mid_tone;          vec3 color_limite(vec3 src,float lum)            {                vec3 vl = vec3(lum);                vec3 vc = src - vl;                vec3 fac = min((vec3(1.0) - vl) / max(vc, vec3(0.00001)), vec3(1.0));                vc = vc * vec3(min(fac.r, min(fac.g, fac.b)));                return vl + vc;            }        void main()    {\t\t    vec4 src = texture2D(inputImageTexture, textureCoordinate);        vec3 lsrc = max(src.rgb * vec3(1.0 / 12.82),pow((src.rgb + vec3(0.055)) * vec3(1.0 / 1.055),vec3(2.4)));       vec3 csrc = lsrc * vec3(0.299,0.587,0.114);            float lum = csrc.r + csrc.g + csrc.b;            csrc /= vec3(lum);            csrc.rb = csrc.rb - vec2(0.299,0.114);            float p_lum;            if(lum<mid_tone)            {                p_lum = lum/mid_tone;                p_lum = p_lum*p_lum*(3.0 - 2.0 * p_lum);                csrc.rb = (csrc.rb + vec2(d_red,d_blue)) * vec2(1.0 - p_lum) + (csrc.rb + vec2(m_red,m_blue)) * vec2(p_lum);            }            else            {                p_lum = (lum - mid_tone)/(1.0 - mid_tone);                p_lum = p_lum*p_lum*(3.0 - 2.0 * p_lum);                csrc.rb = (csrc.rb + vec2(m_red,m_blue)) * vec2(1.0 - p_lum) + (csrc.rb + vec2(l_red,l_blue)) * vec2(p_lum);            }            {                float sr,sb,sg,smax;                sr = csrc.r * (1.0 / -0.299);                sb = csrc.b * (1.0 / -0.114);                sg = (csrc.r+csrc.b) * (1.0/0.587);                smax = max(max(sr,sb),sg);                if(smax > 1.0)                    csrc.rb = csrc.rb * vec2(1.0/smax);                csrc.rb = csrc.rb + vec2(0.299,0.114);            }            csrc.g = 1.0 - csrc.r - csrc.b;            csrc *= vec3(lum);            lsrc = csrc * vec3(1.0/0.299,1.0/0.587,1.0/0.114);            lsrc = color_limite(lsrc,lum);            src.rgb = min(lsrc * 12.82,pow(lsrc,vec3(1.0 / 2.4)) * vec3(1.055) - vec3(0.055));      gl_FragColor = src;    }",h.m_context)),t(n);var o=nt(h.m_context,n,d);if(o.shader_texture("inputImageTexture",r.current()),o.draw_to(r.new_temporary()),h.m_context.getError())throw new error("CGEPTPTemplate::gpu_process");r.push_to_current()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{u.destroy()}},p}return e}(),e}function We(){var e={};return e.name="opticsAdjust",e.create=function(){function e(e,t){var a;e/=1e3,a=e<4?.27475/(e*e*e)-.98598/(e*e)+1.17444/e+.145986:e<7?-4.607/(e*e*e)+2.9678/(e*e)+.09911/e+.244063:-2.0064/(e*e*e)+1.9018/(e*e)+.24748/e+.23704;var r=-3*a*a+2.87*a-.275,n=a/r,o=(1-a-r)/r,i=[];return i[0]=3.24074*n-1.53726-.498571*o,i[1]=.969258*-n+1.87599+.0415557*o,i[2]=.0556352*n-.203996+1.05707*o,i[1]/=t,i}function t(t){var a={};return a=rt(),a.m_context=t,a.m_red=0,a.m_green=0,a.m_blue=0,a.shader_uniform=function(){return"uniform vec3 mul;                uniform vec2 a;                vec3 color_limite(vec3 src, float lum)                {                    vec3 vc = src - lum;                    vec3 fac = min(vec3(1.0 - lum) / max(vc, 0.00001), 1.0);                    vc = vc * min(fac.r, min(fac.g, fac.b));                    return vc + lum;                }"},a.shader_procession=function(){return"vec3 lsrc = max(src.rgb * vec3(1.0 / 12.82), pow((src.rgb + vec3(0.055)) * vec3(1.0 / 1.055), vec3(2.4)));                vec2 cod = textureCoordinate - 0.5;                float v = dot(a, cod * cod);                v = 1.0 / (1.0 + v);                lsrc *= mul * v * v;                float lum = dot(lsrc, vec3(0.299, 0.587, 0.114));                lsrc = mix(color_limite(lsrc, lum),vec3(1.0),step(1.0,lum));                src.rgb = min(lsrc * 12.82, pow(lsrc, vec3(1.0 / 2.4)) * vec3(1.055) - vec3(0.055));                dst = src;"},a.shader_setup=function(e){var t={},a=[this.m_red,this.m_green,this.m_blue];t.mul=a;var r=e.width,n=e.height,o=r*r*.25+n*n*.25,i=r*r/o,s=n*n/o;i*=this.m_vigFac*this.m_vigFac,s*=this.m_vigFac*this.m_vigFac;var l=[i,s];t.a=l,e.shader.uniforms(t)},a.init=function(t){var a=["color","temperature",0];t.assume_symbol("exposure");var r,n,o,i=t.fetch_float(.01,4);if(t.lookup_symbol(a,!0)){var s=t.fetch_float(1200,12e3);t.assume_symbol("tint");var l=t.fetch_float(.02,5),c=[];c=e(s,l),r=c[0],n=c[1],o=c[2]}else r=t.fetch_float(0,255)*(1/255),n=t.fetch_float(0,255)*(1/255),o=t.fetch_float(0,255)*(1/255),r=Math.max(r*(1/12.82),Math.pow((r+.055)*(1/1.055),2.4)),n=Math.max(n*(1/12.82),Math.pow((n+.055)*(1/1.055),2.4)),o=Math.max(o*(1/12.82),Math.pow((o+.055)*(1/1.055),2.4));r=1/r,n=1/n,o=1/o;var h=.299*r+.587*n+.114*o,d=i/h;this.m_red=r*d,this.m_green=n*d,this.m_blue=o*d,this.m_red=Math.min(this.m_red,16),this.m_green=Math.min(this.m_green,16),this.m_blue=Math.min(this.m_blue,16);var u=["focalLength","vignetting",0];if(t.lookup_symbol(u,!0)){var p=t.fetch_float(0,1);this.m_vigFac=20*p/12}else{var m=t.fetch_float(12,1600);this.m_vigFac=20/m}},a}return t}(),e}function Qe(e){var t=[$(),Ce(),L(),X(),j()];return ot(e,t,t.length)}function Ve(){var e={};return e.name="basicAdjust",e.create=function(){function e(){var e={};return e.name="colorBalance",e.create=function(){function e(e){var t,a,r,n={};return n=rt(),n.m_context=e,n.init=function(e){t=e.fetch_float(),a=e.fetch_float(),r=e.fetch_float()},n.shader_uniform=function(){return"uniform float redShift;                        uniform float greenShift;                        uniform float blueShift;                        float RGBToL(vec3 color)                        {                            float fmin = min(min(color.r, color.g), color.b);                            float fmax = max(max(color.r, color.g), color.b);                            return (fmax + fmin) / 2.0;                         }                        vec3 RGBToHSL(vec3 color)                        {                            vec3 hsl;                             float fmin = min(min(color.r, color.g), color.b);                            float fmax = max(max(color.r, color.g), color.b);                            float delta = fmax - fmin;                            hsl.z = (fmax + fmin) / 2.0;                            if (delta == 0.0)                            {                                hsl.x = 0.0;                                hsl.y = 0.0;                            }                            else                            {                                if (hsl.z < 0.5)                                    hsl.y = delta / (fmax + fmin);                                 else                                    hsl.y = delta / (2.0 - fmax - fmin);                                 float deltaR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;                                float deltaG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;                                float deltaB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;                                if (color.r == fmax )                                    hsl.x = deltaB - deltaG;                                else if (color.g == fmax)                                    hsl.x = (1.0 / 3.0) + deltaR - deltaB;                                else if (color.b == fmax)                                    hsl.x = (2.0 / 3.0) + deltaG - deltaR;                                if (hsl.x < 0.0)                                    hsl.x += 1.0;                                else if (hsl.x > 1.0)                                    hsl.x -= 1.0;                             }                            return hsl;                        }                        float HueToRGB(float f1, float f2, float hue)                        {                            if (hue < 0.0)                                hue += 1.0;                            else if (hue > 1.0)                                hue -= 1.0;                            float res;                            if ((6.0 * hue) < 1.0)                                res = f1 + (f2 - f1) * 6.0 * hue;                            else if ((2.0 * hue) < 1.0)                                res = f2;                            else if ((3.0 * hue) < 2.0)                                res = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;                            else                                res = f1;                            return res;                        }                        vec3 HSLToRGB(vec3 hsl)                        {                            vec3 rgb;                            if (hsl.y == 0.0)                                rgb = vec3(hsl.z);                            else                            {                                float f2;                                if (hsl.z < 0.5)                                    f2 = hsl.z * (1.0 + hsl.y);                                else                                    f2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);                                float f1 = 2.0 * hsl.z - f2;                                rgb.r = HueToRGB(f1, f2, hsl.x + (1.0/3.0));                                rgb.g = HueToRGB(f1, f2, hsl.x);                                rgb.b= HueToRGB(f1, f2, hsl.x - (1.0/3.0));                            }                            return rgb;                        }"},n.shader_procession=function(){return"float lightness = RGBToL(src.rgb);                        vec3 shift = vec3(redShift, greenShift, blueShift);                        const float a = 0.25;                        const float b = 0.333;                        const float scale = 0.7;                        vec3 midtones = (clamp((lightness - b) /  a + 0.5, 0.0, 1.0) * clamp ((lightness + b - 1.0) / -a + 0.5, 0.0, 1.0) * scale) * shift;                        vec3 newColor = src.rgb + midtones;                        newColor = clamp(newColor, 0.0, 1.0);                        vec3 newHSL = RGBToHSL(newColor);                        float oldLum = RGBToL(src.rgb);                        src.rgb = HSLToRGB(vec3(newHSL.x, newHSL.y, oldLum));                        dst = src;"},n.shader_setup=function(e){var n={};n.redShift=t,n.greenShift=a,n.blueShift=r,e.shader.uniforms(n)},n}return e}(),e}function t(){var e={};return e.name="hsl",e.create=function(){function e(e){var t,a,r,n={};return n=rt(),n.m_context=e,n.init=function(e){a=e.fetch_float(),t=e.fetch_float(),r=e.fetch_float()},n.shader_uniform=function(){return"uniform float saturation;                        uniform float hue;                        uniform float luminance;                        vec3 RGB2HSL(vec3 src)                        {                            float maxc = max(max(src.r, src.g), src.b);                            float minc = min(min(src.r, src.g), src.b);                            float L = (maxc + minc) / 2.0;                            if(maxc == minc)                                return vec3(0.0, 0.0, L);                            float H, S;                            float temp0 = maxc + minc, temp1 = maxc - minc;                            S = mix(temp1 / (2.0 - temp0), temp1 / temp0, step(L, 0.5));                            vec3 comp;                            comp.xy = vec2(equal(src.xy, vec2(maxc)));                            float comp_neg = 1.0 - comp.x;                            comp.y *= comp_neg;                            comp.z = (1.0 - comp.y) * comp_neg;                            float dif = maxc - minc;                            vec3 result = comp * vec3((src.g - src.b) / dif,                                2.0 + (src.b - src.r) / dif,                                4.0 + (src.r - src.g) / dif);                            H = result.x + result.y + result.z;                            H *= 60.0;                            H += step(H, 0.0) * 360.0;                            return vec3(H / 360.0, S, L);                        }                        vec3 HSL2RGB(vec3 src)                        {                            float q = (src.z < 0.5) ? src.z * (1.0 + src.y) : (src.z + src.y - (src.y * src.z));                            float p = 2.0 * src.z - q;                            vec3 dst = vec3(src.x + 0.333, src.x, src.x - 0.333);                            dst = fract(dst);                            vec3 weight = step(dst, vec3(1.0 / 6.0));                            vec3 weight_neg = 1.0 - weight;                            vec3 weight2 = weight_neg * step(dst, vec3(0.5));                            vec3 weight2_neg = weight_neg * (1.0 - weight2);                            vec3 weight3 = weight2_neg * step(dst, vec3(2.0 / 3.0));                            vec3 weight4 = (1.0 - weight3) * weight2_neg;                            float q_p = q - p;                            dst = mix(dst, p + q_p * 6.0 * dst, weight);                            dst = mix(dst, vec3(q), weight2);                            dst = mix(dst, p + q_p * ((2.0 / 3.0) - dst) * 6.0, weight3);                            dst = mix(dst, vec3(p), weight4);                            return dst;                        }                        vec3 adjustColor(vec3 src, float h, float s, float l)                        {                            src = RGB2HSL(src);                            src.x += h;                            src.y *= 1.0 + s;                            src.z *= 1.0 + l;                            return HSL2RGB(src);                        }"},n.shader_procession=function(){return"src.rgb = adjustColor(src.rgb, hue, saturation, luminance);                        dst = src;"},n.shader_setup=function(e){var n={};n.saturation=t,n.hue=a,n.luminance=r,e.shader.uniforms(n)},n}return e}(),e}function a(){var e={};return e.name="hsv",e.create=function(){function e(e){var t,a,r,n,o,i,s,l,c={};return c=rt(),c.m_context=e,c.init=function(e){t=e.fetch_float(),a=e.fetch_float(),r=e.fetch_float(),n=e.fetch_float(),o=e.fetch_float(),i=e.fetch_float(),e.test_symbol("special")?(s=1,l=0):(l=1,s=0)},c.shader_uniform=function(){return"uniform vec3 vColor1;                        uniform vec3 vColor2;                        uniform vec2 special;                        vec3 hsvAdjust(vec3 src, vec3 color1, vec3 color2)                        {                            float fmax = max(src.r,max(src.g,src.b));                            float fmin = min(src.r,min(src.g,src.b));                            float fdelta = fmax - fmin;                            float fs_off;                            vec3 hsv;                            hsv.z = fmax;                            if(0.0 == fdelta)                            {                                return src;                            }                            hsv.y = fdelta/fmax;                            if(fmax == src.r)                            {                                if(src.g >= src.b)                                {                                    hsv.x = (src.g - src.b)/fdelta;                                    fs_off = (color2.g - color1.r)*hsv.x + color1.r;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    clamp(hsv.y, 0.0, 1.0);                                    src.r = hsv.z;                                    src.b = hsv.z*(1.0 - hsv.y);                                    src.g = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                }                                else                                {                                    hsv.x = (src.r - src.b)/fdelta;                                    fs_off = (color1.r - color2.r)*hsv.x + color2.r;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    clamp(hsv.y, 0.0, 1.0);                                    src.r = hsv.z;                                    src.g = hsv.z*(1.0 - hsv.y);                                    src.b = hsv.z*(1.0 - hsv.y*hsv.x);                                }                            }                            else if(fmax == src.g)                            {                                if(src.r > src.b)                                {                                    hsv.x = (src.g - src.r)/fdelta;                                    fs_off = (color1.g - color2.g)*hsv.x + color2.g;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    clamp(hsv.y, 0.0, 1.0);                                    src.g = hsv.z;                                    src.r = hsv.z*(1.0 - hsv.y*hsv.x);                                    src.b = hsv.z*(1.0 - hsv.y);                                }                                else                                {                                    hsv.x = (src.b - src.r)/fdelta;                                    fs_off = (color2.b - color1.g)*hsv.x + color1.g;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    clamp(hsv.y, 0.0, 1.0);                                    src.g = hsv.z;                                    src.r = hsv.z*(1.0 - hsv.y);                                    src.b = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                }                            }                            else                            {                                if(src.g > src.r)                                {                                    hsv.x = (src.b - src.g)/fdelta;                                    fs_off = (color1.b - color2.b)*hsv.x + color2.b;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    clamp(hsv.y, 0.0, 1.0);                                    src.b = hsv.z;                                    src.r = hsv.z*(1.0 - hsv.y);                                    src.g = hsv.z*(1.0 - hsv.y*hsv.x);                                }                                else                                {                                    hsv.x = (src.r - src.g)/fdelta;                                    fs_off = (color2.r - color1.b)*hsv.x + color1.b;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    clamp(hsv.y, 0.0, 1.0);                                    src.b = hsv.z;                                    src.r = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                    src.g = hsv.z*(1.0 - hsv.y);                                }                            }                            return src;                        }"},c.shader_procession=function(){return"src.rgb = hsvAdjust(src.rgb, vColor1, vColor2);                        dst = src;"},c.shader_setup=function(e){var s={};s.vColor1=[t,a,r],s.vColor2=[n,o,i],e.shader.uniforms(s)},c}return e}(),e}function r(){var e={};return e.name="hue",e.create=function(){function e(e){var t,a={};return a=rt(),a.m_context=e,a.init=function(e){t=e.fetch_float()},a.shader_uniform=function(){return"uniform float hueAdjust;                        vec3 rgb2yiq(vec3 src)                        {                            return src * mat3(0.299, 0.587, 0.114,                                    0.595716, -0.274453, -0.321263,                                    0.211456, -0.522591, 0.31135);                        }                        vec3 yiq2rgb(vec3 src)                        {                            return src * mat3(1.0, 0.9563, 0.6210,                                    1.0, -0.2721, -0.6474,                                    1.0, -1.1070, 1.7046);                        }"},a.shader_procession=function(){return"vec4 color =src;                        vec3 yiq = rgb2yiq(color.rgb);                        float hue = atan(yiq.z, yiq.y);                        float chroma = length(yiq.yz);                        hue -= hueAdjust;                        yiq.yz = vec2(cos(hue), sin(hue)) * chroma;                        dst = vec4(yiq2rgb(yiq), color.a);                        "},a.shader_setup=function(e){var a={};a.hueAdjust=t,e.shader.uniforms(a)},a}return e}(),e}function n(){var e={};return e.name="monoChrome",e.create=function(){function e(e){var t,a,r,n,o,i,s={};return s=rt(),s.m_context=e,s.init=function(e){t=e.fetch_float(),a=e.fetch_float(),r=e.fetch_float(),n=e.fetch_float(),o=e.fetch_float(),i=e.fetch_float()},s.shader_uniform=function(){return"uniform float red;                        uniform float green;                        uniform float blue;                        uniform float cyan;                        uniform float magenta;                        uniform float yellow;"},s.shader_procession=function(){return"float maxc = max(max(src.r, src.g), src.b);                        float minc = min(min(src.r, src.g), src.b);                        float midc = src.r + src.g + src.b - maxc - minc;                        if(maxc == minc)                            gl_FragColor = src;                        vec3 ratioMax, ratioMin;                        ratioMax.xy = vec2(equal(src.rg, vec2(maxc)));                        float max_neg = 1.0 - ratioMax.x;                        ratioMax.y *= max_neg;                        ratioMax.z = (1.0 - ratioMax.y) * max_neg;                        vec3 compMax = vec3(red, green, blue) * ratioMax;                        ratioMin.xy = vec2(equal(src.rg, vec2(minc)));                        float min_neg = 1.0 - ratioMin.x;                        ratioMin.y *= min_neg;                        ratioMin.z = (1.0 - ratioMin.y) * min_neg;                        vec3 compMaxMid = vec3(cyan, magenta, yellow) * ratioMin;                        float total = (compMax.x + compMax.y + compMax.z) * (maxc - midc) + (compMaxMid.x + compMaxMid.y + compMaxMid.z) * (midc - minc) + minc;                        dst = vec4(total, total, total, 1.0);                        "},s.shader_setup=function(e){var s={};s.red=t,s.green=a,s.blue=r,s.cyan=n,s.magenta=o,s.yellow=i,e.shader.uniforms(s)},s}return e}(),e}function o(){var e={};return e.name="saturation",e.create=function(){function e(e){var t,a={};return a=rt(),a.m_context=e,a.init=function(e){t=e.fetch_float()},a.shader_uniform=function(){return"uniform float intensity;"},a.shader_procession=function(){return"float lum = (max(max(src.r, src.g),src.b) + min(min(src.r, src.g), src.b)) / 2.0;                        dst = vec4(mix(vec3(lum), src.rgb, intensity), src.a);"},a.shader_setup=function(e){var a={};a.intensity=t,e.shader.uniforms(a)},a}return e}(),e}function i(){var e={};return e.name="whiteBalance",e.create=function(){function e(e){var t,a,r={};return r=rt(),r.m_context=e,r.init=function(e){t=e.fetch_float(),t=5400*t+6500,a=e.fetch_float()},r.shader_uniform=function(){return"uniform float temperature;                        uniform float tint;                        vec3 whiteBalance(vec3 src, float temp, float tint)                        {                            temp = clamp(temp, 1200.0, 12000.0);                            tint = clamp(tint, 0.02, 5.0);                            float xD;                            temp /= 1000.0;                            if(temp < 4.0)                                xD = 0.27475 / (temp * temp * temp) - 0.98598 / (temp * temp) + 1.17444 / temp + 0.145986;                            else if(temp < 7.0)                                xD = -4.6070 / (temp * temp * temp) + 2.9678 / (temp * temp) + 0.09911 / temp + 0.244063;                            else xD = -2.0064 / (temp * temp * temp) + 1.9018 / (temp * temp) + 0.24748 / temp + 0.237040;                            float yD = -3.0 * xD * xD + 2.87 * xD - 0.275;                            float X = xD / yD;                            float Z = (1.0 - xD - yD) / yD;                            vec3 color;                            color.r = X * 3.24074 - 1.53726 - Z * 0.498571;                            color.g = -X * 0.969258 + 1.87599 + Z * 0.0415557;                            color.b = X * 0.0556352 - 0.203996 + Z * 1.05707;                            color.g /= tint;                            color /= max(max(color.r, color.g), color.b);                            color = 1.0 / color;                            color /= color.r * 0.299 + color.g * 0.587 + color.b * 0.114;                            return src * color;                        }                        vec3 map_color(vec3 src, float lum)                        {                            vec3 h = src - lum;                            if(src.r > 1.0)                            {                                float tmp = 1.0 - lum;                                h.g = h.g * tmp / h.r;                                h.b = h.b * tmp / h.r;                                h.r = tmp;                            }                            float t3r = h.b + lum;                            if(t3r < -0.00003)                            {                                src.rg = lum - h.rg * lum / h.b;                                src.b = 0.0;                            }                            else                            {                                src.rg = lum + h.rg;                                src.b = t3r;                            }                            return src;                        }                        vec3 dispatch(vec3 src)                        {                            float lum = dot(src, vec3(0.299, 0.587, 0.114));                            if(src.g > src.b)                            {                                if(src.r > src.g)                                {                                    src = map_color(src, lum);                                }                                else if(src.r > src.b)                                {                                    src.grb = map_color(src.grb, lum);                                }                                else                                {                                    src.gbr = map_color(src.gbr, lum);                                }                            }                            else                            {                                if(src.g > src.r)                                {                                    src.bgr = map_color(src.bgr, lum);                                }                                else if(src.b > src.r)                                {                                    src.brg = map_color(src.brg, lum);                                }                                else                                {                                    src.rbg = map_color(src.rbg, lum);                                }                            }                            return src;                        }                        "},r.shader_procession=function(){return"src.rgb = dispatch(whiteBalance(src.rgb, temperature, tint));                        dst = src;"},r.shader_setup=function(e){var r={};r.temperature=t,r.tint=a,e.shader.uniforms(r)},r}return e}(),e}function s(){var e={};return e.name="colorMul",e.create=function(){function e(e){var t,a=[0,0,0,0,0,0,0,0,0],r={};return r=rt(),r.m_context=e,r.init=function(e){a=[0,0,0,0,0,0,0,0,0];var r=["float","vector","mat",0];switch(t="BPSSymbol"==e.get_parcer_status()?e.lookup_symbol(r,!0):2){case 0:a[0]=e.fetch_float(),a[4]=a[0],a[8]=a[0];break;case 1:a[0]=e.fetch_float(),a[4]=e.fetch_float(),a[8]=e.fetch_float();break;case 2:for(var n=0;9!=n;++n)a[n]=e.fetch_float()}},r.shader_uniform=function(){return"uniform mat3 cmul;"},r.shader_procession=function(){return"src.rgb *= cmul;                        dst = vec4(src.rgb, src.a);"},r.shader_setup=function(e){var t={};t.cmul=a,e.shader.uniforms(t)},r}return e}(),e}function l(){var e={};return e.name="mosaic",e.create=function(){function e(e){var t,a,r=0,n=0,o=e,i=0,s=0,l={};return l=rt(),l.destroy=function(){r&&r.destroy(),this.size_change()},l.size_change=function(e,t){n&&(o.context().deleteTexture(n),n=0)},l.init=function(e){t=0;var a,r,n=["edge","widthHeight",0],o=e.lookup_symbol(n,!0);return o?(a=Math.floor(e.fetch_float()+.5),r=Math.floor(e.fetch_float()+.5)):a=r=t=Math.floor(e.fetch_float()+.5),{w:a,h:r}},l.gpu_process=function(l,c,h){try{a=at(c),r||(r=re(!0,e));var d=this.init(l);t&&(h.m_width>h.m_height?(d.h=t,d.w=t*h.m_width/h.m_height):(d.w=t,d.h=t*h.m_height/h.m_width)),i==d.w&&s==d.h||(i=d.w,s=d.h,n&&(o.context().deleteTexture(n),n=0)),n||(n=lt(i,s,!1));var u=c.current();o.context().bindTexture(o.context().TEXTURE_2D,u),o.context().texParameteri(o.context().TEXTURE_2D,o.context().TEXTURE_MIN_FILTER,o.context().NEAREST),o.context().texParameteri(o.context().TEXTURE_2D,o.context().TEXTURE_MAG_FILTER,o.context().NEAREST),r.gpu_process(n,u,i,s,h.m_frame_buffer),o.context().bindTexture(o.context().TEXTURE_2D,u),o.context().texParameteri(o.context().TEXTURE_2D,o.context().TEXTURE_MIN_FILTER,o.context().LINEAR),o.context().texParameteri(o.context().TEXTURE_2D,o.context().TEXTURE_MAG_FILTER,o.context().LINEAR),r.gpu_process(u,n,h.m_width,h.m_height,h.m_frame_buffer),a.destroy()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{a.destroy()}},l}return e}(),e}function c(){var e={};return e.name="simplyMosaic",e.create=function(){function e(e){function t(e){o>e.width/3&&(o=30);var t={};t.blurPixels=o,t.samplerSteps=[1/e.width,1/e.height],e.shader.uniforms(t)}var a,r=e,n=0,o=0,i={};return i=rt(),i.destroy=function(){n&&(n.destroy(),n=0)},i.init=function(e,t,a){e.assume_symbol("radius"),o=e.test_symbol("relToWidth")?e.fetch_float(0,1)*t:e.fetch_float()},i.gpu_process=function(e,o,i){try{a=at(o),this.init(e,i.m_width,i.m_height),n||(n=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform vec2 samplerSteps;                    uniform float intensity;                    uniform float blurPixels;                    void main()                    {                        vec2 coord = floor(textureCoordinate / samplerSteps / blurPixels) * samplerSteps * blurPixels;                        vec4 src = texture2D(inputImageTexture, textureCoordinate);                        vec4 mosaic = texture2D(inputImageTexture, coord + samplerSteps * 0.5);                        gl_FragColor = vec4(mosaic.rgb,src.a);}",r.m_context));var s=nt(r.m_context,i,n);if(s.shader_texture("inputImageTexture",o.current()),t(s),s.draw_to(o.new_temporary()),r.m_context.getError())throw new error("CGEPTPTemplate::gpu_process");o.push_to_current(),a.destroy()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{a.destroy()}},i}return e}(),e}function h(){var e={};return e.name="halfTone",e.create=function(){function e(e){function t(e,t){var a=new Uint8Array(e*t*4);if(!a)return{low:.2,fac:1.4};r.context().readPixels(0,0,e,t,r.context().RGBA,r.context().UNSIGNED_BYTE,a);for(var n=new Array(256),o=0;o<256;++o)n[o]=0;for(var i=e*t,o=0;o!=i;++o){var s=.299*a[4*o]+.587*a[4*o+1]+.114*a[4*o+2];++n[Math.floor(s)]}for(var o=1;256!=o;++o)n[o]+=n[o-1];for(var l=0,o=0;256!=o;++o)if(n[o]/n[255]>.1){l=o;break}for(var c=255,o=255;o>0;--o)if((n[255]-n[o])/n[255]>.1){c=o;break}var h=255/Math.max(c-l,.01);return l/=255,a=null,{low:l,range:h}}var a,r=e,n=0,o={};return o=rt(),o.destroy=function(){n&&(n.destroy(),n=0)},o.shader_setup=function(e,t,a){var r=e.height,n=e.width,o=r>n?502.65/r:502.65/n,i=2*Math.sin(o/2);i/=o;var s=[];s[0]=1/e.width,s[1]=1/e.height;var l={};l.al=i,l.scale=o,l.halfToneVars=[t,a],l.vSteps=s,e.shader.uniforms(l)},o.gpu_process=function(e,o,i){try{a=at(o),n||(n=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform vec2 halfToneVars;                    uniform vec2 vSteps;                    uniform float scale;                    uniform float al;                    void main()                    {                        vec4 src = texture2D(inputImageTexture, textureCoordinate);                        vec2 gradient = textureCoordinate / vSteps;                        float lum = dot(src.rgb, vec3(0.299, 0.587, 0.114));                        float alfx = sin(gradient.x*scale)*al;                        float alfy = sin(gradient.y*scale)*al;                        float fa = alfx *alfy*0.1668 + 0.8333;                        lum = lum*fa;                        lum = (lum - halfToneVars.x)*halfToneVars.y;                        src.rgb = mix(vec3(0.3137, 0.1569, 0.6275), vec3(1.0, 1.0, 0.0), lum);                        src.a = 1.0;                        gl_FragColor = src;                    }",r.context()));var s=nt(r.context(),i,n);s.shader_texture("inputImageTexture",o.current());var l=t(s.width,s.height);if(this.shader_setup(s,l.low,l.range),s.draw_to(o.new_temporary()),r.context().getError())throw new error("CGEPTPTemplate::gpu_process");o.push_to_current(),a.destroy()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{a.destroy()}},o}return e}(),e}function d(){var e={};return e.name="vignette",e.create=function(){function e(e){var t,a,r,n={};return n=rt(),n.m_context=e,n.init=function(e){t=e.fetch_float(),a=e.fetch_float(),r=e.test_symbol("factor")?e.fetch_float():1},n.shader_uniform=function(){return"uniform vec2 vignette;                        uniform vec2 vignetteCenter;                        uniform float factor;"},n.shader_procession=function(){return"float d = distance(textureCoordinate, vignetteCenter);                        float percent = clamp((d - vignette.x) / vignette.y, 0.0, 1.0);                        float alpha = (1.0 - percent*percent)*factor;                        dst = vec4(src.rgb * alpha, src.a);"},n.shader_setup=function(e){var n={};n.vignetteCenter=[.5,.5],n.vignette=[t,a],n.factor=r,e.shader.uniforms(n)},n}return e}(),e}function u(){var e={};return e.name="vignetteAdjust",e.create=function(){function e(e){var t,a,r,n,o=[],i={};return i=rt(),i.m_context=e,i.init=function(e){t=e.fetch_float(),a=e.fetch_float(),e.assume_symbol("color"),o[0]=e.fetch_float(0,255),o[1]=e.fetch_float(0,255),o[2]=e.fetch_float(0,255),o[3]=e.fetch_float(0,255),e.assume_symbol("intensity"),r=e.fetch_float(),n=0,e.test_symbol("round")&&(n=e.fetch_float())},i.shader_uniform=function(){return"uniform vec2 vignette;                                uniform vec2 vignetteCenter;                                uniform vec4 vignetteColor;                                uniform float intensity;                                uniform float vignette_roundness;                                uniform vec2 size;"},i.shader_procession=function(){return"vec2 dist = textureCoordinate - vignetteCenter;                                float scalex = mix(1.0, max(1.0, size.x / size.y), vignette_roundness);                                float scaley = mix(1.0, max(1.0, size.y / size.x), vignette_roundness);                                vec2 size_weight = vec2(scalex, scaley);                                dist += dist*(size_weight - 1.0)*float(vignette_roundness >= 0.0);                                float order_norm = 1.0 / mix(0.5, 0.05, max(0.0, -vignette_roundness));                                float dist_norm = pow(pow(abs(dist.x), order_norm) + pow(abs(dist.y), order_norm), 1.0 / order_norm);                                float percent = clamp((dist_norm - vignette.x) / vignette.y, 0.0, 1.0);                                percent = percent * percent * (3.0 - 2.0 * percent);                                float alpha = 1.0 *intensity*percent;                                dst = vec4(vec3(vignetteColor.xyz),alpha);"},i.shader_setup=function(e){var i={};i.vignetteCenter=[.5,.5],i.vignette=[t,a],i.vignetteColor=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],i.intensity=r,i.vignette_roundness=n,i.size=[e.width,e.height],e.shader.uniforms(i)},i}return e}(),e}function p(){var e={};return e.name="redeyeRemove",e.create=function(){function e(e){var t,a,r,n=[],o={};return o=rt(),o.m_context=e,o.init=function(e){var o=["relativePosition","realPosition",0];r="BPSSymbol"==e.get_parcer_status()?e.lookup_symbol(o,!0):0,n[0]=e.fetch_float(),n[1]=e.fetch_float(),t=e.fetch_float(),a=e.fetch_float()},o.shader_uniform=function(){return"uniform vec2 samplerSteps;                        uniform vec2 eyePosition;                        uniform float radius;                        uniform float alpha;"},o.shader_procession=function(){return"vec2 realPosition = textureCoordinate / samplerSteps;                        float dis1 = distance(realPosition,eyePosition);                        vec4 color = src;                        if(dis1 >= radius)                        {                            dst = color;                        }                        else                        {                            vec3 v = color.rgb;                            v.r = (color.g + color.b) / 2.0;                            v.g = (color.g + color.r) / 2.0;                            v.b = (color.b + color.r) / 2.0;                            float vecR = color.r - v.r;                            float vecG = color.g - v.g;                            float vecB = color.b - v.b;                                                        float r1 = v.r+vecR*pow(dis1/radius,1.5);                            float g1 = v.g+vecG*pow(dis1/radius,1.5);                            float b1 = v.b+vecB*pow(dis1/radius,1.5);                            dst = vec4(r1,g1,b1,color.a);                        }"},o.shader_setup=function(e){var o=[];switch(r){case 0:o[0]=n[0]*e.width,o[1]=n[1]*e.height;break;case 1:o[0]=n[0],o[1]=n[1];break;default:throw new error("Unexpected Redeye Remove Model!\n")}var i={};i.samplerSteps=[1/e.width,1/e.height],i.eyePosition=[o[0],o[1]],i.radius=t,i.alpha=a,e.shader.uniforms(i)},o}return e}(),e}function m(){var e={};return e.name="special",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.init=function(e){},t.shader_uniform=function(){return"const float fh_red = 0.1;                        const float fh_yellow = -0.7;                        const float fh_green = -0.7;                        const float fh_cyan = -0.7;                        const float fh_blue = -0.7;                        const float fh_magenta = 0.1;"},t.shader_procession=function(){return"vec3 dst3;                        vec3 hsv;                        vec3 tmp_s;                        float fmax;                        float fmin;                        float fdelta;                        float fs_off;                        dst3 = src.rgb;                        fmax = max(dst3.r,max(dst3.g,dst3.b));                        fmin = min(dst3.r,min(dst3.g,dst3.b));                        fdelta = fmax - fmin;                        hsv.z = fmax;                        if(0.0 == fdelta)                        {                            hsv.x = 0.0;                            hsv.y = 0.0;                            tmp_s = dst3;                        }                        else                        {                            hsv.y = fdelta/fmax;                            if(fmax == dst3.r)                            {                                if(dst3.g >= dst3.b)                                {                                    hsv.x = (dst3.g - dst3.b)/fdelta;                                    fs_off = (fh_yellow - fh_red)*hsv.x + fh_red;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    hsv.y = min(1.0 , hsv.y);                                    hsv.y = max(0.0 , hsv.y);                                    dst3.r = hsv.z;                                    dst3.b = hsv.z*(1.0 - hsv.y);                                    dst3.g = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                    tmp_s = dst3;                                    hsv.x = 0.658325;                                    dst3.r = hsv.z;                                    dst3.b = hsv.z*(1.0 - hsv.y);                                    dst3.g = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                }                                else                                {                                    hsv.x = (dst3.r - dst3.b)/fdelta;                                    fs_off = (fh_red - fh_magenta)*hsv.x + fh_magenta;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    hsv.y = min(1.0 , hsv.y);                                    hsv.y = max(0.0 , hsv.y);                                    dst3.r = hsv.z;                                    dst3.g = hsv.z*(1.0 - hsv.y);                                    dst3.b = hsv.z*(1.0 - hsv.y*hsv.x);                                    tmp_s = dst3;                                    hsv.x = 0.658325;                                    dst3.r = hsv.z;                                    dst3.g = hsv.z*(1.0 - hsv.y);                                    dst3.b = hsv.z*(1.0 - hsv.y*hsv.x);                                }                            }                            else if(fmax == dst3.g)                            {                                if(dst3.r > dst3.b)                                {                                    hsv.x = (dst3.g - dst3.r)/fdelta;                                    fs_off = (fh_green - fh_yellow)*hsv.x + fh_yellow;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    hsv.y = min(1.0 , hsv.y);                                    hsv.y = max(0.0 , hsv.y);                                    dst3.g = hsv.z;                                    dst3.r = hsv.z*(1.0 - hsv.y*hsv.x);                                    dst3.b = hsv.z*(1.0 - hsv.y);                                    tmp_s = dst3;                                    hsv.x = 0.658325;                                    dst3.g = hsv.z;                                    dst3.r = hsv.z*(1.0 - hsv.y*hsv.x);                                    dst3.b = hsv.z*(1.0 - hsv.y);                                }                                else                                {                                    hsv.x = (dst3.b - dst3.r)/fdelta;                                    fs_off = (fh_cyan - fh_green)*hsv.x + fh_green;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    hsv.y = min(1.0 , hsv.y);                                    hsv.y = max(0.0 , hsv.y);                                    dst3.g = hsv.z;                                    dst3.r = hsv.z*(1.0 - hsv.y);                                    dst3.b = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                    tmp_s = dst3;                                    hsv.x = 0.658325;                                    dst3.g = hsv.z;                                    dst3.r = hsv.z*(1.0 - hsv.y);                                    dst3.b = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                }                            }                            else                            {                                if(dst3.g > dst3.r)                                {                                    hsv.x = (dst3.b - dst3.g)/fdelta;                                    fs_off = (fh_blue - fh_cyan)*hsv.x + fh_cyan;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    hsv.y = min(1.0 , hsv.y);                                    hsv.y = max(0.0 , hsv.y);                                    dst3.b = hsv.z;                                    dst3.r = hsv.z*(1.0 - hsv.y);                                    dst3.g = hsv.z*(1.0 - hsv.y*hsv.x);                                    tmp_s = dst3;                                    hsv.x = 0.658325;                                    dst3.b = hsv.z;                                    dst3.r = hsv.z*(1.0 - hsv.y);                                    dst3.g = hsv.z*(1.0 - hsv.y*hsv.x);                                }                                else                                {                                    hsv.x = (dst3.r - dst3.g)/fdelta;                                    fs_off = (fh_magenta - fh_blue)*hsv.x + fh_blue;                                    hsv.y = hsv.y*(1.0 + fs_off);                                    hsv.y = min(1.0 , hsv.y);                                    hsv.y = max(0.0 , hsv.y);                                    dst3.b = hsv.z;                                    dst3.r = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                    dst3.g = hsv.z*(1.0 - hsv.y);                                    tmp_s = dst3;                                    hsv.x = 0.658325;                                    dst3.b = hsv.z;                                    dst3.r = hsv.z*(1.0 - hsv.y + hsv.y*hsv.x);                                    dst3.g = hsv.z*(1.0 - hsv.y);                                }                            }                        }                        dst3.r = hsv.z;                        dst3.g = hsv.z*(1.0 - hsv.y);                        dst3.b = hsv.z*(1.0 - hsv.y*hsv.x);                        dst3 = tmp_s * 0.69 + dst3 * 0.31;                        dst = vec4(dst3,src.a);"},t.shader_setup=function(e){},t}return e}(),e}function f(){var e={};return e.name="darkEngraving",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.init=function(e){},t.shader_uniform=function(){return"uniform vec2 vSteps;                        const float intensity = 0.45;                        float getLum(vec3 src)                        {                            return dot(src, vec3(0.299, 0.587, 0.114));                        }"},t.shader_procession=function(){return"mat3 m;                        m[0][0] = getLum(texture2D(inputImageTexture, textureCoordinate - vSteps).rgb);                        m[0][1] = getLum(texture2D(inputImageTexture, textureCoordinate - vec2(0.0, vSteps.y)).rgb);                        m[0][2] = getLum(texture2D(inputImageTexture, textureCoordinate + vec2(vSteps.x, -vSteps.y)).rgb);                        m[1][0] = getLum(texture2D(inputImageTexture, textureCoordinate - vec2(vSteps.x, 0.0)).rgb);                        m[1][1] = getLum(src.rgb);                        m[1][2] = getLum(texture2D(inputImageTexture, textureCoordinate + vec2(vSteps.x, 0.0)).rgb);                        m[2][0] = getLum(texture2D(inputImageTexture, textureCoordinate + vec2(-vSteps.x, vSteps.y)).rgb);                        m[2][1] = getLum(texture2D(inputImageTexture, textureCoordinate + vec2(0.0, vSteps.y)).rgb);                        m[2][2] = getLum(texture2D(inputImageTexture, textureCoordinate + vSteps).rgb);                        float nx = m[0][0] + m[0][1] + m[0][2] - m[2][0] - m[2][1] - m[2][2];                        float ny = m[0][0] + m[1][0] + m[2][0] - m[0][2] - m[1][2] - m[2][2];                        float ndl = abs(nx + ny + intensity);                        float shade = 0.0;                        float norm = (nx * nx + ny * ny + intensity * intensity);                        shade = (ndl * 0.577) / sqrt(norm);                        dst = vec4(src.rgb * shade, src.a);"},t.shader_setup=function(e){var t=[];t[0]=1/e.width,t[1]=1/e.height;var a={};a.vSteps=t,e.shader.uniforms(a)},t}return e}(),e}function g(){var e={};return e.name="embossed",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.init=function(e){},t.shader_uniform=function(){return"uniform vec2 vSteps;                        const float intensity = 0.45;                        float getLum(vec3 src)                        {                            return dot(src, vec3(0.299, 0.587, 0.114));                        }"},t.shader_procession=function(){return"mat3 m;                        m[0][0] = getLum(texture2D(inputImageTexture, textureCoordinate - vSteps).rgb);                        m[0][1] = getLum(texture2D(inputImageTexture, textureCoordinate - vec2(0.0, vSteps.y)).rgb);                        m[0][2] = getLum(texture2D(inputImageTexture, textureCoordinate + vec2(vSteps.x, -vSteps.y)).rgb);                        m[1][0] = getLum(texture2D(inputImageTexture, textureCoordinate - vec2(vSteps.x, 0.0)).rgb);                        m[1][1] = getLum(src.rgb);                        m[1][2] = getLum(texture2D(inputImageTexture, textureCoordinate + vec2(vSteps.x, 0.0)).rgb);                        m[2][0] = getLum(texture2D(inputImageTexture, textureCoordinate + vec2(-vSteps.x, vSteps.y)).rgb);                        m[2][1] = getLum(texture2D(inputImageTexture, textureCoordinate + vec2(0.0, vSteps.y)).rgb);                        m[2][2] = getLum(texture2D(inputImageTexture, textureCoordinate + vSteps).rgb);                        float nx = m[0][0] + m[0][1] + m[0][2] - m[2][0] - m[2][1] - m[2][2];                        float ny = m[0][0] + m[1][0] + m[2][0] - m[0][2] - m[1][2] - m[2][2];                        float ndl = abs(nx + ny + intensity);                        float shade = 0.0;                        float norm = (nx * nx + ny * ny + intensity * intensity);                        shade = (ndl * 0.577) / sqrt(norm);                        dst = vec4(vec3(shade), src.a);"},t.shader_setup=function(e){var t=[];t[0]=1/e.width,t[1]=1/e.height;var a={};a.vSteps=t,e.shader.uniforms(a)},t}return e}(),e}function v(){var e={};return e.name="initialized",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.init=function(e){},t.shader_uniform=function(){return"                        vec3 blend(vec3 src1, vec3 src2, float alpha)                        {                            return mix(src1, src2, alpha);                        }"},t.shader_procession=function(){return"dst.xyz = blend(vec3(1.0, 1.0, 1.0), src.xyz, src.w);                        dst.w = 1.0;"},t.shader_setup=function(e){},t}return e}(),e}function b(){var e={};return e.name="gaussianBlur",e.create=function(){function e(e){function t(e){r=e.fetch_float(),n=e.fetch_float()}function a(e,t,a){var o={};o.samplerSteps=[1/t,1/a],o.radius=r,o.sigma=n,e.shader.uniforms(o)}var r,n,o,i=0,s=0,l=e,c={};return c.destroy=function(){i&&(i.destroy(),i=0),s&&(s.destroy(),s=0)},c.gpu_process=function(e,r,n){try{o=at(r),t(e),i||(i=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform vec2 samplerSteps;                    uniform float radius;                    uniform float sigma;                    float random(vec3 scale, float seed) {                        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);                    }                    float sigma_s = 3.0;                    vec4 guidedFilter(vec2 uv)                    {                        float res_w = 1.0;                        vec3 center_g = texture2D(inputImageTexture, uv).rgb;                        float sigma_i = 0.5 / sigma / sigma;                        float offset2 = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        float offset = random(vec3(151.7182, 12.9898, 78.233), 0.0);                        for (float i = -16.0; i <= 16.0; i++) {                        vec2 coord_sample = uv + vec2(float(i) + offset - 0.5, offset2 - 0.5)*samplerSteps*radius / 16.0;                        vec3 tmp_g = texture2D(inputImageTexture, coord_sample).rgb;                        vec3 diff_g = (tmp_g - center_g);                        float tmp_w = exp(-(i*i)*sigma_i);                        center_g += tmp_w*tmp_g;                        res_w += tmp_w;                    }                        vec4 res = vec4(center_g / res_w,res_w/16.0);                        return res;                    }                    void main() {                        vec4 res_t = guidedFilter(textureCoordinate);                        gl_FragColor = res_t;                    }",l.context())),s||(s=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform vec2 samplerSteps;                    uniform float radius;                    uniform float sigma;                    float random(vec3 scale, float seed) {                        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);                    }                    float sigma_s = 3.0;                    vec4 guidedFilter(vec2 uv)                    {                        float res_w = 1.0;                        vec3 center_g = texture2D(inputImageTexture, uv).rgb;                        float sigma_i = 0.5 / sigma / sigma;                        float offset2 = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        float offset = random(vec3(151.7182, 12.9898, 78.233), 0.0);                        for (float i = -16.0; i <= 16.0; i++) {                        vec2 coord_sample = uv + vec2(offset - 0.5, float(i) + offset2 - 0.5)*samplerSteps*radius/16.0;                        float tmp_h = texture2D(inputImageTexture, coord_sample).a;                        vec3 tmp_g = texture2D(inputImageTexture, coord_sample).rgb;                        vec3 diff_g = (tmp_g - center_g);                        float tmp_w = exp(-(i*i)*sigma_i)*tmp_h;                        center_g += tmp_w*tmp_g;                        res_w += tmp_w;                    }                        vec4 res = vec4(center_g / res_w, 1.0);                        return res;                    }                    void main() {                        vec4 res_t = guidedFilter(textureCoordinate);                        gl_FragColor = res_t;                    }",l.context()));var c=nt(l.context(),n,i);if(c.shader_texture("inputImageTexture",r.current()),a(c,c.width,c.height),c.draw_to(r.new_temporary()),l.context().getError())throw new error("CGEPTPTemplate::gpu_process");r.push_to_current();var h=nt(l.context(),n,s);if(h.shader_texture("inputImageTexture",r.current()),a(h,h.width,h.height),h.draw_to(r.new_temporary()),l.context().getError())throw new error("CGEPTPTemplate::gpu_process");r.push_to_current(),o.destroy()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{o.destroy()}},c}return e}(),e}function _(){var e={};return e.name="colorMatf",e.create=function(){function e(e){var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a={};return a=rt(),a.m_context=e,a.init=function(e){for(var a=0;16!=a;++a)t[a]=e.fetch_float()},a.shader_uniform=function(){return"uniform mat4 cmul;"},a.shader_procession=function(){return"src *= cmul;                        dst = src;"},a.shader_setup=function(e){var a={};a.cmul=t,e.shader.uniforms(a)},a}return e}(),e}function y(){var e={};return e.name="noise",e.create=function(){function e(e){var t=0,a=0,r={};return r=rt(),r.m_context=e,r.init=function(e){t=e.fetch_float(),a=e.fetch_float()+.2},r.shader_uniform=function(){return"uniform vec2 imgSize;                        uniform float scale;                        uniform float grain_amount;                        uniform float grain_size;                        const float timer = 1.0;                        const float intensity = 0.5;                        const float permTexUnit = 1.0 / 256.0;                        const float permTexUnitHalf = 0.5 / 256.0;                        const vec3 lumcoeff = vec3(0.299, 0.587, 0.114);                        vec4 rnm(in vec2 tc) {                            float noise = sin(dot(tc + vec2(timer), vec2(12.9898, 78.233))) * 43758.5453;                            return fract(vec4(1.0, 1.2154, 1.3453, 1.3647) * noise) * 2.0 - 1.0;                        }                        float fade(in float t) {                            return t*t*t*(t*(t*6.0 - 15.0) + 10.0);                        }                        float pnoise3D(in vec3 p) {                            vec3 pi = permTexUnit*floor(p) + permTexUnitHalf;                            vec3 pf = fract(p);                            float perm00 = rnm(pi.xy).a;                            vec3  grad000 = rnm(vec2(perm00, pi.z)).rgb * 4.0 - 1.0;                            float n000 = dot(grad000, pf);                            vec3  grad001 = rnm(vec2(perm00, pi.z + permTexUnit)).rgb * 4.0 - 1.0;                            float n001 = dot(grad001, pf - vec3(0.0, 0.0, 1.0));                            float perm01 = rnm(pi.xy + vec2(0.0, permTexUnit)).a;                            vec3  grad010 = rnm(vec2(perm01, pi.z)).rgb * 4.0 - 1.0;                            float n010 = dot(grad010, pf - vec3(0.0, 1.0, 0.0));                            vec3  grad011 = rnm(vec2(perm01, pi.z + permTexUnit)).rgb * 4.0 - 1.0;                            float n011 = dot(grad011, pf - vec3(0.0, 1.0, 1.0));                            float perm10 = rnm(pi.xy + vec2(permTexUnit, 0.0)).a;                            vec3  grad100 = rnm(vec2(perm10, pi.z)).rgb * 4.0 - 1.0;                            float n100 = dot(grad100, pf - vec3(1.0, 0.0, 0.0));                            vec3  grad101 = rnm(vec2(perm10, pi.z + permTexUnit)).rgb * 4.0 - 1.0;                            float n101 = dot(grad101, pf - vec3(1.0, 0.0, 1.0));                            float perm11 = rnm(pi.xy + vec2(permTexUnit, permTexUnit)).a;                            vec3  grad110 = rnm(vec2(perm11, pi.z)).rgb * 4.0 - 1.0;                            float n110 = dot(grad110, pf - vec3(1.0, 1.0, 0.0));                            vec3  grad111 = rnm(vec2(perm11, pi.z + permTexUnit)).rgb * 4.0 - 1.0;                            float n111 = dot(grad111, pf - vec3(1.0, 1.0, 1.0));                            vec4 n_x = mix(vec4(n000, n001, n010, n011), vec4(n100, n101, n110, n111), fade(pf.x));                            vec2 n_xy = mix(n_x.xy, n_x.zw, fade(pf.y));                            return mix(n_xy.x, n_xy.y, fade(pf.z));                        }                        vec2 coordRot(in vec2 tc, in float angle) {                            float aspect = imgSize.x / imgSize.y;                            float rotX = ((tc.x*2.0 - 1.0)*aspect*cos(angle)) - ((tc.y*2.0 - 1.0)*sin(angle));                            float rotY = ((tc.y*2.0 - 1.0)*cos(angle)) + ((tc.x*2.0 - 1.0)*aspect*sin(angle));                            return vec2((rotX / aspect)*0.5 + 0.5, rotY*0.5 + 0.5);                        }"},r.shader_procession=function(){return"float size = grain_size;                        float grain = grain_amount;                        vec3 rotOffset = vec3(1.425, 3.892, 5.835);                        vec2 rotCoordsR = coordRot(textureCoordinate.xy, timer + rotOffset.x);                        vec3 noise = vec3(pnoise3D(vec3(imgSize / size * rotCoordsR, 0.0)));                                                float luminance = mix(0.0, dot(src.rgb, lumcoeff), intensity);                        luminance = clamp(1.0-luminance / 0.2, 0.0, 1.0) + luminance;                        noise = mix(noise, vec3(0.0), pow(luminance, 4.0));                        dst = vec4(src.rgb + noise * grain,src.a);"},r.shader_setup=function(e){var r={};r.imgSize=[e.width,e.height];var n=Math.sqrt(e.width*e.width+e.height*e.height),o=Math.sqrt(n/2828.42712);o=Math.max(o,1)*a*2;var i=Math.sqrt(n/2828.42712)*t*.2;r.grain_amount=i,r.grain_size=o,e.shader.uniforms(r)},r}return e}(),e}function x(){var e={};return e.name="blemishFix",e.create=function(){function e(e){function t(e){for(h=[];e.test_symbol("point");){var t,a=[];a[0]=e.fetch_float(),a[1]=e.fetch_float(),e.assume_symbol("radius"),t=e.fetch_float(),h.push({pos:a,radius:t})}}function a(e,t,a,r){var n=d.context();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,a,0),n.viewport(e[0],e[1],t[0]-e[0],t[1]-e[1]),n.drawArrays(n.TRIANGLE_FAN,0,4)}var r,n=0,o=0,i=0,s=0,l=0,c=0,h=new Array(2),d=e,u=0,p=0,m={};return m.destroy=function(){if(n&&(n.destroy(),n=0),o&&(o.destroy(),o=0),s&&(s.destroy(),s=0),i&&(i.destroy(),i=0),this.size_change(0,0),l){for(var e=0;e<l.length;++e)d.context().deleteTexture(l[e]);l=0}c&&(d.context().deleteTexture(c),l=0)},m.size_change=function(e,t){if(!l||0!=e&&0!=t){if(e!=u||t!=p){if(l)for(var a=0;a<l.length;++a)d.context().deleteTexture(l[a]);c&&d.context().deleteTexture(c),l=new Array(2),l[0]=lt(e/4,t/4,!0),l[1]=lt(e/4,t/4,!0),c=lt(e,t,!0),u=e,p=e}}else{for(var a=0;a<l.length;++a)d.context().deleteTexture(l[a]);d.context().deleteTexture(c),l=0,c=0}},m.gpu_process=function(e,u,p){try{r=at(u),this.size_change(p.m_width,p.m_height),t(e),i||(i=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform sampler2D blemishTexture;                    uniform float center_x;                    uniform float radius_x;                    uniform vec4 trans;                    void main()                    {                        vec4 dst;                        vec2 coord = textureCoordinate*trans.xy+trans.zw;                        if (coord.x <center_x)                        {                            dst = texture2D(inputImageTexture, coord - vec2(radius_x, 0.0));                        }                        else                        {                            dst = texture2D(inputImageTexture, coord + vec2(radius_x, 0.0));                        }                        gl_FragColor = dst;                    }",d.context())),n||(n=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform sampler2D blemishTexture;                    uniform vec2 pos;                    uniform float radius;                    uniform vec2 size;                    uniform vec4 trans;                    vec4 fuckingBlur(vec3 sCol,vec2 uv){                        float sigma_i = 0.5/5.0/5.0;                        float res_w = 1.0;                        for(float i = -7.0; i <= 7.0; i++){                            vec2 coord_sample;                            if ((abs(uv.y*size.y + i - pos.y))>(radius))                                continue;                            coord_sample = uv + vec2(0.0, (float(i))) / size;                            vec3 tmp_g = texture2D(blemishTexture, coord_sample).rgb;                            float tmp_w = exp(-(i*i)*sigma_i);                            sCol += tmp_w*tmp_g;                            res_w += tmp_w;                        }                        vec4 res = vec4(sCol / res_w,res_w/7.0);                        return res;                    }                    void main()                    {                        vec4 col;                        vec2 coord = textureCoordinate*trans.xy+trans.zw;                        float dis = distance(coord*size, pos);                        if (dis< radius)                        {                            col = fuckingBlur(texture2D(blemishTexture, coord).rgb, coord);                        }                        else                            col = texture2D(blemishTexture, coord);                        gl_FragColor = col;                    }",d.context())),o||(o=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform sampler2D blemishTexture;                    uniform vec2 pos;                    uniform float radius;                    uniform vec2 size;                    uniform vec4 trans;                    vec3 lightenMix(vec3 src, vec3 dst, float alpha){                        return mix(src, max(src, dst), alpha);                    }                    vec3 fuckingBlur(vec3 sCol, vec2 uv){                        float sigma_i = 0.5 / 5.0 / 5.0;                        float res_w = 1.0;                        for (float i = -7.0; i <= 7.0; i++){                            vec2 coord_sample;                            if ((abs(uv.x*size.x + i - pos.x)) > (radius))                                continue;                            coord_sample = uv + vec2((float(i)),0.0) / size;                            vec3 tmp_g = texture2D(blemishTexture, coord_sample).rgb;                            float tmp_h = texture2D(blemishTexture, coord_sample).a;                            float tmp_w = exp(-(i*i)*sigma_i)*tmp_h;                            sCol += tmp_w*tmp_g;                            res_w += tmp_w;                        }                        vec3 res = sCol / res_w;                        return res;                    }                    void main()                    {                        vec3 col;                        vec2 coord = textureCoordinate*trans.xy+trans.zw;                        float dis = distance(coord*size, pos);                        if (dis < radius)                        {                            col = texture2D(blemishTexture, coord).rgb;                            col = fuckingBlur(col, coord);                            col = lightenMix(texture2D(inputImageTexture, coord).rgb, col, (1.0 -dis/radius)*0.65);                        }                        else                            col = texture2D(inputImageTexture, coord).rgb;                        gl_FragColor = vec4(col, 1.0);                    }",d.context())),s||(s=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform sampler2D blemishTexture;                    void main()                    {                        vec4 blemish = texture2D(blemishTexture, textureCoordinate);                        vec4 src = texture2D(inputImageTexture, textureCoordinate);                        gl_FragColor = vec4(mix(src.xyz,blemish.xyz,blemish.w),src.w);                    }",d.context()));for(var m=0;m<h.length;++m){var f=[Math.floor(h[m].pos[0]-h[m].radius),Math.floor(h[m].pos[1]-h[m].radius)],g=[Math.ceil(h[m].pos[0]+h[m].radius),Math.ceil(h[m].pos[1]+h[m].radius)];f[0]=Math.min(Math.max(0,f[0]),p.m_width),f[1]=Math.min(Math.max(0,f[1]),p.m_height),g[0]=Math.min(Math.max(0,g[0]),p.m_width),g[1]=Math.min(Math.max(0,g[1]),p.m_height);var v=[Math.floor(f[0]/4),Math.floor(f[1]/4)],b=[Math.ceil(g[0]/4),Math.ceil(g[1]/4)],_=nt(d.context(),null,i,p.m_width/4,p.m_height/4,p.m_frame_buffer);_.shader_texture("inputImageTexture",u.current());var y={};y.center_x=h[m].pos[0]/p.m_width,y.radius_x=h[m].radius/p.m_width,y.trans=[(b[0]-v[0])/(p.m_width/4),(b[1]-v[1])/(p.m_height/4),v[0]/(p.m_width/4),v[1]/(p.m_height/4)],_.shader.uniforms(y),a(v,b,l[0],p.m_frame_buffer);var x=nt(d.context(),null,n,p.m_width/4,p.m_height/4,p.m_frame_buffer);x.shader_texture("inputImageTexture",u.current()),x.shader_texture("blemishTexture",l[0]),y={},y.size=[p.m_width,p.m_height],y.pos=h[m].pos,y.radius=h[m].radius,y.trans=[(b[0]-v[0])/(p.m_width/4),(b[1]-v[1])/(p.m_height/4),v[0]/(p.m_width/4),v[1]/(p.m_height/4)],x.shader.uniforms(y),a(v,b,l[1],p.m_frame_buffer);var C=nt(d.context(),p,o);if(C.shader_texture("inputImageTexture",u.current()),C.shader_texture("blemishTexture",l[1]),y={},y.size=[C.width,C.height],y.pos=h[m].pos,y.radius=h[m].radius,y.trans=[(g[0]-f[0])/p.m_width,(g[1]-f[1])/p.m_height,f[0]/p.m_width,f[1]/p.m_height],C.shader.uniforms(y),a(f,g,c,p.m_frame_buffer),d.context().bindFramebuffer(d.context().FRAMEBUFFER,p.m_frame_buffer),d.context().framebufferTexture2D(d.context().FRAMEBUFFER,d.context().COLOR_ATTACHMENT0,d.context().TEXTURE_2D,c,0),d.context().activeTexture(d.context().TEXTURE0),d.context().bindTexture(d.context().TEXTURE_2D,u.current()),d.context().copyTexSubImage2D(d.context().TEXTURE_2D,0,f[0],f[1],f[0],f[1],g[0]-f[0],g[1]-f[1]),d.context().getError())throw new error("CGEPTPTemplate::gpu_process");r.destroy()}}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{r.destroy()}},m}return e}(),e}function C(){var e={};return e.name="clone",e.create=function(){function e(e){var t,a=new Array(2),r=new Array(2),n={};return n=rt(),n.m_context=e,n.init=function(e){a[0]=e.fetch_float(),a[1]=e.fetch_float(),r[0]=e.fetch_float(),r[1]=e.fetch_float(),t=e.fetch_float()/100},n.shader_uniform=function(){return"uniform vec2 offset;"},n.shader_procession=function(){return"vec2 cod = textureCoordinate - offset;                                src = texture2D(inputImageTexture, textureCoordinate);                        if (cod.x<1.0&&cod.x>0.0&&cod.y > 0.0&&cod.y < 1.0)                            dst = texture2D(inputImageTexture, cod);                        else                            dst = src;"},n.shader_setup=function(e){var t={};t.offset=[(r[0]-a[0])/e.width,(r[1]-a[1])/e.height],e.shader.uniforms(t)},n}return e}(),e}function w(){var e={};return e.name="marscara",e.create=function(){function e(e){var t=0,a={};return a=rt(),a.m_context=e,a.init=function(e){t=e.fetch_float()/5},a.shader_uniform=function(){return"uniform vec2 samplerSteps;                        const int samplerRadius = 5;                        uniform float samplerScale;"},a.shader_procession=function(){return"vec3 sum = src.rgb;                        float cnt = 1.0;                        for (int i = 1; i <= samplerRadius; ++i)                        {                            float scale = float(i) * samplerScale;                            sum += texture2D(inputImageTexture, textureCoordinate + scale * vec2(samplerSteps.x, 0.0)).rgb;                            sum += texture2D(inputImageTexture, textureCoordinate + scale * vec2(-samplerSteps.x, 0.0)).rgb;                            sum += texture2D(inputImageTexture, textureCoordinate + scale * vec2(0.0, samplerSteps.y)).rgb;                            sum += texture2D(inputImageTexture, textureCoordinate + scale * vec2(0.0, -samplerSteps.y)).rgb;                            cnt += 4.0;                        }                        dst = vec4(src.rgb - max(sum / cnt - src.rgb, 0.0), src.a);"},a.shader_setup=function(e){var a={};a.samplerSteps=[1/e.width,1/e.height],a.samplerScale=t,e.shader.uniforms(a)},a}return e}(),e}function A(){var e={};return e.name="eyeBrighten",e.create=function(){function e(e){var t=0,a={};return a=rt(),a.m_context=e,a.init=function(e){t=e.fetch_float()},a.shader_uniform=function(){return"uniform vec2 samplerSteps;                        uniform float intensity;                        const int samplerLimit = 5;                        const float weight = float(samplerLimit) * 4.0 + 1.0;                        "},a.shader_procession=function(){return"vec3 sum = src.rgb;                        vec2 len = 2.0 * samplerSteps;                        for (int i = 1; i <= samplerLimit; ++i)                        {                            sum += texture2D(inputImageTexture, textureCoordinate - len).rgb;                            sum += texture2D(inputImageTexture, vec2(textureCoordinate.x - len.x, textureCoordinate.y + len.y)).rgb;                            sum += texture2D(inputImageTexture, vec2(textureCoordinate.x + len.x, textureCoordinate.y - len.y)).rgb;                            sum += texture2D(inputImageTexture, textureCoordinate + len).rgb;                            len *= 2.0;                        }                       vec3 _dst = max(src.rgb - sum / weight,0.0);                       vec3 bmp2 = max(sum / weight - src.rgb, 0.0);                       dst = vec4(mix(src.rgb, max(max(src.rgb - bmp2,0.0)+_dst,0.0), intensity),src.a);"},a.shader_setup=function(e){var a={};a.samplerSteps=[1/e.width,1/e.height],a.intensity=t/100,e.shader.uniforms(a)},a}return e}(),e}function E(){var e={};return e.name="eyeTint",e.create=function(){function e(e){var t=0,a=new Array(3),r={};return r=rt(),r.m_context=e,r.init=function(e){a[0]=e.fetch_float(),a[1]=e.fetch_float(),a[2]=e.fetch_float(),t=e.fetch_float()},r.shader_uniform=function(){return"uniform vec3 tintColor;                        uniform float intensity;                        "},r.shader_procession=function(){return"float lsrc = dot(src.rgb, vec3(0.299, 0.587, 0.114));                        float tintLum = dot(tintColor, vec3(0.299, 0.587, 0.114));                        float srcLum = dot(vec3(lsrc), vec3(0.299, 0.587, 0.114));                        vec3 tint = tintColor + srcLum - tintLum;                        float mn = min(tint.r, min(tint.g, tint.b));                        float mx = max(tint.r, max(tint.g, tint.b));                        if (mn < 0.0)                        {                            tint = srcLum + (tint - srcLum) * srcLum / (srcLum - mn);                        }                        if (mx > 1.0)                        {                            tint = srcLum + (tint - srcLum) * (1.0 - srcLum) / (mx - srcLum);                        }                        dst = vec4(mix(src.rgb,tint,intensity), src.a);"},r.shader_setup=function(e){var r={};r.tintColor=[a[0]/255,a[1]/255,a[2]/255],r.intensity=t/100,e.shader.uniforms(r)},r}return e}(),e}function F(){var e={};return e.name="reshape",e.create=function(){function e(e){function t(){return{vecPoints:{},stress:0,radius:0}}function a(e,a,r){var n=["coordinate","realPixel",0];if(e.lookup_symbol(n,!0))for(;e.test_symbol("point");){var o=t();e.assume_symbol("stress"),o.stress=e.fetch_float(),e.assume_symbol("radius"),o.radius=e.fetch_float();var i=e.fetch_float(),s=e.fetch_float();o.vecPoints={x:i,y:s},m.push(o)}else for(;e.test_symbol("point");){var o=t();e.assume_symbol("stress"),o.stress=e.fetch_float(),e.assume_symbol("radius"),o.radius=e.fetch_float();var i=e.fetch_float()*a,s=e.fetch_float()*r;o.vecPoints={x:i,y:s},m.push(o)}if(m.length<2)throw new Error("need more point")}function r(e,t,r){if(h||(h=lt(t.m_width/r,t.m_height/r,!0),n(t,h),m_last_src=""),d||(d=lt(t.m_width/r,t.m_height/r,!0),n(t,d)),e.get_log()!=m_last_src&&(n(t,h),n(t,d),m_last_src=e.get_log()),a(e,t.m_width,t.m_height),o()&&(n(t,h),n(t,d)),m.length){s||(s=new gt(null,g,c.context()));for(var i=!0,l=0;l<m.length-1;++l)for(var u=m[l].vecPoints.x,p=m[l].vecPoints.y,f=m[l+1].vecPoints.x,v=m[l+1].vecPoints.y,b=m[l+1].stress,_=m[l+1].radius,y=f-u,x=v-p,C=Math.sqrt(y*y+x*x),w=Math.floor(4*C/_)+1,A=y/w,E=x/w,F=[A*b,E*b],k=1;k<=w;++k){var M=nt(c.context(),null,s,t.m_width/r,t.m_height/r,t.m_frame_buffer);i?M.shader_texture("inputImageTexture",h):M.shader_texture("inputImageTexture",d);var S={};S.pos=[(u+k*A)/t.m_width,(p+k*E)/t.m_height],S.radius=_,S.samplerSteps=[1/t.m_width,1/t.m_height],S.v=F,M.shader.uniforms(S),i?M.draw_to(d):M.draw_to(h),i=!i}if(!i){var T;T=h,h=d,m_deforMap_buffer=T,T=null}if(c.context().getError())throw new Error("opengl error in reshape adjust");m=[]}}function n(e,t){c.context().bindFramebuffer(c.context().FRAMEBUFFER,e.m_frame_buffer),c.context().framebufferTexture2D(c.context().FRAMEBUFFER,c.context().COLOR_ATTACHMENT0,c.context().TEXTURE_2D,t,0),c.context().clearColor(.5,.5,0,0),c.context().clear(c.context().COLOR_BUFFER_BIT)}function o(){if(m.length<f.length||!f.length)return f=m,!0;for(var e=f.length,t=0;t<e;++t)if(m[t].radius!=f[t].radius||m[t].stress!=f[t].stress||m[t].vecPoints.x!=f[t].vecPoints.x||m[t].vecPoints.y!=f[t].vecPoints.y)return f=m,!0;return m.length==f.length?(m=[],!1):(f=m,m=m.slice(e-1),!1)}var i,s=0,l=0,c=e,h=0,d=0,u=0,p=0,m=[],f=[],g="varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform vec2 samplerSteps;                    uniform vec2 pos;                    uniform vec2 v;                    uniform float radius;                    vec2 get_vector(float gvx, float gvy)                    {                        vec4 dst_v= texture2D(inputImageTexture, vec2(gvx, gvy)*samplerSteps);                        vec2 result;                        result.x = dst_v.x + (dst_v.z - 0.5) / 255.0;                        result.x = (result.x - 0.5)*2.0;                        result.y = dst_v.y + (dst_v.w - 0.5) / 255.0;                        result.y = (result.y - 0.5)*2.0;                        return result;                    }                    void main()                    {                        float dx = (textureCoordinate.x - pos.x)/samplerSteps.x;                        float dy = (textureCoordinate.y - pos.y)/samplerSteps.y;                        float r = 1.0 - ((dx / radius)*(dx / radius) + (dy / radius)*(dy / radius));                        vec4 dst;                        if (r > 0.0)                        {                            r = r*r;                            float cdx = v.x*r;                            float cdy = v.y*r;                            float gvx = textureCoordinate.x/samplerSteps.x + cdx;                            gvx = max(0.0, min(gvx, 1.0 / samplerSteps.x));                            float gvy = textureCoordinate.y/samplerSteps.y + cdy;                            gvy = max(0.0, min(gvy, 1.0 / samplerSteps.y));                            vec2 ov;                            ov = get_vector(gvx, gvy);                            gvx = gvx*samplerSteps.x + ov.x;                            gvy = gvy*samplerSteps.y + ov.y;                            vec2 _dis = vec2(min(1.0,max(gvx - textureCoordinate.x,-1.0)),                            min(1.0,max(gvy - textureCoordinate.y,-1.0)));                            {                                float cx = _dis.x*127.5+128.0;                                float fcx = floor(cx);                                dst.z = cx - fcx;                                dst.x = fcx*(1.0 / 255.0);                            }                            {                                float cy = _dis.y*127.5 +128.0;                                float fcy = floor(cy);                                dst.w = cy - fcy;                                dst.y = fcy*(1.0 / 255.0);                                                    }                        }                        else{                            dst = texture2D(inputImageTexture, textureCoordinate);                        }                        gl_FragColor = dst;                    }",v={};return v.destroy=function(){l&&(l.destroy(),l=0),s&&(s.destroy(),s=0),this.size_change(0,0),h&&(c.context().deleteTexture(h),h=0),d&&(c.context().deleteTexture(d),d=0),f=[]},v.size_change=function(e,t){u==e&&p==t||(u=e,p=t,m_last_src=[],h&&(c.context().deleteTexture(h),h=0),d&&(c.context().deleteTexture(d),d=0),f=[])},v.gpu_process=function(e,t,a){try{this.size_change(a.m_width,a.m_height),i=at(t),r(e,a,2),l||(l=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform sampler2D reshapeMap;                    void main()                    {                        vec2 cod,result;                        vec4 dst;                        vec4 trans = texture2D(reshapeMap, textureCoordinate);                        result.x = trans.x + (trans.z - 0.5) / 255.0;                        result.x = (result.x - 0.5)*2.0;                        result.y = trans.y + (trans.w - 0.5) / 255.0;                        result.y = (result.y - 0.5)*2.0;                        cod.x = textureCoordinate.x - result.x;                        cod.y = textureCoordinate.y - result.y;                        dst = texture2D(inputImageTexture, cod);                        gl_FragColor = dst;                    }",c.context()));var n=nt(c.context(),a,l);if(n.shader_texture("inputImageTexture",t.current()),n.shader_texture("reshapeMap",h),n.draw_to(t.new_temporary()),c.context().getError())throw new error("CGEPTPTemplate::gpu_process");t.push_to_current(),i.destroy()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{i.destroy()}},v}return e}(),e}function k(){var e={};return e.name="reshapeMap",e.create=function(){function e(e){function t(){return{vecPoints:{},stress:0,radius:0}}function a(e,a,r){var n=["coordinate","realPixel",0];if(e.lookup_symbol(n,!0))for(;e.test_symbol("point");){var o=t();e.assume_symbol("stress"),o.stress=e.fetch_float(),e.assume_symbol("radius"),o.radius=e.fetch_float();var i=e.fetch_float(),s=e.fetch_float();o.vecPoints={x:i,y:s},p.push(o)}else for(;e.test_symbol("point");){var o=t();e.assume_symbol("stress"),o.stress=e.fetch_float(),e.assume_symbol("radius"),o.radius=e.fetch_float();var i=e.fetch_float()*a,s=e.fetch_float()*r;o.vecPoints={x:i,y:s},p.push(o)}if(p.length<2)throw new Error("need more point")}function r(e){var t=lt(128,1,!0),a=lt(2,1,!0);l.m_context.texSubImage2D(l.m_context.TEXTURE_2D,0,0,0,2,1,l.m_context.RGBA,l.m_context.UNSIGNED_BYTE,new Uint8Array([255,255,255,255,0,0,0,255])),s||(s=new gt(null,f,l.context()));var r=nt(l.context(),null,s,128,1,e.m_frame_buffer);r.shader_texture("inputImageTexture",a),r.draw_to(t);var n=new Uint8Array(16);l.m_context.bindFramebuffer(l.m_context.FRAMEBUFFER,e.m_frame_buffer),l.m_context.framebufferTexture2D(l.m_context.FRAMEBUFFER,l.m_context.COLOR_ATTACHMENT0,l.m_context.TEXTURE_2D,t,0),l.m_context.readPixels(64,0,4,1,l.m_context.RGBA,l.m_context.UNSIGNED_BYTE,n),u.errorStatus=!1;for(var o=0;o<4;++o)for(var i=(n[4*o],0);i<4;i++)i!=o&&n[4*i]==n[4*o]&&u.errorStatus;if(u.haveTest=!0,l.context().getError())throw new error("CGEPTPTemplate::gpu_process")}function n(e,t,n,o){if(l.context().disable(l.context().BLEND),u.haveTest||r(t),a(e,t.m_width,t.m_height),p.length){i||(i=u.errorStatus?new gt(m,g,l.context()):new gt(m,v,l.context())),d||(d=lt(t.m_width,t.m_height));for(var s=0;s<p.length-1;++s)for(var c=p[s].vecPoints.x,h=p[s].vecPoints.y,f=p[s+1].vecPoints.x,b=p[s+1].vecPoints.y,_=p[s+1].stress,y=p[s+1].radius,x=f-c,C=b-h,w=Math.sqrt(x*x+C*C),A=Math.floor(4*w/y)+1,E=x/A,F=C/A,k=[E*_,F*_],M=1;M<=A;++M){var S=Math.min(t.m_width,Math.max(0,c+M*E-y)),T=Math.min(t.m_height,Math.max(0,h+M*F-y)),D=Math.min(t.m_width,Math.max(0,c+M*E+y)),R=Math.min(t.m_height,Math.max(0,h+M*F+y)),I=Math.min(R+.5,t.m_height)/t.m_height,N=Math.max(S-.5,0)/t.m_width,P=Math.min(D+.5,t.m_width)/t.m_width,B=Math.max(T-.5,0)/t.m_height,z=new Float32Array([N,B,N,I,P,B,P,I]),U=new Float32Array([N,B,N,I,P,B,P,I]);l.context().activeTexture(l.context().TEXTURE0),l.context().bindTexture(l.context().TEXTURE_2D,o.current());var G={};G.inputImageTexture=0,i.textures(G),l.context().bindFramebuffer(l.context().FRAMEBUFFER,t.m_frame_buffer),l.context().framebufferTexture2D(l.context().FRAMEBUFFER,l.context().COLOR_ATTACHMENT0,l.context().TEXTURE_2D,d,0),l.context().viewport(0,0,t.m_width,t.m_height);var O={};O.pos=[(c+M*E)/t.m_width,(h+M*F)/t.m_height],O.radius=y,O.samplerSteps=[1/t.m_width,1/t.m_height],O.v=[k[0],k[1]],i.uniforms(O),i.drawRect(z,U),l.context().copyTexSubImage2D(l.context().TEXTURE_2D,0,S,T,S,T,D-S,R-T)}if(l.context().getError())throw new Error("opengl error in reshape adjust");p=[]}}var o,i=0,s=0,l=e,c=0,h=0,d=0,u={haveTest:!1,errorStatus:0},p=[],m="attribute vec2 vertex;                             attribute vec2 _texCoord;                            varying vec2 textureCoordinate;                            void main(){                                textureCoordinate = _texCoord;                                gl_Position = vec4(vertex*2.0 - 1.0, 0.0, 1.0);                            }",f="varying vec2 textureCoordinate;                            uniform sampler2D inputImageTexture;                            void main(){                                gl_FragColor = texture2D(inputImageTexture,textureCoordinate);                            }",g="varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform vec2 samplerSteps;                    uniform vec2 pos;                    uniform vec2 v;                    uniform float radius;                    vec4 sampler(vec2 coord)                    {                       vec2 real = coord/samplerSteps-0.5;                       vec2 freal = floor(real);                       vec4 lb = texture2D(inputImageTexture,(freal+vec2(0.5,0.5))*samplerSteps);                       vec4 lt = texture2D(inputImageTexture,(vec2(freal.x,freal.y + 1.0) + vec2(0.5,0.5))*samplerSteps);                       vec4 rb = texture2D(inputImageTexture,(vec2(freal.x + 1.0,freal.y) + vec2(0.5,0.5))*samplerSteps);                       vec4 rt = texture2D(inputImageTexture,(vec2(freal.x + 1.0,freal.y+1.0) + vec2(0.5,0.5))*samplerSteps);                       vec4 horizonB = mix(lb,rb,(real-freal).x);                       vec4 horizonT = mix(lt,rt,(real-freal).x);                       vec4 dst = mix(horizonB,horizonT,(real-freal).y);                       return dst;                        }                        vec2 get_vector(float gvx, float gvy)                    {                        vec4 dst_v= sampler(vec2(gvx, gvy)*samplerSteps);                        vec2 result;                        float mid = 127.0;                        result.x = dst_v.x*255.0 + (dst_v.z * (255.0/256.0));                        result.x = (result.x - mid)/127.0;                        result.y = dst_v.y*255.0 + (dst_v.w * (255.0/256.0));                        result.y = (result.y - mid)/127.0;                        return result;                    }                    void main()                    {                        float dx = (textureCoordinate.x - pos.x)/samplerSteps.x;                        float dy = (textureCoordinate.y - pos.y)/samplerSteps.y;                        float r = 1.0 - ((dx / radius)*(dx / radius) + (dy / radius)*(dy / radius));                        vec4 dst;                        if (r > 0.0)                        {                            r = r*r;                            float cdx = v.x*r;                            float cdy = v.y*r;                                                     float gvx;                              gvx = textureCoordinate.x/samplerSteps.x + cdx;                                                    gvx = max(0.0, min(gvx, 1.0 / samplerSteps.x));                                                    float gvy;                              gvy = textureCoordinate.y/samplerSteps.y + cdy;                                                          gvy = max(0.0, min(gvy, 1.0 / samplerSteps.y));                            vec2 ov;                            ov = get_vector(gvx, gvy);                            gvx = gvx*samplerSteps.x + ov.x;                            gvy = gvy*samplerSteps.y + ov.y;                            vec2 _dis = vec2(min(1.0,max(gvx - textureCoordinate.x,-0.999999)),                            min(1.0,max(gvy - textureCoordinate.y,-0.999999)));                            float mid = 127.0;                            {                                float cx = _dis.x*127.0+mid;                                float fcx = floor(cx);                                dst.z = (cx - fcx)* (256.0/255.0);                                dst.x = fcx*(1.0 / 255.0);                            }                            {                                float cy = _dis.y*127.0 +mid;                                float fcy = floor(cy);                                dst.w = (cy - fcy) * (256.0/255.0);                                dst.y = fcy*(1.0 / 255.0);                                                    }                        }                        else{                            dst = sampler(textureCoordinate);                        }                        gl_FragColor = dst;                    }",v="varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform vec2 samplerSteps;                    uniform vec2 pos;                    uniform vec2 v;                    uniform float radius;                    vec2 get_vector(float gvx, float gvy)                    {                        vec4 dst_v= texture2D(inputImageTexture, vec2(gvx, gvy)*samplerSteps);                        vec2 result;                        float mid = 127.0;                        result.x = dst_v.x*255.0 + (dst_v.z * (255.0/256.0));                        result.x = (result.x - mid)/127.0;                        result.y = dst_v.y*255.0 + (dst_v.w * (255.0/256.0));                        result.y = (result.y - mid)/127.0;                        return result;                    }                    void main()                    {                        float dx = (textureCoordinate.x - pos.x)/samplerSteps.x;                        float dy = (textureCoordinate.y - pos.y)/samplerSteps.y;                        float r = 1.0 - ((dx / radius)*(dx / radius) + (dy / radius)*(dy / radius));                        vec4 dst;                        if (r > 0.0)                        {                            r = r*r;                            float cdx = v.x*r;                            float cdy = v.y*r;                                                     float gvx;                              gvx = textureCoordinate.x/samplerSteps.x + cdx;                                                    gvx = max(0.0, min(gvx, 1.0 / samplerSteps.x));                                                    float gvy;                              gvy = textureCoordinate.y/samplerSteps.y + cdy;                                                          gvy = max(0.0, min(gvy, 1.0 / samplerSteps.y));                            vec2 ov;                            ov = get_vector(gvx, gvy);                            gvx = gvx*samplerSteps.x + ov.x;                            gvy = gvy*samplerSteps.y + ov.y;                            vec2 _dis = vec2(min(1.0,max(gvx - textureCoordinate.x,-0.999999)),                            min(1.0,max(gvy - textureCoordinate.y,-0.999999)));                            float mid = 127.0;                            {                                float cx = _dis.x*127.0+mid;                                float fcx = floor(cx);                                dst.z = (cx - fcx)* (256.0/255.0);                                dst.x = fcx*(1.0 / 255.0);                            }                            {                                float cy = _dis.y*127.0 +mid;                                float fcy = floor(cy);                                dst.w = (cy - fcy) * (256.0/255.0);                                dst.y = fcy*(1.0 / 255.0);                                                    }                        }                        else{                            dst = texture2D(inputImageTexture, textureCoordinate);                        }                        gl_FragColor = dst;                    }",b={};return b.size_change=function(e,t){c==e&&h==t||(c=e,h=t,d&&(l.context().deleteTexture(d),d=0))},b.destroy=function(){d&&(l.context().deleteTexture(d),d=0)},b.gpu_process=function(e,t,a){try{o=at(t),this.size_change(a.m_width,a.m_height),n(e,a,2,t),o.destroy()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{o.destroy()}},b}return e}(),e}function M(){var e={};return e.name="reshapeDraw",e.create=function(){function e(e){function t(e,t,a){e.assume_symbol("useCache"),e.assume_symbol("stress"),r=e.fetch_float()}var a,r=0,n=0,o=e,i={};return i.destroy=function(){n&&(n.destroy(),n=0)},i.gpu_process=function(e,i,s){try{a=at(i),t(e),n||(n=new gt(null," varying vec2 textureCoordinate;                     uniform sampler2D inputImageTexture;                     uniform sampler2D reshapeMap;                     uniform float stress;                                                                     void main()                     {                         vec2 cod,result;                         vec4 dst;                         vec4 trans = texture2D(reshapeMap, textureCoordinate);                                              float mid = 127.0;                         result.x = trans.x*255.0 + (trans.z*(255.0/256.0));                         result.x = (result.x - mid)/127.0;                                              result.y = trans.y*255.0 + (trans.w*(255.0/256.0));                         result.y = (result.y - mid)/127.0;                                              cod.x = textureCoordinate.x - result.x*stress;                         cod.y = textureCoordinate.y - result.y*stress;                                                                    dst = texture2D(inputImageTexture, cod);                          dst.xyz = dst.xyz*vec3(dst.a);                         gl_FragColor = dst;                     }",o.context()));var l=nt(o.context(),s,n),c=o.lock_image(null,"reshape");if(!c)throw new error("cannot find reshape cache");l.shader_texture("inputImageTexture",i.current()),l.shader_texture("reshapeMap",c);var h={};if(h.stress=r,l.shader.uniforms(h),h=null,l.draw_to(i.new_temporary()),o.context().getError())throw new error("CGEPTPTemplate::gpu_process");i.push_to_current(),a.destroy()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{a.destroy()}},i}return e}(),e}function S(){var e={};return e.name="dark",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.init=function(e){},t.shader_uniform=function(){return"   "},t.shader_procession=function(){return"                        dst= vec4(127.0/255.0,127.0/255.0,0.0,0.0);"},t.shader_setup=function(e){},t}return e}(),e}function T(){var e={};return e.name="darkClear",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.init=function(e){},t.shader_uniform=function(){return"   "},t.shader_procession=function(){return"                        dst= vec4(0.0,0.0,0.0,0.0);"},t.shader_setup=function(e){},t}return e}(),e}function D(){var e={};return e.name="teethWhiten",e.create=function(){function e(e){var t,a={};return a=rt(),a.m_context=e,a.init=function(e){t=e.fetch_float()/100},a.shader_uniform=function(){return"  uniform float intensity; "},a.shader_procession=function(){return"                        vec3 _dst;                        if (src.r < src.g)                        {                            if (src.r < src.b)                            {                                _dst.r = src.r + 0.587 * (src.g - src.r) + 0.114 * (src.b - src.r);                                _dst.g = max(src.g, _dst.r);                                _dst.b = max(src.b, _dst.r);                            }                            else                            {                                _dst = src.rgb;                            }                        }                        else                        {                            if (src.g < src.b)                            {                                _dst.g = src.g + 0.299 * (src.r - src.g) + 0.114 * (src.b - src.g);                                _dst.r = max(src.r, _dst.g);                                _dst.b = max(src.b, _dst.g);                            }                            else                            {                                _dst.b = src.b + 0.299 * (src.r - src.b) + 0.587 * (src.g - src.b);                                _dst.r = max(src.r, _dst.b);                                _dst.g = max(src.g, _dst.b);                            }                        }                        dst = vec4(mix(src.rgb, _dst, intensity), src.a);                        "},a.shader_setup=function(e){var a={};a.intensity=t,e.shader.uniforms(a)},a}return e}(),e}function R(){var e={};return e.name="alphaInit",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.m_intensity=0,t.init=function(e){this.m_intensity=1,e.test_symbol("intensity")&&(this.m_intensity=e.fetch_float())},t.shader_uniform=function(){return"uniform float intensity;"},t.shader_procession=function(){return"                            dst = vec4(1.0,1.0,1.0,1.0);                            dst.a = intensity;                        "},t.shader_setup=function(e){var t={};t.intensity=this.m_intensity,e.shader.uniforms(t)},t}return e}(),e}function I(){var e={};return e.name="justDraw",e.create=function(){function e(e){function t(e){var t=e.lock_image();return t||!1}var a={};return a=rt(),a.m_context=e,a.init=function(e){},a.shader_uniform=function(){return"uniform sampler2D srcImage; "},a.shader_procession=function(){return"                            dst = texture2D(srcImage, textureCoordinate);                        "},a.shader_setup=function(e){var a=t(this.m_context);e.shader_texture("srcImage",a)},a}return e}(),e}function N(){var e={};return e.name="areaSelective",e.create=function(){function e(e){var t=[],a=[],r={};return r=rt(),r.m_context=e,r.init=function(e,r,n){var o=["pixel","relative",0],i=e.lookup_symbol(o,!0);e.assume_symbol("position"),i?(a[0]=e.fetch_float()*r,a[1]=e.fetch_float()*n):(a[0]=e.fetch_float(),a[1]=e.fetch_float()),e.assume_symbol("size"),i?(t[0]=e.fetch_float()*r,t[1]=e.fetch_float()*n):(t[0]=e.fetch_float(),t[1]=e.fetch_float())},r.shader_uniform=function(){return"uniform vec4 trans;"},r.shader_procession=function(){return"                            dst = texture2D(inputImageTexture, textureCoordinate*trans.xy+trans.zw);                        "},r.shader_setup=function(e){var r=[t[0]/e.width,t[1]/e.height,a[0]/e.width,a[1]/e.height],n={};n.trans=r,e.shader.uniforms(n)},r}return e}(),e}function P(){var e={};return e.name="crop",e.create=function(){function e(e){function t(e){var t=e.lock_image();return t||!1}var a=[],r=[],n={};return n=rt(),n.m_context=e,n.init=function(e){e.assume_symbol("position"),r[0]=e.fetch_float(),r[1]=e.fetch_float(),e.assume_symbol("srcSize"),a[0]=e.fetch_float(),a[1]=e.fetch_float()},n.shader_uniform=function(){return"uniform vec4 trans;                        uniform sampler2D srcImage;"},n.shader_procession=function(){return"                            dst = texture2D(srcImage, textureCoordinate*trans.xy+trans.zw);                        "},n.shader_setup=function(e){var n=t(this.m_context),o=[e.width/a[0],e.height/a[1],r[0]/a[0],r[1]/a[1]],i={};i.trans=o,e.shader.uniforms(i),e.shader_texture("srcImage",n)},n}return e}(),e}function B(){var e={};return e.name="rotation",e.create=function(){function e(e){var t,a={};return a=rt(),a.m_context=e,a.init=function(e){t=e.fetch_float()},a.shader_uniform=function(){return"  uniform vec4 trans; "},a.shader_procession=function(){return"                            vec2 coord = textureCoordinate - vec2(0.5, 0.5);                        coord = vec2(coord.x*trans.x + coord.y*trans.y,                            coord.x*trans.z + coord.y*trans.w);                        coord = coord + vec2(0.5, 0.5);                        dst = texture2D(inputImageTexture, coord); "},a.shader_setup=function(e){var a=Math.abs(10*t)%1800;a/=10,a>90&&(a=180-a),a=a/180*3.14159265358;var r=Math.sqrt(e.width/2*(e.width/2)+e.height/2*(e.height/2)),n=Math.min(e.width,e.height),o=Math.acos(n/2/r),i=o-a,s=n/2/Math.cos(i),l=s/r;a=t/180*3.14159265358;var c=[Math.cos(a)*l,-Math.sin(a)*l*e.height/e.width,Math.sin(a)*l*e.width/e.height,Math.cos(a)*l],h={};h.trans=c,e.shader.uniforms(h)},a}return e}(),e}function z(){var e={};return e.name="gribRotation",e.create=function(){function e(e){var t,a,r={};return r=rt(),r.m_context=e,r.init=function(e){t=e.fetch_float(),a=e.fetch_float()},r.shader_uniform=function(){return"uniform vec4 trans;                                     uniform float meshWidth;                                     uniform vec2 size;                                     uniform float lineWidth;"},r.shader_procession=function(){return"                            vec2 coord = textureCoordinate - vec2(0.5, 0.5);                        coord = vec2(coord.x*trans.x + coord.y*trans.y,                            coord.x*trans.z + coord.y*trans.w);                        coord = coord + vec2(0.5, 0.5);                                               vec2 realPixel = vec2(abs(textureCoordinate.x-0.5),abs(textureCoordinate.y-0.5))*size;                        if(realPixel.x<2.0*lineWidth||realPixel.y<2.0*lineWidth){                                gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);                                return;                            }                                                vec2 dis = vec2(realPixel.x - floor(realPixel.x/meshWidth)*meshWidth,realPixel.y - floor(realPixel.y/meshWidth)*meshWidth);                        vec4 rotationResult = texture2D(inputImageTexture, coord);                        if(dis.x<lineWidth||dis.x>(meshWidth-lineWidth)||dis.y<lineWidth||dis.y>(meshWidth-lineWidth))                        {                                dis =  min(max(dis/lineWidth,dis/(meshWidth-lineWidth)),1.0);                                float alpha = max(dis.x,dis.y);                                dst = mix(rotationResult,vec4(1.0, 1.0, 1.0,1.0),alpha);                            }                        else                             dst = rotationResult;                        "},r.shader_setup=function(e){var r=Math.abs(10*t)%1800;r/=10,r>90&&(r=180-r),r=r/180*3.14159265358;var n=Math.sqrt(e.width/2*(e.width/2)+e.height/2*(e.height/2)),o=Math.min(e.width,e.height),i=Math.acos(o/2/n),s=i-r,l=o/2/Math.cos(s),c=l/n,h=Math.floor(50/a/c+.5),d=1/a;r=t/180*3.14159265358;var u=[Math.cos(r)*c,-Math.sin(r)*c*e.height/e.width,Math.sin(r)*c*e.width/e.height,Math.cos(r)*c],p={};p.trans=u,p.meshWidth=h,p.size=[e.width,e.height],p.lineWidth=d,e.shader.uniforms(p)},r}return e}(),e}function U(){var e={};return e.name="cloneBlend",e.create=function(){function e(e){function t(e){var t={};t.opacity=a/100,t.model="painter"==n?1:0,e.shader.uniforms(t)}var a,r,n,o,i=e,s=0,l={};return l=rt(),l.destroy=function(){s&&(s.destroy(),s=0)},l.init=function(e,t,o){e.assume_symbol("view"),r=e.fetch_float(),e.assume_symbol("cache"),n=e.fetch_string(),e.assume_symbol("opacity"),a=e.fetch_float()},l.gpu_process=function(e,a,n){try{if(o=at(a),this.init(e,n.m_width,n.m_height),r)var l=a.load_view(r);var c=i.lock_image(null,"painter");if(!c)throw new error("no painter cache");s||(s=new gt(null,"varying vec2 textureCoordinate;                    uniform sampler2D inputImageTexture;                    uniform sampler2D blendMaskTexture;                    uniform sampler2D baseTexture;                    uniform sampler2D srcTexture;                    uniform float model;                    uniform float opacity;                    void main()                    {                        vec4 src = texture2D(srcTexture,textureCoordinate);                                            vec4 top = texture2D(inputImageTexture, textureCoordinate);                        vec4 dst = texture2D(baseTexture,textureCoordinate);                float a = texture2D(blendMaskTexture, textureCoordinate).w;                    vec4 blendResult;             if(model>0.0)blendResult=vec4(mix(dst.rgb,top.rgb,a),src.a);            else blendResult =vec4(mix(src.rgb,top.rgb,a),src.a);                        gl_FragColor = vec4(mix(src.rgb,blendResult.rgb,opacity),src.a);            }",i.m_context));var h=nt(i.m_context,n,s);if(h.shader_texture("srcTexture",a.get_src()),h.shader_texture("inputImageTexture",a.current()),h.shader_texture("blendMaskTexture",c),h.shader_texture("baseTexture",l),t(h),h.draw_to(a.new_temporary()),i.m_context.getError())throw new error("CGEPTPTemplate::gpu_process");a.push_to_current(),o.destroy(),i.unlock_image(null,null,"painter")}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{o.destroy()}},l}return e}(),e}function G(){var e={};return e.name="lensFlare",e.create=function(){function e(e){var t,a=[],r=0,n=[],o=rt();return o.m_context=e,o.init=function(e){e.assume_symbol("radius"),t=e.fetch_float(),e.assume_symbol("pos"),a[0]=e.fetch_float(),a[1]=e.fetch_float();var r=0,o=0,i=0,s=0,l=0;for(e.assume_symbol("ratio"),l=e.fetch_float(),e.assume_symbol("color"),r=e.fetch_float(),o=e.fetch_float(),i=e.fetch_float(),s=e.fetch_float();e.test_symbol("ratio");){var c=e.fetch_float();e.assume_symbol("color");for(var h=e.fetch_float(),d=e.fetch_float(),u=e.fetch_float(),p=e.fetch_float(),m=Math.floor(256*l);m<256*c;++m){var f=(m-256*l)/(256*c-256*l);n[4*m]=Math.floor((1-f)*r+f*h+.5),n[4*m+1]=Math.floor((1-f)*o+f*d+.5),n[4*m+2]=Math.floor((1-f)*i+f*u+.5),n[4*m+3]=Math.floor((1-f)*s+f*p+.5)}l=c,r=h,o=d,i=u,s=p}},o.shader_uniform=function(){return"  uniform sampler2D color;                                uniform float radius;                                uniform vec2 position;                                uniform vec2 size; "},o.shader_procession=function(){return"                          \tfloat dis = (textureCoordinate.x - position.x)*(textureCoordinate.x - position.x)*size.x*size.x + (textureCoordinate.y - position.y)*(textureCoordinate.y - position.y)*size.y*size.y;                                dis = sqrt(dis);                                float index = dis / (radius);                                vec4 lens;                                if (index < 1.0){                                    lens = texture2D(color, vec2(index, 0.5));                                    dst = vec4(mix(src.xyz, lens.xyz, lens.a), src.a);                                }                                else dst = src; "},o.shader_setup=function(e){r||(r=lt(256,1,!0)),e.shader_texture("color",r),this.m_context.m_context.texSubImage2D(this.m_context.m_context.TEXTURE_2D,0,0,0,256,1,this.m_context.m_context.RGBA,this.m_context.m_context.UNSIGNED_BYTE,new Uint8Array(n));var o={};o.radius=t*Math.max(e.width,e.height),o.position=a,o.size=[e.width,e.height],e.shader.uniforms(o)},o}return e}(),e}function O(){var e={};return e.name="rectangle",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.init=function(e){},t.shader_uniform=function(){return"uniform vec2 samplerSize;"},t.shader_procession=function(){return"vec2 coord = textureCoordinate/samplerSize;                                if(coord.x<4.0||coord.x>1.0/samplerSize.x-4.0||coord.y<4.0||coord.y>1.0/samplerSize.y-4.0)                                dst = vec4(mix(src.xyz,vec3(0.0,1.0,132.0/255.0),0.5),src.a);                                else                                dst = src;"},t.shader_setup=function(e){var t={};t.samplerSize=[1/e.width,1/e.height],e.shader.uniforms(t)},t}return e}(),e}function j(){var e={};return e.name="linearTest",e.create=function(){function e(e){var t={};return t=rt(),t.m_context=e,t.init=function(e){},t.shader_uniform=function(){return"uniform sampler2D smallTex;"},t.shader_procession=function(){return"vec4 texColor = texture2D(smallTex,textureCoordinate);                                    dst = (texColor-vec4(126.0/255.0))*255.0;                                    dst.a = 1.0;"},t.shader_setup=function(e){var t=lt(2,2,!0);this.m_context.m_context.texSubImage2D(this.m_context.m_context.TEXTURE_2D,0,0,0,2,2,this.m_context.m_context.RGBA,this.m_context.m_context.UNSIGNED_BYTE,new Uint8Array([32512/255,32512/255,32512/255,256,32256/255,32256/255,32256/255,256,32256/255,32256/255,32256/255,256,32512/255,32512/255,32512/255,256])),e.shader_texture("smallTex",t)},t}return e}(),e}function L(L){var H=[e(),t(),a(),r(),n(),o(),i(),s(),l(),c(),h(),d(),u(),p(),m(),f(),g(),v(),B(),b(),_(),y(),x(),C(),w(),A(),E(),F(),M(),k(),S(),T(),D(),R(),I(),N(),P(),U(),G(),z(),j(),O()];return ot(L,H,H.length)}return L}(),e}function Je(){var e={};return e.name="selectiveColor",e.create=function(){function e(e){var t=[],a=[],r=[],n=[],o=[],i=[],s=[],l=[],c=[],h={};return h=rt(),h.m_context=e,h.m_curve_tex=0,h.m_data=[],h.m_red=new Array(256),h.m_green=new Array(256),h.m_blue=new Array(256),h.shader_uniform=function(){return"uniform vec4 red;                uniform vec4 yellow;                uniform vec4 green;                uniform vec4 cyan;                uniform vec4 blue;                uniform vec4 magenta;                uniform vec4 white;                uniform vec4 gray;                uniform vec4 black;                vec4 getFac(vec4 facPre,vec4 facNex,float h,float s,float v)                {                    vec4 ret = mix(facPre,facNex,h);                    vec4 rets0;                    v = v * 2.0 - 1.0;                    if(v > 0.0)                    {                        rets0 = mix(gray,white,v);                    }                    else                    {                        rets0 = mix(gray,black,-v);                    }                    s = 1.0 - s;                    s = s * s * s;                    s = 1.0 - s;                    return mix(rets0,ret,s);                }                vec3 adjColor(vec3 src,float a,vec4 fac)                {                    vec3 tfac = fac.xyz *  vec3(fac.w,fac.w,fac.w);                    tfac = min(tfac,vec3(2.0,2.0,2.0));                    vec3 tfc1 = clamp(tfac - vec3(1.0,1.0,1.0),0.0,0.5);                    vec3 tfc2 = max(tfac - vec3(1.5,1.5,1.5),0.0);                    src = vec3(1.0,1.0,1.0) - src;                    src = src * (tfac -  src * (src * (tfc1 - tfc2) + vec3(2.0,2.0,2.0) * tfc2));                    return vec3(1.0,1.0,1.0) - src;                }                vec3 hsvAdjust(vec3 src)                {                    vec3 temp;                    vec4 color1, color2;                    if(src.r > src.g)                    {                        if(src.g > src.b)                        {                            temp = src.rgb;                            color1 = red;                            color2 = yellow;                        }                        else if(src.b > src.r)                        {                            temp = src.brg;                            color1 = blue;                            color2 = magenta;                        }                        else                            {                            temp = src.rbg;                            color1 = red;                            color2 = magenta;                        }                    }                    else                    {                        if(src.r > src.b)                        {                            temp = src.grb;                            color1 = green;                            color2 = yellow;                        }                        else if(src.b > src.g)                        {                            temp = src.bgr;                            color1 = blue;                            color2 = cyan;                        }                        else                        {                            temp = src.gbr;                            color1 = green;                            color2 = cyan;                        }                    }                    float d = temp.x - temp.z + 0.0001;                    float s = temp.y - temp.z;                    vec4 fac = getFac(color1, color2, s/d, d, temp.x);                    return adjColor(src, temp.x, fac);                }"},h.shader_procession=function(){return"src.rgb = hsvAdjust(src.rgb);                dst = src;"},h.shader_setup=function(e){var h={};h.red=[t[0]+1,t[1]+1,t[2]+1,t[3]+1],h.green=[a[0]+1,a[1]+1,a[2]+1,a[3]+1],h.blue=[r[0]+1,r[1]+1,r[2]+1,r[3]+1],h.cyan=[n[0]+1,n[1]+1,n[2]+1,n[3]+1],h.magenta=[o[0]+1,o[1]+1,o[2]+1,o[3]+1],h.yellow=[i[0]+1,i[1]+1,i[2]+1,i[3]+1],h.white=[s[0]+1,s[1]+1,s[2]+1,s[3]+1],h.gray=[l[0]+1,l[1]+1,l[2]+1,l[3]+1],h.black=[c[0]+1,c[1]+1,c[2]+1,c[3]+1],e.shader.uniforms(h)},h.init=function(e){for(var h=0;h<4;++h)t[h]=0,a[h]=0,r[h]=0,n[h]=0,o[h]=0,i[h]=0,s[h]=0,l[h]=0,c[h]=0;var h,d,u=["red","green","blue","cyan","magenta","yellow","white","gray","black",0],p=1,m=1,f=1,g=1,v=1,b=1,_=1,y=1,x=1;for(h=0;h<9;++h){var C=e.lookup_symbol(u,!1);switch(C){case 0:for(0==p&&e.error("parameter red has been input"),d=0;d<4;++d)t[d]=.01*e.fetch_float();p=!1;break;case 1:for(0==m&&e.error("parameter green has been input"),d=0;d<4;++d)a[d]=.01*e.fetch_float();m=!1;break;case 2:for(0==f&&e.error("parameter blue has been input"),d=0;d<4;++d)r[d]=.01*e.fetch_float();f=!1;break;case 3:for(0==g&&e.error("parameter cyan has been input"),d=0;d<4;++d)n[d]=.01*e.fetch_float();g=!1;break;case 4:for(0==v&&e.error("parameter magenta has been input"),d=0;d<4;++d)o[d]=.01*e.fetch_float();v=!1;break;case 5:for(0==b&&e.error("parameter yellow has been input"),d=0;d<4;++d)i[d]=.01*e.fetch_float();b=!1;break;case 6:for(0==_&&e.error("parameter white has been input"),d=0;d<4;++d)s[d]=.01*e.fetch_float();_=!1;break;case 7:for(0==y&&e.error("parameter has been input"),d=0;d<4;++d)l[d]=.01*e.fetch_float();y=!1;break;case 8:for(0==x&&e.error("parameter black has been input"),d=0;d<4;++d)c[d]=.01*e.fetch_float();x=!1}if(-1==C)break}},h}return e}(),e}function Xe(){var e={};return e.name="specialMixColor",e.create=function(){function e(){var e={};return e.name="color",e.create=function(){function e(e){var t,a,r,n,o,i={};return i=rt(),i.m_context=e,i.init=function(e){t=e.fetch_float(0,256),a=e.fetch_float(0,256),r=e.fetch_float(0,256),o=e.fetch_float(0,256),n=e.fetch_float(0,100)},i.shader_uniform=function(){return"uniform vec4 blendColor;                    uniform float intensity;                    float getLumValue(vec3 src)                    {                        return 0.299 * src.r + 0.587 * src.g + 0.114 * src.b;                    }                    vec3 blend(vec3 src1, vec3 src2, float alpha)                    {                        return mix(src1, getLumValue(src1) - getLumValue(src2) + src2, alpha);                    }"},i.shader_procession=function(){return"dst = vec4(blend(src.rgb, blendColor.rgb, intensity * blendColor.a), src.a);"},i.shader_setup=function(e){var i={};i.blendColor=[t/255,a/255,r/255,o/255],i.intensity=n/100,e.shader.uniforms(i)},i}return e}(),e}function t(){var e={};return e.name="lighterColor",e.create=function(){function e(e){var t,a,r,n,o,i={};return i=rt(),i.m_context=e,i.init=function(e){t=e.fetch_float(0,256),a=e.fetch_float(0,256),r=e.fetch_float(0,256),o=e.fetch_float(0,256),n=e.fetch_float(0,100)},i.shader_uniform=function(){return"uniform vec4 blendColor;                    uniform float intensity;                    vec3 blend(vec3 src1, vec3 src2, float alpha)                    {                        vec3 dst = dot(src1, vec3(0.299, 0.587, 0.114)) > dot(src2, vec3(0.299, 0.587, 0.114)) ? src1 : src2;                        return mix(src1, dst, alpha);                    }"},i.shader_procession=function(){return"dst = vec4(blend(src.rgb, blendColor.rgb, intensity * blendColor.a), src.a);"},i.shader_setup=function(e){var i={};i.blendColor=[t/255,a/255,r/255,o/255],i.intensity=n/100,e.shader.uniforms(i)},i}return e}(),e}function a(){var e={};return e.name="darkerColor",e.create=function(){function e(e){var t,a,r,n,o,i={};return i=rt(),i.m_context=e,i.init=function(e){t=e.fetch_float(0,256),a=e.fetch_float(0,256),r=e.fetch_float(0,256),o=e.fetch_float(0,256),n=e.fetch_float(0,100)},i.shader_uniform=function(){return"uniform vec4 blendColor;                    uniform float intensity;                    vec3 blend(vec3 src1, vec3 src2, float alpha)                    {                        vec3 dst = dot(src1, vec3(0.299, 0.587, 0.114)) < dot(src2, vec3(0.299, 0.587, 0.114)) ? src1 : src2;                        return mix(src1, dst, alpha);                    }"},i.shader_procession=function(){return"dst = vec4(blend(src.rgb, blendColor.rgb, intensity * blendColor.a), src.a);"},i.shader_setup=function(e){var i={};i.blendColor=[t/255,a/255,r/255,o/255],i.intensity=n/100,e.shader.uniforms(i)},i}return e}(),e}function r(r){var n=[e(),t(),a()];return ot(r,n,n.length)}return r}(),e}function qe(){var e={};return e.name="specialBorder",e.create=function(){function e(e){var t=e.lock_image();return t||!1}function t(){var t={};return t.name="shadow",t.create=function(){function t(t){var a,r,n,o,i=new Array(3),s=new Array(3),l={};return l=rt(),l.m_context=t,l.texturelocker=0,l.init=function(e){e.assume_symbol("size"),n=e.fetch_float(),e.assume_symbol("fade"),o=e.fetch_float()/100,e.assume_symbol("angle"),r=e.fetch_float(),e.assume_symbol("distance"),a=e.fetch_float(),e.assume_symbol("shadowColor");for(var t=0;t<3;++t)i[t]=e.fetch_float()/255;e.assume_symbol("backColor");for(var t=0;t<3;++t)s[t]=e.fetch_float()/255},l.shader_uniform=function(){return"uniform sampler2D srcImage;                        uniform vec4 fac;                        uniform vec3 sColor;                        uniform vec3 bColor;                        uniform vec2 shadow_pos;                        uniform vec4 sBorder;                        uniform vec2 size;                        uniform float fade;                        "},l.shader_procession=function(){return"                                               vec2 pos = textureCoordinate;                                               if(pos.x<size.x||pos.x>1.0 - size.x||pos.y<size.y||pos.y>1.0-size.y)                        {                                                     pos = pos-shadow_pos;                             float x = max(max(pos.x - sBorder.y,sBorder.x - pos.x),0.0);                             float y = max(max(pos.y - sBorder.w,sBorder.z - pos.y),0.0);                             float alpha = 1.0 -((x/(size.x/1.2))*(x/(size.x/1.2))+(y/(size.y/1.2))*(y/(size.y/1.2)));                             alpha = clamp(alpha,0.0,1.0);                             alpha = 3.0*alpha*alpha-2.0*alpha*alpha*alpha;                             alpha = fade*alpha*alpha;                             dst =vec4( mix(bColor,sColor,alpha),1.0);                         }                        else                            dst = texture2D(srcImage,pos*vec2(fac.x,fac.y)+vec2(fac.z,fac.w));"},l.shader_setup=function(t){var l=e(this.m_context),c=new Array(4);c[0]=t.width/(t.width-2*n),c[1]=t.height/(t.height-2*n),c[2]=-n/(t.width-2*n),c[3]=-n/(t.height-2*n);var h=[a/t.width,0];h=[h[0]*Math.cos(r/180*Math.PI)-h[1]*Math.sin(r/180*Math.PI),h[0]*Math.sin(r/180*Math.PI)+h[1]*Math.cos(r/180*Math.PI)];var d=new Array(4);d[0]=n/t.width*1.4,d[1]=1-n/t.width*1.4,d[2]=n/t.height*1.4,d[3]=1-n/t.height*1.4,t.shader_texture("srcImage",l);var u={};u.size=[n/t.width,n/t.height],u.fade=o,u.sBorder=d,u.fac=c,u.sColor=i,u.bColor=s,u.shadow_pos=h,t.shader.uniforms(u)},l}return t}(),t}function a(){var e={};return e.name="smallShadow",e.create=function(){function e(e){var t,a,r,n,o=new Array(3),i=new Array(3),s={};return s=rt(),s.m_context=e,s.texturelocker=0,s.init=function(e,s,l){e.assume_symbol("size"),r=e.fetch_float()*s,e.assume_symbol("fade"),n=e.fetch_float()/100,e.assume_symbol("angle"),a=e.fetch_float(),e.assume_symbol("distance"),t=e.fetch_float()*s,e.assume_symbol("shadowColor");for(var c=0;c<3;++c)o[c]=e.fetch_float()/255;e.assume_symbol("backColor");for(var c=0;c<4;++c)i[c]=e.fetch_float()/255},s.shader_uniform=function(){return" uniform vec4 fac;                        uniform vec3 sColor;                        uniform vec4 bColor;                        uniform vec2 shadow_pos;                        uniform vec4 sBorder;                        uniform vec2 size;                        uniform float fade;                        "},s.shader_procession=function(){return"                        vec2 pos = textureCoordinate;                                               if(pos.x<size.x||pos.x>1.0 - size.x||pos.y<size.y||pos.y>1.0-size.y)                        {                                                     pos = pos-shadow_pos;                             float x = max(max(pos.x - sBorder.y,sBorder.x - pos.x),0.0);                             float y = max(max(pos.y - sBorder.w,sBorder.z - pos.y),0.0);                             float alpha = 1.0 -((x/(size.x/1.5))*(x/(size.x/1.5))+(y/(size.y/1.5))*(y/(size.y/1.5)));                             alpha = clamp(alpha,0.0,1.0);                             alpha = alpha*alpha*fade;                             dst =vec4( mix(bColor,vec4(sColor.xyz,1.0),alpha));                         }                        else                            dst = texture2D(inputImageTexture,pos*vec2(fac.x,fac.y)+vec2(fac.z,fac.w));"},s.shader_setup=function(e){var s=new Array(4),l=Math.max(e.width,e.height);s[0]=l/(l-2*r),s[1]=s[0],l==e.width?(s[2]=-r/e.width*s[0],s[3]=-(s[0]-1)/2):(s[3]=-r/e.height*s[0],s[2]=-(s[0]-1)/2);var c=[t/e.width,0];c=[c[0]*Math.cos(a/180*Math.PI)-c[1]*Math.sin(a/180*Math.PI),c[0]*Math.sin(a/180*Math.PI)+c[1]*Math.cos(a/180*Math.PI)];var h=new Array(4);h[0]=r/e.width*1.3,h[1]=1-r/e.width*1.3,h[2]=r/e.height*1.3,h[3]=1-r/e.height*1.3;var d={};d.size=[r/e.width,r/e.height],d.fade=n,d.sBorder=h,d.fac=s,d.sColor=o,d.bColor=i,d.shadow_pos=c,e.shader.uniforms(d)},s}return e}(),e}function r(){var t={};return t.name="gallery",t.create=function(){function t(t){var a,r,n=new Array(3),o=new Array(3),i={};return i=rt(),i.m_context=t,i.texturelocker=0,i.init=function(e){e.assume_symbol("outSize"),a=e.fetch_float(),e.assume_symbol("innerSize"),r=e.fetch_float(),e.assume_symbol("outColor");for(var t=0;t<3;++t)n[t]=e.fetch_float()/255;e.assume_symbol("innerColor");for(var t=0;t<3;++t)o[t]=e.fetch_float()/255},i.shader_uniform=function(){return"uniform sampler2D srcImage;                        uniform vec4 fac;                        uniform vec3 iColor;                        uniform vec3 oColor;                        uniform vec2 outSize;                        uniform vec2 innerSize;                        uniform vec4 shadeBorder;                        "},i.shader_procession=function(){return"                        vec2 pos = textureCoordinate;                                               if(pos.x<outSize.x||pos.x>1.0 - outSize.x||pos.y<outSize.y||pos.y>1.0-outSize.y)                        {                            dst = vec4(oColor,1.0);                         }                          else if(pos.x<(outSize.x+innerSize.x)||pos.x>1.0 - (outSize.x+innerSize.x)||pos.y<(outSize.y+innerSize.y)||pos.y>1.0 - (outSize.y+innerSize.y))                      {                            dst = vec4(iColor,1.0);                        }                        else                            {                             float x = max(max(pos.x - shadeBorder.y,shadeBorder.x - pos.x),0.0);                             float y = max(max(pos.y - shadeBorder.w,shadeBorder.z - pos.y),0.0);                            float alpha = ((x)*(x)+(y)*(y))/0.00002;                                                        alpha = clamp(alpha,0.0,1.0);                            alpha = alpha*alpha*0.5;                            vec4 color = texture2D(srcImage, pos * vec2(fac.x, fac.y) + vec2(fac.z, fac.w));                            color.xyz = mix(color.xyz,vec3(0.0,0.0,0.0),alpha);                            dst = color;                            }                            "},i.shader_setup=function(t){var i=e(this.m_context),s=new Array(4);s[0]=t.width/(t.width-2*a-2*r),s[1]=t.height/(t.height-2*a-2*r),s[2]=-(a+r)/(t.width-2*a-2*r),s[3]=-(a+r)/(t.height-2*a-2*r);var l=[];l[0]=(a+r)/t.width+.006,l[1]=1-(a+r)/t.width-.006,l[2]=(a+r)/t.height+.006,l[3]=1-(a+r)/t.height-.006,t.shader_texture("srcImage",i);var c={};c.outSize=[a/t.width,a/t.height],c.innerSize=[r/t.width,r/t.height],c.fac=s,c.shadeBorder=l,c.iColor=o,c.oColor=n,t.shader.uniforms(c)},i}return t}(),t}function n(){var e={};return e.name="smallGallery",e.create=function(){function e(e){var t,a,r=new Array(3),n=new Array(3),o={};return o=rt(),o.m_context=e,o.texturelocker=0,o.init=function(e,o,i){e.assume_symbol("outSize"),t=e.fetch_float()*o,e.assume_symbol("innerSize"),a=e.fetch_float()*i,e.assume_symbol("outColor");for(var s=0;s<3;++s)r[s]=e.fetch_float()/255;e.assume_symbol("innerColor");for(var s=0;s<3;++s)n[s]=e.fetch_float()/255},o.shader_uniform=function(){return"uniform vec4 fac;                        uniform vec3 iColor;                        uniform vec3 oColor;                        uniform vec2 outSize;                        uniform vec2 innerSize;                        uniform vec4 shadowInBorder;                        uniform vec4 shadowOutBorder;                        "},o.shader_procession=function(){return"                        vec2 pos = textureCoordinate;                                               if(pos.x<outSize.x||pos.x>1.0 - outSize.x||pos.y<outSize.y||pos.y>1.0-outSize.y)                        {                            dst = vec4(oColor,1.0);                         }                          else if(pos.x<(outSize.x+innerSize.x)||pos.x>1.0 - (outSize.x+innerSize.x)||pos.y<(outSize.y+innerSize.y)||pos.y>1.0 - (outSize.y+innerSize.y))                      {                      float x = max(max(pos.x - shadowOutBorder.y,shadowOutBorder.x - pos.x),0.0);                             float y = max(max(pos.y - shadowOutBorder.w,shadowOutBorder.z - pos.y),0.0);                            float alpha = ((x)*(x)+(y)*(y))/0.00007;                                                        alpha = clamp(alpha,0.0,1.0);                            alpha = alpha*alpha*0.5;                            dst = vec4(mix(iColor,vec3(0.0,0.0,0.0),alpha),1.0);                        }                        else                            {                             float x = max(max(pos.x - shadowInBorder.y,shadowInBorder.x - pos.x),0.0);                             float y = max(max(pos.y - shadowInBorder.w,shadowInBorder.z - pos.y),0.0);                            float alpha = ((x)*(x)+(y)*(y))/0.00007;                                                        alpha = clamp(alpha,0.0,1.0);                            alpha = alpha*alpha*0.4;                            vec4 color = texture2D(inputImageTexture, pos * vec2(fac.x, fac.y) + vec2(fac.z, fac.w));                            color.xyz = mix(color.xyz,vec3(0.0,0.0,0.0),alpha);                            dst = color;                            }                            "},o.shader_setup=function(e){var o=new Array(4),i=Math.max(e.width,e.height);o[0]=i/(i-2*t-2*a),o[1]=o[0],i==e.width?(o[2]=-(t+a)/e.width*o[0],o[3]=-(o[0]-1)/2):(o[3]=-(t+a)/e.height*o[0],o[2]=-(o[0]-1)/2);var s=[];s[0]=(t+a)/e.width+.01,s[1]=1-(t+a)/e.width-.01,s[2]=(t+a)/e.height+.01,s[3]=1-(t+a)/e.height-.01;var l=[];l[0]=t/e.width+.01,l[1]=1-t/e.width-.01,l[2]=t/e.height+.01,l[3]=1-t/e.height-.01;var c={};c.outSize=[t/e.width,t/e.height],c.innerSize=[a/e.width,a/e.height],c.fac=o,c.shadowInBorder=s,c.shadowOutBorder=l,c.iColor=n,c.oColor=r,e.shader.uniforms(c)},o}return e}(),e}function o(){var t={};return t.name="polaroid",t.create=function(){function t(t){var a,r,n,o,i=new Array(3),s=new Array(3),l={};return l=rt(),l.m_context=t,l.texturelocker=0,l.init=function(e,t,l){e.assume_symbol("outSize"),a=e.fetch_float(),e.assume_symbol("innerSize"),r=e.fetch_float(),e.assume_symbol("roundCorner"),n=e.fetch_float(),e.assume_symbol("captionSize"),o=e.fetch_float(),e.assume_symbol("outColor");for(var c=0;c<3;++c)i[c]=e.fetch_float()/255;e.assume_symbol("innerColor");for(var c=0;c<3;++c)s[c]=e.fetch_float()/255},l.shader_uniform=function(){return"uniform sampler2D srcImage;                        uniform vec4 fac;                        uniform vec3 iColor;                        uniform vec3 oColor;                        uniform vec2 outSize;                        uniform vec2 innerSize;                        uniform vec2 dstSize;                        uniform float captationSize;                        uniform float radius;                        "},l.shader_procession=function(){return"                        vec2 pos = textureCoordinate;                        vec4 outRoundBorder = vec4(outSize.x+radius/dstSize.x,1.0-outSize.x-radius/dstSize.x,outSize.y+radius/dstSize.y,1.0-outSize.y-captationSize-radius/dstSize.y);                        vec4 innerRoundBorder = vec4((innerSize.x+outSize.x)+radius/dstSize.x,1.0-(innerSize.x+outSize.x)-radius/dstSize.x,(innerSize.y+outSize.y)+radius/dstSize.y,1.0-(innerSize.y+outSize.y)-captationSize-radius/dstSize.y);                        float ox = max(max(outRoundBorder.x-pos.x,pos.x-outRoundBorder.y),0.0);                        float oy = max(max(outRoundBorder.z-pos.y,pos.y-outRoundBorder.w),0.0);                        float ix = max(max(innerRoundBorder.x-pos.x,pos.x-innerRoundBorder.y),0.0);                        float iy = max(max(innerRoundBorder.z-pos.y,pos.y-innerRoundBorder.w),0.0);                        if(pos.x<outSize.x||pos.x>1.0 - outSize.x||pos.y<outSize.y||pos.y>1.0-(outSize.y+captationSize)                        ||(ox>0.0&&oy>0.0&&(ox*ox*dstSize.x*dstSize.x+oy*oy*dstSize.y*dstSize.y)>(radius)*(radius)))                        {                            dst = vec4(oColor,1.0);                         }                          else if(pos.x<(outSize.x+innerSize.x)||pos.x>1.0 - (outSize.x+innerSize.x)||pos.y<(outSize.y+innerSize.y)||pos.y>1.0 - (outSize.y+innerSize.y+captationSize)                        ||(ix>0.0&&iy>0.0&&(ix*ix*dstSize.x*dstSize.x+iy*iy*dstSize.y*dstSize.y)>radius*radius))                      {                            dst = vec4(iColor,1.0);                        }                        else                            {                            dst = vec4(texture2D(srcImage, pos * vec2(fac.x, fac.y) + vec2(fac.z, fac.w)).xyz,1.0);                            }                            "},l.shader_setup=function(t){var l=e(this.m_context),c=new Array(4);c[0]=t.width/(t.width-2*a-2*r),c[1]=t.height/(t.height-2*a-2*r-o),c[2]=-(a+r)/(t.width-2*a-2*r),c[3]=-(a+r)/(t.height-2*a-2*r-o),t.shader_texture("srcImage",l);var h={};h.outSize=[a/t.width,a/t.height],h.innerSize=[r/t.width,r/t.height],h.captationSize=o/t.height,h.dstSize=[t.width,t.height],h.fac=c,h.iColor=s,h.oColor=i,h.radius=n,t.shader.uniforms(h)},l}return t}(),t}function i(){var e={};return e.name="smallPolaroid",e.create=function(){function e(e){var t,a,r,n=new Array(3),o=new Array(3),i={};return i=rt(),i.m_context=e,i.texturelocker=0,i.init=function(e,i,s){e.assume_symbol("outSize"),t=e.fetch_float()*i,e.assume_symbol("innerSize"),a=e.fetch_float()*i,e.assume_symbol("roundCorner"),r=e.fetch_float()*i,e.assume_symbol("outColor");for(var l=0;l<3;++l)n[l]=e.fetch_float()/255;e.assume_symbol("innerColor");for(var l=0;l<3;++l)o[l]=e.fetch_float()/255},i.shader_uniform=function(){return"uniform vec4 fac;                        uniform vec3 iColor;                        uniform vec3 oColor;                        uniform vec2 outSize;                        uniform vec2 innerSize;                        uniform vec2 dstSize;                        uniform float radius;                        "},i.shader_procession=function(){return"                        vec2 pos = textureCoordinate;                        vec4 outRoundBorder = vec4(outSize.x+radius/dstSize.x,1.0-outSize.x-radius/dstSize.x,outSize.y+radius/dstSize.y,1.0-outSize.y-radius/dstSize.y);                        vec4 innerRoundBorder = vec4((innerSize.x+outSize.x)+radius/dstSize.x,1.0-(innerSize.x+outSize.x)-radius/dstSize.x,(innerSize.y+outSize.y)+radius/dstSize.y,1.0-(innerSize.y+outSize.y)-radius/dstSize.y);                        float ox = max(max(outRoundBorder.x-pos.x,pos.x-outRoundBorder.y),0.0);                        float oy = max(max(outRoundBorder.z-pos.y,pos.y-outRoundBorder.w),0.0);                        float ix = max(max(innerRoundBorder.x-pos.x,pos.x-innerRoundBorder.y),0.0);                        float iy = max(max(innerRoundBorder.z-pos.y,pos.y-innerRoundBorder.w),0.0);                        if(pos.x<outSize.x||pos.x>1.0 - outSize.x||pos.y<outSize.y||pos.y>1.0-(outSize.y)                        ||(ox>0.0&&oy>0.0&&(ox*ox*dstSize.x*dstSize.x+oy*oy*dstSize.y*dstSize.y)>(radius)*(radius)))                        {                            dst = vec4(oColor,1.0);                         }                          else if(pos.x<(outSize.x+innerSize.x)||pos.x>1.0 - (outSize.x+innerSize.x)||pos.y<(outSize.y+innerSize.y)||pos.y>1.0 - (outSize.y+innerSize.y)                        ||(ix>0.0&&iy>0.0&&(ix*ix*dstSize.x*dstSize.x+iy*iy*dstSize.y*dstSize.y)>radius*radius))                      {                            dst = vec4(iColor,1.0);                        }                        else                            {                            dst = texture2D(inputImageTexture, pos * vec2(fac.x, fac.y) + vec2(fac.z, fac.w));                            }                            "},i.shader_setup=function(e){var i=new Array(4),s=Math.max(e.width,e.height);i[0]=s/(s-2*t-2*a),i[1]=i[0],s==e.width?(i[2]=-(t+a)/e.width*i[0],i[3]=-(i[0]-1)/2):(i[3]=-(t+a)/e.height*i[0],i[2]=-(i[0]-1)/2);var l={};l.outSize=[t/e.width,t/e.height],l.innerSize=[a/e.width,a/e.height],l.dstSize=[e.width,e.height],l.fac=i,l.iColor=o,l.oColor=n,l.radius=r,e.shader.uniforms(l)},i}return e}(),e}function s(){var t={};return t.name="outside",t.create=function(){function t(t){function a(e,t,a,r,h,u,p,m,f){var g,v;switch(d){case 0:g=4*f*(n+i)/((n+i+s+c)*e),v=4*f*(s+c)/((n+i+s+c)*t);break;case 1:g=2*f,v=g*e*(s+c)/((n+i)*t);break;case 2:v=2*f,g=v*t*(n+o)/((s+c)*e);break;case 3:default:var b=2*e+2*t;g=f*b*(n+i)/((n+i+s+c)*e),v=f*b*(s+c)/((n+i+s+c)*t)}var _=Math.max(v,g);if(_>.99){var y=.99/_;v*=y,g*=y}var x=n+o+i,C=s+l+c,w=v*t/(s+c),A=g*e/(n+i),E=(1-g)*e/o,F=(1-v)*t/l,k=Math.max(Math.floor(E/w+.5),1),M=Math.max(Math.floor(F/A+.5),1),S=n/x,T=o/x,D=i/x,R=s/C,I=l/C,N=c/C,P=1/(S+D),B=1/(R+N);a[0]=0,a[1]=g*S*P,a[2]=1-g*D*P,r[0]=0,r[1]=v*R*B,r[2]=1-v*N*B,h[0]=(S+D)/g,h[1]=k/(1-g),h[2]=h[0],h[3]=T,u[0]=(R+N)/v,u[1]=M/(1-v),u[2]=u[0],u[3]=I,p[0]=0,p[1]=S,p[2]=S+T,m[0]=0,m[1]=R,m[2]=R+I}var r,n,o,i,s,l,c,h,d,u,p=new Array(3),m={};return m=rt(),m.m_context=t,m.texturelocker=0,m.init=function(e){var t=["pixel","width","height","perimeter",0];e.assume_symbol("file"),r=e.fetch_string(),e.assume_symbol("resourceLayoutH"),n=e.fetch_float()+1e-5,o=e.fetch_float()+1e-5,i=e.fetch_float()+1e-5,o=Math.max(o,.008*(n+i)),e.assume_symbol("resourceLayoutV"),s=e.fetch_float()+1e-5,l=e.fetch_float()+1e-5,c=e.fetch_float()+1e-5,l=Math.max(l,.008*(s+c)),e.assume_symbol("thickness"),-1==(d=e.lookup_symbol(t))&&(d=3),h=e.fetch_float(),e.assume_symbol("color");for(var a=0;a<3;++a)p[a]=e.fetch_float()/255;e.assume_symbol("ratio"),u=e.fetch_float()},m.shader_uniform=function(){return"uniform sampler2D border;                        uniform sampler2D srcImage;                        uniform vec4 my;                        uniform vec3 py;                        uniform vec3 ky;                        uniform vec4 mx;                        uniform vec3 px;                        uniform vec3 kx;                        uniform vec4 fac;                        uniform vec2 borderSize;                        uniform vec3 color;                        "},m.shader_procession=function(){return"vec3 bx = (vec3(textureCoordinate.x) - kx) * mx.xyz;                        bx.y = fract(bx.y)*mx.w;                        bx += px;                        vec3 by = (vec3(textureCoordinate.y) - ky) * my.xyz;                        by.y = fract(by.y)*my.w;                        by += py;                        vec2 borderCord;                        if(textureCoordinate.x > kx.z)                        {                            borderCord.x = bx.z;                        }                        else if(textureCoordinate.x > kx.y)                        {                            borderCord.x = bx.y;                        }                        else                        {                            borderCord.x = bx.x;                        }                        if(textureCoordinate.y > ky.z)                        {                            borderCord.y = by.z;                        }                        else if(textureCoordinate.y > ky.y)                        {                            borderCord.y = by.y;                        }                        else                        {                            borderCord.y = by.x;                        }                        if(textureCoordinate.x<borderSize.x||textureCoordinate.x>1.0 - borderSize.x||textureCoordinate.y<borderSize.y||textureCoordinate.y>1.0-borderSize.y)                        {                            dst.a = texture2D(border, borderCord).a;                                dst.xyz = color;                        }                        else                        {                            dst = texture2D(srcImage, textureCoordinate * vec2(fac.x, fac.y) + vec2(fac.z, fac.w));                        }"},m.shader_setup=function(t){var n,o=e(this.m_context),i=Math.min(t.width,t.height);n=3==d?h*t.width:h;var s=n/(i*u);if(this.texturelocker=this.m_context.get_resource_texture(r),!this.texturelocker)throw new error(r);t.shader_texture("border",this.texturelocker.texture),t.shader_texture("srcImage",o);var l=new Array(3),c=new Array(3),m=new Array(4),f=new Array(4),g=new Array(3),v=new Array(3);a(t.width,t.height,l,c,m,f,g,v,s);var b=new Array(4);b[0]=t.width/(t.width-2*n),b[1]=t.height/(t.height-2*n),b[2]=-n/(t.width-2*n),b[3]=-n/(t.height-2*n);var _={};_.fac=b,_.borderSize=[n/t.width,n/t.height],_.color=p,_.kx=l,_.ky=c,_.mx=m,_.my=f,_.px=g,_.py=v,t.shader.uniforms(_)},m}return t}(),t}function l(){var t={};return t.name="blendedOutside",t.create=function(){function t(t){function a(e,t,a,r,n,d,p,m,f){var g,v;switch(u){case 0:g=4*f*(o+s)/((o+s+l+h)*e),v=4*f*(l+h)/((o+s+l+h)*t);break;case 1:g=2*f,v=g*e*(l+h)/((o+s)*t);break;case 2:v=2*f,g=v*t*(o+i)/((l+h)*e);break;case 3:default:var b=2*e+2*t;g=f*b*(o+s)/((o+s+l+h)*e),v=f*b*(l+h)/((o+s+l+h)*t)}var _=Math.max(v,g);if(_>.99){var y=.99/_;v*=y,g*=y}var x=o+i+s,C=l+c+h,w=v*t/(l+h),A=g*e/(o+s),E=(1-g)*e/i,F=(1-v)*t/c,k=Math.max(Math.floor(E/w+.5),1),M=Math.max(Math.floor(F/A+.5),1),S=o/x,T=i/x,D=s/x,R=l/C,I=c/C,N=h/C,P=1/(S+D),B=1/(R+N);a[0]=0,a[1]=g*S*P,a[2]=1-g*D*P,r[0]=0,r[1]=v*R*B,r[2]=1-v*N*B,n[0]=(S+D)/g,n[1]=k/(1-g),n[2]=n[0],n[3]=T,d[0]=(R+N)/v,d[1]=M/(1-v),d[2]=d[0],d[3]=I,p[0]=0,p[1]=S,p[2]=S+T,m[0]=0,m[1]=R,m[2]=R+I}var r,n,o,i,s,l,c,h,d,u,p,m=(new Array(3),[]),f={};return f=rt(),f.m_context=t,f.texturelocker=0,f.init=function(e){var t=["pixel","width","height","perimeter",0];e.assume_symbol("file"),r=e.fetch_string(),e.assume_symbol("blend"),n=e.fetch_string(),e.assume_symbol("resSize"),m[0]=e.fetch_float(),m[1]=e.fetch_float(),e.assume_symbol("resourceLayoutH"),o=e.fetch_float()+1e-5,i=e.fetch_float()+1e-5,s=e.fetch_float()+1e-5,i=Math.max(i,.008*(o+s)),e.assume_symbol("resourceLayoutV"),l=e.fetch_float()+1e-5,c=e.fetch_float()+1e-5,h=e.fetch_float()+1e-5,c=Math.max(c,.008*(l+h)),e.assume_symbol("thickness"),-1==(u=e.lookup_symbol(t))&&(u=3),d=e.fetch_float(),e.assume_symbol("ratio"),p=e.fetch_float()},f.shader_uniform=function(){return"uniform sampler2D border;                        uniform sampler2D srcImage;                        uniform sampler2D resImage;                        uniform vec2 resSize;                        uniform vec4 my;                        uniform vec3 py;                        uniform vec3 ky;                        uniform vec4 mx;                        uniform vec3 px;                        uniform vec3 kx;                        uniform vec4 fac;                        uniform vec2 borderSize;                        "},f.shader_procession=function(){return"vec3 bx = (vec3(textureCoordinate.x) - kx) * mx.xyz;                        bx.y = fract(bx.y)*mx.w;                        bx += px;                        vec3 by = (vec3(textureCoordinate.y) - ky) * my.xyz;                        by.y = fract(by.y)*my.w;                        by += py;                        vec2 borderCord;                        if(textureCoordinate.x > kx.z)                        {                            borderCord.x = bx.z;                        }                        else if(textureCoordinate.x > kx.y)                        {                            borderCord.x = bx.y;                        }                        else                        {                            borderCord.x = bx.x;                        }                        if(textureCoordinate.y > ky.z)                        {                            borderCord.y = by.z;                        }                        else if(textureCoordinate.y > ky.y)                        {                            borderCord.y = by.y;                        }                        else                        {                            borderCord.y = by.x;                        }                        if(textureCoordinate.x<borderSize.x||textureCoordinate.x>1.0 - borderSize.x||textureCoordinate.y<borderSize.y||textureCoordinate.y>1.0-borderSize.y)                        {                            vec2 resCoord;                            resCoord.x  = (textureCoordinate.x-floor(textureCoordinate.x/resSize.x)*resSize.x)/resSize.x;                            resCoord.y  = (textureCoordinate.y-floor(textureCoordinate.y/resSize.y)*resSize.y)/resSize.y;                            dst.xyz = texture2D(resImage, resCoord).rgb;                            dst.a = texture2D(border, borderCord).a;                        }                        else                        {                            dst = texture2D(srcImage, textureCoordinate * vec2(fac.x, fac.y) + vec2(fac.z, fac.w));                        }"},f.shader_setup=function(t){var o,i=e(this.m_context),s=Math.min(t.width,t.height);3==u&&(o=d*t.width);var l=o/(s*p);this.texturelocker=this.m_context.get_resource_texture(r);var c=this.m_context.get_resource_texture(n);if(!this.texturelocker)throw new error(r);if(!c)throw new error(n);t.shader_texture("border",this.texturelocker.texture),t.shader_texture("resImage",c.texture),t.shader_texture("srcImage",i);var h=new Array(3),f=new Array(3),g=new Array(4),v=new Array(4),b=new Array(3),_=new Array(3);a(t.width,t.height,h,f,g,v,b,_,l);var y=new Array(4);y[0]=t.width/(t.width-2*o),y[1]=t.height/(t.height-2*o),y[2]=-o/(t.width-2*o),y[3]=-o/(t.height-2*o);var x={};x.fac=y,x.resSize=[Math.min(m[0]/t.width,1),Math.min(m[1]/t.height,1)],x.borderSize=[o/t.width,o/t.height],x.kx=h,x.ky=f,x.mx=g,x.my=v,x.px=b,x.py=_,t.shader.uniforms(x)},f}return t}(),t}function c(){var e={};return e.name="smallOutside",e.create=function(){function e(e){function t(e,t,a,c,d,u,p,m,f){var g,v;switch(h){case 0:g=4*f*(r+o)/((r+o+i+l)*e),v=4*f*(i+l)/((r+o+i+l)*t);break;case 1:g=2*f,v=g*e*(i+l)/((r+o)*t);break;case 2:v=2*f,g=v*t*(r+n)/((i+l)*e);break;case 3:default:var b=2*e+2*t;g=f*b*(r+o)/((r+o+i+l)*e),v=f*b*(i+l)/((r+o+i+l)*t)}var _=Math.max(v,g);if(_>.99){var y=.99/_;v*=y,g*=y}var x=r+n+o,C=i+s+l,w=v*t/(i+l),A=g*e/(r+o),E=(1-g)*e/n,F=(1-v)*t/s,k=Math.max(Math.floor(E/w+.5),1),M=Math.max(Math.floor(F/A+.5),1),S=r/x,T=n/x,D=o/x,R=i/C,I=s/C,N=l/C,P=1/(S+D),B=1/(R+N);a[0]=0,a[1]=g*S*P,a[2]=1-g*D*P,c[0]=0,c[1]=v*R*B,c[2]=1-v*N*B,d[0]=(S+D)/g,d[1]=k/(1-g),d[2]=d[0],d[3]=T,u[0]=(R+N)/v,u[1]=M/(1-v),u[2]=u[0],u[3]=I,p[0]=0,p[1]=S,p[2]=S+T,m[0]=0,m[1]=R,m[2]=R+I}var a,r,n,o,i,s,l,c,h,d,u=new Array(3),p={};return p=rt(),p.m_context=e,p.texturelocker=0,p.init=function(e){m_file_name_vec=[];var t=["pixel","width","height","perimeter",0];e.assume_symbol("file"),a=e.fetch_string(),e.assume_symbol("resourceLayoutH"),r=e.fetch_float()+1e-5,n=e.fetch_float()+1e-5,o=e.fetch_float()+1e-5,n=Math.max(n,.008*(r+o)),e.assume_symbol("resourceLayoutV"),i=e.fetch_float()+1e-5,s=e.fetch_float()+1e-5,l=e.fetch_float()+1e-5,s=Math.max(s,.008*(i+l)),e.assume_symbol("thickness"),-1==(h=e.lookup_symbol(t))&&(h=3),c=e.fetch_float(),e.assume_symbol("color");for(var p=0;p<3;++p)u[p]=e.fetch_float()/255;e.assume_symbol("ratio"),d=e.fetch_float()},p.shader_uniform=function(){return"uniform sampler2D border;                        uniform vec4 my;                        uniform vec3 py;                        uniform vec3 ky;                        uniform vec4 mx;                        uniform vec3 px;                        uniform vec3 kx;                        uniform vec4 fac;                        uniform vec2 borderSize;                        uniform vec3 color;                        "},p.shader_procession=function(){return"vec3 bx = (vec3(textureCoordinate.x) - kx) * mx.xyz;                        bx.y = fract(bx.y)*mx.w;                        bx += px;                        vec3 by = (vec3(textureCoordinate.y) - ky) * my.xyz;                        by.y = fract(by.y)*my.w;                        by += py;                        vec2 borderCord;                        if(textureCoordinate.x > kx.z)                        {                            borderCord.x = bx.z;                        }                        else if(textureCoordinate.x > kx.y)                        {                            borderCord.x = bx.y;                        }                        else                        {                            borderCord.x = bx.x;                        }                        if(textureCoordinate.y > ky.z)                        {                            borderCord.y = by.z;                        }                        else if(textureCoordinate.y > ky.y)                        {                            borderCord.y = by.y;                        }                        else                        {                            borderCord.y = by.x;                        }                        if(textureCoordinate.x<borderSize.x||textureCoordinate.x>1.0 - borderSize.x||textureCoordinate.y<borderSize.y||textureCoordinate.y>1.0-borderSize.y)                        {                            dst.xyz = color;                            dst.a = texture2D(border, borderCord).a;                        }                        else                        {                            dst = texture2D(inputImageTexture, textureCoordinate * vec2(fac.x, fac.y) + vec2(fac.z, fac.w));                        }"},p.shader_setup=function(e){var r=Math.min(e.width+2*c,e.height+2*c),n=c/(r*d);e.shader_texture("border",this.texturelocker.texture);var o=new Array(3),i=new Array(3),s=new Array(4),l=new Array(4),h=new Array(3),p=new Array(3);t(e.width+2*c,e.height+2*c,o,i,s,l,h,p,n);var m=new Array(4);m[0]=(e.width+2*c)/e.width,m[1]=(e.height+2*c)/e.height,m[2]=-c/e.width,m[3]=-c/e.height;var f={};if(this.texturelocker=this.m_context.get_resource_texture(a),!this.texturelocker)throw new error(a);f.fac=m,f.borderSize=[c/(e.width+2*c),c/(e.height+2*c)],f.color=u,f.kx=o,f.ky=i,f.mx=s,f.my=l,f.px=h,f.py=p,e.shader.uniforms(f)},p}return e}(),e}function h(e){var h=[t(),r(),o(),s(),a(),n(),i(),c(),l()];return ot(e,h,h.length)}return h}(),e}function Ke(){var e={};return e.name="border",e.create=function(){function e(){var e={};return e.name="corner",e.create=function(){function e(e){function t(e,t,a,d,u,p,m,f){var g,v;switch(h){case 0:g=4*c*(r+o)/((r+o+i+l)*e),v=4*c*(i+l)/((r+o+i+l)*t);break;case 1:g=2*c,v=g*e*(i+l)/((r+o)*t);break;case 2:v=2*c,g=v*t*(r+n)/((i+l)*e);break;case 3:default:var b=2*e+2*t;g=c*b*(r+o)/((r+o+i+l)*e),v=c*b*(i+l)/((r+o+i+l)*t)}var _=Math.max(v,g);if(_>.99){var y=.99/_;v*=y,g*=y}var x=r+n+o,C=i+s+l,w=v*t/(i+l),A=g*e/(r+o),E=(1-g)*e/n,F=(1-v)*t/s,k=Math.max(Math.floor(E/w+.5),1),M=Math.max(Math.floor(F/A+.5),1),S=r/x,T=n/x,D=o/x,R=i/C,I=s/C,N=l/C,P=1/(S+D),B=1/(R+N);a[0]=0,a[1]=g*S*P,a[2]=1-g*D*P,d[0]=0,d[1]=v*R*B,d[2]=1-v*N*B,u[0]=(S+D)/g,u[1]=k/(1-g),u[2]=u[0],u[3]=T,p[0]=(R+N)/v,p[1]=M/(1-v),p[2]=p[0],p[3]=I,m[0]=0,m[1]=S,m[2]=S+T,f[0]=0,f[1]=R,f[2]=R+I}var a,r,n,o,i,s,l,c,h,d,u,p=[],m={};return m=rt(),m.m_context=e,m.texturelocker=0,m.init=function(e){u=null,p=[],d=!1;for(var t=["pixel","width","height","perimeter",0];e.test_symbol("file");){var m={size:0,file_name:""};m.file_name=e.fetch_string(),"BPSNumber"==e.get_parcer_status()&&(m.size=e.fetch_float()),m.size*=m.size,p.push(m)}if(a=p[0].file_name,e.assume_symbol("resourceLayoutH"),r=e.fetch_float()+1e-5,n=e.fetch_float()+1e-5,o=e.fetch_float()+1e-5,n=Math.max(n,.008*(r+o)),e.assume_symbol("resourceLayoutV"),i=e.fetch_float()+1e-5,s=e.fetch_float()+1e-5,l=e.fetch_float()+1e-5,s=Math.max(s,.008*(i+l)),e.assume_symbol("thickness"),-1==(h=e.lookup_symbol(t))&&(h=3),c=e.fetch_float(.01,.5),e.test_symbol("thicken")&&(d=!0),e.test_symbol("color")){u=new Array(3);for(var f=0;f<3;++f)u[f]=e.fetch_float()/255}},m.shader_uniform=function(){return"uniform sampler2D border;                        uniform vec4 my;                        uniform vec3 py;                        uniform vec3 ky;                        uniform vec4 mx;                        uniform vec3 px;                        uniform vec3 kx;                        uniform vec4 color;                        "},m.shader_procession=function(){return"vec3 bx = (vec3(textureCoordinate.x) - kx) * mx.xyz;                        bx.y = fract(bx.y)*mx.w;                        bx += px;                        vec3 by = (vec3(textureCoordinate.y) - ky) * my.xyz;                        by.y = fract(by.y)*my.w;                        by += py;                        vec2 borderCord;                        if(textureCoordinate.x > kx.z)                        {                            borderCord.x = bx.z;                        }                        else if(textureCoordinate.x > kx.y)                        {                            borderCord.x = bx.y;                        }                        else                        {                            borderCord.x = bx.x;                        }                        if(textureCoordinate.y > ky.z)                        {                            borderCord.y = by.z;                        }                        else if(textureCoordinate.y > ky.y)                        {                            borderCord.y = by.y;                        }                        else                        {                            borderCord.y = by.x;                        }                        vec4 bp = texture2D(border, borderCord);                        if(color.w==1.0)                            bp = vec4(color.xyz,bp.w);                        dst.rgb = mix(src.rgb,bp.rgb,bp.a);                        dst.a = 1.0;"},m.shader_setup=function(e){var r=e.width*e.height;if(d){var n,o=Math.min(e.width,e.height);o<=331&&(n=.9*(1-o/331),(c+=n)>.48&&(c=.48))}else if(p.length>1)for(var i=0;i<p.length;++i)if(r<p[i].size||0==p[i].size){a=p[i].file_name;break}if(this.texturelocker=this.m_context.get_resource_texture(a),!this.texturelocker)throw new error(a);e.shader_texture("border",this.texturelocker.texture);var s=new Array(3),l=new Array(3),h=new Array(4),m=new Array(4),f=new Array(3),g=new Array(3);t(e.width,e.height,s,l,h,m,f,g);var v={};v.color=u?[u[0],u[1],u[2],1]:[0,0,0,0],v.kx=s,v.ky=l,v.mx=h,v.my=m,v.px=f,v.py=g,e.shader.uniforms(v)},m}return e}(),e}function t(){var e={};return e.name="plan",e.create=function(){function e(e){function t(e,t,a,r,n){var l,c=[],h=e/t;h<1&&(r*=h);var d=n[0],u=n[1];l=r/h*s*i,h>=1?d/=h:u*=h;var p,m;return"LB"==a?(p=0,m=1-o-u):"CB"==a?(p=.5-d/2,m=1-o-u):"RB"==a?(p=1-d,m=1-o-u):"LT"==a?(p=0,m=o):"CT"==a?(p=.5-d/2,m=o):"RT"==a?(p=1-d,m=o):"CX"==a?(p=.5-d/2,m=-1):"XC"==a?(p=-1,m=.5-u/2):"CC"==a?(p=.5-d/2,m=.5-u/2):"XX"==a&&(p=-1,m=-1),c[0]=p,c[1]=m,c[2]=d,c[3]=u,result={dst_texArea:c,thk:r,lengthH:l},result}var a,r,n,o,i,s,l,c=new Array(12),h=new Array(2),d=new Array(12),u={};return u=rt(),u.m_context=e,u.texturelocker=0,u.init=function(e){var t,u,p=["pixel","width","height","perimeter",0];e.assume_symbol("file"),a=e.fetch_string(),t=e.fetch_float(),u=e.fetch_float();for(var m=0;12!=m;++m)d[m]=e.fetch_float(),c[m]=m%2==0?d[m]/t:d[m]/u;r=e.fetch_symbol(),n=r,h[0]=e.fetch_float(),h[1]=e.fetch_float(),e.assume_symbol("thickness"),l="BPSSymbol"==e.get_parcer_status()?e.lookup_symbol(p,!0):3,o=e.fetch_float(),i=t/u,s=c[2]/c[3]},u.shader_uniform=function(){return"uniform sampler2D borderTexture;                        uniform vec4 borderBlocks[3];                        uniform vec4 texArea;                        uniform float lengthH;                        uniform float borderThickness;                        vec3 blend(vec3 src, vec3 dst, float alpha)                        {                            return mix(src, dst, alpha);                        }                        "},u.shader_procession=function(){return"vec2 tc = textureCoordinate;                        vec2 coord;                        if(tc.y <= borderThickness)                        {                            coord = vec2(mod(tc.x, lengthH) / lengthH, tc.y / borderThickness) * borderBlocks[0].zw + borderBlocks[0].xy;                            vec4 frameTop = texture2D(borderTexture, coord);                            src.rgb = blend(src.rgb, frameTop.rgb, frameTop.a);                        }                        else if(tc.y >= 1.0 - borderThickness)                        {                            coord = vec2(mod(tc.x, lengthH) / lengthH, (tc.y - 1.0 + borderThickness) / borderThickness) * borderBlocks[1].zw + borderBlocks[1].xy;                            vec4 frameBottom = texture2D(borderTexture, coord);                            src.rgb = blend(src.rgb, frameBottom.rgb, frameBottom.a);                        }                        if(tc.x >= texArea.x && tc.x <= texArea.x + texArea.z                            && tc.y >= texArea.y && tc.y <= texArea.y + texArea.w)                        {                            coord = (tc - texArea.xy) / texArea.zw * borderBlocks[2].zw + borderBlocks[2].xy;                            vec4 texText = texture2D(borderTexture, coord);                            src.rgb = blend(src.rgb, texText.rgb, texText.a);                        }                        dst = src;"},u.shader_setup=function(e){if(this.texturelocker=this.m_context.get_resource_texture(a),!this.texturelocker)throw new error(a);e.shader_texture("borderTexture",this.texturelocker.texture);var r=this.m_context.context().getUniformLocation(e.shader.program,"borderBlocks");if(r<0)throw new error("CGEBorderCoverudtProcess::shader_setup");this.m_context.context().uniform4fv(r,c);var i=t(e.width,e.height,n,o,h),s={};s.borderThickness=i.thk,s.lengthH=i.lengthH,s.texArea=i.dst_texArea,e.shader.uniforms(s)},u}return e}(),e}function a(){var e={};return e.name="inner",e.create=function(){function e(e){function t(e,t,a,d,u,p,m,f){var g,v;switch(h){case 0:g=4*c*(r+o)/((r+o+i+l)*e),v=4*c*(i+l)/((r+o+i+l)*t);break;case 1:g=2*c,v=g*e*(i+l)/((r+o)*t);break;case 2:v=2*c,g=v*t*(r+n)/((i+l)*e);break;case 3:default:var b=2*e+2*t;g=c*b*(r+o)/((r+o+i+l)*e),v=c*b*(i+l)/((r+o+i+l)*t)}var _=Math.max(v,g);if(_>.99){var y=.99/_;v*=y,g*=y}var x=r+n+o,C=i+s+l,w=v*t/(i+l),A=g*e/(r+o),E=(1-g)*e/n,F=(1-v)*t/s,k=Math.max(Math.floor(E/w+.5),1),M=Math.max(Math.floor(F/A+.5),1),S=r/x,T=n/x,D=o/x,R=i/C,I=s/C,N=l/C,P=1/(S+D),B=1/(R+N);a[0]=0,a[1]=g*S*P,a[2]=1-g*D*P,d[0]=0,d[1]=v*R*B,d[2]=1-v*N*B,u[0]=(S+D)/g,u[1]=k/(1-g),u[2]=u[0],u[3]=T,p[0]=(R+N)/v,p[1]=M/(1-v),p[2]=p[0],p[3]=I,m[0]=0,m[1]=S,m[2]=S+T,f[0]=0,f[1]=R,f[2]=R+I}var a,r,n,o,i,s,l,c,h,d=[],u={};return u=rt(),u.m_context=e,u.texturelocker=0,u.init=function(e){d=[];for(var t=["pixel","width","height","perimeter",0];e.test_symbol("file");){var u={size:0,file_name:""};u.file_name=e.fetch_string(),"BPSNumber"==e.get_parcer_status()&&(u.size=e.fetch_float()),u.size*=u.size,d.push(u)}a=d[0].file_name,e.assume_symbol("resourceLayoutH"),r=e.fetch_float()+1e-5,n=e.fetch_float()+1e-5,o=e.fetch_float()+1e-5,n=Math.max(n,.008*(r+o)),e.assume_symbol("resourceLayoutV"),i=e.fetch_float()+1e-5,s=e.fetch_float()+1e-5,l=e.fetch_float()+1e-5,s=Math.max(s,.008*(i+l)),e.assume_symbol("thickness"),-1==(h=e.lookup_symbol(t))&&(h=3),c=e.fetch_float(.01,.5)},u.shader_uniform=function(){return"uniform sampler2D border;                        uniform vec4 my;                        uniform vec3 py;                        uniform vec3 ky;                        uniform vec4 mx;                        uniform vec3 px;                        uniform vec3 kx;                        uniform vec4 color;                        "},u.shader_procession=function(){return"vec3 bx = (vec3(textureCoordinate.x) - kx) * mx.xyz;                        bx.y = fract(bx.y)*mx.w;                        bx += px;                        vec3 by = (vec3(textureCoordinate.y) - ky) * my.xyz;                        by.y = fract(by.y)*my.w;                        by += py;                        vec2 borderCord;                        if(textureCoordinate.x > kx.z)                        {                            borderCord.x = bx.z;                        }                        else if(textureCoordinate.x > kx.y)                        {                            borderCord.x = bx.y;                        }                        else                        {                            borderCord.x = bx.x;                        }                        if(textureCoordinate.y > ky.z)                        {                            borderCord.y = by.z;                        }                        else if(textureCoordinate.y > ky.y)                        {                            borderCord.y = by.y;                        }                        else                        {                            borderCord.y = by.x;                        }                        vec4 bp = texture2D(border, borderCord);                        dst = vec4(src.rgb,bp.a);"},u.shader_setup=function(e){for(var r=e.width*e.height,n=0;n<d.length;++n)if(r<d[n].size||0==d[n].size){a=d[n].file_name;break}if(this.texturelocker=this.m_context.get_resource_texture(a),!this.texturelocker)throw new error(a);e.shader_texture("border",this.texturelocker.texture);var o=new Array(3),i=new Array(3),s=new Array(4),l=new Array(4),c=new Array(3),h=new Array(3);t(e.width,e.height,o,i,s,l,c,h);var u={};u.kx=o,u.ky=i,u.mx=s,u.my=l,u.px=c,u.py=h,e.shader.uniforms(u)},u}return e}(),e}function r(r){var n=[e(),t(),a()];return ot(r,n,n.length)}return r}(),e}function $e(e){var a=[He(),t(),We(),K(),Ve(),Je(),Xe(),Ge(),me(),Le(),Ke(),fe(),ge(),ve(),be(),qe(),Ze(),Ye(),J()];return ot(e,a,a.length)}function et(){this.m_buf="",this.m_process_log="",this.tmp=""}function tt(e,t){var a={};return a={m_mode:"CPM_SRGB",m_parcer:e,m_serial_num:t,m_data:new et},a.m_key=0,a.m_parcer.renew(),a.assume_semicolon=function(e){"BPSSemicolon"!=this.m_parcer.get_current_status()&&this.error("expect ';'"),e&&this.log(";"),this.log_return(),this.m_parcer.next()},a.pre_test_symbol=function(e){if("BPSSemicolon"!=this.m_parcer.get_current_status())return!1;var t=this.m_parcer.m_start,a=this.m_parcer.m_end,r=this.m_parcer.m_status;if(this.m_parcer.next(),"BPSSymbol"!=this.m_parcer.get_current_status())return this.m_parcer.m_start=t,this.m_parcer.m_end=a,this.m_parcer.m_status=r,!1;var n={};return n.dst=this.m_data.m_buf,this.m_parcer.get_symbol(n),this.m_data.m_buf=n.dst,e!=this.m_data.m_buf?(this.m_parcer.m_start=t,this.m_parcer.m_end=a,this.m_parcer.m_status=r,!1):(this.m_parcer.m_start=t,this.m_parcer.m_end=a,this.m_parcer.m_status=r,this.m_parcer.next(),this.m_parcer.next(),!0)},a.test_symbol=function(e,t){return t=null==t||t,!!this.m_parcer.cmp_symbol(e)&&(this.m_parcer.next(),t&&this.log(e),!0)},a.fetch_symbol=function(e){e=null==e||e,"BPSSymbol"!=this.m_parcer.get_current_status()&&this.error("expect symbol");var t={};return t.dst=this.m_data.m_buf,this.m_parcer.get_symbol(t),this.m_data.m_buf=t.dst,t=null,this.m_parcer.next(),e&&this.log(this.m_data.m_buf),this.m_data.m_buf},a.fetch_float=function(e,t,a){var r=null==a||a;"BPSNumber"!=this.m_parcer.get_current_status()&&this.error("expect number");var n=this.m_parcer.get_float();if(null!=e&&null!=t&&(n<e||n>t)){var o="number out of range,should between "+e+"and"+t;this.error(o)}return this.m_parcer.next(),r&&this.log(n.toString()),n},a.process_serial_insert=function(){},a.assume_symbol=function(e,t){this.m_parcer.cmp_symbol(e)||this.error("expect",e),this.m_parcer.next(),t&&this.log(e)},a.check_symbol=function(e,t){},a.lookup_symbol=function(e,t,a){if(a=null==a||a,t=null!=t&&t,"BPSSymbol"!=this.m_parcer.get_current_status()){if(t){for(var r=0;e[r];)++r;this.error("expect symbols",e,r)}return-1}var n={};n.dst=this.m_data.m_buf,this.m_parcer.get_symbol(n),this.m_data.m_buf=n.dst;for(var r=0;e[r];++r)if(e[r]==this.m_data.m_buf)return a&&this.log(this.m_data.m_buf),this.m_parcer.next(),r;return t&&this.error("expect symbols",e,r),-1},a.fetch_string=function(e){if(e=null==e||e,"BPSString"!=this.m_parcer.get_current_status())throw new error("expect string");var t={};this.m_parcer.get_string(t),this.m_parcer.next();var a=t.start.substring(0,t.start.length-t.end.length);return e&&(this.m_data.m_process_log='"'+a+'"'),a},a.get_parcer_status=function(){return this.m_parcer.get_current_status()},a.ended=function(){return this.m_parcer.ended()},a.get_log=function(){return this.m_data.tmp=this.m_data.m_process_log.toString(),this.m_data.tmp},a.log=function(e){e=e.toString(),this.m_data.m_process_log+=e+" "},a.log_return=function(){this.log("\n")},a.error=function(e,t,a){if(a=null==a?0:a,t=null==t?0:t,a%1!=0){var r=e+a.toString();return this.error(r),0}var n="Syntax error, location : row ",o={};o.script="",o.current="",this.m_parcer.dump(o);for(var i,s=o.script,l=1,c=o.script;(i=c.indexOf("\n"))>=0;)++l,s=c.substring(i+1),c=c.substring(i+1);if(n+=l.toString(),n+=" column "+(o.current.length-s.length).toString()+"!!\n",n+="error description:"+e.toString(),t&&0!=a){n+=";";for(var i=0;i<a;++i)n+='"'+t[i]+'"'}},a}function at(e){var t={};return t.m_taget=e,t.destroy=function(){this.m_taget&&this.m_taget.unlock()},t.lock=function(e){return e==this.m_taget||!!e.lock()&&(this.m_taget=e,!0)},t}function rt(){var e={};e._process={},e.m_context={};var t=0;return e.m_shader=0,e.shader_uniform={},e.shader_procession={},e.shader_setup={},e.init={},e.fshPTPTemplate="\t    \tvarying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;        %p        void main()    {\t\tvec4 src = texture2D(inputImageTexture, textureCoordinate);    vec4 dst;    %s        gl_FragColor = dst;    }",e.shader_setup={},e.get_unit={},e.destroy=function(){},e.gpu_process=function(e,a,r){try{if(t=at(a),!this.m_shader){var n=this.fshPTPTemplate.replace(/%p/g,this.shader_uniform());n=n.replace(/%s/g,this.shader_procession()),this.m_shader=new gt(null,n,this.m_context.m_context)}var o=nt(this.m_context.m_context,r,this.m_shader);if(this.init(e,r.m_width,r.m_height),o.shader_texture("inputImageTexture",a.current()),this.shader_setup(o),o.draw_to(a.new_temporary()),this.m_context.m_context.getError())throw new error("CGEPTPTemplate::gpu_process");a.push_to_current(),t.destroy()}catch(e){throw new error("CGEPTPTemplete::gpu_process")}finally{t.destroy(),this.texturelocker&&this.m_context.release_resource_texture(this.texturelocker)}},e.destroy=function(){t.destroy(),this.m_shader&&(this.m_shader.destroy(),this.m_shader=0),this.m_curve_tex&&this.m_context.m_context.deleteTexture(this.m_curve_tex),this.m_curve_tex=0,this.texturelocker&&(this.m_context.release_resource_texture(this.texturelocker),this.texturelocker=0),this.m_formula_list&&(this.m_formula_list.destroy(),this.m_formula_list=0)},e}function nt(e,t,a,r,n,o){var i={};i.gl=e,i.cnt=0,null==t?(i.width=r,i.height=n,i.frame_buffer=o):(i.width=t.m_width,i.height=t.m_height,i.frame_buffer=t.m_frame_buffer),i.m_context=e,i.shader=a,e.useProgram(i.shader.program),null==i.gl.engineVertexBuffer&&(i.gl.engineVertexBuffer=i.gl.createBuffer()),i.gl.bindBuffer(i.gl.ARRAY_BUFFER,i.gl.engineVertexBuffer),i.gl.bufferData(i.gl.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),i.gl.STATIC_DRAW),i.shader.vertexAttribute=i.gl.getAttribLocation(i.shader.program,"vPosition"),i.gl.enableVertexAttribArray(i.shader.vertexAttribute),i.gl.vertexAttribPointer(i.shader.vertexAttribute,2,i.gl.FLOAT,!1,0,new Float32Array([-1,-1,1,-1,1,1,-1,1]));i.gl.getError();return i.shader_texture=function(e,t){this.gl.activeTexture(this.gl.TEXTURE2+this.cnt),this.gl.bindTexture(this.gl.TEXTURE_2D,t);var a={};a[e]=2+this.cnt,this.shader.textures(a);this.gl.getError();++this.cnt},i.draw_to=function(e,t){t||this.gl.TRIANGLE_FAN;if(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.frame_buffer),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0),this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)!=this.gl.FRAMEBUFFER_COMPLETE);this.gl.viewport(0,0,this.width,this.height),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,4);this.gl.getError()},i}function ot(e,t,a){var r={};r.get_item=function(e){var t=e.fetch_symbol(),a=this.m_list[t];if(a=={})throw new Error("create_dispatch_parcer");a.parcer||(a.parcer=a.create(this.m_context));var r="processing:";return r+=t,r+="\n",this.m_context.on_log(r),a},r.m_context=e,r.m_list={};for(var n=0;n<a;++n)r.m_list[t[n].name]={},r.m_list[t[n].name]={parcer:null,create:t[n].create};return r.gpu_process=function(e,t,a){this.get_item(e).parcer.gpu_process(e,t,a)},r.destroy=function(){for(var e in this.m_list)this.m_list[e].parcer&&this.m_list[e].parcer.destroy&&this.m_list[e].parcer.destroy()},r.mode_change=function(){},r.size_change=function(){},r}function it(){this.m_macros={},this.m_script="",this.read_macro=function(e,t,a){function r(e){var t=e.indexOf("<");if(t>0){n=!0;var a=e.slice(t+1);a=findAngleBraket(a);var r=e.indexOf(">");if(r<0)throw new Error("语法错误：'<' unmatch");var o=a.slice(0,r);return o=this.m_macros[o]?this.m_macros[o]:""}return e}var n=!1;return r.bind(this),a.script=r(e),n}}function st(){var e={};return e.m_data=new it,e.set_macro=function(e,t){if(!t)return void this.m_data.m_macros.erase(e);this.m_data.m_macros[e]=t},e.clear=function(){this.m_data.m_macros.clear()},e._parce=function(e){for(var t="";;){this.m_data.m_script="";var a={};if(a.script=this.m_data.m_script,!this.m_data.read_macro(e.script,!0,a))return a.script;this.m_data.m_script=a.script;var r=this.m_data.m_script;this.m_data.m_script=t,t=r,e.script=t}},e}function lt(t,a,r){r=void 0==r||r;var n=0;return n=e.createTexture(),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,a,0,e.RGBA,e.UNSIGNED_BYTE,null),e.getError()?(e.deleteTexture(n),0):n}function ct(t,a,r,n,o){if(e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.copyTexSubImage2D(e.TEXTURE_2D,0,0,0,0,0,r,n),e.getError())throw"error in copy_texture"}function ht(t,a,r,n,o){return e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.copyTexSubImage2D(e.TEXTURE_2D,0,0,0,0,0,n,o),!e.getError()}function dt(t){e.deleteTexture(t)}function ut(t,a){e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,a?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,a?e.LINEAR:e.NEAREST)}function pt(t,a){if(t)return t;if(t=new gt(null,a,e),e.getError())throw new Error("error in check_shader");return t}function mt(){this.serial=0,this.script=null,this.compressor=null,this.texture=0,this.processed=!1}var ft=function(){function e(e,t,a){return Math.min(Math.max(e*(1-a)+t*a,0),255)}return{createCGEBlendOpacity:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, src2, alpha);                }"},t.run_float=function(t,a,r){return e(t,a,r)},t},createCGEBlendDarken:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)            {                return mix(src1, min(src1,src2), alpha);            }"},t.run_float=function(t,a,r){return e(t,t<a?t:a,r)},t},createCGEBlendLighten:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, max(src1,src2), alpha);                }"},t.run_float=function(t,a,r){return e(t,t<a?a:t,r)},t},createCGEBlendMultiply:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, src1 * src2, alpha);                }"},t.run_float=function(t,a,r){return e(t,t*a,r)},t},createCGEBlendScreen:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, src1 + src2 - src1 * src2, alpha);                }"},t.run_float=function(t,a,r){return e(t,t+a-t*a,r)},t},createCGEBlendColorDodge:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, min(src1 + (src1 * src2) / (1.0 - src2), 1.0), alpha);                }"},t.run_float=function(t,a,r){return e(t,Math.min(1,t+t*a/(1-a)),r)},t},createCGEBlendColorBurn:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, 1.0 - min((1.0 - src1) / (src2 + 0.00003), 1.0), alpha);                }"},t.run_float=function(t,a,r){return e(t,1-Math.min((1-t)/(a+3e-5),1),r)},t},createCGEBlendLinearDodge:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, min(src1 + src2, 1.0), alpha);                }"},t.run_float=function(t,a,r){return e(t,Math.min(t+a,1),r)},t},createCGEBlendLinearBurn:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, max(src1 + src2 - 1.0, 0.0), alpha);                }"},t.run_float=function(t,a,r){return e(t,Math.max(t+a-1,0),r)},t},createCGEBlendOverlay:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    if(src1.r < 0.5)                        src2.r = (src1.r * src2.r) * 2.0;                    else src2.r = (src1.r + src2.r) * 2.0 - (src1.r * src2.r) * 2.0 - 1.0;                    if(src1.g < 0.5)                        src2.g = (src1.g * src2.g) * 2.0;                    else src2.g = (src1.g + src2.g) * 2.0 - (src1.g * src2.g) * 2.0 - 1.0;                    if(src1.b < 0.5)                        src2.b = (src1.b * src2.b) * 2.0;                    else src2.b = (src1.b + src2.b) * 2.0 - (src1.b * src2.b) * 2.0 - 1.0;                    return mix(src1, src2, alpha);                }"},t.run_float=function(t,a,r){return e(t,t<.5?t*a*2:2*(t+a-t*a)-1,r)},t},createCGEBlendHardLight:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    if(src2.r < 0.5)                        src2.r = (src1.r * src2.r) * 2.0;                    else src2.r = (src1.r + src2.r) * 2.0 - (src1.r * src2.r) * 2.0 - 1.0;                    if(src2.g < 0.5)                        src2.g = (src1.g * src2.g) * 2.0;                    else src2.g = (src1.g + src2.g) * 2.0 - (src1.g * src2.g) * 2.0 - 1.0;                    if(src2.b < 0.5)                        src2.b = (src1.b * src2.b) * 2.0;                    else src2.b = (src1.b + src2.b) * 2.0 - (src1.b * src2.b) * 2.0 - 1.0;                    return mix(src1, src2, alpha);                }"},t.run_float=function(t,a,r){return e(t,a<.5?t*a*2:2*(t+a-t*a)-1,r)},t},createCGEBlendSoftLight:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    if(src2.r < 0.5)                        src2.r = (src2.r * 2.0 - 1.0) * (src1.r - (src1.r * src1.r)) + src1.r;                    else src2.r = ((src2.r * 2.0 - 1.0) * (sqrt(src1.r) - src1.r)) + src1.r;                    if(src2.g < 0.5)                        src2.g = (src2.g * 2.0 - 1.0) * (src1.g - (src1.g * src1.g)) + src1.g;                    else src2.g = ((src2.g * 2.0 - 1.0) * (sqrt(src1.g) - src1.g)) + src1.g;                    if(src2.b < 0.5)                        src2.b = (src2.b * 2.0 - 1.0) * (src1.b - (src1.b * src1.b)) + src1.b;                    else src2.b = ((src2.b * 2.0 - 1.0) * (sqrt(src1.b) - src1.b)) + src1.b;                    return mix(src1, src2, alpha);                }"},t.run_float=function(t,a,r){var n;return n=a<.5?(2*a-1)*(t-t*t)+t:(2*a-1)*(Math.sqrt(t)-t)+t,e(t,n,r)},t},createCGEBlendVividLight:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    src2.r = src2.r < 0.5 ? 1.0 - (1.0 - src1.r) / (src2.r * 2.0) : src1.r / (1.0 - src2.r) * 0.5;                    src2.g = src2.g < 0.5 ? 1.0 - (1.0 - src1.g) / (src2.g * 2.0) : src1.g / (1.0 - src2.g) * 0.5;                    src2.b = src2.b < 0.5 ? 1.0 - (1.0 - src1.b) / (src2.b * 2.0) : src1.b / (1.0 - src2.b) * 0.5;                    return mix(src1, clamp(src2, 0.0, 1.0) , alpha);                }"},t.run_float=function(t,a,r){return e(t,a<.5?1-(1-t)/(2*a):t/(1-a)*.5,r)},t},createCGEBlendLinearLight:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, clamp(src1 + src2 * 2.0 - 1.0, 0.0, 1.0), alpha);                }"},t.run_float=function(t,a,r){return e(t,t+2*a-1,r)},t},createCGEBlendPinLight:function(){function t(e,t){return t*=2,t>e&&(t-=1)<e&&(t=e),t}var a={};return a.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    src2 *= 2.0;                    if(src2.r > src1.r)                    {                        src2.r = src2.r - 1.0;                        if(src2.r < src1.r)                            src2.r = src1.r;                    }                    if(src2.g > src1.g)                    {                        src2.g = src2.g - 1.0;                        if(src2.g < src1.g)                            src2.g = src1.g;                    }                    if(src2.b > src1.b)                    {                        src2.b = src2.b - 1.0;                        if(src2.b < src1.b)                            src2.b = src1.b;                    }                    return mix(src1, src2, alpha);                }"},a.run_float=function(a,r,n){return e(a,t(a,r),n)},a},createCGEBlendHardMix:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, step(1.0 - src1, src2), alpha);                }"},t.run_float=function(t,a,r){return e(t,a<1-t?0:1,r)},t},createCGEBlendDifference:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, abs(src1 - src2), alpha);                }"},t.run_float=function(t,a,r){return e(t,Math.abs(t-a),r)},t},createCGEBlendExclude:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return mix(src1, src1 + src2 - src1 * src2 * 2.0, alpha);                }"},t.run_float=function(t,a,r){return e(t,t+a-2*t*a,r)},t},createCGEBlendAdd:function(){var t={};return t.shader_string=function(){return"vec3 blend(vec3 src1, vec3 src2, float alpha)                {                    return src1 + src2 * alpha;                }"},t.run_float=function(t,a,r){return e(t,t+a,r)},t}}}(),gt=function(){function e(e){return"[object Array]"==Object.prototype.toString.call(e)}function t(e){return"[object Number]"==Object.prototype.toString.call(e)}function a(e,t,a){var r=e.createShader(t);if(e.shaderSource(r,a),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw"compile error: "+e.getShaderInfoLog(r);return r}function r(e,t,r){if(this.gl=r,this.vertexAttribute=null,this.texCoordAttribute=null,this.program=this.gl.createProgram(),e=e||n,t=t||defaultFragmentSource,t="precision highp float;"+t,this.gl.attachShader(this.program,a(this.gl,this.gl.VERTEX_SHADER,e)),this.gl.attachShader(this.program,a(this.gl,this.gl.FRAGMENT_SHADER,t)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw"link error: "+this.gl.getProgramInfoLog(this.program)}var n="    attribute vec2 vertex;    attribute vec2 _texCoord;    varying vec2 textureCoordinate;    void main(){        textureCoordinate=_texCoord;        gl_Position=vec4(vertex*2.0-1.0,0.0,1.0);    }",n="    attribute vec2 vPosition;    varying vec2 textureCoordinate;    void main(){        textureCoordinate= (vPosition.xy + 1.0) / 2.0;        gl_Position=vec4(vPosition, 0.0, 1.0);    }";return r.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.program=null},r.prototype.uniformMat4=function(t){this.gl.useProgram(this.program);for(var a in t)if(t.hasOwnProperty(a)){var r=this.gl.getUniformLocation(this.program,a);if(null!=r){var n=t[a];if(!e(n)||4!=n.length)throw a+" length valid";this.gl.uniformMatrix2fv(r,!1,new Float32Array(n))}}},r.prototype.uniforms=function(a){this.gl.useProgram(this.program);for(var r in a)if(a.hasOwnProperty(r)){var n=this.gl.getUniformLocation(this.program,r);if(null!==n){var o=a[r];if(e(o))switch(o.length){case 1:this.gl.uniform1fv(n,new Float32Array(o));break;case 2:this.gl.uniform2fv(n,new Float32Array(o));break;case 3:this.gl.uniform3fv(n,new Float32Array(o));break;case 4:this.gl.uniform4fv(n,new Float32Array(o));break;case 9:this.gl.uniformMatrix3fv(n,!1,new Float32Array(o));break;case 16:this.gl.uniformMatrix4fv(n,!1,new Float32Array(o));break;default:throw"dont't know how to load uniform \""+r+'" of length '+o.length}else{if(!t(o))throw'attempted to set uniform "'+r+'" to invalid value '+(o||"undefined").toString();this.gl.uniform1f(n,o)}}}return this},r.prototype.textures=function(e){this.gl.useProgram(this.program);for(var t in e)e.hasOwnProperty(t)&&this.gl.uniform1i(this.gl.getUniformLocation(this.program,t),e[t]);return this},r.prototype.drawRect=function(e,t){null==this.vertexBuffer&&(this.vertexBuffer=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,e,this.gl.STATIC_DRAW),null==this.texCoordBuffer&&(this.texCoordBuffer=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.texCoordBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW),null==this.vertexAttribute&&(this.vertexAttribute=this.gl.getAttribLocation(this.program,"vertex"),this.gl.enableVertexAttribArray(this.vertexAttribute)),null==this.texCoordAttribute&&(this.texCoordAttribute=this.gl.getAttribLocation(this.program,"_texCoord"),this.gl.enableVertexAttribArray(this.texCoordAttribute)),this.gl.useProgram(this.program),this.vertexAttribute=this.gl.getAttribLocation(this.program,"vertex"),this.gl.enableVertexAttribArray(this.vertexAttribute),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.vertexAttribPointer(this.vertexAttribute,2,this.gl.FLOAT,!1,0,0),this.texCoordAttribute=this.gl.getAttribLocation(this.program,"_texCoord"),this.gl.enableVertexAttribArray(this.texCoordAttribute),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.texCoordBuffer),this.gl.vertexAttribPointer(this.texCoordAttribute,2,this.gl.FLOAT,!1,0,0),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)},r.getDefaultShader=function(){return this.gl.defaultShader=this.gl.defaultShader||new r,this.gl.defaultShader},r}(),vt=function(e){var t={};return t.m_status="",t.m_script="",t.m_start="",t.m_end="",t.a_z=new RegExp("[a-z]","i"),t.A_Z=new RegExp("[A-Z]","i"),t.blank=new RegExp("\\s","i"),t.blank2=new RegExp("\\s\\s","i"),t._enter=new RegExp("\\n","i"),t._line=new RegExp("\\r","i"),t.num=new RegExp("\\d","i"),t.quote=new RegExp('"',"i"),t.quotes=new RegExp("'","i"),t.negative=new RegExp("-","i"),t.dot=new RegExp(".","i"),t.semicolon=new RegExp(";","i"),t.comment=new RegExp("%","i"),t.quote_comment="[",t.QC_end="]",t.get_lut=function(){},t.next=function(){for(this.m_start=this.m_end;this.blank.test(this.m_start.charAt(0))||this.blank2.test(this.m_start.charAt(0))||this._line.test(this.m_start.charAt(0))||this._enter.test(this.m_start.charAt(0))||this.comment.test(this.m_start.charAt(0))||this.quote_comment==this.m_start.charAt(0);)if(this.comment.test(this.m_start.charAt(0))||this.quote_comment==this.m_start.charAt(0))if(this.comment.test(this.m_start.charAt(0)))for(this.m_start=this.m_start.substring(1);!(this._line.test(this.m_start.charAt(0))&&this._enter.test(this.m_start.charAt(0))||""==this.m_start.charAt(0));)this.m_start=this.m_start.substring(1);else{for(this.m_start=this.m_start.substring(1);this.QC_end!=this.m_start.charAt(0)&&""!=this.m_start.charAt(0);)this.m_start=this.m_start.substring(1);this.QC_end==this.m_start.charAt(0)&&(this.m_start=this.m_start.substring(1))}else this.m_start=this.m_start.substring(1);var e=this.m_start.charAt(0);this.m_end=this.m_start.substring(1);var t=!0;if(this.a_z.test(this.m_start.charAt(0))||this.A_Z.test(this.m_start.charAt(0))){for(var a=0;this.a_z.test(this.m_end.charAt(a));)++a;this.m_end=this.m_end.substring(a),this.m_start.length-this.m_end.length>32?this.m_status="BPSUnknown":this.m_status="BPSSymbol"}else if(this.num.test(this.m_start.charAt(0))||this.negative.test(this.m_start.charAt(0))){var a=0;"-"==e&&++a;for(var r=!1;;){if(r){if(!this.num.test(this.m_end.charAt(a)))break}else if("."==this.m_end.charAt(a))r=!0;else if(!this.num.test(this.m_end.charAt(a)))break;++a}this.m_end=this.m_end.substring(a),this.m_status="BPSNumber"}else if(this.quote.test(this.m_start.charAt(0))||this.quotes.test(this.m_start.charAt(0))){for(var n=!1;""!=this.m_end;){if(e==this.m_end.charAt(0)){n=!0,this.m_end=this.m_end.substring(1);break}this.m_end=this.m_end.substring(1)}this.m_status=n?"BPSString":"BPSUnknown"}else if(this.semicolon.test(this.m_start.charAt(0)))this.m_status="BPSSemicolon";else if(""==this.m_start.charAt(0))this.m_end=this.m_start,this.m_status="BPSEOF",t=!1;else{for(;!(this.a_z.test(this.m_start.charAt(0))||this.A_Z.test(this.m_start.charAt(0))||this.num.test(this.m_start.charAt(0))||this.quote.test(this.m_start.charAt(0))||this.quotes.test(this.m_start.charAt(0))||this.semicolon.test(this.m_start.charAt(0)));)this.m_end=this.m_end.substring(1);this.m_status="BPSUnknown"}return t},t.set_script=function(e){this.m_script=this.m_start=this.m_end=e,this.next()},t.dump=function(e){e.script=this.m_script,e.current=this.m_start},t.renew=function(){this.m_end=this.m_start=this.m_script,this.next()},t.get_symbol=function(e){return"BPSSymbol"==this.get_current_status()&&(e.dst=this.m_start.substring(0,this.m_start.length-this.m_end.length),!0)},t.cmp_symbol=function(e){if("BPSSymbol"!=this.get_current_status())return!1;for(var t=this.m_start;;){if(!e.charAt(0))return t==this.m_end;if(t==this.m_end)return!1;if(e.charAt(0)!=t.charAt(0))return!1;e=e.substring(1),t=t.substring(1)}},t.get_float=function(){if("BPSNumber"!=this.m_status)return 0;var e=this.m_start,t=1;"-"==e.charAt(0)&&(t=-1,e=e.substring(1));for(var a=0,r=!1,n=1;e!=this.m_end;)"."==e.charAt(0)?r=!0:r?(n*=.1,a+=n*(e.charCodeAt(0)-48)):a=10*a+(e.charCodeAt(0)-48),e=e.substring(1);return a*t},t.get_string=function(e){if("BPSString"==this.m_status)return e.start=this.m_start.substring(1),e.end=this.m_start.substring(this.m_start.length-this.m_end.length-1),0;e.start=this.m_start,e.end=this.m_end},t.ended=function(){return"BPSEOF"==this.get_current_status()},t.get_current_status=function(){return this.m_status},t.set_script(e),t},bt=function(e){return"[object String]"!=Object.prototype.toString.call(e)||"CRMProcessingSuccess"==e},_t=function(e,t,a,r,n,o){var i=new Array,s=new Array,l=new Array,c=null,h=!1,d=function(e,t){for(var a=l.length-1;a>=0;--a)if(l[a].name==e)return t(a),!0;return!1},u=function(t){var a=i.length;if(!(t>=a)){for(var r=t;r<a;++r){var o=i[r];(n||o!=e)&&dt(o)}i.length=t}},p=function(e){i[i.length]=e,u(o.get_max_pool_size())},m=function(){var e=i.length;if(!e)return null;--e;var t=i[e];return i.length=e,t},f=function(){_.unlock(),l.map(function(e){p(e.image)}),l.length=0,c&&(p(c),c=null)},g=function(){var e=lt(t,a);if(!e)throw Error("OpenGLError: ProcessData::new_image");return e},v=function(e,r){var n=e;if(n||(n=m()),n||(n=g()),!ht(n,r,o.get_frame_buffer(),t,a))throw e||p(n),Error("OpenGLError: ProcessData::duplicate_image");return n},b=function(e){var t=s.length;return e<0&&(e+=t),e},_={get_src:function(){return e},unlock:function(){s.map(function(e){e&&p(e)}),s.length=0},destroy:function(){f(),n&&dt(e),u(0)},current:function(){return c},new_temporary:function(){var e=m();return e||(e=g()),s[s.length]=e,e},get_temporary:function(e){return e=ap_idx(e),s[e]},push_to_current:function(e){e=null==e?-1:e,e=b(e),p(c),c=s[e],s[e]=null},load_channel:function(e){var t=null;return d(e,function(e){t=l[e].image}),t},load_view:function(e){var t=o.get_view_by_number(e);return t?t.processed?o.load_view(t):"CRMOtherError":"CRMScriptSyntaxError"},get_inner_result:function(){return c},get_result:function(){var e=c;return c=null,f(),e},fetch_tmp_image:function(){var t=m();return r||n||e!=t||(t=m(),p(e)),t||(t=g()),t},put_tmp_image:function(e){p(e)},new_channel:function(e){var t=m();t||(t=g()),l[l.length]={name:e,image:t},v(t,c)},swap_channel:function(e){return d(e,function(e){var t=c;c=l[e].image,l[e].image=t})},end_channel:function(e){return d(e,function(e){p(l[e].image),l.splice(e,1)})},prepare:function(){if(f(),!e||h)throw Error("failed load source image");r?c=v(null,e):(c=e,h=!0,n&&(e=null))},prepare_empty:function(){return f(),c=m(),c||(c=g()),c},size:function(){return{width:t,height:a}}};return _};return function(t){var a=null,r=0,n=st(),o=(st(),""),i=null,s=null,l={},c=0,h=0,d=0,u=new Array,p=function(){u.map(function(e){e.texture&&dt(e.texture),e.compressor&&e.compressor.destroy(),e.compressor=null,e.texture=null,e.processed=!1})},m=function(e,t){for(var a=0;a<u.length;++a)if(e==u[a].serial)return t(a),!0;return!1},f=function(e){if(e.texture||!a)return"CRMInnerError";e.texture=a.fetch_tmp_image();var t=e.compressor;return e.compressor=null,t.decompress_image_then_release(e.texture)?"CRMProcessingSuccess":(a.put_tmp_image(e.texture),e.texture=null,e.processed=!1,"CRMOtherError")},g={get_gl:function(){return e},destroy:function(){i&&i.destroy(),s&&s.destroy(),a&&a.destroy(),h&&t.context().deleteFramebuffer(h),p(),t.destroy()},get_src:function(){return a.get_src()},create_new_texture:function(e,t,a){return lt(e,t,a)},get_configure:function(){return l},set_configure:function(e){l=e},set_image:function(e,t,n,o,l,h){void 0==o&&(o=!1),void 0==l&&(l=!1),void 0==h&&(h=!0),(!e||t<=0||n<=0)&&(t=n=0,h&&e&&(dt(e),e=null)),p(),o||(u.length=0);var d={width:0,height:0};a&&(d=a.size(),a.destroy(),a=null),t==d.width&&n==d.height||(i&&i.size_change(t,n),s&&s.size_change(t,n)),e&&(++c,r=0,a=_t(e,t,n,!l,h,g))},get_image_size:function(){return a?a.size():{width:0,height:0}},get_inner_result:function(){return a?a.get_inner_result():null},get_result:function(){return a?a.get_result():null},create_view:function(e){var t=new mt;return t.script=e,t.serial=++d,u[u.length]=t,t.serial},destroy_view:function(e){m(e,function(e){var r=u[e];r.texture&&(a?a.put_tmp_image(r.texture):t.delete_texture(1,r.texture)),r.compressor&&r.compressor.decompress_image_then_release(0,0),u.splice(e,1)})},get_view_by_number:function(e){var t=null;return m(e,function(e){t=u[e]}),t},load_view:function(e,r){if(!e.processed)return"CRMInnerError";if(e.compressor){var n=f(e);if(!bt(n))return n}if(!e.texture)return"CRMInnerError";if(r){var o=a.size();return t.texture_to_texture(r,e.texture,g.get_frame_buffer(),o.width,o.height)?r:"CRMOpenGLError"}return e.texture},process_view:function(e){var t=g.get_view_by_number(e);if(!t)return"CRMViewInvalidSerial";if(t.processed)return"CRMProcessingSuccess";g.set_script(t.script);var r=g.process_image();return"CRMProcessingSuccess"!=r?r:(t.texture=a.get_result(),t.processed=!0,t.texture?"CRMProcessingSuccess":"CRMInnerError")},get_src_size:function(){return a?a.size():{width:0,height:0}},compress_view:function(e,t){var r=g.get_view_by_number(e);if(!r)return"CRMViewInvalidSerial";if(!r.processed)return"CRMOtherError";if(r.compressor){var n=f(r);if("CRMProcessingSuccess"!=n)return n}var o=a.size();return t.compress_image(texture,o.width,o.height)?(r.compressor=t,a.put_tmp_image(r.texture),r.texture=null,"CRMProcessingSuccess"):"CRMOtherError"},set_lock_unlock_function:function(e,a){t.lock_image=e,t.unlock_image=a},fetch_view_texture:function(e){var t=g.get_view_by_number(e);if(!t)return"CRMViewInvalidSerial";if(!t.processed){var a=g.process_view(e);return bt(a)?(a=t.texture,t.compressor&&t.compressor.destroy(),t.compressor=null,t.texture=0,t.processed=!1,a):"CRMViewInvalidSerial"}var a=g.load_view(t);return t.compressor&&t.compressor.destroy(),t.compressor=null,t.texture=0,t.processed=!1,a},get_view_texture:function(e){var t=g.get_view_by_number(e);if(!t)return"CRMViewInvalidSerial";if(!t.processed){var a=g.process_view(e);if(!bt(a))return a}return g.load_view(t)},set_macro:function(e,t){},clear_macro:function(){},set_script:function(e){o=e},clean:function(){i&&i.destroy(),i=null,s&&s.destroy(),s=null},process_image_template:function(){var e,l=a.size();++r;var h=vt(n._parce({script:o})),d=tt(h,r);d.log_return(),d.log("Image serial number:"),d.log(c),d.log_return(),d.log("Image size:"),d.log(l.width.toString()),d.log(l.height.toString()),d.log_return();var u=["layer",0],p=["start","swap","end",0];if(d.test_symbol("view")){var m=Math.floor(d.fetch_float()+.5),v=g.get_view_by_number(m);if(v||d.error("Invalid view number",m),v.processed||d.error("View has not been processed",m),v.compressor&&(e=f(v),!bt(e)))throw Error(e);if(e=g.load_view(v,a.prepare_empty()),!bt(e))throw Error(e);d.assume_semicolon()}else a.prepare();for(;!d.ended();){switch(d.lookup_symbol(u)){case 0:"CPM_LUV_MIX_LOG"==d.m_mode&&d.error("can't use layer in mix log mode");var b=d.fetch_symbol();switch(d.lookup_symbol(p,!0)){case 0:a.new_channel(b);break;case 1:a.swap_channel(b);break;case 2:a.end_channel(b);break;default:throw Error("CGEScriptEngine::process_image_template")}break;default:var _=function(){return"CPM_SRGB"==d.m_mode?(i||(i=$e(t)),i):"CPM_LUV_MIX_LOG"==d.m_mode?(s||(s=Qe(t)),s):void 0}(),y={};y.m_frame_buffer=g.get_frame_buffer(),y.m_width=l.width,y.m_height=l.height,_.gpu_process(d,a,y)}d.assume_semicolon()}"CPM_LUV_MIX_LOG"==d.m_mode&&d.error('use "toneMapEnd;" command before script end'),d.log("process success ! \n");var x=d.get_log();t.on_log(x)},get_frame_buffer:function(){return h||(h=t.context().createFramebuffer()),h},get_max_pool_size:function(){return 3},process_image:function(){if(!a)return"CRMLoadSourceImageFailed";t.context().getError();t.context().disable(t.context().BLEND),t.context().bindBuffer(t.context().ARRAY_BUFFER,null);try{this.process_image_template()}catch(e){return e}return t.context().finish(),t.context().getError(),"CRMProcessingSuccess"}};return g}(function(e){var t=(Math.pow(2,26),Math.pow(2.26),new Array,{destroy:function(){},context:function(){return e},on_log:function(e){},lock_image:function(){},unlock_image:function(){},resource_pool_enable:function(){},resource_pool_texture_limite:function(){},resource_pool_texture_flush:function(){},texture_to_texture:function(t,a,r,n,o){if(e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.copyTexSubImage2D(e.TEXTURE_2D,0,0,0,0,0,n,o),e.getError())throw new Error("texture_to_texture");return!0},get_resource_texture:function(t){var a={},r=this.lock_image(t);return r?"[object WebGLTexture]"==r.toString()?(a.texture=r,a):(a.width=r.width,a.height=r.height,a.texture=e.createTexture(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.finish(),this.unlock_image(t,r),a):null},release_resource_texture:function(t){e.deleteTexture(t.texture)},delete_textures:function(t,a){if(1==t)this.m_context.deleteTexture(a);else for(var r=0;r<a.length&&r<t;++r)e.deleteTexture(a[r])}}),a=t;return a.m_context=e,a}(e))}};window.EW={check_CRM:function(e){return n.check_CRM(e)},create:function(e,t){function o(){return se}function i(){return se}function s(){return se}function l(){return se}function c(){return se}function h(){var e;return e=0==se.maskView?{model:se.model,stress:se.stress,maskView:Ae.create_view("basicAdjust dark;")}:{model:se.model,stress:se.stress,maskView:Ae.create_view("view "+se.maskView.toString()+";")},Ae.process_view(e.maskView),e}function d(){return se}function u(){return se}function p(){return se}function m(){return se}function f(){return se.maskView=Fe.create_view("view "+de.toString()+";"),Fe.process_view(se.maskView),se}function g(){return{script:"",view:0,destroy:function(){this.script="",this.view&&(we.destroy_view(this.view),this.view=0)}}}function v(){var e={};return e.model=0,e.index=0,e.queue=new Array,e.destroy=function(){if("reshape"==this.model)for(var e=0;e<this.queue.length;++e)Ae.destroy_view(this.queue[e].maskView);"blemish"!=this.model&&"redEyeRemove"!=this.model||this.firstStep&&Fe.destroy_view(this.firstStep),this.model=0,this.index=0,this.queue=new Array},e}function b(e,t,a,r){var n=v();n.model=r.model,n.index=r.index;for(var o=0;o<r.queue.length;++o)n.queue[o]=r.queue[o];return{texture:e,name:"engineTexture",width:t,height:a,handlerQueue:n}}function _(e,t,a,r){re&&cancelAnimationFrame(re),rt.autoCrop(e,t,a,r)}function y(e,t,a){re&&cancelAnimationFrame(re),rt.update(e,t,a)}function x(){rt.paintClone(ke,Me,Se,Te,De)}function C(e,t,a,r,n,o){ke=e,Me=t,Se=a,Te=r,De=n,re&&cancelAnimationFrame(re),o?x():re=requestAnimationFrame(x)}function w(){rt.reshape(Re,Ie,Ne,Pe,Be,ze),ze=null}function A(e,t,a,r,n,o,i){i&&(re&&cancelAnimationFrame(re),Re=e,Ie=t,Ie=t,Ne=a,Pe=r,Be=n,ze=o,w()),Re=e,Ie=t,Ne=a,Pe=r,Be=n,o&&ze?(ze.max[0]<o.max[0]&&(ze.max[0]=o.max[0]),ze.max[1]<o.max[1]&&(ze.max[1]=o.max[1]),ze.min[0]>o.min[0]&&(ze.min[0]=o.min[0]),ze.min[1]>o.max[1]&&(ze.min[1]=o.max[1])):ze=o,re&&cancelAnimationFrame(re),re=requestAnimationFrame(w)}function E(){rt.paint(Ue,Ge,Oe,je,Le,He,Ze),He=0}function F(e,t,a,r,n,o,i){Ue=e,Ge=t,Oe=a,je=r,Le=n,Ze=i,o&&(He?(He.max[0]<o.max[0]&&(He.max[0]=o.max[0]),He.max[1]<o.max[1]&&(He.max[1]=o.max[1]),He.min[0]>o.min[0]&&(He.min[0]=o.min[0]),He.min[1]>o.max[1]&&(He.min[1]=o.max[1])):He=o),re&&cancelAnimationFrame(re),re=requestAnimationFrame(E)}function k(){rt.update(Ye,We,Qe),_t()}function M(e,t,a,r){Ye=e,We=t,Qe=a,_t=r,re&&cancelAnimationFrame(re),re=requestAnimationFrame(k)}function S(){rt.drawRotation(Ve,Je,Xe,qe)}function T(e,t,a){Ve=e,Je=t,Xe=a,qe=at.queue.slice(0,at.index),ae&&qe.push({script:ae}),S()}function D(){rt.drawPolariod(Ke,$e,et,yt,tt)}function R(e,t,a,r,n){Ke=e,$e=t,et=a,tt=r,null!=n&&(yt=n),D()}function I(e,t){return{name:e,image:t,lock:!1}}function N(e,t,a){return e.substring(0,t)+a+e.substr(t)}function P(e){for(var t,a=[],r={},n=0;null!=(t=e[n]);n++)r[t]||(a.push(t),r[t]=!0);return a}function B(e,t,a,r,o){if(r){var i=null!=a?"layer op start;"+e+"layer op swap;blend layer op opacity "+a.toString()+";":e;return void t(we.create_view(i))}ce.script!=e&&(ce.destroy(),ce.script=e,ce.view=Fe.create_view(e),Fe.process_view(ce.view)),se||(se={model:"effectRule",eModel:"",script:""});var s,l=Fe.get_src_size();if("effect"==o){ee&&Fe.destroy_view(ee);var c=null!=a?"blend view "+ce.view.toString()+" opacity "+a.toString()+";":"view "+ce.view.toString()+";";se.script=null!=a?"layer op start;"+ce.script+"layer op swap;blend layer op opacity "+a.toString()+";":ce.script,se.eModel="normal",ee=Fe.create_view(c),s=Fe.get_view_texture(ee),n.check_CRM(s)||console.log("engine error:"+s.toString())}else se.script=ce.script,se.eModel="normal",s=Fe.get_view_texture(ce.view),n.check_CRM(s)||console.log("engine error:"+s.toString()),t=t||function(){};M(s,l.width,l.height,t)}function z(e,t,a,r,o,i){o?we.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}):Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),B(t,a,r,o,i)}function U(e,t,a,r){var n=document.createElement("canvas");n.width=t,n.height=a;var o=n.getContext("2d");o.clearRect(0,0,n.width,n.height);var i=we.get_gl(),s=we.get_frame_buffer();i.bindFramebuffer(i.FRAMEBUFFER,s),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,r,0);var o=n.getContext("2d"),l=o.createImageData(n.width,n.height),c=n.width*n.height*4,h=new Uint8Array(c);if(i.readPixels(e[0],e[1],n.width,n.height,i.RGBA,i.UNSIGNED_BYTE,h),i.getError())return!1;for(var d=0;d<c;d++)l.data[d]=h[d];return o.putImageData(l,0,0),i=null,n.toDataURL()}function G(e,t,r,n){var o=null,i=null;o=e.substring(0,e.length-4),-1!=e.indexOf(".png")?"effect"==t?a.e(9).then(function(){try{i=a(1005)("./"+o+".png"),r(i,e,n)}catch(t){r(null,e,n)}}.bind(null,a)).catch(a.oe):"border"==t&&a.e(6).then(function(){try{i=a(959)("./"+o+".png"),r(i,e,n)}catch(t){r(null,e,n)}}.bind(null,a)).catch(a.oe):-1!=e.indexOf(".jpg")&&("effect"==t?a.e(8).then(function(){try{i=a(1006)("./"+o+".jpg"),r(i,e,n)}catch(t){r(null,e,n)}}.bind(null,a)).catch(a.oe):"border"==t&&a.e(7).then(function(){try{i=a(960)("./"+o+".jpg"),r(i,e,n)}catch(t){r(null,e,n)}}.bind(null,a)).catch(a.oe))}function O(e,t,a,r,n,o,i){var s=0;if(null!=e&&0!=e.length)for(var l=function(l,h,d){if(d.small&&!l){d.small=!1;var u;if(u=h.substring(2),Ce[u]&&!Ce[u].lock&&++s==e.length){for(var p=0;p<i.length;p++)if(i[p].small){t=N(t,i[p].index+1,"s_");for(var m=p+1;m<i.length;m++)i[m].index=i[m].index+2}return void z(e,t,a,r,o,n)}return void c(u,d)}l||a(!1);var f=new Image;if(f.crossOrigin=isSafari?null:"anonymous",f.src=l,f.complete){if(s++,Ce[h]=I(h,f),s==e.length){for(var p=0;p<i.length;p++)if(i[p].small){t=N(t,i[p].index+1,"s_");for(var m=p+1;m<i.length;m++)i[m].index=i[m].index+2}z(e,t,a,r,o,n)}}else f.onload=function(){if(s++,Ce[h]=I(h,f),s==e.length){for(var l=0;l<i.length;l++)if(i[l].small){t=N(t,i[l].index+1,"s_");for(var c=l+1;c<i.length;c++)i[c].index=i[c].index+2}z(e,t,a,r,o,n)}},f.onerror=function(){}},c=function(e,t){G(e,n,l,t)},h=0;h<e.length;h++)if(i[h].small){var d="s_"+e[h];if(Ce[d]){if(!Ce[d].lock&&++s==e.length){for(var u=0;u<i.length;u++)if(i[u].small){t=N(t,i[u].index+1,"s_");for(var p=u+1;p<i.length;p++)i[p].index=i[p].index+2}return void z(e,t,a,r,o,n)}continue}c(d,i[h])}else{if(Ce[e[h]]){if(!Ce[e[h]].lock&&++s==e.length)return void z(e,t,a,r,o,n);continue}c(e[h],i[h])}}function j(e,t){var a="s"==t?Fe:we;if(!e)return null;he.view&&(Ae.destroy_view(he.view),he.view=0),"s"==t?(ve&&ee&&(a.destroy_view(ve),ve=0),ee&&(ve=ee,ee=0)):(ve&&K&&(a.destroy_view(ve),ve=0),K&&(ve=K,K=0)),ue&&a.destroy_view(ue);var r=(ve?"view %1;".replace(/%1/,ve.toString()):"")+"basicAdjust clone %x %y %dx %dy;".replace(/%x/,e.x.toString()).replace(/%y/,e.y.toString()).replace(/%dx/,e.dx.toString()).replace(/%dy/,e.dy.toString());ue=a.create_view(r),a.process_view(ue)}function L(e,t,a,r,o){mt();var i=(Ae.get_src_size(),we.get_src_size(),"s"==r?Fe:we),s="painter";if(e&&e.points.length){if(he.lock)return void console.log("painter_view hasn't been unlock");"eraser"==e.model&&(s="eraser",e.model="lucency");var l=he.view;he.view=Ae.create_view((l?"view %1;".replace(/%1/,l.toString()):"basicAdjust alphaInit ;")+bt(e,null,a)),Ae.process_view(he.view),Ae.destroy_view(l)}he.view||(he.view=Ae.create_view("basicAdjust alphaInit ;"),Ae.process_view(he.view)),i.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){"painter"==a&&(he.lock=!1)});var c;if("s"==r){ee&&(i.destroy_view(ee),ee=0),ee=i.create_view((ve?"view %1;".replace(/%1/,ve.toString()):"")+("basicAdjust cloneBlend view %2 cache '"+s+"' opacity 100 ;").replace(/%2/,ue.toString()));var c=i.get_view_texture(ee)}else K&&(i.destroy_view(K),K=0),K=i.create_view((ve?"view %1;".replace(/%1/,ve.toString()):"")+("basicAdjust cloneBlend view %2 cache '"+s+"' opacity 100 ;").replace(/%2/,ue.toString())),c=i.get_view_texture(K);n.check_CRM(c)||console.log("engine error:"+c.toString());var h=i.get_src_size();if(o)return c;C(i.get_src(),c,h.width,h.height,t)}function H(e,t){var r=null;r=e.substring(0,e.length-4),-1!=e.indexOf(".png")?a.e(6).then(function(){t(a(959)("./"+r+".png"))}.bind(null,a)).catch(a.oe):-1!=e.indexOf(".jpg")&&a.e(7).then(function(){t(a(960)("./"+r+".jpg"))}.bind(null,a)).catch(a.oe)}function Z(e,t,a,r){se||(se={model:"effectRule",eModel:"",script:"",thickness:0}),se.eModel="special",se.script=t,se.thickness=r/Fe.get_image_size().width;for(var n=0,o=0;o<e.length;o++)if(Ce[e[o]]){if(!Ce[e[o]].lock&&++n==e.length){se||(se={model:"effectRule",eModel:"",script:"",thickness:0}),se.eModel="special",se.script=t,se.thickness=r/Fe.get_image_size().width;var i=Fe.get_image_size(),s=i.width+2*r,l=i.height+2*r,c=Ee.create_new_texture(s,l,!0);Ee.set_image(c,s,l),Ee.set_lock_unlock_function(Y,function(e,t){Ce[e].lock=!1});var h=Ee.create_view(t),d=Ee.fetch_view_texture(h);return h&&(a&&a(s,l),$&&(st($),$=0),$=d,y($,s,l)),xe.push(d),void Ee.clean()}}else!function(o){H(o,function(i){var s=new Image;if(s.crossOrigin=isSafari?null:"anonymous",s.src=i,s.complete){if(n++,Ce[o]=I(o,s),n==e.length){var l=Fe.get_image_size(),c=l.width+2*r,h=l.height+2*r,d=Ee.create_new_texture(c,h,!0);Ee.set_image(d,c,h),Ee.set_lock_unlock_function(Y,function(e,t){Ce[e].lock=!1});var u=Ee.create_view(t),p=Ee.fetch_view_texture(u);u&&(a&&a(c,h),$&&(st($),$=0),$=p,y($,c,h)),xe.push(p),Ee.clean()}}else s.onload=function(){if(n++,Ce[o]=I(o,s),n==e.length){Ce[o]=I(o,s);var i=Fe.get_image_size(),l=i.width+2*r,c=i.height+2*r,h=Ee.create_new_texture(l,c,!0);Ee.set_image(h,l,c),Ee.set_lock_unlock_function(Y,function(e,t){Ce[e].lock=!1});var d=Ee.create_view(t),u=Ee.fetch_view_texture(d);d&&(a&&a(l,c),$&&(st($),$=0),$=u,y($,l,c)),xe.push(u),Ee.clean()}},s.onerror=function(){}})}(e[o])}function Y(e){return e?(Ce[e].lock=!0,Ce[e].image):we.get_src()}var W,Q,V={painter:o,blurPainter:i,effectRule:s,rule:l,blemish:c,reshape:h,redEyeRemove:d,rotation:u,polaroid:p,crop:m,magic:f,matting:m},J=null==t?100:t,X=4,q=1,K=0,$=0,ee=0,te=0,ae=0,re=0,ne=0,oe=0,ie=!1,se=0,le=g(),ce=g(),he={view:0,lock:!1},de=0,ue=0,pe=0,me=0,fe=0,ge=0,ve=0,be=[],_e=[],ye=0,xe=[],Ce={},we={},Ae={},Ee={},Fe={};we=n.create(e._.gl),Ee=n.create(e._.gl),Ae=n.create(e._.gl),Fe=n.create(e._.gl);var ke,Me,Se,Te,De,Re,Ie,Ne,Pe,Be,ze,Ue,Ge,Oe,je,Le,He,Ze,Ye,We,Qe,Ve,Je,Xe,qe,Ke,$e,et,tt,at=v(),rt=e,nt=!1,ot=(function(){rt.width=50,rt.height=50;var e=rt._.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.clearColor(1,1,0,1),e.clear(e.COLOR_BUFFER_BIT);var t=document.createElement("canvas");t.width=rt.width,t.height=rt.height;var a=t.getContext("2d");a.width=t.width,a.height=t.height,a.drawImage(rt,0,0,t.width,t.height);var r=a.getImageData(0,0,50,50);r.data[0]>0&&r.data[2]<255?nt=!0:console.log("Webgl drawimage to 2dcanvas fails!"),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}(),401),it=function(e,t,a,r){var n=we.get_gl(),o=we.get_frame_buffer();return n.bindFramebuffer(n.FRAMEBUFFER,o),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e),n.copyTexSubImage2D(n.TEXTURE_2D,0,0,0,0,0,a,r),!n.getError()},st=function(e){Ee.get_gl().deleteTexture(e)},lt=function(){le.destroy(),ce.destroy(),$&&(st($),$=0),we.clean(),Ee.clean(),Fe.clean(),de&&(Fe.destroy_view(de),de=0),K&&(we.destroy_view(K),K=0),ee&&(Fe.destroy_view(ee),ee=0),ye&&(Fe.destroy_view(ye),ye=0),te&&(Fe.destroy_view(te),te=0),ae=0,pe&&(Fe.destroy_view(pe),pe=0),me&&(Fe.destroy_view(me),me=0),ge=0,ue&&(Fe.destroy_view(ue),we.destroy_view(ue),ue=0),ve&&(Fe.destroy_view(ve),we.destroy_view(ve),ve=0)},ct=function(){var e=at.firstStep?"view "+at.firstStep.toString()+";":"";e+="basicAdjust redeyeRemove realPosition "+at.queue[0].point_obj.x.toString()+" "+at.queue[0].point_obj.y.toString()+" "+at.queue[0].point_obj.radius.toString()+" 3;";var t=Fe.create_view(e);Fe.process_view(t),at.firstStep&&Fe.destroy_view(at.firstStep),at.firstStep=t},ht=function(){var e=at.firstStep?"view "+at.firstStep.toString()+";":"";e+="basicAdjust blemishFix point "+at.queue[0].points.x.toString()+" "+at.queue[0].points.y.toString()+" radius "+at.queue[0].radius.toString()+";";var t=Fe.create_view(e);Fe.process_view(t),at.firstStep&&Fe.destroy_view(at.firstStep),at.firstStep=t},dt=function(){if(at.index!=at.queue.length){if(at.queue.length&&"reshape"==at.model)for(var e=at.index;e<at.queue.length;++e)Ae.destroy_view(at.queue[e].maskView);at.index||"redEyeRemove"!=at.model&&"blemish"!=at.model||at.firstStep&&(Fe.destroy_view(at.firstStep),at.firstStep=0,at.firstStepScript=[]),at.queue.splice(at.index)}at.queue.length||(at.model=se.model,"redEyeRemove"!=at.model&&"blemish"!=at.model||(at.firstStep=0,at.firstStepScript=[])),at.model!=se.model&&console.log("handler queue hasn't been clear!"),at.queue.push(V[at.model]()),at.queue.length>J&&("reshape"==at.model&&Ae.destroy_view(at.queue[0].maskView),"redEyeRemove"!=at.model&&"blemish"!=at.model||("blemish"==at.model?ht():ct(),at.firstStepScript.push(at.queue[0])),at.queue.splice(0,1),--at.index),at.index++,se=null},ut=function(){se=0},pt=function(e,t,a){a=a||null;var r="basicAdjust reshapeMap realPixel",n=Fe.get_src_size(),o=Ae.get_src_size(),i=0,s=0,l=[],c=a?o.width*e.radius*1.6:1.6*e.radius/(q*X);"real"==a&&(c=1.6*e.radius);for(var h=c*(q*X),d=0;d<e.points.length;++d){var u,p,m,f;a&&"real"!=a?(u=e.points[d].x*o.width,p=e.points[d].y*o.height,m=e.points[d].x*n.width,f=e.points[d].y*n.height):"real"==a?(u=e.points[d].x,p=e.points[d].y):(u=e.points[d].x/(q*X),p=e.points[d].y/(q*X),m=e.points[d].x,f=e.points[d].y),l.push({x:u,y:p}),r+=" point stress 0.2 radius "+c.toString()+" "+u.toString()+" "+p.toString(),i&&s?(i[0]=i[0]>m?m:i[0],i[1]=i[1]>f?f:i[1],s[0]=s[0]<m?m:s[0],s[1]=s[1]<f?f:s[1]):(i=[m,f],s=[m,f])}return r+=";",i=[i[0]-h-X,i[1]-h-X],s=[s[0]+h+X,s[1]+h+X],i[0]=Math.min(Math.max(0,i[0]),n.width),i[1]=Math.min(Math.max(0,i[1]),n.height),s[0]=Math.min(Math.max(0,s[0]),n.width),s[1]=Math.min(Math.max(0,s[1]),n.height),t&&(t.min=i,t.max=s,t.points=l),r},mt=function(){var e=Ae.get_src_size(),t=we.get_src_size(),a=t.width/X,r=t.height/X;e.width==a&&e.height==r||(Ae.set_image(Ae.create_new_texture(a,r,!0),a,r),he={view:0,lock:!1})},ft=function(e,t,a){var r="magicPainter %1 opacity %2 pointStride %4 texSize %6 outsideRadius %7 innerRadius %8 numRatio %9 file '%10' ";r=r.replace(/%1/,e.pModel),r=r.replace(/%2/,e.opacity),r=r.replace(/%4/,e.pointStride),r=r.replace(/%6/,e.texSize),r=r.replace(/%7/,e.outsideRadius),r=r.replace(/%8/,e.innerRadius),r=r.replace(/%9/,e.numRatio),r=r.replace(/%10/,e.fileName),null!=e.angle&&(r=r+"angle "+e.angle);var n=r,o=Fe.get_src_size(),i=Ae.get_src_size(),s=a?i.width*e.size:e.size/(q*X),l=Math.max(.2*s,1);n=n.replace(/%2/,s.toString()),n=n.replace(/%s/,l.toString());for(var c=[],h=0;h<e.points.length;++h){var d,u;a?(d=e.points[h].x*o.width,u=e.points[h].y*o.height):(d=e.points[h].x,u=e.points[h].y),c.push({x:d,y:u}),n+=" point "+d.toString()+" "+u.toString()}return t&&(t.points=c),n+";"},gt=function(e,t,a,r){Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),se&&"magic"==se.model||(se={model:"magic",pModel:"",opacity:0,pointSize:0,pointStride:0,texSize:0,outsideRadius:0,innerRadius:0,numRatio:0,fileName:"",blendModel:0,blendOpacity:0,points:new Array},e&&(se.pModel=e.pModel,se.opacity=e.opacity,se.pointSize=e.pointSize,se.pointStride=e.pointStride,se.texSize=e.texSize,se.outsideRadius=e.outsideRadius,se.innerRadius=e.innerRadius,se.numRatio=e.numRatio,se.fileName=e.fileName,se.blendModel=e.blendModel,se.blendOpacity=e.blendOpacity,null!=e.angle&&(se.angle=e.angle)));var o={points:[],max:[],min:[]};if(e&&e.points&&e.points.length){se.opacity==e.opacity&&se.radius==e.size||console.log("the interval record hasn't been cleared!");var i=de,s=(i?"view %1;".replace(/%1/,i.toString()):"basicAdjust darkClear ;")+ft(e,o,t);de=Fe.create_view(s),Fe.process_view(de),Fe.destroy_view(i)}se.points=se.points.concat(o.points),ee&&Fe.destroy_view(ee);var l;if(de){l="blend view "+de.toString()+" "+e.blendModel+" alpha ",l="opacity"==e.pModel?l+" reOpacity "+e.blendOpacity+";":l+e.blendOpacity+";",ee=Fe.create_view(l);var c=Fe.get_view_texture(ee),h=Fe.get_src_size();y(c,h.width,h.height),a&&a()}},vt=function(e,t,a,r,n){var o="colorPainter pointSize %3 %4 pointStride %s %5 %6 %7 %p ";o=o.replace(/%3/,r?"relToWidth":" "),o=o.replace(/%4/,t);var i;i=3!=n?Math.max(.13*t,1):Math.max(.25*t,1),o=o.replace(/%s/,i),o=o.replace(/%5/,a[0]),o=o.replace(/%6/,a[1]),o=o.replace(/%7/,a[2]),o=o.replace(/%p/,r?"coordinate":"realPixel");for(var s=[],l=0;l<e.length;++l){var c,h;c=e[l].x,h=e[l].y,s.push({x:c,y:h}),o+=" point "+c.toString()+" "+h.toString()}return o+";"},bt=function(e,t,a,r){r=null!=r&&r;var n="painter %3 opacity %1 pointSize %2 pointStride %s realPixel ";n=n.replace(/%3/,e.model);var o,i=n.replace(/%1/,e.opacity.toString()),s=Fe.get_src_size(),l=Ae.get_src_size(),c=a?l.width*e.size:e.size/(q*X),h=c*(q*X);o="lucency"==e.model?Math.max(.13*c,1):Math.max(.25*c,1),i=i.replace(/%2/,c.toString()),i=i.replace(/%s/,o.toString());for(var d=0,u=0,p=[],m=0;m<e.points.length;++m){var f,g,v,b;a?(f=e.points[m].x*l.width,g=e.points[m].y*l.height,v=e.points[m].x*s.width,b=e.points[m].y*s.height):(f=e.points[m].x/(q*X),g=e.points[m].y/(q*X),v=e.points[m].x,b=e.points[m].y),r?p.push(e.points[m]):p.push({x:f,y:g}),i+=" point "+f.toString()+" "+g.toString(),d&&u?(d[0]=d[0]>v?v:d[0],d[1]=d[1]>b?b:d[1],u[0]=u[0]<v?v:u[0],u[1]=u[1]<b?b:u[1]):(d=[v,b],u=[v,b])}var _=h/2;return d[0]=Math.min(Math.max(d[0]-_,0),s.width),d[1]=Math.min(Math.max(d[1]-_,0),s.height),u[0]=Math.min(Math.max(u[0]+_,0),s.width),u[1]=Math.min(Math.max(u[1]+_,0),s.height),t&&(t.points=p,t.min=d,t.max=u),i+";"},_t=function(){},yt=0,xt={};return W={destroy:function(){for(var e=0;e<_e.length;++e)if(_e[e].texture){var t=we.get_gl();t.deleteTexture(texture.texture)}this.clean(),we.destroy(),Ee.destroy(),Ae.destroy()},get_configure:function(){return we.get_configure()},set_configure:function(e){we.set_configure(e)},set_image:function(t,a,r,n,o,i,s){n=n||5e3,X=o||X;var l=a||t.width,c=r||t.height,h=0,d=0,u=Math.max(l,c);Math.min(l,c);u>n?u==l?(h=n,d=h*(c/l)):(d=n,h=d*(l/c)):(d=c,h=l),d=Math.floor(d+.5),h=Math.floor(h+.5),q=h/l;var p;t.name&&"engineTexture"==t.name?(p=we.create_new_texture(l,c,!0),it(p,t.texture,l,c)):(Q=e.texture(t),p=Q._.id),we.set_image(p,l,c),Fe.set_image(Fe.create_new_texture(h,d,!0),h,d),Fe.set_lock_unlock_function(Y);var m=Fe.fetch_view_texture(Fe.create_view("basicAdjust justDraw;"));if(Fe.set_image(m,h,d),m=null,lt(),i||y(p,l,c),s){var f=we.create_new_texture(l,c,!0);it(f,p,l,c);var g=b(f,l,c,v());return _e.push(g),g}},draw_small_image_to_canvas:function(){ee&&Fe.destroy_view(ee),ee=Fe.create_view("");var e=Fe.get_view_texture(ee),t=Fe.get_src_size();M(e,t.width,t.height)},get_small_canvas:function(e,t){return ne||(ne=document.createElement("canvas"),ne.width=e,ne.height=t),rt.get_small_canvas_different()&&(ne.getContext("2d").clearRect(0,0,ne.width,ne.height),ne.getContext("2d").drawImage(rt,0,0,ne.width,ne.height),rt.set_small_canvas_noDiferent()),ne},preserve_small_canvas:function(e,t){ne||(ne=document.createElement("canvas"),ne.width=e,ne.height=t),rt.get_small_canvas_different()&&(ne.getContext("2d").clearRect(0,0,ne.width,ne.height),ne.getContext("2d").drawImage(rt,0,0,ne.width,ne.height),rt.set_small_canvas_noDiferent())},get_canvas_image:function(){var e=new Image;return e.width=rt.width,e.height=rt.height,e.src=rt.toDataURL(),e},get_canvas:function(){if(nt)return rt;var e=rt,t=we.get_gl();t.bindFramebuffer(t.FRAMEBUFFER,null);var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var r=a.getContext("2d"),n=r.createImageData(a.width,a.height),o=a.width*a.height*4,i=new Uint8Array(o);if(t.readPixels(0,0,a.width,a.height,t.RGBA,t.UNSIGNED_BYTE,i),t.getError())return!1;for(var s=0,l=a.height;l>0;--l)for(var c=0;c<4*a.width;++c)n.data[s]=i[l*a.width*4+c],++s;return r.putImageData(n,0,0),a},get_image_size:function(){return we.get_image_size()},get_inner_result:function(){return we.get_inner_result()},get_result:function(){return we.get_result()},process_rule:function(e,t){var a=null==e?"":e;ee&&Fe.destroy_view(ee),ee=Fe.create_view(a);var r=Fe.get_view_texture(ee);n.check_CRM(r)||console.log("error rule:"+r.toString());var o=Fe.get_src_size();t?y(r,o.width,o.height):M(r,o.width,o.height,function(){}),se&&"rule"!=se.model&&console.log("record hasn't been clear"),null!=e&&(se={model:"rule",script:e})},create_view:function(e){return we.create_view(e)},destroy_view:function(e){return we.destroy_view(e)},get_view_by_number:function(e){return we.get_view_by_number(e)},load_view:function(e,t){return we.load_view(e,t)},process_view:function(e){we.process_view(e)},compress_view:function(e,t){return we.compress_view(e,t)},set_lock_unlock_function:function(e,t){return we.set_lock_unlock_function(e,t)},get_view_texture:function(e){return we.get_view_texture(e)},set_macro:function(e,t){we.set_macro(e,t)},clear_macro:function(){we.clear_macro()},set_script:function(e){we.set_script(e)},clean:function(){lt(),at.destroy(),at=v(),be=[],Ae.clean(),he={view:0,lock:!1},fe=0,se=null,oe=0,ie=!1;var e=we.get_src_size();y(we.get_src(),e.width,e.height)},process_image_template:function(){we.process_image_template()},get_frame_buffer:function(){return we.get_frame_buffer()},get_max_pool_size:function(){return we.get_max_pool_size()},process_image:function(){return we.process_image()},fetch_view_texture:function(e){return we.fetch_view_texture(e)},process_blemish:function(e,t){if(e){var a,r,o,i,s=Fe.get_src_size();t?(r=e.x*s.width,o=e.y*s.height,i=e.radius*s.width):(r=Math.floor(e.x)*q,o=Math.floor(e.y)*q,i=Math.floor(e.radius)*q);var l=pe;pe=Fe.create_view((l?"view %1;".replace(/%1/,l.toString()):"")+"basicAdjust blemishFix point %x %y radius %r;".replace(/%x/,r.toString()).replace(/%y/,o.toString()).replace(/%r/,i.toString())),a=Fe.get_view_texture(pe),Fe.destroy_view(l),n.check_CRM(a)||console.log("rule error:"+a.toString()),M(a,s.width,s.height,function(){}),se||(se={model:"blemish",points:{x:r,y:o},radius:i})}else console.log("need a point object.")},get_blemishFix_rectangle_img:function(e){if(e){var t,a=Math.floor(e.x),r=Math.floor(e.y),o=Math.floor(e.radius),i=pe;if(pe=we.create_view((i?"view %1;".replace(/%1/,i.toString()):"")+"basicAdjust blemishFix point %x %y radius %r;".replace(/%x/,a.toString()).replace(/%y/,r.toString()).replace(/%r/,o.toString())),t=we.get_view_texture(pe),we.destroy_view(i),!n.check_CRM(t))return null;var s=new Image,l=[a-o,r-o];return s.width=2*o,s.height=2*o,s.src=U(l,s.width,s.height,t),{img:s,pos:l,width:s.width,height:s.height}}return null},process_redEyeRemove:function(e,t){if(!e)return null;var a,r=Fe.get_src_size(),o=t?Math.floor(e.x*r.width):Math.floor(e.x),i=t?Math.floor(e.y*r.height):Math.floor(e.y),s=t?Math.floor(e.radius*r.width):Math.floor(e.radius),l=me;me=Fe.create_view((l?"view %1;".replace(/%1/,l.toString()):"")+"basicAdjust redeyeRemove realPosition %x %y %r 3;".replace(/%x/,o.toString()).replace(/%y/,i.toString()).replace(/%r/,s.toString())),a=Fe.get_view_texture(me),Fe.destroy_view(l),n.check_CRM(a)||console.log("engine error:"+a.toString()),M(a,r.width,r.height,function(){}),se={model:"redEyeRemove",point_obj:{x:o,y:i,radius:s}}},get_redEyeRemove_rectangle_img:function(e){if(e){var t,a=Math.floor(e.x),r=Math.floor(e.y),o=Math.floor(e.radius),i=me;if(me=we.create_view((i?"view %1;".replace(/%1/,i.toString()):"")+"basicAdjust redeyeRemove realPosition %x %y %r 3;".replace(/%x/,a.toString()).replace(/%y/,r.toString()).replace(/%r/,o.toString())),t=we.get_view_texture(me),we.destroy_view(i),!n.check_CRM(t))return null;var s=new Image,l=[a-o,r-o];return s.width=2*o,s.height=2*o,s.src=U(l,s.width,s.height,t),{img:s,pos:l,width:s.width,height:s.height}}return null},get_rectangle_img_with_view:function(e,t,a,r){var o={x:0,y:0};o.x=Math.min(Math.max(e,0),we.get_image_size.width),o.y=Math.min(Math.max(e,0),we.get_image_size.height);var i=Math.max(Math.min(t,we.get_image_size.width-t),0),s=Math.max(Math.min(a,we.get_image_size.height-a),0),l=we.get_view_texture(r);if(!n.check_CRM(l))return null;var c=new Image;return c.width=i,c.height=s,c.src=U(o,i,s,l),{img:c,pos:pos,width:i,height:s}},process_reshape:function(e,t,a){mt(),se||(se={model:"reshape",maskView:0,stress:0});var r,o=null,i=Fe.get_src_size(),s={points:[],max:[],min:[]};if(e&&e.points.length>=2){var l=fe,c=pt(e,s,a);o={max:s.max,min:s.min},fe=Ae.create_view((l?"view %1;".replace(/%1/,fe.toString()):"basicAdjust dark;")+c),Ae.process_view(fe),Ae.destroy_view(l)}return r=Ae.get_view_texture(fe),se.stress=t,se.maskView=fe,null!=t&&fe?n.check_CRM(r)?void A(Fe.get_src(),r,t,i.width,i.height,o):(console.log("engine error:"+tex.toString()),null):(console.log("no reshape view or need stress"),null)},draw_to_canvas:function(){M()},get_painter_rectangle_img:function(e,t,a){var r={};if(r.min=[],r.max=[],!e||!e.points.length)return null;var o=he;he=we.create_view((o?"view %1;".replace(/%1/,o.toString()):"")+bt(e,r)),we.process_view(he),we.destroy_view(o);var i;i="[object String]"==Object.prototype.toString.call(t)?we.create_view("%2 blend view %1 opacity alpha 100;".replace(/%1/,he.toString()).replace(/%2/,t)):we.create_view("view %1;blend view %2 opacity alpha 100;".replace(/%1/,t.toString()).replace(/%2/,he.toString()));var s=we.get_view_texture(i);if(!n.check_CRM(s))return null;var l=e.size;r.min[0]=Math.min(Math.max(r.min[0]-l,0),we.get_image_size().width),r.min[1]=Math.min(Math.max(r.min[1]-l,0),we.get_image_size().height),r.max[0]=Math.min(Math.max(r.max[0]+l,0),we.get_image_size().width),r.max[1]=Math.min(Math.max(r.max[1]+l,0),we.get_image_size().height);var c=r.max[0]-r.min[0],h=r.max[1]-r.min[1],d=[r.min[0],r.min[1]],u=new Image;return u.width=c,u.height=h,u.src=U(d,c,h,s),a?(ge&&we.destroy_view(ge),ge=i):we.destroy_view(i),{img:u,pos:d,width:c,height:h}},texture_to_image:function(e,t){var a=we.get_gl(),r=we.get_frame_buffer();a.bindFramebuffer(a.FRAMEBUFFER,r),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0);var n=e.getContext("2d"),o=n.createImageData(e.width,e.height),i=e.width*e.height*4,s=new Uint8Array(i);if(a.readPixels(0,0,e.width,e.height,a.RGBA,a.UNSIGNED_BYTE,s),a.getError())return!1;for(var l=0;l<i;l++)o.data[l]=s[l];n.putImageData(o,0,0),a=null;var c=(new Date).getTime();e.toDataURL();(new Date).getTime();return e.toDataURL()},set_small_image_size:function(e){ot=e},clean_textures_cache:function(){for(var e in Ce)Ce[e].lock||delete Ce[e]},clean_painter_cache:function(){he.view&&(Ae.destroy_view(he.view),he.view=0)},clean_blemishFix_cache:function(){pe&&(Fe.destroy_view(pe),pe=0)},clean_redEyeRemove_cache:function(){me&&(we.destroy_view(me),me=0)},clean_reshape_cache:function(){fe&&(we.destroy_view(fe),fe=0)},clean_clone_cache:function(){ge&&(we.destroy_view(ge),ge=0)},clean_basic_layer_cache:function(){we.destroy_view(le.view),le=g()},set_resource_address:function(e){m_resource_address=e},clean_record:function(){ut()},process_commond:function(e,t,a,r,n){var o=[],i=[],s=e,l=s.substr(0),c=l.match(/\S+/g),h=0;if(c&&c.length)for(var d=0;d<c.length;d++)if(c[d].indexOf(".jpg")>=0||c[d].indexOf(".jpeg")>=0||c[d].indexOf(".png")>=0){if(we.get_src_size().width<ot){h=l.indexOf(c[d],h+1),o.push({index:h,small:!0}),i.push(c[d].substring(1,c[d].length-1));continue}o.push({index:h,small:!1}),i.push(c[d].substring(1,c[d].length-1))}i=P(i);i.length||B(l,t,a,n,r),O(i,l,t,a,r,n,o)},create_effect_opacity_view:function(e,t){return!!t&&we.create_view("blend view %1 opacity alpha %2;".replace(/%1/,t).replace(/%2/,e))},fetch_cache_texture:function(e,t){if("blemish"==e){var a=Fe.fetch_view_texture(pe);return pe=0,a}if("redEyeRemove"==e){var a=we.fetch_view_texture(me);return me=0,a}if("reshape"==e){if(!fe||!t)return null;var r=we.create_view("basicAdjust reshapeDraw useView %1 stress %s;".replace(/%1/,fe.toString()).replace(/%s/,t.toString())),a=we.fetch_view_texture(r);return we.destroy_view(fe),fe=0,a}},fetch_painter_view_texture:function(e,t){var a;if(he)if("[object String]"==Object.prototype.toString.call(e))a=null==t?we.create_view("%2 blend view %1 opacity alpha 100;".replace(/%1/,he.toString()).replace(/%2/,e)):we.create_view("layer opacityAdjust start;%2 blend view %1 opacity alpha 100;layer opacityAdjust swap;blend layer opacityAdjust opacity %op;layer opacityAdjust end;".replace(/%1/,he.toString()).replace(/%2/,e).replace(/%op/,t.toString()));else if(null==t)a=we.create_view("view %1;blend view %2 opacity alpha 100;".replace(/%1/,e.toString()).replace(/%2/,he.toString()));else{var r=we.create_view("view %1;blend view %2 opacity alpha 100;".replace(/%1/,e.toString()).replace(/%2/,he.toString()));we.process_view(r),a=we.create_view("blend view %1 opacity %op;".replace(/%1/,r.toString()).replace(/%op/,Math.floor(t).toString()));var n=we.fetch_view_texture(a);we.destroy_view(r)}else a=we.create_view("");return n},create_reshape_view:function(e,t){if(e&&e.points.length>=2){for(var a=fe,r="basicAdjust reshapeMap realPixel",n=[Math.floor(e.points[0].x),Math.floor(e.points[0].y)],o=[Math.floor(e.points[0].x),Math.floor(e.points[0].y)],i=0;i<e.points.length;++i){var s=Math.floor(e.points[i].x),l=Math.floor(e.points[i].y);r+=" point stress 1.0 radius "+e.radius.toString()+" "+e.points[i].x.toString()+" "+e.points[i].y.toString(),n[0]=n[0]>s?s:n[0],n[1]=n[1]>l?l:n[1],o[0]=o[0]<s?s:o[0],o[1]=o[1]<l?l:o[1]}fe=we.create_view((a?"view %1;".replace(/%1/,fe.toString()):"basicAdjust dark;")+r),we.process_view(fe),we.destroy_view(a)}if(null==t||!fe)return null;return we.create_view("basicAdjust reshapeDraw useView %1 stress %s;".replace(/%1/,fe.toString()).replace(/%s/,t.toString()))},change_basic_layer:function(e){le&&le.destroy(),le.view=e},refresh_clone_basic_layer:function(e){},refresh_clone_to_canvas:function(e){},refresh_clone:function(e,t){var a={};a.x=e.x/q,a.y=e.y/q,a.dy=e.dy/q,a.dx=e.dx/q,be.push({model:"refresh",points:a}),j(e,"s")},process_clone_painter:function(e,t,a){"painter"==be[be.length-1].model?e&&be[be.length-1].point_obj?be[be.length-1].point_obj.points=be[be.length-1].point_obj.points.concat(e.points):be[be.length-1].opacity=t:be.push({model:"painter",point_obj:e?{opacity:e.opacity,size:e.size,points:e.points,model:e.model}:null,opacity:t,relative:a}),L(e,t,a,"s")},redo:function(){if(at.index!=at.queue.length){at.index+=1;var e=Fe.get_src_size();if("reshape"==at.model){var t=at.queue[at.index-1].stress,a=at.queue[at.index-1].maskView;fe&&Ae.destroy_view(fe),fe=Ae.create_view("view "+a.toString()+";"),Ae.process_view(fe),A(Fe.get_src(),Ae.get_view_texture(a),t,e.width,e.height,null,!0)}if("blurPainter"==at.model){if(he.view&&(Ae.destroy_view(he.view),he.view=0),!he.view){mt();for(var r=0,o=0;o<=at.index-1;++o)if(at.queue[o].points){var i={};i.opacity=at.queue[o].opacity,i.size=at.queue[o].radius,i.points=at.queue[o].points,i.model=at.queue[o].pmodel;var s=r?"view "+r.toString()+";"+bt(i):"basicAdjust alphaInit intensity 0;"+bt(i);he.view=Ae.create_view(s),Ae.process_view(he.view),r&&Ae.destroy_view(r),r=he.view}}Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),le.script!=at.queue[at.index-1].basic_layer&&(le.destroy(),le.script=at.queue[at.index-1].basic_layer,le.view=Fe.create_view(at.queue[at.index-1].basic_layer),Fe.process_view(le.view)),ee&&Fe.destroy_view(ee),ee=Fe.create_view((at.queue[at.index-1].top_layer?at.queue[at.index-1].top_layer:"")+"blend view %2 opacity cache alpha %3;".replace(/%2/,le.view.toString()).replace(/%3/,at.queue[at.index-1].bOpacity));var l=Fe.get_view_texture(ee);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("magic"==at.model&&(de&&(Fe.destroy_view(de),de=0),at.queue[at.index-2]&&at.queue[at.index-2].maskView&&(de=Fe.create_view("view "+at.queue[at.index-2].maskView+";"),Fe.process_view(de)),gt(at.queue[at.index-1],!1,function(){}),ut(),at.queue[at.index-1].maskView=Fe.create_view("view "+de+";"),Fe.process_view(at.queue[at.index-1].maskView)),"blemish"==at.model){var s=at.firstStep?"view "+at.firstStep.toString()+";":"";s+="basicAdjust blemishFix";for(var o=0;o<=at.index-1;++o){var c=at.queue[o].points.x,h=at.queue[o].points.y,d=at.queue[o].radius;s+=" point %x %y radius %r".replace(/%x/,c.toString()).replace(/%y/,h.toString()).replace(/%r/,d.toString())}s+=";",Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),pe&&Fe.destroy_view(pe),pe=Fe.create_view(s);var l=Fe.get_view_texture(pe);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("redEyeRemove"==at.model){for(var s=at.firstStep?"view "+at.firstStep.toString()+";":"",o=0;o<=at.index-1;++o){var c=at.queue[o].point_obj.x,h=at.queue[o].point_obj.y,d=at.queue[o].point_obj.radius;s+="basicAdjust redeyeRemove realPosition %x %y %r 3;".replace(/%x/,c.toString()).replace(/%y/,h.toString()).replace(/%r/,d.toString())}Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),me&&(Fe.destroy_view(me),me=0),me=Fe.create_view(s);var l=Fe.get_view_texture(me);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("rotation"==at.model){te&&(Fe.destroy_view(te),te=0);for(var l,s=0,o=0;o<at.index;++o)at.queue[o].script.match("basicAdjust")&&(s=at.queue[o].script);s?(te=Fe.create_view(s),l=Fe.get_view_texture(Fe.create_view(s))):l=Fe.get_src(),n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();T(l,e.width,e.height)}if("rule"==at.model){Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),ee&&Fe.destroy_view(ee),ee=Fe.create_view(at.queue[at.index-1].script);var l=Fe.get_view_texture(ee);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("crop"==at.model){Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1});var u=at.queue[at.index-1].pos,e=at.queue[at.index-1].size;this.process_crop(u,e)}}},undo:function(){if(at.index&&(at.index-=1,at.queue.length)){var e=Fe.get_src_size();if(at.index){if("reshape"==at.model){var t=at.queue[at.index-1].stress,a=at.queue[at.index-1].maskView;fe&&Ae.destroy_view(fe),fe=Ae.create_view("view "+a.toString()+";"),Ae.process_view(fe),A(Fe.get_src(),Ae.get_view_texture(a),t,e.width,e.height,null,!0)}if("blurPainter"==at.model){he.view&&(Ae.destroy_view(he.view),he.view=0),mt();for(var r=0,o=0;o<=at.index-1;++o)if(at.queue[o].points){var i={};i.opacity=at.queue[o].opacity,i.size=at.queue[o].radius,i.points=at.queue[o].points,i.model=at.queue[o].pmodel;var s=r?"view "+r.toString()+";"+bt(i):"basicAdjust alphaInit intensity 0;"+bt(i);he.view=Ae.create_view(s),Ae.process_view(he.view),r&&Ae.destroy_view(r),r=he.view}Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),le.script!=at.queue[at.index-1].basic_layer&&(le.destroy(),le.script=at.queue[at.index-1].basic_layer,le.view=Fe.create_view(at.queue[at.index-1].basic_layer),Fe.process_view(le.view)),ee&&Fe.destroy_view(ee),ee=Fe.create_view((at.queue[at.index-1].top_layer?at.queue[at.index-1].top_layer:"")+"blend view %2 opacity cache alpha %3;".replace(/%2/,le.view.toString()).replace(/%3/,at.queue[at.index-1].bOpacity));var l=Fe.get_view_texture(ee);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("magic"==at.model){de&&Fe.destroy_view(de),de=Fe.create_view("view "+at.queue[at.index-1].maskView+";"),Fe.process_view(de),at.queue[at.index]&&at.queue[at.index].maskView&&(Fe.destroy_view(at.queue[at.index].maskView),at.queue[at.index].maskView=0),Ce.magic=I("magic",Fe.fetch_view_texture(Fe.create_view("view "+de+";"))),Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),K&&we.destroy_view(K),K=we.create_view("blend texture file 'magic' align none "+at.queue[at.index-1].blendModel+" "+at.queue[at.index-1].blendOpacity.toString()+";");var l=we.fetch_view_texture(K);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=we.get_src_size();y(l,e.width,e.height)}if("blemish"==at.model){var s=at.firstStep?"view "+at.firstStep.toString()+";":"";s+="basicAdjust blemishFix";for(var o=0;o<=at.index-1;++o){var c=at.queue[o].points.x,h=at.queue[o].points.y,d=at.queue[o].radius;s+=" point %x %y radius %r".replace(/%x/,c.toString()).replace(/%y/,h.toString()).replace(/%r/,d.toString())}s+=";",Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),pe&&(Fe.destroy_view(pe),pe=0),pe=Fe.create_view(s);var l=Fe.get_view_texture(pe);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("redEyeRemove"==at.model){for(var s=at.firstStep?"view "+at.firstStep.toString()+";":"",o=0;o<=at.index-1;++o){var c=at.queue[o].point_obj.x,h=at.queue[o].point_obj.y,d=at.queue[o].point_obj.radius;s+="basicAdjust redeyeRemove realPosition %x %y %r 3;".replace(/%x/,c.toString()).replace(/%y/,h.toString()).replace(/%r/,d.toString())}Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),me&&(Fe.destroy_view(me),me=0),me=Fe.create_view(s);var l=Fe.get_view_texture(me);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("rotation"==at.model){te&&(Fe.destroy_view(te),te=0);for(var l,s=0,o=0;o<at.index;++o)at.queue[o].script.match("basicAdjust")&&(s=at.queue[o].script);s?(te=Fe.create_view(s),l=Fe.get_view_texture(Fe.create_view(s))):l=Fe.get_src(),n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();T(l,e.width,e.height)}if("effectRule"==at.model){Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),ee&&Fe.destroy_view(ee),ee=Fe.create_view(at.queue[at.index-1].script);var l=Fe.get_view_texture(ee);Fe.destroy_view(basic_layer),n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("rule"==at.model){Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),ee&&Fe.destroy_view(ee),ee=Fe.create_view(at.queue[at.index-1].script);var l=Fe.get_view_texture(ee);n.check_CRM(l)||console.log("engine error:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}if("crop"==at.model){Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1});var u=at.queue[at.index-1].pos,e=at.queue[at.index-1].size;this.process_crop(u,e)}}else if(he.view&&(Ae.destroy_view(he.view),he.view=0),fe&&(Ae.destroy_view(fe),fe=0),te&&(Fe.destroy_view(te),te=0),pe&&(Fe.destroy_view(pe),pe=0),me&&(Fe.destroy_view(me),me=0),de&&(Fe.destroy_view(de),de=0),"magic"==at.model&&at.queue[at.index]&&at.queue[at.index].maskView&&(Fe.destroy_view(at.queue[at.index].maskView),at.queue[at.index].maskView=0),"crop"==at.model)y(we.get_src(),we.get_src_size().width,we.get_src_size().height);else if("blurPainter"==at.model){ee&&Fe.destroy_view(ee),ee=Fe.create_view("blurSharpen amount -100 radius 0.1;");var l=Fe.get_view_texture(ee);n.check_CRM(l)||console.log("error rule:"+l.toString());var e=Fe.get_src_size();y(l,e.width,e.height)}else y(Fe.get_src(),e.width,e.height)}},destroy_texture:function(e){return"engineTexture"==e.name&&(we.get_gl().deleteTexture(e.texture),e.texture=0,e.handlerQueue=0,!0)},cancel_render:function(){re&&cancelAnimationFrame(re)},initialize_resources:function(e,t,a,r,o,i){if(le=g(),ce=g(),$=0,ae=0,de=0,K=0,ee=0,ye=0,te=0,pe=0,me=0,ge=0,ue=0,ve=0,be=[],Ae&&(Ae=0),Fe&&(Fe=0),Ee&&(Ee=0),we&&(we=0),we=n.create(rt._.gl),Ee=n.create(rt._.gl),Ae=n.create(rt._.gl),Fe=n.create(rt._.gl),!t||!t.width||!t.height)return!1;this.set_image(t,a,r,o,i,!0),he={view:0,lock:!1},fe=0,se=null;var s=e.length;if(s>0)for(var l=0;l<s;l++)30==e[l].action&&(e[l].afterData?e[l].afterData.picData.name&&"engineTexture"==e[l].afterData.picData.name?(e[l].afterData.picData=this.apply_history_to_original_image(!0,!0,e[l].afterData.picData.handlerQueue),this.set_image(e[l].afterData.picData,a,r,o,i,!0)):this.set_image(e[l].afterData.picData,a,r,o,i,!0):console.log("where is the history image??"));return this.recover_history_to_canvas(),!0},apply_history_to_original_image:function(e,t,a){e=null!=e;var r=0,o={width:0,height:0},i=a||at,s=null!=t&&t;if((i.queue.length||be.length)&&"crop"!=i.model||"crop"==i.model&&$&&(r=$,$=0,o.width=i.queue[i.queue.length-1].size[0],o.height=i.queue[i.queue.length-1].size[1]),"matting"==i.model){we.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}if("matting"==t){var a=Fe.get_view_texture(ye);if(!n.check_CRM(a))throw new Error("cannot find the matting cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),x&&we.destroy_view(x);for(var l=0,c=0,h=0;h<at.queue.length&&(1==at.queue[h].model2?l=1:2==at.queue[h].model2&&(c=1),!l||!c);++h);l&&c?(x=we.create_view("imageMatting used cache sharpenTimes 4 esp 0.007 iteration 4 alpha;"),we.process_view(x),we.destroy_view(x),x=we.create_view("imageMatting used "+ye.toString()+" sharpenTimes 2 esp 0.01 iteration 4 blurResult amount -70 radius "+.001*oe+";")):x=we.create_view(" ");var d=we.fetch_view_texture(x);n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();s||(ie?_(d,u.width,u.height,we.get_frame_buffer()):y(d,u.width,u.height))}if("painter"==i.model){if(!he.view){mt();for(var p=0,h=0;h<=i.index-1;++h){var m={};m.opacity=i.queue[h].opacity,m.size=i.queue[h].radius,m.points=i.queue[h].points,m.model=i.queue[h].pmodel;var f=p?"view "+p.toString()+";"+bt(m):"basicAdjust alphaInit ;"+bt(m);he.view=Ae.create_view(f),Ae.process_view(he.view),p&&Ae.destroy_view(p),p=he.view}}we.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1});var g=we.create_view(i.queue[i.index-1].basic_layer);we.process_view(g),x&&we.destroy_view(x),x=we.create_view((i.queue[i.index-1].top_layer?i.queue[i.index-1].top_layer:"")+"blend view %2 opacity cache ;".replace(/%2/,g.toString()));var d=we.fetch_view_texture(x);we.destroy_view(g),n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();s||y(d,u.width,u.height),r=d,o.width=u.width,o.height=u.height}if("blurPainter"==i.model){if(!he.view)return!1;we.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1});var g=we.create_view(i.queue[i.index-1].basic_layer);we.process_view(g),x&&we.destroy_view(x),x=we.create_view((i.queue[i.index-1].top_layer?i.queue[i.index-1].top_layer:"")+"blend view %2 opacity cache alpha %3;".replace(/%2/,g.toString()).replace(/%3/,i.queue[i.index-1].bOpacity));var d=we.fetch_view_texture(x);we.destroy_view(g),n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();s||y(d,u.width,u.height)}if("magic"==i.model){Ce.magic=I("magic",Fe.fetch_view_texture(Fe.create_view("view "+de+";"))),we.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),x&&we.destroy_view(x),x=we.create_view("blend texture file 'magic' align none "+i.queue[i.index-1].blendModel+ +i.queue[i.index-1].blendOpacity.toString()+";");var d=we.fetch_view_texture(x);n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();s||y(d,u.width,u.height),lt()}if("reshape"==i.model){if(1==q)return lt(),i.destroy(),i=v(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,!1;if(!fe)for(var x=0,h=0;h<=i.index-1;++h){var m;m.radius=i.queue[h].radius,m.points=i.queue[h].points;var f=x?"view "+x.toString()+";"+pt(m):"basicAdjust dark;"+pt(m);fe=Ae.create_view(f),Ae.process_view(fe),x&&Ae.destroy_view(x),x=he.view}var w=i.queue[i.index-1].stress,u=we.get_src_size();return A(we.get_src(),Ae.get_view_texture(fe),w,u.width,u.height,null,!0),lt(),i.destroy(),i=v(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,!1}if("effectRule"==i.model)if(we.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),"normal"==i.queue[i.index-1].eModel){if(1==q&&null==a){var E=Fe.fetch_view_texture(ee);if(n.check_CRM(E)&&(r=E),o.width=Fe.get_src_size().width,o.height=Fe.get_src_size().height,lt(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,r){var F=b(r,o.width,o.height,i);return _e.push(F),e?(i.destroy(),i=v(),F):(i.destroy(),i=v(),this.destroy_texture(F),!1)}return i.destroy(),i=v(),!1}x&&we.destroy_view(x),x=we.create_view(i.queue[i.index-1].script);var d=we.fetch_view_texture(x);we.destroy_view(g),n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();s||y(d,u.width,u.height),r=d,o.width=u.width,o.height=u.height}else{if(1==q&&null==a){var E=$;$=0,n.check_CRM(E)&&(r=E);var k=we.get_image_size(),M=i.queue[i.index-1].thickness*k.width,S=k.width+2*M,D=k.height+2*M;if(o.width=S,o.height=D,lt(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,r){var F=b(r,o.width,o.height,i);return _e.push(F),e?(i.destroy(),i=v(),F):(i.destroy(),i=v(),this.destroy_texture(F),!1)}return i.destroy(),i=v(),!1}var k=we.get_image_size(),M=i.queue[i.index-1].thickness*k.width,S=k.width+2*M,D=k.height+2*M,N=Ee.create_new_texture(S,D,!0);Ee.set_image(N,S,D),Ee.set_lock_unlock_function(Y,function(e,t){Ce[e].lock=!1});var P=Ee.create_view(i.queue[i.index-1].script),d=Ee.fetch_view_texture(P);$&&(st($),$=0),s||y(d,S,D),r=d,o.width=S,o.height=D,Ee.clean()}if("rule"==i.model){if(1==q&&null==a){var E=Fe.fetch_view_texture(ee);if(n.check_CRM(E)&&(r=E),o.width=Fe.get_src_size().width,o.height=Fe.get_src_size().height,lt(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,r){var F=b(r,o.width,o.height,i);return _e.push(F),e?(i.destroy(),i=v(),F):(i.destroy(),i=v(),this.destroy_texture(F),!1)}return i.destroy(),i=v(),!1}we.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),x&&we.destroy_view(x),x=we.create_view(i.queue[i.index-1].script);var d=we.fetch_view_texture(x);we.destroy_view(g),n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();s||y(d,u.width,u.height),r=d,o.width=u.width,o.height=u.height}if("rotation"==i.model){x&&we.destroy_view(x);for(var d,f=0,h=0;h<i.index;++h)i.queue[h].script.match("basicAdjust")&&(f=i.queue[h].script);d=f?we.get_view_texture(we.create_view(f)):we.get_src(),n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();T(d,u.width,u.height)}if("blemish"==i.model){if(1==q&&null==a){var E=Fe.fetch_view_texture(pe);if(n.check_CRM(E)&&(r=E),o.width=Fe.get_src_size().width,o.height=Fe.get_src_size().height,lt(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,r){var F=b(r,o.width,o.height,i);return _e.push(F),e?(i.destroy(),i=v(),F):(i.destroy(),i=v(),this.destroy_texture(F),!1)}return i.destroy(),i=v(),!1}var f="basicAdjust blemishFix",B=[];i.queue.splice(i.index),B=i.firstStepScript&&i.firstStepScript.length?i.firstStepScript.concat(i.queue):i.queue;for(var h=0;h<=B.length-1;++h){var z=B[h].points.x/q,U=B[h].points.y/q,G=B[h].radius/q;f+=" point %x %y radius %r".replace(/%x/,z.toString()).replace(/%y/,U.toString()).replace(/%r/,G.toString())}f+=";",we.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),x&&we.destroy_view(x),x=we.create_view(f);var d=we.fetch_view_texture(x);n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();s||y(d,u.width,u.height),r=d,o.width=u.width,o.height=u.height}if("redEyeRemove"==i.model){if(1==q&&null==a){var E=Fe.fetch_view_texture(me);if(n.check_CRM(E)&&(r=E),o.width=Fe.get_src_size().width,o.height=Fe.get_src_size().height,lt(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,r){var F=b(r,o.width,o.height,i);return _e.push(F),e?(i.destroy(),i=v(),F):(i.destroy(),i=v(),this.destroy_texture(F),!1)}return i.destroy(),i=v(),!1}var f="",O=[];i.queue.splice(i.index),O=i.firstStepScript&&i.firstStepScript.length?i.firstStepScript.concat(i.queue):i.queue;for(var h=0;h<=O.length-1;++h){var z=O[h].point_obj.x/q,U=O[h].point_obj.y/q,G=O[h].point_obj.radius/q;f+="basicAdjust redeyeRemove realPosition %x %y %r 3;".replace(/%x/,z.toString()).replace(/%y/,U.toString()).replace(/%r/,G.toString())}we.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),x&&we.destroy_view(x),x=we.create_view(f);var d=we.fetch_view_texture(x);n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();s||y(d,u.width,u.height),r=d,o.width=u.width,o.height=u.height}if("polaroid"==i.model){we.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),x&&we.destroy_view(x),x=we.create_view(i.queue[i.index-1].script);var d=we.get_view_texture(x);we.destroy_view(g),n.check_CRM(d)||console.log("engine error:"+d.toString());var u=we.get_src_size();u.height+=i.queue[i.index-1].captation*u.width,R(d,u.width,u.height,i.queue[i.index-1].color,i.queue[i.index-1].captation*u.width)}if(be.length){if(1==q)return void(be=[]);he.view&&(Ae.destroy_view(he.view),he.view=0),ue&&(Fe.destroy_view(ue),ue=0),ve&&(Fe.destroy_view(ve),ve=0);for(var d,H,h=0;h<be.length;++h)null!=be[h].opacity&&(H=be[h].opacity),"painter"==be[h].model?d=L(be[h].point_obj,be[h].opacity,be[h].relative,"b",!0):j(be[h].points,"b");var u=we.get_src_size();return C(we.get_src(),d,u.width,u.height,H,!0),void(be=[])}if(lt(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,r){var F=b(r,o.width,o.height,i);return _e.push(F),e?(i.destroy(),i=v(),F):(i.destroy(),i=v(),this.destroy_texture(F),!1)}return i.destroy(),i=v(),!1},recover_history_to_canvas:function(){var e=at;if(e.index||this.process_rule("",!0),"painter"==e.model){if(!he.view){mt();for(var t=0,a=0;a<=e.index-1;++a){var r={};r.opacity=e.queue[a].opacity,r.size=e.queue[a].radius,r.points=e.queue[a].points,r.model=e.queue[a].pmodel;var o=t?"view "+t.toString()+";"+bt(r):"basicAdjust alphaInit ;"+bt(r);he.view=Ae.create_view(o),Ae.process_view(he.view),t&&Ae.destroy_view(t),t=he.view}}Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1});var i=Fe.create_view(e.queue[e.index-1].basic_layer);Fe.process_view(i),c&&Fe.destroy_view(c),c=Fe.create_view((e.queue[e.index-1].top_layer?e.queue[e.index-1].top_layer:"")+"blend view %2 opacity cache ;".replace(/%2/,i.toString()));var s=Fe.fetch_view_texture(c);Fe.destroy_view(i),n.check_CRM(s)||console.log("engine error:"+s.toString());var l=Fe.get_src_size();y(s,l.width,l.height)}if("magic"==e.model){Ce.magic=I("magic",Fe.fetch_view_texture(Fe.create_view("view "+de+";"))),Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),c&&Fe.destroy_view(c),c=Fe.create_view("blend texture file 'magic' align none "+e.queue[e.index-1].blendModel+ +e.queue[e.index-1].blendOpacity.toString()+";");var s=Fe.fetch_view_texture(c);n.check_CRM(s)||console.log("engine error:"+s.toString());var l=Fe.get_src_size();y(s,l.width,l.height)}if("reshape"==e.model){if(1==q)return lt(),e.destroy(),e=v(),se=null,Ae.clean(),he={view:0,lock:!1},fe=0,!1;if(!fe)for(var c=0,a=0;a<=e.index-1;++a){var r;r.radius=e.queue[a].radius,r.points=e.queue[a].points;var o=c?"view "+c.toString()+";"+pt(r):"basicAdjust dark;"+pt(r);fe=Ae.create_view(o),Ae.process_view(fe),c&&Ae.destroy_view(c),c=he.view}var h=e.queue[e.index-1].stress,l=Fe.get_src_size();A(Fe.get_src(),Ae.get_view_texture(fe),h,l.width,l.height,null,!0)}if("effectRule"==e.model)if(Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),"normal"==e.queue[e.index-1].eModel){c&&Fe.destroy_view(c),c=Fe.create_view(e.queue[e.index-1].script);var s=Fe.fetch_view_texture(c);Fe.destroy_view(i),n.check_CRM(s)||console.log("engine error:"+s.toString());var l=Fe.get_src_size();y(s,l.width,l.height)}else{var d=e.queue[e.index-1].thickness,u=Fe.get_image_size(),p=u.width+2*d,m=u.height+2*d,f=Ee.create_new_texture(p,m,!0);Ee.set_image(f,p,m),Ee.set_lock_unlock_function(Y,function(e,t){Ce[e].lock=!1});var g=Ee.create_view(e.queue[e.index-1].script),s=Ee.fetch_view_texture(g);$&&(st($),$=0),y(s,p,m)}if("rule"==e.model){Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),c&&Fe.destroy_view(c),c=Fe.create_view(e.queue[e.index-1].script);var s=Fe.fetch_view_texture(c);Fe.destroy_view(i),n.check_CRM(s)||console.log("engine error:"+s.toString());var l=Fe.get_src_size();y(s,l.width,l.height)}if("rotation"==e.model){c&&Fe.destroy_view(c);for(var s,o=0,a=0;a<e.index;++a)e.queue[a].script.match("basicAdjust")&&(o=e.queue[a].script);s=o?Fe.get_view_texture(Fe.create_view(o)):Fe.get_src(),n.check_CRM(s)||console.log("engine error:"+s.toString());var l=Fe.get_src_size();T(s,l.width,l.height)}if("blemish"==e.model){var o="basicAdjust blemishFix",b=[];e.queue.splice(e.index),b=e.firstStepScript.length?e.firstStepScript.concat(e.queue):e.queue;for(var a=0;a<=b.length-1;++a){var _=b[a].points.x/q,x=b[a].points.y/q,w=b[a].radius/q;o+=" point %x %y radius %r".replace(/%x/,_.toString()).replace(/%y/,x.toString()).replace(/%r/,w.toString())}o+=";",Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),c&&Fe.destroy_view(c),c=Fe.create_view(o);var s=Fe.fetch_view_texture(c);n.check_CRM(s)||console.log("engine error:"+s.toString());var l=Fe.get_src_size();y(s,l.width,l.height)}if("redEyeRemove"==e.model){var o="",E=[];e.queue.splice(e.index),E=e.firstStepScript.length?e.firstStepScript.concat(e.queue):e.queue;for(var a=0;a<=E.length-1;++a){var _=E[a].point_obj.x/q,x=E[a].point_obj.y/q,w=E[a].point_obj.radius/q;o+="basicAdjust redeyeRemove realPosition %x %y %r 3;".replace(/%x/,_.toString()).replace(/%y/,x.toString()).replace(/%r/,w.toString())}Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),c&&Fe.destroy_view(c),c=Fe.create_view(o);var s=Fe.fetch_view_texture(c);n.check_CRM(s)||console.log("engine error:"+s.toString());var l=Fe.get_src_size();y(s,l.width,l.height)}if("polaroid"==e.model){Fe.set_lock_unlock_function(function(e,t){if(t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){Ce[e].lock=!1,he.lock=!1}),c&&Fe.destroy_view(c),c=Fe.create_view(e.queue[e.index-1].script);var s=Fe.get_view_texture(c);Fe.destroy_view(i),n.check_CRM(s)||console.log("engine error:"+s.toString());var l=Fe.get_src_size();l.height+=e.queue[e.index-1].captation*l.width,R(s,l.width,l.height,e.queue[e.index-1].color,e.queue[e.index-1].captation*l.width)}if(be.length){he.view&&(Ae.destroy_view(he.view),he.view=0),ue&&(Fe.destroy_view(ue),ue=0),ve&&(Fe.destroy_view(ve),ve=0);for(var s,F,a=0;a<be.length;++a)null!=be[a].opacity&&(F=be[a].opacity),"painter"==be[a].model?s=L(be[a].point_obj,be[a].opacity,be[a].relative,"b",!0):j(be[a].points,"b");var l=Fe.get_src_size();return void C(Fe.get_src(),s,l.width,l.height,F,!0)}}},r(W,"clean_record",function(){ut()}),r(W,"refresh_record",function(){if(se){if("painter"==se.model)return dt(),void(se=0);if("blurPainter"==se.model)return dt(),void(se=0);if("magic"==se.model)return dt(),void(se=0);if("blemish"==se.model)return dt(),void(se=0);if("rule"==se.model)return dt(),void(se=0);if("effectRule"==se.model)return dt(),void(se=0);if("reshape"==se.model)return dt(),void(se=0);if("redEyeRemove"==se.model)return dt(),void(se=0);if("polaroid"==se.model)return dt(),void(se=0);if("effectRule"==se.model)return dt(),void(se=0);if("crop"==se.model)return dt(),void(se=0);if("matting"==se.model)return dt(),void(se=0)}return ae?(se={model:"rotation",script:ae},ae=0,dt(),void(se=0)):null}),r(W,"set_step",function(e){"reshape"==at.model&&he.view||(X=e)}),r(W,"get_magic_resource",function(){var e=new Image;return e.width=rt.width,e.height=rt.height,e.src=rt.toDataURL(),Ce.magic=I("magic",e),e}),r(W,"set_magic_resource",function(e,t){Ce[t]=I(t,e)}),r(W,"process_magic_painter_rule",function(e,t,a,r){a=a||!1;var n=e.fileName,o=function(r,n,o){var i=new Image;i.crossOrigin=isSafari?null:"anonymous",i.src=r,i.complete?(Ce[n]=I(n,i),gt(e,a,t)):(i.onload=function(){Ce[n]=I(n,i),gt(e,a,t)},i.onerror=function(){throw new error("connot find texture:"+n)})};Ce[n]?gt(e,a,t):function(e){G(e,"effect",o)}(n)}),r(W,"process_painter_rule",function(e,t,a,r,n){r=null!=r&&r,mt(),!r&&t&&le.script!=t&&(le.destroy(),le.script=t,le.view=we.create_view(t),we.process_view(le.view)),se&&"painter"==se.model?"painter"==se.model&&se.basic_layer==le.script||console.log("the interval record hasn't been cleared!"):(se={model:"painter",points:new Array,radius:null,opacity:null,pmodel:null,basic_layer:t,top_layer:n},e&&(se.opacity=e.opacity,se.radius=e.size,se.pmodel=e.model));var o={points:[],max:[],min:[]};if(e&&e.points.length){if(se.opacity==e.opacity&&se.radius==e.size||console.log("the interval record hasn't been cleared!"),he.lock)return void console.log("painter_view hasn't been unlock");var i=he.view,s=(i?"view %1;".replace(/%1/,i.toString()):"basicAdjust alphaInit ;")+bt(e,o,a);he.view=Ae.create_view(s),Ae.process_view(he.view),Ae.destroy_view(i)}if(se.points=se.points.concat(o.points),!r){var l=we.get_src_size(),c=2==o.min.length?{min:o.min,max:o.max}:null;F(we.get_src(),Ae.get_view_texture(he.view),we.get_view_texture(le.view),l.width,l.height,c)}}),r(W,"clean_matting_painter",function(){ye&&(Fe.destroy_view(ye),ye=0),at=v()}),r(W,"process_matting_painter",function(e,t,a,r){ye||(ye=Fe.create_view("basicAdjust darkClear;"),Fe.process_view(ye)),se&&"matting"==se.model||(se={model:"matting",model2:e,points:new Array,size:a,rel:r});if(t&&t.length){se.size==a&&se.model2==e&&se.rel==r||console.log("the interval record hasn't been cleared!");var n,o=ye;switch(e){case 1:n=[255,0,0];break;case 2:n=[0,255,0];break;case 3:n=[0,0,0]}var i="view %1;".replace(/%1/,o.toString())+vt(t,a,n,r,e);ye=Fe.create_view(i),Fe.process_view(ye),Fe.destroy_view(o)}se.points=se.points.concat(t)}),r(W,"set_matting_crop",function(e){ie=e}),r(W,"process_matting",function(e,t,a){if(e){var r=Fe.create_view("curve mixColor opacity 255 0 0 100 255;");Fe.process_view(r);var n=Fe.create_view("imageMatting used "+r.toString()+" sharpenTimes 1 esp 0.01 iteration 1 ;");return Fe.process_view(n),Fe.destroy_view(r),void Fe.destroy_view(n)}if(!ye)return t=null==t?0:(t+1)/1.5,void(oe=t);null!=t?(t=null==t?0:(t+1)/1.5,oe=t,a?this.process_rule("imageMatting used "+ye.toString()+" sharpenTimes 2 esp 0.01 iteration 4 blurResult amount -100 radius "+.001*t+" crop ;"):this.process_rule("imageMatting used "+ye.toString()+" sharpenTimes 2 esp 0.01 iteration 4 blurResult amount -100 radius "+.001*t+" ;")):a?this.process_rule("imageMatting used "+ye.toString()+" sharpenTimes 2 esp 0.01 iteration 4 crop;"):this.process_rule("imageMatting used "+ye.toString()+" sharpenTimes 2 esp 0.01 iteration 4 ;")}),r(W,"process_blur_brush_rule",function(e,t,a,r,o,i){o=null!=o&&o,mt(),!o&&t&&le.script!=t&&(le.destroy(),le.script=t,le.view=Fe.create_view(t),Fe.process_view(le.view)),se&&"blurPainter"==se.model&&"rule"==se.model||(se={model:"blurPainter",points:new Array,radius:null,opacity:null,bOpacity:null,pmodel:null,basic_layer:t,top_layer:i}),e&&(se.opacity=e.opacity,se.radius=e.size,se.pmodel=e.model),se.bOpacity=a,se.basic_layer=le.script;var s={points:[],max:[],min:[]};if(Fe.set_lock_unlock_function(function(e,t){if("painter"==t){var a=Ae.get_view_texture(he.view);if(he.lock=!0,!n.check_CRM(a))throw new Error("cannot find the painter cache");return a}if("reshape"==t){var a=Ae.get_view_texture(fe);if(!n.check_CRM(a))throw new Error("cannot find the reshape cache");return a}return Ce[e].lock=!0,Ce[e].image},function(e,t,a){if("painter"==a)return void(he.lock=!1);Ce[e].lock=!1}),e&&e.points.length){if(se.opacity==e.opacity&&se.radius==e.size||console.log("the interval record hasn't been cleared!"),he.lock)return void console.log("painter_view hasn't been unlock");var l=he.view,c=(l?"view %1;".replace(/%1/,l.toString()):"basicAdjust alphaInit intensity 0;")+bt(e,s,r,!0);he.view=Ae.create_view(c),Ae.process_view(he.view),Ae.destroy_view(l)}if(se.points=se.points.concat(s.points),!o){he.view||(he.view=Ae.create_view("basicAdjust alphaInit intensity 0;"),Ae.process_view(he.view));var h=Fe.get_src_size(),d=2==s.min.length?{min:s.min,max:s.max}:null;F(Fe.get_src(),Ae.get_view_texture(he.view),Fe.get_view_texture(le.view),h.width,h.height,d,a)}}),r(W,"clean_special_border_GLTextures",function(e){Ee.get_gl().deleteTexture(e)}),r(W,"process_rotation",function(e,t,a){if("intensity"==e){var r;r=null!=a?"basicAdjust gribRotation %1 %2;".replace(/%1/,t.toString()).replace(/%2/,a.toString()):"basicAdjust rotation %1;".replace(/%1/,t.toString()),te&&Fe.destroy_view(te),te=Fe.create_view(r);var o=Fe.get_view_texture(te);n.check_CRM(o)||console.log("error rule:"+o.toString());var i=Fe.get_src_size();se&&"rotation"!=se.model&&console.log("record hasn't been clear"),ae=r;var s=Math.abs(10*t)%1800;s/=10,s>90&&(s=180-s),s=s/180*3.14159265358;var l=Math.sqrt(i.width/2*(i.width/2)+i.height/2*(i.height/2)),c=Math.min(i.width,i.height),h=Math.acos(c/2/l),d=h-s,u=c/2/Math.cos(d),p=u/l;return T(o,i.width,i.height),1/p}ae=e;var o=0,i=Fe.get_src_size();o=te?Fe.get_view_texture(te):Fe.get_src(),T(o,i.width,i.height)}),r(W,"process_polaroid",function(e,t,a){ee&&Fe.destroy_view(ee),ee=Fe.create_view(e);var r=Fe.get_view_texture(ee);n.check_CRM(r)||console.log("error rule:"+r.toString());var o=Fe.get_src_size();o.height+=a*o.width,R(r,o.width,o.height,t,a*o.width),se={model:"polaroid",script:e,color:t,captation:a}}),r(W,"process_resize",function(e,t){Ee.set_lock_unlock_function(Y);var a=(we.get_image_size(),Math.min(e,t)),r=Math.max(e,t);a<1&&(e=a==e?1:1/t*e,t=a==t?1:1/e*t),r>4e3&&(e=r==e?4e3:4e3/t*e,t=r==t?4e3:4e3/e*t);var n=Ee.create_new_texture(e,t,!0);Ee.set_image(n,e,t);$&&(this.clean_special_border_GLTextures($),$=0),$=Ee.fetch_view_texture(Ee.create_view("basicAdjust justDraw;")),Ee.clean(),se={model:"resize"},y($,e,t)}),r(W,"process_crop",function(e,t,a){Ee.set_lock_unlock_function(Y);var r=we.get_image_size(),n=[],o=[];a?(n[0]=Math.floor(t[0]*r.width+.5),n[1]=Math.floor(t[1]*r.height+.5),o[0]=e[0]*r.width,o[1]=e[1]*r.height):(n=t,o=e);var i=Ee.create_new_texture(n[0],n[1]);Ee.set_image(i,n[0],n[1]);var s;s="basicAdjust crop position "+o[0].toString()+" "+o[1].toString()+" srcSize "+r.width.toString()+" "+r.height.toString()+";",$&&(this.clean_special_border_GLTextures($),$=0),$=Ee.fetch_view_texture(Ee.create_view(s)),Ee.clean(),se={model:"crop",pos:o,size:n},y($,n[0],n[1])}),r(W,"get_frame_shadow_GLTexture",function(e,t,a,r,n,o){Ee.set_lock_unlock_function(Y);var i=we.get_image_size(),s=i.width+2*e,l=i.height+2*e,c=Ee.create_new_texture(s,l,!0);Ee.set_image(c,s,l);var h="specialBorder shadow size %1 fade %2 angle %3 distance %4 shadowColor %5 %6 %7 backColor %8 %9 %10;".replace(/%1/,e.toString()).replace(/%2/,t.toString()).replace(/%3/,a.toString()).replace(/%4/,r.toString()).replace(/%5/,n[0].toString()).replace(/%6/,n[1].toString()).replace(/%7/,n[2].toString()).replace(/%8/,o[0].toString()).replace(/%9/,o[1].toString()).replace(/%10/,o[2].toString());return c=Ee.fetch_view_texture(Ee.create_view(h)),Ee.clean(),{tex:c,width:s,height:l}}),r(W,"process_frame_shadow",function(e,t,a,r,n,o){$&&(st($),$=0);var i=this.get_frame_shadow_GLTexture(e,t,a,r,n,o);$=i.tex,y($,i.width,i.height)}),r(W,"get_frame_gallery_GLTexture",function(e,t,a,r){Ee.set_lock_unlock_function(Y);var n=we.get_image_size(),o=n.width+2*e+2*t,i=n.height+2*e+2*t,s=Ee.create_new_texture(o,i,!0);Ee.set_image(s,o,i);var l="specialBorder gallery outSize %1 innerSize %2 outColor %3 %4 %5 innerColor %6 %7 %8;".replace(/%1/,e.toString()).replace(/%2/,t.toString()).replace(/%3/,a[0].toString()).replace(/%4/,a[1].toString()).replace(/%5/,a[2].toString()).replace(/%6/,r[0].toString()).replace(/%7/,r[1].toString()).replace(/%8/,r[2].toString());return s=Ee.fetch_view_texture(Ee.create_view(l)),Ee.clean(),xe.push(s),{tex:s,width:o,height:i}}),r(W,"process_frame_gallery",function(e,t,a,r){$&&(st($),$=0);var n=this.get_frame_gallery_GLTexture(e,t,a,r);$=n.tex,y($,n.width,n.height)}),r(W,"get_frame_polaroid_GLTexture",function(e,t,a,r,n,o){Ee.set_lock_unlock_function(Y);var i=we.get_image_size(),s=i.width+2*e+2*t,l=i.height+2*e+2*t+r,c=Ee.create_new_texture(s,l,!0);Ee.set_image(c,s,l);var h="specialBorder polaroid outSize %1 innerSize %2 roundCorner %3 captionSize %4 outColor %5 %6 %7 innerColor %8 %9 %10;".replace(/%1/,e.toString()).replace(/%2/,t.toString()).replace(/%3/,a.toString()).replace(/%4/,r.toString()).replace(/%5/,n[0].toString()).replace(/%6/,n[1].toString()).replace(/%7/,n[2].toString()).replace(/%8/,o[0].toString()).replace(/%9/,o[1].toString()).replace(/%10/,o[2].toString());return c=Ee.fetch_view_texture(Ee.create_view(h)),Ee.clean(),xe.push(c),{tex:c,width:s,height:l}}),r(W,"process_frame_polaroid",function(e,t,a,r,n,o){$&&(st($),$=0);var i=this.get_frame_polaroid_GLTexture(e,t,a,r,n,o);$=i.tex,y($,i.width,i.height)}),r(W,"process_outside_border",function(e,t,a,r){for(var n=[],o=e,i=o.substr(0),s=i.match(/\S+/g),l=0;l<s.length;l++)(s[l].indexOf(".jpg")>=0||s[l].indexOf(".jpeg")>=0||s[l].indexOf(".png")>=0)&&n.push(s[l].substring(1,s[l].length-1));var c=t*Fe.get_image_size().width;i=i.replace(/%th/,t),a&&(i=i.replace(/%r/,a[0]).replace(/%g/,a[1]).replace(/%b/,a[2])),Z(n,i,r,c)}),xt=W,xt}}},function(e,t){var a=function(){function e(e,t,a){return Math.max(e,Math.min(t,a))}function t(e){return{_:e,loadContentsOf:function(e){V=this._.gl,this._.loadContentsOf(e)},destroy:function(){V=this._.gl,this._.destroy()}}}function a(e){return t(X.fromElement(e))}function r(e,t,a){var r=V.UNSIGNED_BYTE;this.width=e,this.height=t,this._.texture=this._.texture?this._.texture:new X(e,t,V.RGBA,r),this._.spareTexture=a?this._.spareTexture:new X(e,t,V.RGBA,r),this._.flippedShader=this._.flippedShader||new J(null,"uniform sampler2D texture;varying vec2 texCoord;void main(){vec4 dst = texture2D(texture,vec2(texCoord.x,1.0-texCoord.y));dst.xyz = dst.xyz*vec3(dst.a);gl_FragColor=dst;}"),this._.areaBlendShader=this._.areaBlendShader||new J("    attribute vec2 vPosition;    varying vec2 textureCoordinate;    void main(){        textureCoordinate= (vPosition.xy + 1.0) / 2.0;        gl_Position=vec4(vPosition, 0.0, 1.0);    }","varying vec2 textureCoordinate;    uniform sampler2D inputImageTexture;    uniform sampler2D blendTexture;    uniform sampler2D alphaTexture;    uniform float opacity;    uniform vec4 trans;    void main()    {            vec2 coord = vec2(textureCoordinate.x,1.0-textureCoordinate.y);        coord = coord*trans.xy+trans.zw;                vec4 src = texture2D(inputImageTexture, coord);        vec4 dst = texture2D(blendTexture, coord);        float a = texture2D(alphaTexture, coord).w*opacity;        gl_FragColor =vec4(mix(src.rgb,dst.rgb,1.0-a),src.a);    }"),this._.autoCropShader=this._.autoCropShader||new J(null,"varying vec2 texCoord;        uniform sampler2D texture;        uniform vec4 trans;                void main()        {                    vec2 coord = vec2(texCoord.x,1.0-texCoord.y);            coord = coord*trans.xy+trans.zw;                        vec4 src = texture2D(texture, coord);        src.xyz = src.xyz*vec3(src.a);            gl_FragColor =src;        }"),this._.areaReshapeShader=this._.areaReshapeShader||new J("    attribute vec2 vPosition;    varying vec2 textureCoordinate;    void main(){        textureCoordinate= (vPosition.xy + 1.0) / 2.0;        gl_Position=vec4(vPosition, 0.0, 1.0);    }","varying vec2 textureCoordinate;                     uniform sampler2D inputImageTexture;                     uniform sampler2D reshapeMap;                     uniform float stress;                     uniform vec4 cal;                       void main()                     {                         vec2 cod,result;                         vec4 dst;                         vec2 coord = vec2(textureCoordinate.x,1.0 - textureCoordinate.y);                         coord = coord*cal.xy+cal.zw;                         vec4 trans = texture2D(reshapeMap, coord);                          float mid = 127.0;                         result.x = trans.x*255.0 + (trans.z*(255.0/256.0));                         result.x = (result.x - mid)/127.0;                          result.y = trans.y*255.0 + (trans.w*(255.0/256.0));                         result.y = (result.y - mid)/127.0;                          cod.x = coord.x - result.x*stress;                         cod.y = coord.y - result.y*stress;                            dst = texture2D(inputImageTexture, cod);                          dst.xyz = dst.xyz*vec3(dst.a);                         gl_FragColor = dst;                     }"),this._.cloneShader=this._.cloneShader||new J("    attribute vec2 vPosition;    varying vec2 textureCoordinate;    void main(){        textureCoordinate= (vPosition.xy + 1.0) / 2.0;        gl_Position=vec4(vPosition, 0.0, 1.0);    }","varying vec2 textureCoordinate;        uniform sampler2D srcTexture;        uniform sampler2D resultTexture;        uniform float opacity;                void main()        {                    vec2 coord = vec2(textureCoordinate.x,1.0-textureCoordinate.y);                        vec4 src = texture2D(srcTexture, coord);                        vec4 result = texture2D(resultTexture,coord);                        vec4 dst =  vec4(mix(src.rgb,result.rgb,opacity),result.a);            dst.xyz = dst.xyz*vec3(dst.a);                gl_FragColor = dst;        }"),this._.rotationShader=this._.rotationShader||new J("    attribute vec2 vPosition;    varying vec2 textureCoordinate;    void main(){        textureCoordinate= (vPosition.xy + 1.0) / 2.0;        gl_Position=vec4(vPosition, 0.0, 1.0);    }","varying vec2 textureCoordinate;        uniform sampler2D inputImageTexture;        uniform vec4 trans;                void main()        {                vec2 coord = vec2(textureCoordinate.x,1.0-textureCoordinate.y);              coord = coord - vec2(0.5, 0.5);                        coord = vec2(coord.x*trans.x + coord.y*trans.y,                            coord.x*trans.z + coord.y*trans.w);                        coord = coord + vec2(0.5, 0.5);                                                vec4 dst = texture2D(inputImageTexture, coord);                        dst.xyz = dst.xyz*vec3(dst.a);                        gl_FragColor = dst;        }"),this._.polaroidShader=this._.polaroidShader||new J("    attribute vec2 vPosition;    varying vec2 textureCoordinate;    void main(){        textureCoordinate= (vPosition.xy + 1.0) / 2.0;        gl_Position=vec4(vPosition, 0.0, 1.0);    }","varying vec2 textureCoordinate;        uniform sampler2D inputImageTexture;        uniform vec3 color;        uniform float border;                void main()        {                    vec2 coord = vec2(textureCoordinate.x,1.0-textureCoordinate.y);            coord.y = coord.y/border;            vec4 dst;            if (coord.y>1.0)                dst =vec4(color,1.0);            else                dst = texture2D(inputImageTexture,coord);                            dst.xyz = dst.xyz*vec3(dst.a);            gl_FragColor = dst;        }"),this._.isInitialized=!0}function n(e,t,a){return this._.isInitialized&&e._.width==this.width&&e._.height==this.height||r.call(this,t||e._.width,a||e._.height),e._.use(),this._.texture.drawTo(function(){J.getDefaultShader().drawRect()}),this}function o(){V.clearColor(0,0,0,0),V.clear(V.DEPTH_BUFFER_BIT),V.clear(V.STENCIL_BUFFER_BIT),V.clear(V.COLOR_BUFFER_BIT)}function i(e,t,a,n,o,i,s){return e&&(this._.isInitialized&&t==this.width&&a==this.height||r.call(this,t,a,!0),this._.texture.id=e,V.bindFramebuffer(V.FRAMEBUFFER,null)),V.viewport(0,0,t||this.width,a||this.height),this._.texture.use(),this._.flippedShader.drawRect(),this.m_small_canvas_difference=!0,this}function s(e,t,a,n,i,s,l,c){V.bindFramebuffer(V.FRAMEBUFFER,n),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,e,0);var h=new Uint8Array(t*a*4);V.readPixels(0,0,t,a,V.RGBA,V.UNSIGNED_BYTE,h);for(var d=[65536,65536],u=0,p=0,m=0;m<a;++m)for(var f=0;f<t;++f)h[4*(m*t+f)+3]>10&&(u<f&&(u=f),p<m&&(p=m),d[0]>f&&(d[0]=f),d[1]>m&&(d[1]=m));u=Math.min(u+5,t),p=Math.min(p+5,a),d[0]=Math.max(d[0]-5,0),d[1]=Math.max(d[1]-5,0),u-=d[0],p-=d[1],e&&(this._.isInitialized&&u==this.width&&p==this.height||r.call(this,u,p,!0),this._.texture.id=e,V.bindFramebuffer(V.FRAMEBUFFER,null),o()),this._.texture.id=e,V.viewport(0,0,this.width,this.height),this._.texture.use();var g=[u/t,p/a,d[0]/t,d[1]/a],v={};return v.trans=g,this._.autoCropShader.uniforms(v),this._.autoCropShader.drawRect(),this.m_small_canvas_difference=!0,this}function l(e,t,a,n,o,i,s){var l=[];if(this._.isInitialized&&n==this.width&&o==this.height){var c=i?{pos:{x:i.min[0],y:i.min[1]},width:i.max[0]-i.min[0],height:i.max[1]-i.min[1]}:{pos:{x:0,y:0},width:n||this.width,height:o||this.height},h={x:Math.floor(c.pos.x),y:Math.floor(c.pos.y)},d=Math.ceil(c.width),u=Math.ceil(c.height);V.viewport(h.x,(o||this.height)-h.y-u,d,u),l=[d/(n||this.width),u/(o||this.height),h.x/(n||this.width),h.y/(o||this.height)]}else r.call(this,n,o,!0),V.viewport(0,0,n||this.width,o||this.height),l=[1,1,0,0];this._.texture.id=e,V.bindFramebuffer(V.FRAMEBUFFER,null),V.activeTexture(V.TEXTURE1),V.bindTexture(V.TEXTURE_2D,t),V.activeTexture(V.TEXTURE2),V.bindTexture(V.TEXTURE_2D,a),this._.texture.use();var p={};p.inputImageTexture=0,p.blendTexture=2,p.alphaTexture=1;var m={};return m.trans=l,m.opacity=s,this._.areaBlendShader.uniforms(m),this._.areaBlendShader.textures(p),this._.areaBlendShader.drawBlend(),this.m_small_canvas_difference=!0,this}function c(e,t,a,n,o,i){var s=[];if(this._.isInitialized&&n==this.width&&o==this.height){var l=i?{pos:{x:i.min[0],y:i.min[1]},width:i.max[0]-i.min[0],height:i.max[1]-i.min[1]}:{pos:{x:0,y:0},width:n||this.width,height:o||this.height},c={x:Math.floor(l.pos.x),y:Math.floor(l.pos.y)},h=Math.ceil(l.width),d=Math.ceil(l.height);V.viewport(c.x,(o||this.height)-c.y-d,h,d),s=[h/(n||this.width),d/(o||this.height),c.x/(n||this.width),c.y/(o||this.height)]}else r.call(this,n,o,!0),V.viewport(0,0,n||this.width,o||this.height),s=[1,1,0,0];this._.texture.id=e,V.bindFramebuffer(V.FRAMEBUFFER,null),V.activeTexture(V.TEXTURE1),V.bindTexture(V.TEXTURE_2D,t),this._.texture.use();var u={};u.inputImageTexture=0,u.reshapeMap=1,this._.areaReshapeShader.textures(u);var p={};return p.stress=a,p.cal=s,this._.areaReshapeShader.uniforms(p),this._.areaReshapeShader.drawBlend(),this.m_small_canvas_difference=!0,this}function h(e,t,a,n,o){this._.isInitialized&&a==this.width&&n==this.height||r.call(this,a,n,!0),V.viewport(0,0,a||this.width,n||this.height),V.bindFramebuffer(V.FRAMEBUFFER,null),this._.texture.id=e,this._.texture.use(),V.activeTexture(V.TEXTURE1),V.bindTexture(V.TEXTURE_2D,t);var i={};i.srcTexture=0,i.resultTexture=1;var s={};return s.opacity=o/100,this._.cloneShader.uniforms(s),this._.cloneShader.textures(i),this._.cloneShader.drawBlend(),this.m_small_canvas_difference=!0,this}function d(e,t,a,n){for(var o=Math.PI,i=[1,0,0,1],s=t,l=a,c=0;c<n.length;++c){var h=n[c].script;if("LR"==h){var d=[i[0]*Math.cos(o/2)+i[2]*-Math.sin(o/2),i[1]*Math.cos(o/2)+i[3]*-Math.sin(o/2),i[0]*Math.sin(o/2)+i[2]*Math.cos(o/2),i[1]*Math.sin(o/2)+i[3]*Math.cos(o/2)];i=d;var u=s;s=l,l=u}else if("RR"==h){var d=[i[0]*Math.cos(-o/2)+i[2]*-Math.sin(-o/2),i[1]*Math.cos(-o/2)+i[3]*-Math.sin(-o/2),i[0]*Math.sin(-o/2)+i[2]*Math.cos(-o/2),i[1]*Math.sin(-o/2)+i[3]*Math.cos(-o/2)];i=d;var u=s;s=l,l=u}else if("HF"==h){var d=[-1*i[0],-1*i[1],i[2],i[3]];i=d}else if("VF"==h){var d=[i[0],i[1],-1*i[2],-1*i[3]];i=d}}this._.isInitialized&&s==this.width&&l==this.height||r.call(this,s,l,!0),V.viewport(0,0,this.width,this.height),V.bindFramebuffer(V.FRAMEBUFFER,null),this._.texture.id=e,this._.texture.use();var p={};p.inputImageTexture=0;var m={};return m.trans=i,this._.rotationShader.uniforms(m),this._.rotationShader.textures(p),this._.rotationShader.drawBlend(),this.m_small_canvas_difference=!0,this}function u(e,t,a,n,o){this._.isInitialized&&t==this.width&&a==this.height||r.call(this,t,a,!0),this._.texture.id=e,V.bindFramebuffer(V.FRAMEBUFFER,null);var i=(a-n)/a;this._.texture.use();var s={};s.inputImageTexture=0;var l={};return l.border=i,l.color=[o[0]/255,o[1]/255,o[2]/255],V.viewport(0,0,t||this.width,a||this.height),this._.polaroidShader.uniforms(l),this._.polaroidShader.textures(s),this._.polaroidShader.drawBlend(),this.m_small_canvas_difference=!0,this}function p(){return this.m_small_canvas_difference}function m(){this.m_small_canvas_difference=!1}function f(e,t,a,r){(a||this._.texture).use(),this._.spareTexture.drawTo(function(){e.uniforms(t).drawRect()}),this._.spareTexture.swapWith(r||this._.texture)}function g(e){return e.parentNode.insertBefore(this,e),e.parentNode.removeChild(e),this}function v(){var e=new X(this._.texture.width,this._.texture.height,V.RGBA,V.UNSIGNED_BYTE);return this._.texture.use(),e.drawTo(function(){J.getDefaultShader().drawRect()}),t(e)}function b(){var e=this._.texture.width,t=this._.texture.height,a=new Uint8Array(4*e*t);return this._.texture.drawTo(function(){V.readPixels(0,0,e,t,V.RGBA,V.UNSIGNED_BYTE,a)}),a}function _(e){return function(){return V=this._.gl,e.apply(this,arguments)}}function y(e,t,a,r,n,o,i,s){var l=a-n,c=r-o,h=i-n,d=s-o;n=e-a+n-i,o=t-r+o-s;var u=l*d-h*c,h=(n*d-h*o)/u,l=(l*o-n*c)/u;return[a-e+h*a,r-t+h*r,h,i-e+l*i,s-t+l*s,l,e,t,1]}function x(e){var t=e[0],a=e[1],r=e[2],n=e[3],o=e[4],i=e[5],s=e[6],l=e[7];e=e[8];var c=t*o*e-t*i*l-a*n*e+a*i*s+r*n*l-r*o*s;return[(o*e-i*l)/c,(r*l-a*e)/c,(a*i-r*o)/c,(i*s-n*e)/c,(t*e-r*s)/c,(r*n-t*i)/c,(n*l-o*s)/c,(a*s-t*l)/c,(t*o-a*n)/c]}function C(e){var t=e.length;this.xa=[],this.ya=[],this.u=[],this.y2=[],e.sort(function(e,t){return e[0]-t[0]});for(var a=0;a<t;a++)this.xa.push(e[a][0]),this.ya.push(e[a][1]);for(this.u[0]=0,this.y2[0]=0,a=1;a<t-1;++a){e=this.xa[a+1]-this.xa[a-1];var r=(this.xa[a]-this.xa[a-1])/e,n=r*this.y2[a-1]+2;this.y2[a]=(r-1)/n,this.u[a]=(6*((this.ya[a+1]-this.ya[a])/(this.xa[a+1]-this.xa[a])-(this.ya[a]-this.ya[a-1])/(this.xa[a]-this.xa[a-1]))/e-r*this.u[a-1])/n}for(this.y2[t-1]=0,a=t-2;0<=a;--a)this.y2[a]=this.y2[a]*this.y2[a+1]+this.u[a]}function w(e,t){return new J(null,e+"uniform sampler2D texture;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 coord=texCoord*texSize;"+t+"gl_FragColor=texture2D(texture,coord/texSize);vec2 clampedCoord=clamp(coord,vec2(0.0),texSize);if (coord!=clampedCoord){gl_FragColor.a*=max(0.0,1.0-length(coord-clampedCoord));}}")}function A(t,a){return V.brightnessContrast=V.brightnessContrast||new J(null,"uniform sampler2D texture;uniform float brightness;uniform float contrast;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.rgb+=brightness;if (contrast>0.0){color.rgb=(color.rgb-0.5)/(1.0-contrast)+0.5;}else{color.rgb=(color.rgb-0.5)*(1.0+contrast)+0.5;}gl_FragColor=color;}"),f.call(this,V.brightnessContrast,{brightness:e(-1,t,1),contrast:e(-1,a,1)}),this}function E(t){t=new C(t);for(var a=[],r=0;256>r;r++)a.push(e(0,Math.floor(256*t.interpolate(r/255)),255));return a}function F(e,t,a){e=E(e),1==arguments.length?t=a=e:(t=E(t),a=E(a));for(var r=[],n=0;256>n;n++)r.splice(r.length,0,e[n],t[n],a[n],255);return this._.extraTexture.initFromBytes(256,1,r),this._.extraTexture.use(1),V.curves=V.curves||new J(null,"uniform sampler2D texture;uniform sampler2D map;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color.r=texture2D(map,vec2(color.r)).r;color.g=texture2D(map,vec2(color.g)).g;color.b=texture2D(map,vec2(color.b)).b;gl_FragColor=color;}"),V.curves.textures({map:1}),f.call(this,V.curves,{}),this}function k(e){V.denoise=V.denoise||new J(null,"uniform sampler2D texture;uniform float exponent;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec4 center=texture2D(texture,texCoord);vec4 color=vec4(0.0);float total=0.0;for(float x=-4.0;x<=4.0;x+=1.0){for(float y=-4.0;y<=4.0;y+=1.0){vec4 sample=texture2D(texture,texCoord+vec2(x,y)/texSize);float weight=1.0-abs(dot(sample.rgb-center.rgb,vec3(0.25)));weight=pow(weight,exponent);color+=sample*weight;total+=weight;}}gl_FragColor=color/total;}");for(var t=0;2>t;t++)f.call(this,V.denoise,{exponent:Math.max(0,e),texSize:[this.width,this.height]});return this}function M(t,a){return V.hueSaturation=V.hueSaturation||new J(null,"uniform sampler2D texture;uniform float hue;uniform float saturation;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float angle=hue*3.14159265;float s=sin(angle),c=cos(angle);vec3 weights=(vec3(2.0*c,-sqrt(3.0)*s-c,sqrt(3.0)*s-c)+1.0)/3.0;float len=length(color.rgb);color.rgb=vec3(dot(color.rgb,weights.xyz),dot(color.rgb,weights.zxy),dot(color.rgb,weights.yzx));float average=(color.r+color.g+color.b)/3.0;if (saturation>0.0){color.rgb+=(average-color.rgb)*(1.0-1.0/(1.001-saturation));}else{color.rgb+=(average-color.rgb)*(-saturation);}gl_FragColor=color;}"),f.call(this,V.hueSaturation,{hue:e(-1,t,1),saturation:e(-1,a,1)}),this}function S(t){return V.noise=V.noise||new J(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;float rand(vec2 co){return fract(sin(dot(co.xy,vec2(12.9898,78.233)))*43758.5453);}void main(){vec4 color=texture2D(texture,texCoord);float diff=(rand(texCoord)-0.5)*amount;color.r+=diff;color.g+=diff;color.b+=diff;gl_FragColor=color;}"),f.call(this,V.noise,{amount:e(0,t,1)}),this}function T(t){return V.sepia=V.sepia||new J(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float r=color.r;float g=color.g;float b=color.b;color.r=min(1.0,(r*(1.0-(0.607*amount)))+(g*(0.769*amount))+(b*(0.189*amount)));color.g=min(1.0,(r*0.349*amount)+(g*(1.0-(0.314*amount)))+(b*0.168*amount));color.b=min(1.0,(r*0.272*amount)+(g*0.534*amount)+(b*(1.0-(0.869*amount))));gl_FragColor=color;}"),f.call(this,V.sepia,{amount:e(0,t,1)}),this}function D(e,t){return V.unsharpMask=V.unsharpMask||new J(null,"uniform sampler2D blurredTexture;uniform sampler2D originalTexture;uniform float strength;uniform float threshold;varying vec2 texCoord;void main(){vec4 blurred=texture2D(blurredTexture,texCoord);vec4 original=texture2D(originalTexture,texCoord);gl_FragColor=mix(blurred,original,1.0+strength);}"),this._.extraTexture.ensureFormat(this._.texture),this._.texture.use(),this._.extraTexture.drawTo(function(){J.getDefaultShader().drawRect()}),this._.extraTexture.use(1),this.triangleBlur(e),V.unsharpMask.textures({originalTexture:1}),f.call(this,V.unsharpMask,{strength:t}),this._.extraTexture.unuse(1),this}function R(t){return V.vibrance=V.vibrance||new J(null,"uniform sampler2D texture;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;float mx=max(color.r,max(color.g,color.b));float amt=(mx-average)*(-amount*3.0);color.rgb=mix(color.rgb,vec3(mx),amt);gl_FragColor=color;}"),f.call(this,V.vibrance,{amount:e(-1,t,1)}),this}function I(t,a){return V.vignette=V.vignette||new J(null,"uniform sampler2D texture;uniform float size;uniform float amount;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);float dist=distance(texCoord,vec2(0.5,0.5));color.rgb*=smoothstep(0.8,size*0.799,dist*(amount+size));gl_FragColor=color;}"),f.call(this,V.vignette,{size:e(0,t,1),amount:e(0,a,1)}),this}function N(t,a,r){V.lensBlurPrePass=V.lensBlurPrePass||new J(null,"uniform sampler2D texture;uniform float power;varying vec2 texCoord;void main(){vec4 color=texture2D(texture,texCoord);color=pow(color,vec4(power));gl_FragColor=vec4(color);}");var n="uniform sampler2D texture0;uniform sampler2D texture1;uniform vec2 delta0;uniform vec2 delta1;uniform float power;varying vec2 texCoord;"+q+"vec4 sample(vec2 delta){float offset=random(vec3(delta,151.7182),0.0);vec4 color=vec4(0.0);float total=0.0;for(float t=0.0;t<=30.0;t++){float percent=(t+offset)/30.0;color+=texture2D(texture0,texCoord+delta*percent);total+=1.0;}return color/total;}";V.lensBlur0=V.lensBlur0||new J(null,n+"void main(){gl_FragColor=sample(delta0);}"),V.lensBlur1=V.lensBlur1||new J(null,n+"void main(){gl_FragColor=(sample(delta0)+sample(delta1))*0.5;}"),V.lensBlur2=V.lensBlur2||new J(null,n+"void main(){vec4 color=(sample(delta0)+2.0*texture2D(texture1,texCoord))/3.0;gl_FragColor=pow(color,vec4(power));}").textures({texture1:1});for(var n=[],o=0;3>o;o++){var i=r+2*o*Math.PI/3;n.push([t*Math.sin(i)/this.width,t*Math.cos(i)/this.height])}return t=Math.pow(10,e(-1,a,1)),f.call(this,V.lensBlurPrePass,{power:t}),this._.extraTexture.ensureFormat(this._.texture),f.call(this,V.lensBlur0,{delta0:n[0]},this._.texture,this._.extraTexture),f.call(this,V.lensBlur1,{delta0:n[1],delta1:n[2]},this._.extraTexture,this._.extraTexture),f.call(this,V.lensBlur0,{delta0:n[1]}),this._.extraTexture.use(1),f.call(this,V.lensBlur2,{power:1/t,delta0:n[2]}),this}function P(e,t,a,r,n,o){V.tiltShift=V.tiltShift||new J(null,"uniform sampler2D texture;uniform float blurRadius;uniform float gradientRadius;uniform vec2 start;uniform vec2 end;uniform vec2 delta;uniform vec2 texSize;varying vec2 texCoord;"+q+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);vec2 normal=normalize(vec2(start.y-end.y,end.x-start.x));float radius=smoothstep(0.0,1.0,abs(dot(texCoord*texSize-start,normal))/gradientRadius)*blurRadius;for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta/texSize*percent*radius);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}");var i=a-e,s=r-t,l=Math.sqrt(i*i+s*s);return f.call(this,V.tiltShift,{blurRadius:n,gradientRadius:o,start:[e,t],end:[a,r],delta:[i/l,s/l],texSize:[this.width,this.height]}),f.call(this,V.tiltShift,{blurRadius:n,gradientRadius:o,start:[e,t],end:[a,r],delta:[-s/l,i/l],texSize:[this.width,this.height]}),this}function B(e){return V.triangleBlur=V.triangleBlur||new J(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+q+"void main(){vec4 color=vec4(0.0);float total=0.0;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec4 sample=texture2D(texture,texCoord+delta*percent);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),f.call(this,V.triangleBlur,{delta:[e/this.width,0]}),f.call(this,V.triangleBlur,{delta:[0,e/this.height]}),this}function z(e,t,a){return V.zoomBlur=V.zoomBlur||new J(null,"uniform sampler2D texture;uniform vec2 center;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;"+q+"void main(){vec4 color=vec4(0.0);float total=0.0;vec2 toCenter=center-texCoord*texSize;float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=0.0;t<=40.0;t++){float percent=(t+offset)/40.0;float weight=4.0*(percent-percent*percent);vec4 sample=texture2D(texture,texCoord+toCenter*percent*strength/texSize);sample.rgb*=sample.a;color+=sample*weight;total+=weight;}gl_FragColor=color/total;gl_FragColor.rgb/=gl_FragColor.a+0.00001;}"),f.call(this,V.zoomBlur,{center:[e,t],strength:a,texSize:[this.width,this.height]}),this}function U(e,t,a,r){return V.colorHalftone=V.colorHalftone||new J(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(float angle){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);vec3 cmy=1.0-color.rgb;float k=min(cmy.x,min(cmy.y,cmy.z));cmy=(cmy-k)/(1.0-k);cmy=clamp(cmy*10.0-3.0+vec3(pattern(angle+0.26179),pattern(angle+1.30899),pattern(angle)),0.0,1.0);k=clamp(k*10.0-5.0+pattern(angle+0.78539),0.0,1.0);gl_FragColor=vec4(1.0-cmy-k,color.a);}"),f.call(this,V.colorHalftone,{center:[e,t],angle:a,scale:Math.PI/r,texSize:[this.width,this.height]}),this}function G(e,t,a,r){return V.dotScreen=V.dotScreen||new J(null,"uniform sampler2D texture;uniform vec2 center;uniform float angle;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;float pattern(){float s=sin(angle),c=cos(angle);vec2 tex=texCoord*texSize-center;vec2 point=vec2(c*tex.x-s*tex.y,s*tex.x+c*tex.y)*scale;return(sin(point.x)*sin(point.y))*4.0;}void main(){vec4 color=texture2D(texture,texCoord);float average=(color.r+color.g+color.b)/3.0;gl_FragColor=vec4(vec3(average*10.0-5.0+pattern()),color.a);}"),f.call(this,V.dotScreen,{center:[e,t],angle:a,scale:Math.PI/r,texSize:[this.width,this.height]}),this}function O(e){return V.edgeWork1=V.edgeWork1||new J(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+q+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec3 sample=texture2D(texture,texCoord+delta*percent).rgb;float average=(sample.r+sample.g+sample.b)/3.0;color.x+=average*weight;total.x+=weight;if (abs(t)<15.0){weight=weight*2.0-1.0;color.y+=average*weight;total.y+=weight;}}gl_FragColor=vec4(color/total,0.0,1.0);}"),V.edgeWork2=V.edgeWork2||new J(null,"uniform sampler2D texture;uniform vec2 delta;varying vec2 texCoord;"+q+"void main(){vec2 color=vec2(0.0);vec2 total=vec2(0.0);float offset=random(vec3(12.9898,78.233,151.7182),0.0);for(float t=-30.0;t<=30.0;t++){float percent=(t+offset-0.5)/30.0;float weight=1.0-abs(percent);vec2 sample=texture2D(texture,texCoord+delta*percent).xy;color.x+=sample.x*weight;total.x+=weight;if (abs(t)<15.0){weight=weight*2.0-1.0;color.y+=sample.y*weight;total.y+=weight;}}float c=clamp(10000.0*(color.y/total.y-color.x/total.x)+0.5,0.0,1.0);gl_FragColor=vec4(c,c,c,1.0);}"),f.call(this,V.edgeWork1,{delta:[e/this.width,0]}),f.call(this,V.edgeWork2,{delta:[0,e/this.height]}),this}function j(e,t,a){return V.hexagonalPixelate=V.hexagonalPixelate||new J(null,"uniform sampler2D texture;uniform vec2 center;uniform float scale;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 tex=(texCoord*texSize-center)/scale;tex.y/=0.866025404;tex.x-=tex.y*0.5;vec2 a;if (tex.x+tex.y-floor(tex.x)-floor(tex.y)<1.0)a=vec2(floor(tex.x),floor(tex.y));else a=vec2(ceil(tex.x),ceil(tex.y));vec2 b=vec2(ceil(tex.x),floor(tex.y));vec2 c=vec2(floor(tex.x),ceil(tex.y));vec3 TEX=vec3(tex.x,tex.y,1.0-tex.x-tex.y);vec3 A=vec3(a.x,a.y,1.0-a.x-a.y);vec3 B=vec3(b.x,b.y,1.0-b.x-b.y);vec3 C=vec3(c.x,c.y,1.0-c.x-c.y);float alen=length(TEX-A);float blen=length(TEX-B);float clen=length(TEX-C);vec2 choice;if (alen<blen){if (alen<clen)choice=a;else choice=c;}else{if (blen<clen)choice=b;else choice=c;}choice.x+=choice.y*0.5;choice.y*=0.866025404;choice*=scale/texSize;gl_FragColor=texture2D(texture,choice+center/texSize);}"),f.call(this,V.hexagonalPixelate,{center:[e,t],scale:a,texSize:[this.width,this.height]}),this}function L(e){return V.ink=V.ink||new J(null,"uniform sampler2D texture;uniform float strength;uniform vec2 texSize;varying vec2 texCoord;void main(){vec2 dx=vec2(1.0/texSize.x,0.0);vec2 dy=vec2(0.0,1.0/texSize.y);vec4 color=texture2D(texture,texCoord);float bigTotal=0.0;float smallTotal=0.0;vec3 bigAverage=vec3(0.0);vec3 smallAverage=vec3(0.0);for(float x=-2.0;x<=2.0;x+=1.0){for(float y=-2.0;y<=2.0;y+=1.0){vec3 sample=texture2D(texture,texCoord+dx*x+dy*y).rgb;bigAverage+=sample;bigTotal+=1.0;if (abs(x)+abs(y)<2.0){smallAverage+=sample;smallTotal+=1.0;}}}vec3 edge=max(vec3(0.0),bigAverage/bigTotal-smallAverage/smallTotal);gl_FragColor=vec4(color.rgb-dot(edge,edge)*strength*100000.0,color.a);}"),f.call(this,V.ink,{strength:e*e*e*e*e,texSize:[this.width,this.height]}),this}function H(t,a,r,n){return V.bulgePinch=V.bulgePinch||w("uniform float radius;uniform float strength;uniform vec2 center;","coord-=center;float distance=length(coord);if (distance<radius){float percent=distance/radius;if (strength>0.0){coord*=mix(1.0,smoothstep(0.0,radius/distance,percent),strength*0.75);}else{coord*=mix(1.0,pow(percent,1.0+strength*0.75)*radius/distance,1.0-percent);}}coord+=center;"),f.call(this,V.bulgePinch,{radius:r,strength:e(-1,n,1),center:[t,a],texSize:[this.width,this.height]}),this}function Z(e,t,a){if(V.matrixWarp=V.matrixWarp||w("uniform mat3 matrix;uniform bool useTextureSpace;","if (useTextureSpace)coord=coord/texSize*2.0-1.0;vec3 warp=matrix*vec3(coord,1.0);coord=warp.xy/warp.z;if (useTextureSpace)coord=(coord*0.5+0.5)*texSize;"),e=Array.prototype.concat.apply([],e),4==e.length)e=[e[0],e[1],0,e[2],e[3],0,0,0,1];else if(9!=e.length)throw"can only warp with 2x2 or 3x3 matrix";return f.call(this,V.matrixWarp,{matrix:t?x(e):e,texSize:[this.width,this.height],useTextureSpace:0|a}),this}function Y(e,t){var a=y.apply(null,t),r=y.apply(null,e),a=x(a);return this.matrixWarp([a[0]*r[0]+a[1]*r[3]+a[2]*r[6],a[0]*r[1]+a[1]*r[4]+a[2]*r[7],a[0]*r[2]+a[1]*r[5]+a[2]*r[8],a[3]*r[0]+a[4]*r[3]+a[5]*r[6],a[3]*r[1]+a[4]*r[4]+a[5]*r[7],a[3]*r[2]+a[4]*r[5]+a[5]*r[8],a[6]*r[0]+a[7]*r[3]+a[8]*r[6],a[6]*r[1]+a[7]*r[4]+a[8]*r[7],a[6]*r[2]+a[7]*r[5]+a[8]*r[8]])}function W(e,t,a,r){return V.swirl=V.swirl||w("uniform float radius;uniform float angle;uniform vec2 center;","coord-=center;float distance=length(coord);if (distance<radius){float percent=(radius-distance)/radius;float theta=percent*percent*angle;float s=sin(theta);float c=cos(theta);coord=vec2(coord.x*c-coord.y*s,coord.x*s+coord.y*c);}coord+=center;"),f.call(this,V.swirl,{radius:a,center:[e,t],angle:r,texSize:[this.width,this.height]}),this}var Q={};!function(){function e(){}function t(t){return"OES_texture_float_linear"===t?(void 0===this.$OES_texture_float_linear$&&Object.defineProperty(this,"$OES_texture_float_linear$",{enumerable:!1,configurable:!1,writable:!1,value:new e}),t=this.$OES_texture_float_linear$):t=n.call(this,t),t}function a(){var e=o.call(this);return-1===e.indexOf("OES_texture_float_linear")&&e.push("OES_texture_float_linear"),e}try{var r=document.createElement("canvas").getContext("experimental-webgl",{premultipliedAlpha:!0,preserveDrawingBuffer:!0,alpha:!0})}catch(e){}if(r&&-1===r.getSupportedExtensions().indexOf("OES_texture_float_linear")&&function(e){if(!e.getExtension("OES_texture_float"))return!1;var t=e.createFramebuffer(),a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),t=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.FLOAT,new Float32Array([2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]));var a=e.createProgram(),r=e.createShader(e.VERTEX_SHADER),n=e.createShader(e.FRAGMENT_SHADER);return e.shaderSource(r,"attribute vec2 vertex;void main(){gl_Position=vec4(vertex,0.0,1.0);}"),e.shaderSource(n,"uniform sampler2D texture;void main(){gl_FragColor=texture2D(texture,vec2(0.5));}"),e.compileShader(r),e.compileShader(n),e.attachShader(a,r),e.attachShader(a,n),e.linkProgram(a),r=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0]),e.STREAM_DRAW),e.enableVertexAttribArray(0),e.vertexAttribPointer(0,2,e.FLOAT,!1,0,0),r=new Uint8Array(4),e.useProgram(a),e.viewport(0,0,1,1),e.bindTexture(e.TEXTURE_2D,t),e.drawArrays(e.POINTS,0,1),e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,r),127===r[0]||128===r[0]}(r)){var n=WebGLRenderingContext.prototype.getExtension,o=WebGLRenderingContext.prototype.getSupportedExtensions;WebGLRenderingContext.prototype.getExtension=t,WebGLRenderingContext.prototype.getSupportedExtensions=a}}();var V;Q.canvas=function(){var e=document.createElement("canvas");try{V=e.getContext("experimental-webgl",{premultipliedAlpha:!0,preserveDrawingBuffer:!0,alpha:!0})}catch(e){V=null}if(!V)throw"This browser does not support WebGL";return e._={gl:V,isInitialized:!1,texture:null,spareTexture:null,flippedShader:null,areaBlendShader:null,areaReshapeShader:null,cloneShader:null,rotationShader:null,polaroidShader:null,autoCropShader:null,m_small_canvas_difference:!0},e.resetContext=function(){return null!=this._.gl.engineVertexBuffer&&(this._.gl.engineVertexBuffer=null),null!=this._.gl.texCoordBuffer&&(this._.gl.texCoordBuffer=null),null!=this._.gl.vertexBuffer&&(this._.gl.vertexBuffer=null),this._.isInitialized=!1,this._.texture=null,this._.spareTexture=null,this._.flippedShader=null,this._.areaBlendShader=null,this._.areaReshapeShader=null,this._.cloneShader=null,this._.rotationShader=null,this._.polaroidShader=null,this._.autoCropShader=null,this._.m_small_canvas_difference=!0,!0},e.texture=_(a),e.draw=_(n),e.update=_(i),e.autoCrop=_(s),e.paint=_(l),e.reshape=_(c),e.paintClone=_(h),e.drawRotation=_(d),e.drawPolariod=_(u),e.get_small_canvas_different=_(p),e.set_small_canvas_noDiferent=_(m),e.replace=_(g),e.contents=_(v),e.getPixelArray=_(b),e.brightnessContrast=_(A),e.hexagonalPixelate=_(j),e.hueSaturation=_(M),e.colorHalftone=_(U),e.triangleBlur=_(B),e.unsharpMask=_(D),e.perspective=_(Y),e.matrixWarp=_(Z),e.bulgePinch=_(H),e.tiltShift=_(P),e.dotScreen=_(G),e.edgeWork=_(O),e.lensBlur=_(N),e.zoomBlur=_(z),e.noise=_(S),e.denoise=_(k),e.curves=_(F),e.swirl=_(W),e.ink=_(L),e.vignette=_(I),e.vibrance=_(R),e.sepia=_(T),e},Q.splineInterpolate=E;var J=function(){function e(e,t){var a=V.createShader(e);if(V.shaderSource(a,t),V.compileShader(a),!V.getShaderParameter(a,V.COMPILE_STATUS))throw"compile error: "+V.getShaderInfoLog(a);return a}function t(t,n){if(this.texCoordAttribute=this.vertexAttribute=null,this.program=V.createProgram(),t=t||a,n=n||r,n="precision highp float;"+n,V.attachShader(this.program,e(V.VERTEX_SHADER,t)),V.attachShader(this.program,e(V.FRAGMENT_SHADER,n)),V.linkProgram(this.program),!V.getProgramParameter(this.program,V.LINK_STATUS))throw"link error: "+V.getProgramInfoLog(this.program)}var a="attribute vec2 vertex;attribute vec2 _texCoord;varying vec2 texCoord;void main(){texCoord=_texCoord;gl_Position=vec4(vertex*2.0-1.0,0.0,1.0);}",r="uniform sampler2D texture;varying vec2 texCoord;void main(){gl_FragColor=texture2D(texture,texCoord);}";return t.prototype.destroy=function(){V.deleteProgram(this.program),this.program=null},t.prototype.uniforms=function(e){V.useProgram(this.program);for(var t in e)if(e.hasOwnProperty(t)){var a=V.getUniformLocation(this.program,t);if(null!==a){var r=e[t];if("[object Array]"==Object.prototype.toString.call(r))switch(r.length){case 1:V.uniform1fv(a,new Float32Array(r));break;case 2:V.uniform2fv(a,new Float32Array(r));break;case 3:V.uniform3fv(a,new Float32Array(r));break;case 4:V.uniform4fv(a,new Float32Array(r));break;case 9:V.uniformMatrix3fv(a,!1,new Float32Array(r));break;case 16:V.uniformMatrix4fv(a,!1,new Float32Array(r));break;default:throw"dont't know how to load uniform \""+t+'" of length '+r.length}else{if("[object Number]"!=Object.prototype.toString.call(r))throw'attempted to set uniform "'+t+'" to invalid value '+(r||"undefined").toString();V.uniform1f(a,r)}}}return this},t.prototype.textures=function(e){V.useProgram(this.program);for(var t in e)e.hasOwnProperty(t)&&V.uniform1i(V.getUniformLocation(this.program,t),e[t]);return this},t.prototype.drawRect=function(e,t,a,r){var n=V.getParameter(V.VIEWPORT);t=void 0!==t?(t-n[1])/n[3]:0,e=void 0!==e?(e-n[0])/n[2]:0,a=void 0!==a?(a-n[0])/n[2]:1,r=void 0!==r?(r-n[1])/n[3]:1,null==V.vertexBuffer&&(V.vertexBuffer=V.createBuffer()),V.bindBuffer(V.ARRAY_BUFFER,V.vertexBuffer),V.bufferData(V.ARRAY_BUFFER,new Float32Array([e,t,e,r,a,t,a,r]),V.STATIC_DRAW),null==V.texCoordBuffer&&(V.texCoordBuffer=V.createBuffer()),V.bindBuffer(V.ARRAY_BUFFER,V.texCoordBuffer),V.bufferData(V.ARRAY_BUFFER,new Float32Array([e,t,e,r,a,t,a,r]),V.STATIC_DRAW),null==this.vertexAttribute&&(this.vertexAttribute=V.getAttribLocation(this.program,"vertex"),V.enableVertexAttribArray(this.vertexAttribute)),null==this.texCoordAttribute&&(this.texCoordAttribute=V.getAttribLocation(this.program,"_texCoord"),V.enableVertexAttribArray(this.texCoordAttribute)),V.useProgram(this.program),V.bindBuffer(V.ARRAY_BUFFER,V.vertexBuffer),V.vertexAttribPointer(this.vertexAttribute,2,V.FLOAT,!1,0,0),V.bindBuffer(V.ARRAY_BUFFER,V.texCoordBuffer),V.vertexAttribPointer(this.texCoordAttribute,2,V.FLOAT,!1,0,0),V.drawArrays(V.TRIANGLE_STRIP,0,4)},t.prototype.drawBlend=function(){V.useProgram(this.program),null==V.vertexBuffer&&(V.vertexBuffer=V.createBuffer()),V.bindBuffer(V.ARRAY_BUFFER,V.vertexBuffer),V.bufferData(V.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),V.STATIC_DRAW),this.vertexAttribute=V.getAttribLocation(this.program,"vPosition"),V.enableVertexAttribArray(this.vertexAttribute),V.vertexAttribPointer(this.vertexAttribute,2,V.FLOAT,!1,0,new Float32Array([-1,-1,1,-1,1,1,-1,1])),V.drawArrays(V.TRIANGLE_FAN,0,4)},t.getDefaultShader=function(){return V.defaultShader=V.defaultShader||new t,V.defaultShader},t}();C.prototype.interpolate=function(e){for(var t=0,a=this.ya.length-1;1<a-t;){var r=a+t>>1;this.xa[r]>e?a=r:t=r}var r=this.xa[a]-this.xa[t],n=(this.xa[a]-e)/r;return e=(e-this.xa[t])/r,n*this.ya[t]+e*this.ya[a]+((n*n*n-n)*this.y2[t]+(e*e*e-e)*this.y2[a])*r*r/6};var X=function(){function e(e,t,a,r){this.gl=V,this.id=V.createTexture(),this.width=e,this.height=t,this.format=a,this.type=r,V.bindTexture(V.TEXTURE_2D,this.id),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,V.LINEAR),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,V.LINEAR),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_S,V.CLAMP_TO_EDGE),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_WRAP_T,V.CLAMP_TO_EDGE),e&&t&&V.texImage2D(V.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null),V.getError()&&console.log("The image you loaded have some problems!")}function t(e){return null==a&&(a=document.createElement("canvas")),a.width=e.width,a.height=e.height,e=a.getContext("2d"),e.clearRect(0,0,a.width,a.height),e}e.fromElement=function(t){var a;return a=t&&t.width&&t.height?new e(t.width,t.height,V.RGBA,V.UNSIGNED_BYTE):new e(0,0,V.RGBA,V.UNSIGNED_BYTE),a.loadContentsOf(t),a},e.prototype.loadContentsOf=function(e){this.width=e.width||e.videoWidth,this.height=e.height||e.videoHeight,V.bindTexture(V.TEXTURE_2D,this.id),V.texImage2D(V.TEXTURE_2D,0,this.format,this.format,this.type,e)},e.prototype.loadContentsOfGLTexture=function(e){this.id=e},e.prototype.initFromBytes=function(e,t,a){this.width=e,this.height=t,this.format=V.RGBA,this.type=V.UNSIGNED_BYTE,V.bindTexture(V.TEXTURE_2D,this.id),V.texImage2D(V.TEXTURE_2D,0,V.RGBA,e,t,0,V.RGBA,this.type,new Uint8Array(a))},e.prototype.destroy=function(){V.deleteTexture(this.id),this.id=null},e.prototype.use=function(e){V.activeTexture(V.TEXTURE0+(e||0)),V.bindTexture(V.TEXTURE_2D,this.id)},e.prototype.unuse=function(e){V.activeTexture(V.TEXTURE0+(e||0)),V.bindTexture(V.TEXTURE_2D,null)},e.prototype.ensureFormat=function(e,t,a,r){if(1==arguments.length){var n=arguments[0];e=n.width,t=n.height,a=n.format,r=n.type}e==this.width&&t==this.height&&a==this.format&&r==this.type||(this.width=e,this.height=t,this.format=a,this.type=r,V.bindTexture(V.TEXTURE_2D,this.id),V.texImage2D(V.TEXTURE_2D,0,this.format,e,t,0,this.format,this.type,null))},e.prototype.drawTo=function(e){if(V.framebuffer=V.framebuffer||V.createFramebuffer(),V.bindFramebuffer(V.FRAMEBUFFER,V.framebuffer),V.framebufferTexture2D(V.FRAMEBUFFER,V.COLOR_ATTACHMENT0,V.TEXTURE_2D,this.id,0),V.checkFramebufferStatus(V.FRAMEBUFFER)!==V.FRAMEBUFFER_COMPLETE)throw Error("incomplete framebuffer");V.viewport(0,0,this.width,this.height),e(),V.bindFramebuffer(V.FRAMEBUFFER,null)};var a=null;return e.prototype.fillUsingCanvas=function(e){return e(t(this)),this.format=V.RGBA,this.type=V.UNSIGNED_BYTE,V.bindTexture(V.TEXTURE_2D,this.id),V.texImage2D(V.TEXTURE_2D,0,V.RGBA,V.RGBA,V.UNSIGNED_BYTE,a),this},e.prototype.toImage=function(e){this.use(),J.getDefaultShader().drawRect();var r=4*this.width*this.height,n=new Uint8Array(r),o=t(this),i=o.createImageData(this.width,this.height);V.readPixels(0,0,this.width,this.height,V.RGBA,V.UNSIGNED_BYTE,n);for(var s=0;s<r;s++)i.data[s]=n[s];o.putImageData(i,0,0),e.src=a.toDataURL()},e.prototype.swapWith=function(e){var t;t=e.id,e.id=this.id,this.id=t,t=e.width,e.width=this.width,this.width=t,t=e.height,e.height=this.height,this.height=t,t=e.format,e.format=this.format,this.format=t},e}(),q="float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}";return Q}();e.exports=a},function(e,t){var a={};a.onekeybeauty=function(){return"toneMapStart key 6;toneEnhance dark 0.5 0.8 light -0.3 0 blurFactor 0.065 0;toneMapEnd;toneMapStart key 86;structureSharpen iterateTimes 5.6 factor 0 2 relaxation 2 1.23 0.1 strength 59.5 contrast 1.3 darkLight 0.5 0.5;toneMapEnd;toneCurve saturate 1.2;"},a.brightness=function(e){var t,a,r,n;return e<0?(t=127*-e/100,a=0,r=255,n=255+127*e/100):(t=0,a=127*e/100,r=255-127*e/100,n=255),"curve graph rgb point "+t+" "+a+" point "+r+" "+n+";"},a.contrast=function(e){return"curve contrast "+e+";"},a.saturation=function(e){var t=e>1?1+(e-1)/4:e;return"toneCurve saturate "+t+";basicAdjust saturation "+(e>1?t:1)+";"},a.sharpness=function(e){var t="";if(e>0){var a;a=200*e/150,t="toneMapStart key 15;blurSharpen amount "+a+" radius 0.01;toneMapEnd;"}else{var r;r=100*e/150,t="toneMapStart key -28;blurSharpen amount "+r+" radius 0.042;toneMapEnd;"}return t},a.temperature=function(e){var t,a,r;return e<0?(t=255,a=255+52*e/100,r=255+114*e/100):(t=255-93*e/100,a=255-62*e/100,r=255),"curve graph red point 0 0 point "+t+" 255 green point 0 0 point "+a+" 255 blue point 0 0 point "+r+" 255;"},a.tint=function(e){var t=0,a=0,r=0;return e<0?(t=255+64*e/50,a=255,r=255+64*e/50):(t=255,a=255-58*e/50,r=255),"curve graph red point 0 0 point "+t+" 255 green point 0 0 point "+a+" 255 blue point 0 0 point "+r+" 255;"},a.exposure=function(e){return"curve exposure "+e+";"},a.hightlightsShodows=function(e,t){return"toneMapStart key 0;newStructureSharpen radius 0.001 esp 0.001 contrastDarkLight "+e+" "+t+" details 1 preserveDarkLight 0.5 0.5;toneMapEnd;"},a.hightlights=function(e){return"curve graph rgb point "+e+" 0 point 255 255 ;"},a.shodows=function(e){return"curve graph rgb point 0 0 point "+(255-e)+" 255 ;"},a.curve=function(e,t,a,r){return"curve graph red "+e+" green "+t+" blue "+a+" rgb "+r+";"},a.crop=function(e,t,a,r){return"basicAdjust areaSelective relative position "+e+" "+t+" size "+a+" "+r+";"},a.tiltShiftCircle=function(e,t,a,r){return"tiltShift aperture "+e+" angleRad 0 measuringScale relative center "+t+" "+a+" ellipse "+r+" "+r+";"},a.tiltShiftStrip=function(e,t,a,r,n){return"tiltShift aperture "+e+" angleAng "+t+" measuringScale relative center "+a+" "+r+" vector "+n+";"},a.particles=function(e,t){return"basicAdjust noise "+e+" "+t+";"},a.vignette=function(e){return"layer vig start;basicAdjust vignetteAdjust 0.2 0.6 color 0 0 0 255 intensity "+e+" round 0;layer vig swap;blend layer vig opacity alpha 100; layer vig end;"},a.borderShadow=function(e,t,a,r,n,o,i,s,l,c,h){return"specialBorder smallShadow size "+e+" fade "+t+" angle "+a+" distance "+r+" shadowColor "+n+" "+o+" "+i+" backColor "+s+" "+l+" "+c+" "+h+";"},a.galleryFrame=function(e,t,a,r,n,o,i,s){return"specialBorder smallGallery outSize "+e+" innerSize "+t+" outColor "+a+" "+r+" "+n+" innerColor "+o+" "+i+" "+s+";"},a.polaroid=function(e,t,a,r,n,o,i,s,l){return"specialBorder smallPolaroid outSize "+e+" innerSize "+t+" roundCorner "+a+" outColor "+r+" "+n+" "+o+" innerColor "+i+" "+s+" "+l+";"},a.blemishfix=function(e,t,a){return"basicAdjust blemishFix point "+e+" "+t+" radius "+a+";"},a.smoothing=function(e){return"layer op start;layer src start;layer tmp start;basicAdjust gaussianBlur 25 20;layer tmp swap;blend layer tmp difference 100;basicAdjust colorMatf 1 0 0 0 0 1 0 0 0 0 1 0 0.76245 1.5045 0.2907 0;layer tmp swap;blend layer src opacity layer tmp;layer tmp end;layer src end;layer op swap;blend layer op opacity "+e+";"},a.wrinkles=function(e){return"layer op start;layer tmp start;blurSharpen amount -100  radius 0.065;layer tmp swap;curve mixColor opacity 0 0 0 255 100;basicAdjust noise 0.9 0.4;curve graph rgb point 0 0 point 12 12;blend layer tmp screen 100;layer tmp end;layer op swap;blend layer op opacity "+e+";"},a.blush=function(e,t,a,r){return"curve mixColor linearBurn "+e+" "+t+" "+a+" 255 "+r+";curve mixColor difference 1 1 1 255 100;"},a.highLightBlush=function(e,t,a,r){return r=r/50*72,"curve mixColor softLight "+e+" "+t+" "+a+" 255 "+r+";"},a.eyeShadow=function(e,t,a,r){return"curve mixColor multiply "+e+" "+t+" "+a+" 255 "+r+";curve mixColor difference 1 1 1 255 100;"},a.eyeLiner=function(e,t,a,r){return"curve mixColor multiply "+e+" "+t+" "+a+" 255 "+r+";curve mixColor difference 1 1 1 255 100;"},a.highLightEyeLiner=function(e,t,a,r){return r=r/100*72,"curve mixColor softLight "+e+" "+t+" "+a+" 255 "+r+";"},a.mascara=function(e){return"basicAdjust marscara "+e+";"},a.eyeBrowPencil=function(e,t,a,r){return"curve mixColor multiply "+e+" "+t+" "+a+" 255 "+r+";curve mixColor difference 1 1 1 255 100;"},a.eyeTint=function(e,t,a,r){return"basicAdjust eyeTint "+e+" "+t+" "+a+" "+r+";"},a.eyePop=function(e){return"basicAdjust eyeBrighten "+e+";"},a.lipTint=function(e,t,a,r){return"curve mixColor overlay "+e+" "+t+" "+a+" 255 "+r+";curve mixColor difference 1 1 1 255 100;"},a.teethWhite=function(e){return"basicAdjust teethWhiten "+e+";"},a.pixelate=function(e){return"basicAdjust mosaic edge "+e+";"},a.photoBlur=function(e){return"blurSharpen amount -"+e.toString()+" radius 0.1;"},a.DrawBeauty=function(e,t){t=null!=t&&t;var a,r,n,o,i,s,l,c,h,d,u,p,m=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d"),s=Fotor.EngineAction.distanceBetween(e.last_Point,e.canvas_Point);if(e.isEraserMode){l=Math.max(.25*e.brush_Size,1),c=Math.floor(Math.max(Math.ceil(s)/l,1)),h={x:e.canvas_Point.x-e.last_Point.x,y:e.canvas_Point.y-e.last_Point.y},d={x:h.x/c,y:h.y/c},m.save(),u=.5*e.brush_Size/Fotor.mainCanvas.editorCanvasScale,p=1;for(var f=0;f<c;f++)a=e.last_Point.x+d.x*f,r=e.last_Point.y+d.y*f,"magicwand"==e.sampleToolName?(i=m.createRadialGradient(a,r,0,a,r,u),i.addColorStop(0,"rgba(0,0,0,1"),i.addColorStop(.99,"rgba(0,0,0,1)"),i.addColorStop(1,"rgba(0,0,0,0)"),m.globalCompositeOperation="destination-out",m.lineJoin=m.lineCap="round",m.fillStyle=i,m.fillRect(a-u,r-u,2*u,2*u)):(n=document.createElement("canvas"),o=n.getContext("2d"),n.width=2*u,n.height=2*u,o.save(),o.globalCompositeOperation="source-over",o.drawImage(e.savedOrgImg,a-u,r-u,2*u,2*u,0,0,2*u,2*u),o.restore(),o.save(),o.globalCompositeOperation="destination-out",i=o.createRadialGradient(u,u,0,u,u,u),i.addColorStop(0,"rgba(0,0,0,"+(1-.9*p)+")"),i.addColorStop(.89,"rgba(0,0,0,"+(1-.1*p)+")"),i.addColorStop(1,"rgba(0,0,0,1)"),o.fillStyle=i,o.fillRect(0,0,2*u,2*u),o.restore(),m.globalCompositeOperation="source-over",m.drawImage(n,a-u,r-u,2*u,2*u),n.remove());m.restore()}else{if(l=Math.max(.13*e.brush_Size,1),!t&&s<.8*l)return!1;c=Math.floor(Math.max(Math.ceil(s)/l,1)),h={x:e.canvas_Point.x-e.last_Point.x,y:e.canvas_Point.y-e.last_Point.y},d={x:h.x/c,y:h.y/c},m.save(),u=.5*e.brush_Size*1.15/Fotor.mainCanvas.editorCanvasScale,p=.5;for(var f=0;f<c;f++)a=e.last_Point.x+d.x*f,r=e.last_Point.y+d.y*f,"magicwand"==e.sampleToolName?(i=m.createRadialGradient(a,r,0,a,r,u),e.isKeepMode?(i.addColorStop(0,"rgba(0,255,132,1)"),i.addColorStop(.99,"rgba(0,255,132,1)"),i.addColorStop(1,"rgba(0,255,132,0)")):(i.addColorStop(0,"rgba(255,0,54,1)"),i.addColorStop(.99,"rgba(255,0,54,1)"),i.addColorStop(1,"rgba(255,0,54,0)")),m.globalCompositeOperation="source-over"):(i=m.createRadialGradient(a,r,0,a,r,u),i.addColorStop(0,"rgba(0,0,0,"+.64*p+")"),i.addColorStop(.2,"rgba(0,0,0,"+.41*p+")"),i.addColorStop(.4,"rgba(0,0,0,"+.24*p+")"),i.addColorStop(.7,"rgba(0,0,0,"+.08*p+")"),i.addColorStop(.83,"rgba(0,0,0,"+.06*p+")"),i.addColorStop(.89,"rgba(0,0,0,"+.008*p+")"),i.addColorStop(1,"rgba(0,0,0,0)"),m.globalCompositeOperation="destination-out"),m.lineJoin=m.lineCap="round",m.fillStyle=i,m.fillRect(a-u,r-u,2*u,2*u);m.restore()}return!0},a.historyDrawBeauty=function(e,t,a,r){for(var n=0;n<r;n++){var o,i,s,l,c,h,d,u,p,m,f=.5*e.brushPoints[n].size*1.15,g=2*f,v=.5;if("eraser"==e.brushPoints[n].model){f=.5*e.brushPoints[n].size,t.save(),o=e.brushPoints[n].points[0].x,i=e.brushPoints[n].points[0].y,null==a?(c=t.createRadialGradient(o,i,0,o,i,f),c.addColorStop(0,"rgba(0,0,0,1"),c.addColorStop(.99,"rgba(0,0,0,1)"),c.addColorStop(1,"rgba(0,0,0,0)"),t.globalCompositeOperation="destination-out",t.lineJoin=t.lineCap="round",t.fillStyle=c,t.fillRect(o-f,i-f,2*f,2*f)):(s=document.createElement("canvas"),l=s.getContext("2d"),s.width=2*f,s.height=2*f,v=1,l.save(),l.globalCompositeOperation="source-over",l.drawImage(a,o-f,i-f,2*f,2*f,0,0,2*f,2*f),l.restore(),l.save(),l.globalCompositeOperation="destination-out",c=l.createRadialGradient(f,f,0,f,f,f),c.addColorStop(0,"rgba(0,0,0,"+(1-.9*v)+")"),c.addColorStop(.89,"rgba(0,0,0,"+(1-.1*v)+")"),c.addColorStop(1,"rgba(0,0,0,1)"),l.fillStyle=c,l.fillRect(0,0,2*f,2*f),l.restore(),t.globalCompositeOperation="source-over",t.drawImage(s,o-f,i-f,2*f,2*f),s.remove()),t.restore();for(var b=0;b<e.brushPoints[n].points.length-1;b++){h=Fotor.EngineAction.distanceBetween(e.brushPoints[n].points[b],e.brushPoints[n].points[b+1]),d=Math.max(.3*e.brushPoints[n].size,1),u=Math.floor(Math.max(Math.ceil(h)/d,1)),p={x:e.brushPoints[n].points[b+1].x-e.brushPoints[n].points[b].x,y:e.brushPoints[n].points[b+1].y-e.brushPoints[n].points[b].y},m={x:p.x/u,y:p.y/u},t.save();for(var _=0;_<u;_++)o=e.brushPoints[n].points[b].x+m.x*_,i=e.brushPoints[n].points[b].y+m.y*_,null==a?(c=t.createRadialGradient(o,i,0,o,i,f),c.addColorStop(0,"rgba(0,0,0,1"),c.addColorStop(.99,"rgba(0,0,0,1)"),c.addColorStop(1,"rgba(0,0,0,0)"),t.globalCompositeOperation="destination-out",t.lineJoin=t.lineCap="round",t.fillStyle=c,t.fillRect(o-f,i-f,2*f,2*f)):(s=document.createElement("canvas"),l=s.getContext("2d"),s.width=2*f,s.height=2*f,v=1,l.save(),l.globalCompositeOperation="source-over",l.drawImage(a,o-f,i-f,2*f,2*f,0,0,2*f,2*f),l.restore(),l.save(),l.globalCompositeOperation="destination-out",c=l.createRadialGradient(f,f,0,f,f,f),c.addColorStop(0,"rgba(0,0,0,"+(1-.9*v)+")"),c.addColorStop(.89,"rgba(0,0,0,"+(1-.1*v)+")"),c.addColorStop(1,"rgba(0,0,0,1)"),l.fillStyle=c,l.fillRect(0,0,2*f,2*f),l.restore(),t.globalCompositeOperation="source-over",t.drawImage(s,o-f,i-f,2*f,2*f),s.remove());t.restore()}}else if("lucency"==e.brushPoints[n].model){t.save(),o=e.brushPoints[n].points[0].x,i=e.brushPoints[n].points[0].y,c=t.createRadialGradient(o,i,0,o,i,f),null==a?(e.brushPoints[n].isKeepMode?(c.addColorStop(0,"rgba(0,255,132,1)"),c.addColorStop(.99,"rgba(0,255,132,1)"),c.addColorStop(1,"rgba(0,255,132,0)")):(c.addColorStop(0,"rgba(255,0,54,1)"),c.addColorStop(.99,"rgba(255,0,54,1)"),c.addColorStop(1,"rgba(255,0,54,0)")),t.globalCompositeOperation="source-over"):(c.addColorStop(0,"rgba(0,0,0,"+.64*v+")"),c.addColorStop(.2,"rgba(0,0,0,"+.41*v+")"),c.addColorStop(.4,"rgba(0,0,0,"+.24*v+")"),c.addColorStop(.7,"rgba(0,0,0,"+.08*v+")"),c.addColorStop(.83,"rgba(0,0,0,"+.06*v+")"),c.addColorStop(.89,"rgba(0,0,0,"+.008*v+")"),c.addColorStop(1,"rgba(0,0,0,0)"),t.globalCompositeOperation="destination-out"),t.lineJoin=t.lineCap="round",t.fillStyle=c,t.fillRect(o-f,i-f,g,g),t.restore();for(var b=0;b<e.brushPoints[n].points.length-1;b++){h=Fotor.EngineAction.distanceBetween(e.brushPoints[n].points[b],e.brushPoints[n].points[b+1]),d=Math.max(.13*e.brushPoints[n].size,1),u=Math.floor(Math.max(Math.ceil(h)/d,1)),p={x:e.brushPoints[n].points[b+1].x-e.brushPoints[n].points[b].x,y:e.brushPoints[n].points[b+1].y-e.brushPoints[n].points[b].y},m={x:p.x/u,y:p.y/u},t.save();for(var _=0;_<u;_++)o=e.brushPoints[n].points[b].x+m.x*_,i=e.brushPoints[n].points[b].y+m.y*_,c=t.createRadialGradient(o,i,0,o,i,f),null==a?(e.brushPoints[n].isKeepMode?(c.addColorStop(0,"rgba(0,255,132,1)"),c.addColorStop(.99,"rgba(0,255,132,1)"),c.addColorStop(1,"rgba(0,255,132,0)")):(c.addColorStop(0,"rgba(255,0,54,1)"),c.addColorStop(.99,"rgba(255,0,54,1)"),c.addColorStop(1,"rgba(255,0,54,0)")),t.globalCompositeOperation="source-over"):(c.addColorStop(0,"rgba(0,0,0,"+.64*v+")"),c.addColorStop(.2,"rgba(0,0,0,"+.41*v+")"),c.addColorStop(.4,"rgba(0,0,0,"+.24*v+")"),c.addColorStop(.7,"rgba(0,0,0,"+.08*v+")"),c.addColorStop(.83,"rgba(0,0,0,"+.06*v+")"),c.addColorStop(.89,"rgba(0,0,0,"+.008*v+")"),c.addColorStop(1,"rgba(0,0,0,0)"),t.globalCompositeOperation="destination-out"),t.lineJoin=t.lineCap="round",t.fillStyle=c,t.fillRect(o-f,i-f,g,g);t.restore()}}}},a.distanceBetween=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},a.angleBetween=function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)},e.exports=a},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){var a={createNew:function(){var e={};return e._xArray=[],e._yArray=[],e.yArray2=null,e._reverseArray=null,e.add=function(t,a){e._xArray.push(t),e._yArray.push(a),e.yArray2=null,e._reverseArray=null},e.calculateY=function(t){if(0==e._xArray.length)return t;null==e.yArray2&&e.preCalculate();for(var a=0,r=0,n=e._xArray.length-1;n-r>1;)a=n+r>>1,e._xArray[a]>t?n=a:r=a;var o=e._xArray[n]-e._xArray[r],i=(e._xArray[n]-t)/o,s=(t-e._xArray[r])/o;return i*e._yArray[r]+s*e._yArray[n]+((i*i*i-i)*e.yArray2[r]+(s*s*s-s)*e.yArray2[n])*(o*o)/6},e.preCalculate=function(){var t,a,r,n,o,i=e._xArray.length,s=new Array(i);for(e.yArray2=new Array(i),s[0]=0,e.yArray2[0]=0,t=1;t<i-1;)a=e._xArray[t+1]-e._xArray[t-1],r=(e._xArray[t]-e._xArray[t-1])/a,n=r*e.yArray2[t-1]+2,e.yArray2[t]=(r-1)/n,o=(e._yArray[t+1]-e._yArray[t])/(e._xArray[t+1]-e._xArray[t])-(e._yArray[t]-e._yArray[t-1])/(e._xArray[t]-e._xArray[t-1]),s[t]=(6*o/a-r*s[t-1])/n,t++;for(e.yArray2[i-1]=0,t=i-2;t>=0;)e.yArray2[t]=e.yArray2[t]*e.yArray2[t+1]+s[t],t--},e}};e.exports=a},function(e,t,a){(function(t,r,n){var o=a(8),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=(a(53).default,a(5)),l=s({displayName:"WebGLeffectItem",getInitialState:function(){return{beSelected:!1,isDoneEffect:!1,doneEffectImg:null,unFoldFun:null,commondOpacity:100,effectThumbViewResult:0,opacity:0}},componentDidMount:function(){var e=this;this.props&&!e.state.isDoneEffect&&this.props.doEffect&&Fotor.mainCanvas.effectEngine&&(e.state.isDoneEffect=!0,e.state.doneEffectImg=this.props.thumbImg,e.state.unFoldFun=this.props.unFoldFun,null!=this.props.data.defaultBlend&&void 0!=this.props.data.defaultBlend?e.state.commondOpacity=parseInt(this.props.data.defaultBlend):e.state.commondOpacity=100,Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,e.setEffectImg,e.state.commondOpacity,"effect",!0))},handleClick:function(e){this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected?this.cancelHandler():(null!=this.props.data.defaultBlend&&void 0!=this.props.data.defaultBlend?this.state.commondOpacity=parseInt(this.props.data.defaultBlend):this.state.commondOpacity=100,this.refs.intensity.setDefault(this.state.commondOpacity),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,this.state.commondOpacity,"effect"),Fotor.progressBar.show(!0),this.props.vip&&Fotor.vipResManager.setEditorWaterMark());var t=!this.state.beSelected;this.setState({beSelected:t}),Fotor.mainCanvas.trigger(i.default.ENGINELAYER_CHANGE);var a=this;setTimeout(function(){t?a.scrollerFix():a.scrollerUpFix()},300)},handleIntensityValueChange:function(e){this.state.commondOpacity=this.refs.intensity.val(),this.refs.IntensitySpan&&t(this.refs.IntensitySpan).html(this.state.commondOpacity),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,this.state.commondOpacity,"effect")},handleIntensityValueChanged:function(e){this.handleIntensityValueChange(e)},setEffectImg:function(e){var t=this;this.state.effectThumbViewResult&&(Fotor.mainCanvas.effectEngine.destroy_view(this.state.effectThumbViewResult),this.state.effectThumbViewResult=0),this.state.effectThumbViewResult=e;var a=Fotor.mainCanvas.effectEngine.get_view_texture(this.state.effectThumbViewResult);if(EW.check_CRM(a)){var r=Fotor.mainCanvas.effectEngine.texture_to_image(Fotor.mainCanvas.doEffectCanvas,a);t.setState({isDoneEffect:!0,doneEffectImg:r})}},componentWillReceiveProps:function(e){var t=this;e&&!t.state.isDoneEffect&&e.doEffect&&Fotor.mainCanvas.effectEngine&&(t.state.isDoneEffect=!0,t.state.doneEffectImg=e.thumbImg,t.state.unFoldFun=e.unFoldFun,null!=e.data.defaultBlend&&void 0!=e.data.defaultBlend?t.state.commondOpacity=parseInt(e.data.defaultBlend):t.state.commondOpacity=100,Fotor.mainCanvas.effectEngine.process_commond(e.data.commond,t.setEffectImg,t.state.commondOpacity,"effect",!0))},updataThumbImage:function(){var e=100;null!=this.props.data.defaultBlend&&void 0!=this.props.data.defaultBlend&&(e=parseInt(this.props.data.defaultBlend)),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,this.setEffectImg,e,"effect",!0)},comondCallBack:function(e){Fotor.mainCanvas.trigger(i.default.ENGINELAYER_CHANGE),Fotor.progressBar.hide()},applyHandler:function(e){var t=this;this.props.vip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(t.afterApplyHandler)},afterApplyHandler:function(){this.state.unFoldFun("toBig"),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,this.applyThumbHandler,this.state.commondOpacity,"effect",!0)},applyThumbHandler:function(e){var t=this;this.state.effectThumbViewResult&&(Fotor.mainCanvas.effectEngine.destroy_view(this.state.effectThumbViewResult),this.state.effectThumbViewResult=0),this.state.effectThumbViewResult=e;var a=Fotor.mainCanvas.effectEngine.get_view_texture(this.state.effectThumbViewResult);if(!EW.check_CRM(a))return void console.log("缩略图effect效果处理失败");var n=Fotor.mainCanvas.effectEngine.texture_to_image(Fotor.mainCanvas.doEffectCanvas,a);Fotor.mainCanvas.effectThumb=n,r(n,function(e){Fotor.mainCanvas.effectEngine.set_image(e,e.width,e.height,Fotor.mainCanvas.engineFluentSize,null,!0),t.state.unFoldFun("updataThumb"),t.setState({effectThumbViewResult:0,beSelected:!1})})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.setState({effectThumbViewResult:0,beSelected:!1}),this.props.vip&&Fotor.vipResManager.resetWaterMark()},render:function(){var e=this;return null==e.state.doneEffectImg&&null!=e.props.thumbImg&&(e.state.doneEffectImg=e.props.thumbImg),n.createElement("div",{ref:"item",className:"effect-item effect-item-90 "+(e.state.beSelected?"active":"")},e.props.data.isVip?n.createElement("span",{className:"vip"}):"",n.createElement(Fotor.ui.Favorite,{type:"effect",inner:e.props.inner,thumb:e.state.doneEffectImg,data:this.props.data,groupId:e.props.effectGroupId}),n.createElement("div",{"data-display":e.props.doEffect},n.createElement("div",{className:"effect-item-img  clearfix",onClick:e.handleClick},n.createElement("div",{className:"effect-item-title"},Fotor.globalConfig.lang[this.props.data.name]?Fotor.globalConfig.lang[this.props.data.name].toUpperCase():"NO KEY: "+this.props.data.name),n.createElement("img",{ref:"itemImg",src:e.state.doneEffectImg,onLoad:this.onImageLoad,style:{opacity:this.state.opacity}})),n.createElement("div",{className:"effect-item-inner clearfix"},n.createElement("div",{className:"clearfix"},n.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Intensity,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"IntensitySpan"},"100"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"intensity",max:"100",min:"0",default:"100",className:"input-range-grey",bindEle:e.refs.IntensitySpan,onChange:e.handleIntensityValueChange,onChanged:e.handleIntensityValueChanged})),n.createElement("div",{className:"clearfix effect-item-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:e.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:e.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},imageInterval:0,onImageLoad:function(){var e=this;t(this.refs.itemImg).stop().animate({opacity:1},300,function(){e.state.opacity=1})},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),r=t(this.refs.item).offset(),n=t(".toolbar-list").height(),o=t(".toolbar-list").offset(),i=-e.state.topPosition,s=a;if(r.top<80){var l=r.top-o.top-i;return void e.scrollYTo(l)}if(r.top+s>n+o.top){var l=r.top-o.top-i;s<n&&(l-=n-s),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),r=e.state.topPosition,n=a.realHeight-a.containerHeight;r>n?t(e.content).stop().animate({"margin-top":-n},300,function(){e.handleWindowResize()}):e.handleWindowResize()}});e.exports=l}).call(t,a(1),a(23),a(0))},function(e,t,a){e.exports=a.p+"images/en_USfa88a861167af42f27c665da77321644.png"},function(e,t,a){(function(t,r){var n=a(8),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=(a(53).default,a(5)),s=i({displayName:"GeneralBorderItem",getInitialState:function(){return{thumbSrc:"",beSelected:!1,unFoldFun:null}},componentDidMount:function(){var e=this;this.props&&this.props.doEffect&&(e.state.unFoldFun=this.props.unFoldFun)},handleClick:function(e,t){this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected?this.cancelHandler():(Fotor.progressBar.show(!0),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,100,"border"),this.props.vip&&Fotor.vipResManager.setEditorWaterMark());var a=!this.state.beSelected;this.setState({beSelected:a});var r=this;setTimeout(function(){a?r.scrollerFix():r.scrollerUpFix()},300)},comondCallBack:function(){Fotor.progressBar.hide(),Fotor.mainCanvas.trigger(o.default.ENGINELAYER_CHANGE)},componentWillReceiveProps:function(e){var t=this;e&&""==this.state.thumbSrc&&(a.e(5).then(function(){t.state.thumbSrc=a(973)("./"+e.data.thumb+".png"),t.setState({})}.bind(null,a)).catch(a.oe),this.setState({unFoldFun:e.unFoldFun}))},applyHandler:function(e){var t=this;this.props.vip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(t.state.unFoldFun),this.setState({beSelected:!1})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.setState({beSelected:!1}),Fotor.vipResManager.resetWaterMark()},render:function(){var e=this;return t.createElement("div",{ref:"item",className:"effect-item "+(e.state.beSelected?"active active-166":"")},e.props.data.isVip?t.createElement("span",{className:"vip"}):"",t.createElement("div",{className:"effect-item-img border clearfix"},t.createElement(Fotor.ui.Favorite,{type:"border",thumb:this.state.thumbSrc,inner:this.props.inner,data:this.props.data,groupId:e.props.borderGroupId}),t.createElement("div",{"data-display":e.props.doBorder},t.createElement("img",{ref:"itemImg",onClick:e.handleClick,src:this.state.thumbSrc}))),t.createElement("div",{className:"effect-item-inner clearfix"},t.createElement("div",{className:"clearfix effect-item-btns marginT0"},t.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:e.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),t.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:e.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var t=r(this.refs.item).height(),a=r(this.refs.item).offset(),n=r(".toolbar-list").height(),o=r(".toolbar-list").offset(),i=-e.state.topPosition,s=t;if(a.top<80){var l=a.top-o.top-i;return void e.scrollYTo(l)}if(a.top+s>n+o.top){var l=a.top-o.top-i;s<n&&(l-=n-s),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,t=e.computeSizes(),a=e.state.topPosition,n=t.realHeight-t.containerHeight;a>n?r(e.content).stop().animate({"margin-top":-n},300,function(){e.handleWindowResize()}):e.handleWindowResize()}});e.exports=s}).call(t,a(0),a(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i,s=a(1040),l=n(s),c=a(1041),h=n(c),d=a(1046),u=n(d),p=a(1047),m=n(p),f=a(1048),g=n(f),v=a(1049),b=n(v),_=a(1055),y=n(_),x=a(1056),C=n(x),w=a(1057),A=n(w),E=a(1061),F=n(E),k=a(6),M=n(k),S=a(8),T=n(S),D=a(13),R=n(D),I=a(779),N=n(I);a(1062);var P=a(20).default,B=a(5),z=B((i={displayName:"BasicList",mixins:[Fotor.mixin],isMount:!1,getInitialState:function(){return{scroller:null,langChange:!1}},componentDidMount:function(){this.isMount=!0,this.removeLoading(),this.setState({scrollArea:this.refs.scrollArea}),Fotor.mainCanvas?this.init():Fotor.app.on(M.default.APP_INIT,this.init)},init:function(){Fotor.mainCanvas.on(T.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.on(T.default.EXIT_EDITOR_MODE,this.update),Fotor.app.on(R.default.LANGUAGE_CHANGE,this.updateLang),this.updateLang()},componentWillUnmount:function(){this.isMount=!1,Fotor.mainCanvas.off(T.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.off(T.default.EXIT_EDITOR_MODE,this.update),Fotor.app.off(R.default.LANGUAGE_CHANGE,this.updateLang)},updateLang:function(){var e=this;this.isMount&&(this.setState({langChange:!0}),setTimeout(function(){e.isMount&&e.setState({langChange:!1})},500))},update:function(){this.isMount&&this.forceUpdate()}},o(i,"componentWillUnmount",function(){Fotor.app.off(M.default.APP_INIT,this.init),Fotor.mainCanvas.off(T.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.off(T.default.EXIT_EDITOR_MODE,this.update),Fotor.app.off(R.default.LANGUAGE_CHANGE,this.updateLang)}),o(i,"handleScroll",function(e){e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200)}),o(i,"render",function(){return r.createElement("div",{id:"toolbar"},r.createElement("div",{className:"toolbar-cover",style:{display:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode?"none":"block"}}),r.createElement("div",{className:"toolbar-loading"},r.createElement("div",{className:"loading-round"},r.createElement("div",null),r.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),r.createElement(N.default,{ref:"helpTip"}),r.createElement("div",{className:"toolbar"},r.createElement("div",{className:"toolbar-list"},r.createElement(P,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},r.createElement(l.default,{toolName:"onetapenhance",scroller:this.state.scrollArea}),r.createElement(h.default,{toolName:"magicwand",scroller:this.state.scrollArea,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip,langChange:this.state.langChange}),r.createElement(b.default,{toolName:"crop",scroller:this.state.scrollArea}),r.createElement(C.default,{toolName:"rotate",scroller:this.state.scrollArea}),r.createElement(u.default,{toolName:"brightness",scroller:this.state.scrollArea}),r.createElement(m.default,{toolName:"fineTune",scroller:this.state.scrollArea}),r.createElement(g.default,{toolName:"color",scroller:this.state.scrollArea}),r.createElement(F.default,{toolName:"vignette",scroller:this.state.scrollArea}),r.createElement(A.default,{toolName:"curves",scroller:this.state.scrollArea}),r.createElement(y.default,{toolName:"resize",scroller:this.state.scrollArea}),!Fotor.plusEditorMode&&!Fotor.frameMode&&r.createElement("a",{className:"basic-hdr basic-hdr_"+FotorUtils.I18N.getLocale(),href:"https://www.fotor.com/app.html#/hdr",target:"_blank"}),r.createElement("div",{style:{height:"50px"}}," ")))))}),o(i,"showHelpTip",function(e,t,a,r){this.refs.helpTip&&this.refs.helpTip.show(e,t,a,r)}),o(i,"hideHelpTip",function(){this.refs.helpTip&&this.refs.helpTip.hide()}),i));e.exports=z}).call(t,a(1),a(0))},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=a(84),h=function(t){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.recordOneKeyBeauty=t.recordOneKeyBeauty.bind(t),t.onHistoryUpdataLoad=t.onHistoryUpdataLoad.bind(t),t.doOneKeyBeauty=t.doOneKeyBeauty.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="onetapenhance-1",t}return o(a,t),i(a,[{key:"showThisSample",value:function(){this.handleClick()}},{key:"applyHandler",value:function(){Fotor.mainCanvas&&Fotor.mainCanvas.trigger("BASIC_APPLY_COMPLETE")}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix marginT5"},e.createElement(Fotor.ui.Button,{ref:"beautyButton",enable:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode,text:Fotor.globalConfig.lang.editor_workspace_basic_onekeybeauty,onClick:this.handleClick.bind(this)}))}},{key:"handleClick",value:function(e){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"editorModePopup",this).call(this)&&(Fotor.hadOneKeyBeautyClick||(Fotor.hadOneKeyBeautyClick=!0,this.refs.beautyButton.used(),Fotor.progressBar.show(!0),null!=Fotor.currentTool&&Fotor.currentTool.isUnfold?Fotor.globalEventDispatcher.trigger(c.default.FOLDALL,this):this.doOneKeyBeauty()))}},{key:"doOneKeyBeauty",value:function(){Fotor.historyManager.hadAddedOnekeyBeauty=!0,Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.onekeybeauty(),!0),Fotor.mainCanvas.applyEditorPic(this.recordOneKeyBeauty),Fotor.progressBar.hide()}},{key:"recordOneKeyBeauty",value:function(){Fotor.historyManager.on("historyUpdate",this.onHistoryUpdataLoad)}},{key:"componentDidMount",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentDidMount",this).call(this),this.onHistoryUpdataLoad(),Fotor.hadOneKeyBeautyClick&&Fotor.historyManager.on("historyUpdate",this.onHistoryUpdataLoad)}},{key:"componentWillUnmount",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"componentWillUnmount",this).call(this),Fotor.historyManager.off("historyUpdate",this.onHistoryUpdataLoad)}},{key:"onHistoryUpdataLoad",value:function(e){var t=Fotor.historyManager.readStep(Fotor.historyManager.currentStep);t&&t.hadOnekeyBeauty?(Fotor.historyManager.hadAddedOnekeyBeauty=!0,Fotor.hadOneKeyBeautyClick=!0,this.refs.beautyButton.used()):(Fotor.historyManager.hadAddedOnekeyBeauty=!1,Fotor.hadOneKeyBeautyClick=!1,this.refs.beautyButton.unused())}}]),a}(l.default);t.default=h}).call(t,a(0))},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0}),a(1042);var c=a(82),h=a(8),d=function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.isKeepMode=!0,t.canvas_isDrawing=!1,t.isMoving=!1,t.isEraserMode=!1,t.brushPoints=[],t.isPreview=!1,t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="basic",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){Fotor.progressBar.hide(),this.brushPoints=[],this.hadchanged=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.beautyCanvasEle.css("opacity","1"),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),setTimeout(function(){Fotor.mainCanvas.fotorEngine.clean()},200),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=1;Fotor.mainCanvas.canvas.documentWidth<70||Fotor.mainCanvas.canvas.documentHeight<70?t=.5:Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,.5)),this.brush_Size=15*t,e.refs.brushSize.setDefault(15),e.refs.featheringEle.setDefault(0),this.refs.cropCheckbox.setSelect(!1),this.isKeepMode=!0,this.refreshBtnUI(),this.brushPoints=[],this.hadchanged=!1,e.isEraserMode=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(!1,!1),Fotor.mainCanvas.beautyCanvasEle.css("opacity","0.6"),Fotor.mainCanvas.fotorEngine.process_matting(!0),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(e){if(e=null!=e&&e,this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,e)){var t=1;t=this.isEraserMode?3:this.isKeepMode?1:2,Fotor.mainCanvas.fotorEngine.process_matting_painter(t,[this.last_Point,this.canvas_Point],this.brush_Size,!1),null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point}}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",a.isKeepMode=this.isKeepMode,this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(!0),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(!1),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),this.isEraserMode?t.strokeStyle="#ffffff":this.isKeepMode?(t.strokeStyle="rgba(0,255,132,1)",t.fillStyle="rgba(0,255,132,1)"):(t.strokeStyle="rgba(255,0,54,1)",t.fillStyle="rgba(255,0,54,1)"),t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),this.isEraserMode||t.fill(),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.8)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(!1),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.fotorEngine.process_matting(!1,null,!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth<70||Fotor.mainCanvas.canvas.documentHeight<70?t=.5:Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,.5)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleFeatheringValueChange",value:function(e){Fotor.mainCanvas.beautyCanvasEle.css("opacity","0"),Fotor.mainCanvas.fotorEngine.process_matting(!1,this.refs.featheringEle.val(),!1)}},{key:"handleFeatheringValueChanged",value:function(e){Fotor.mainCanvas.beautyCanvasEle.css("opacity","0.6"),Fotor.mainCanvas.fotorEngine.process_matting(!1,null,!1)}},{key:"handleCheckboxClick",value:function(e){Fotor.mainCanvas.fotorEngine.set_matting_crop(this.refs.cropCheckbox.isSelected())}},{key:"handleStartPreview",value:function(e){this.isPreview=!0,Fotor.mainCanvas.beautyCanvasEle.css("opacity","0"),Fotor.mainCanvas.fotorEngine.process_matting(!1,this.refs.featheringEle.val(),this.refs.cropCheckbox.isSelected())}},{key:"handleStopPreview",value:function(e){this.isPreview&&(Fotor.mainCanvas.beautyCanvasEle.css("opacity","0.6"),Fotor.mainCanvas.fotorEngine.process_matting(!1,null,!1))}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");if(r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),Fotor.mainCanvas.fotorEngine.clean_matting_painter(),t)this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.process_rule());else if(a>0){this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,null,a);for(var n=0;n<a;n++)"eraser"==e.brushPoints[n].model?Fotor.mainCanvas.fotorEngine.process_matting_painter(3,e.brushPoints[n].points,e.brushPoints[n].size,!1):"lucency"==e.brushPoints[n].model&&(e.brushPoints[n].isKeepMode?Fotor.mainCanvas.fotorEngine.process_matting_painter(1,e.brushPoints[n].points,e.brushPoints[n].size,!1):Fotor.mainCanvas.fotorEngine.process_matting_painter(2,e.brushPoints[n].points,e.brushPoints[n].size,!1)),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.fotorEngine.process_matting(!1,null,!1)}}},{key:"handleKeepLine",value:function(){this.isKeepMode=!0,this.refreshBtnUI(),this.isEraserMode&&(this.isEraserMode=!1,this.refs.erase.setDisactive()),this.forceUpdate(),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRemoveLine",value:function(){this.isKeepMode=!1,this.refreshBtnUI(),this.isEraserMode&&(this.isEraserMode=!1,this.refs.erase.setDisactive()),this.forceUpdate(),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"refreshBtnUI",value:function(){this.isKeepMode?(e(this.refs.keepLine).hasClass("active")||e(this.refs.keepLine).addClass("active"),e(this.refs.removeLine).hasClass("active")&&e(this.refs.removeLine).removeClass("active")):(e(this.refs.keepLine).hasClass("active")&&e(this.refs.keepLine).removeClass("active"),e(this.refs.removeLine).hasClass("active")||e(this.refs.removeLine).addClass("active"))}},{key:"applyHandler",value:function(){Fotor.progressBar.show(!0);var e=this;Fotor.mainCanvas.saveExportFormat=Fotor.mainCanvas.editorExportFormat="png",e.doApplyHandler()}},{key:"doApplyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold),Fotor.mainCanvas.resetCanvasSize(Fotor.mainCanvas.fotorEngine.get_canvas().width,Fotor.mainCanvas.fotorEngine.get_canvas().height),FotorAnalytic.pageView("/editor/basic/magicWandTool",Fotor.routerManager.getToolPath())}else this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix marginT10"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:"title-drop-no-margin-top",autoActive:!1,isEditor:!0,vip:!0,toolName:"magicwand",text:Fotor.globalConfig.lang.editor_workspace_basic_magicwand.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_basic_magicwand_tip,helpTipGif:a(1045),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clearfix"},r.createElement("div",null,Fotor.globalConfig.lang.editor_workspace_basic_magicwand_label),r.createElement("div",{className:"marginT10 magicWandButton active",ref:"keepLine",onClick:this.handleKeepLine.bind(this)},r.createElement("span",{className:"magic-wend-retain pull-right"}),r.createElement("div",{className:"text"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_btn_keep)),r.createElement("div",{className:"magicWandButton",ref:"removeLine",onClick:this.handleRemoveLine.bind(this)},r.createElement("span",{className:"magic-wend-remove pull-right"}),r.createElement("div",{className:"text"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_btn_remove))),r.createElement("div",{className:"clearfix paddingT30"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_basic_magicwand_brushsize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"60",min:"1",default:"10",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT20 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_feathering,r.createElement("span",{className:"pull-right",ref:"featheringSpanEle"},"0")),r.createElement(Fotor.ui.InputRange,{ref:"featheringEle",max:"100",min:"0",default:"0",bindEle:this.refs.featheringSpanEle,className:"input-range-grey",onChange:this.handleFeatheringValueChange.bind(this),onChanged:this.handleFeatheringValueChanged.bind(this)}),r.createElement("div",{className:"marginT20"},r.createElement(Fotor.ui.Checkbox,{text:Fotor.globalConfig.lang.editor_workspace_basic_magicwand_crop_smallest_area,ref:"cropCheckbox",isRu:!0,onClick:this.handleCheckboxClick.bind(this)})),r.createElement("div",{className:"marginT20"},r.createElement("div",{className:"magicWandButton",ref:"previewBtn",onMouseDown:this.handleStartPreview.bind(this),onMouseUp:this.handleStopPreview.bind(this),onMouseOut:this.handleStopPreview.bind(this)},r.createElement("span",{className:"magic-wend-preview pull-right"}),r.createElement("div",{className:"text"},Fotor.globalConfig.lang.editor_workspace_basic_magicwand_btn_preview))),r.createElement("div",{className:"clearfix editor-folder-btns paddingT15"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default);t.default=d}).call(t,a(1),a(0))},function(e,t,a){var r=a(1043);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,'/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n.magicWandButton {\n  position: relative;\n  padding: 10px 20px 10px 20px;\n  font-family: "noto_sansregular", "Microsoft YaHei", sans-serif;\n  font-size: 12px;\n  line-height: 22px;\n  color: #787878;\n  background: transparent;\n  overflow: hidden;\n  cursor: pointer;\n  box-shadow: 0 0 0 1px #d5d5d5 inset;\n  -webkit-box-shadow: 0 0 0 1px #d5d5d5 inset;\n  -moz-box-shadow: 0 0 0 1px #d5d5d5 inset; }\n  .magicWandButton:hover {\n    color: #ac975e;\n    background-color: transparent;\n    box-shadow: 0 0 0 1px #ac975e inset;\n    -webkit-box-shadow: 0 0 0 1px #ac975e inset;\n    -moz-box-shadow: 0 0 0 1px #ac975e inset; }\n    .magicWandButton:hover span.magic-wend-retain {\n      background-position: -414px -40px; }\n    .magicWandButton:hover span.magic-wend-remove {\n      background-position: -448px -40px; }\n  .magicWandButton:active {\n    color: #ffffff;\n    background-color: transparent;\n    box-shadow: 0 0 0 1px #ac975e inset;\n    -webkit-box-shadow: 0 0 0 1px #ac975e inset;\n    -moz-box-shadow: 0 0 0 1px #ac975e inset; }\n    .magicWandButton:active span.magic-wend-retain {\n      background-position: -414px -74px; }\n    .magicWandButton:active span.magic-wend-remove {\n      background-position: -448px -74px; }\n  .magicWandButton.active {\n    cursor: not-allowed;\n    color: #ffffff;\n    background-color: #ac975e;\n    box-shadow: 0 0 0 1px #ac975e inset;\n    -webkit-box-shadow: 0 0 0 1px #ac975e inset;\n    -moz-box-shadow: 0 0 0 1px #ac975e inset; }\n    .magicWandButton.active span.magic-wend-retain {\n      background-position: -414px -74px; }\n    .magicWandButton.active span.magic-wend-remove {\n      background-position: -448px -74px; }\n  .magicWandButton span {\n    width: 22px;\n    height: 22px;\n    display: inline-block;\n    background: url('+r(a(1044))+") 0 0 no-repeat;\n    cursor: not-allowed; }\n    .magicWandButton span.magic-wend-retain {\n      background-position: -414px -6px; }\n    .magicWandButton span.magic-wend-remove {\n      background-position: -448px -6px; }\n    .magicWandButton span.magic-wend-preview {\n      background-position: -482px -6px; }\n  .magicWandButton .text {\n    position: relative;\n    width: 100%; }\n",""])},function(e,t,a){e.exports=a.p+"images/icon_34x34b60f8161d158340ba87a5f3ba7154a45.png"},function(e,t,a){e.exports=a.p+"images/magic-wand6c0f310a6e6ac6451d192e28eed1498a.gif"},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=a(161),h=function(t){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.brightness=0,t.contrast=1,t.saturation=1,t.sharpness=0,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return o(a,t),i(a,[{key:"showThisSample",value:function(){this.refs.toolTitle.activate(),this.unfold(),Fotor.routerManager.sampleToolName=void 0,Fotor.routerManager.sampleChildModuleName=void 0}},{key:"handleBrightnessValueChange",value:function(e,t){this.hadchanged=!0,this.brightness=this.refs.brightnessEle.val(),e&&this.updataProcess()}},{key:"handleContrastValueChange",value:function(e,t){this.hadchanged=!0,this.contrast=1+.01*this.refs.contrastEle.val()*.5,e&&this.updataProcess()}},{key:"handleSaturationValueChange",value:function(e,t){this.hadchanged=!0,this.saturation=this.refs.saturationEle.val(),this.saturation<0?this.saturation=this.saturation/100+1:this.saturation>=0&&(this.saturation=this.saturation/50+1),e&&this.updataProcess()}},{key:"handleSharpnessValueChange",value:function(e,t){this.hadchanged=!0,this.sharpness=this.refs.sharpnessEle.val(),e&&this.updataProcess()}},{key:"handleBrightnessValueChanged",value:function(e,t){this.handleBrightnessValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleContrastValueChanged",value:function(e,t){this.handleContrastValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleSaturationValueChanged",value:function(e,t){this.handleSaturationValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleSharpnessValueChanged",value:function(e,t){this.handleSharpnessValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=Fotor.EngineAction.brightness(this.brightness)+Fotor.EngineAction.contrast(this.contrast)+Fotor.EngineAction.saturation(this.saturation)+Fotor.EngineAction.sharpness(this.sharpness);Fotor.mainCanvas.fotorEngine.process_rule(e)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brightness=0,e.contrast=0,e.saturation=0,e.sharpness=0,e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brightness=parseInt(this.refs.brightnessEle.val()),e.contrast=parseInt(this.refs.contrastEle.val()),e.saturation=parseInt(this.refs.saturationEle.val()),e.sharpness=parseInt(this.refs.sharpnessEle.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.brightnessEle.setDefault(e.brightness),this.refs.contrastEle.setDefault(e.contrast),this.refs.saturationEle.setDefault(e.saturation),this.refs.sharpnessEle.setDefault(e.sharpness),this.brightness=this.refs.brightnessEle.val(),this.contrast=1+.01*this.refs.contrastEle.val()*.5,this.saturation=this.refs.saturationEle.val(),this.saturation<0?this.saturation=this.saturation/100+1:this.saturation>=0&&(this.saturation=this.saturation/50+1),this.sharpness=this.refs.sharpnessEle.val()}},{key:"initUnfoldUI",value:function(){this.refs.brightnessEle.setDefault(0),this.refs.contrastEle.setDefault(0),this.refs.saturationEle.setDefault(0),this.refs.sharpnessEle.setDefault(0),this.brightness=0,this.contrast=1,this.saturation=1,this.sharpness=0,this.forceUpdate()}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"afterfold",value:function(){this.hadchanged&&Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1,s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_basic,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_basicBrightness,e.createElement("span",{className:"pull-right",ref:"brightnessSpanEle"},"0")),e.createElement(c,{ref:"brightnessEle",max:"100",min:"-100",default:"0",bindEle:this.refs.brightnessSpanEle,className:"input-range-grey",onChange:this.handleBrightnessValueChange.bind(this),onChanged:this.handleBrightnessValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_basicContrast,e.createElement("span",{className:"pull-right",ref:"contrastSpanEle"},"0")),e.createElement(c,{ref:"contrastEle",max:"100",min:"-100",default:"0",bindEle:this.refs.contrastSpanEle,className:"input-range-grey",onChange:this.handleContrastValueChange.bind(this),onChanged:this.handleContrastValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_basicSaturation,e.createElement("span",{className:"pull-right",ref:"saturationSpanEle"},"0")),e.createElement(c,{ref:"saturationEle",max:"100",min:"-100",default:"0",bindEle:this.refs.saturationSpanEle,className:"input-range-grey",onChange:this.handleSaturationValueChange.bind(this),onChanged:this.handleSaturationValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_basicSharpness,e.createElement("span",{className:"pull-right",ref:"sharpnessSpanEle"},"0")),e.createElement(c,{ref:"sharpnessEle",max:"150",min:"-150",default:"0",bindEle:this.refs.sharpnessSpanEle,className:"input-range-grey",onChange:this.handleSharpnessValueChange.bind(this),onChanged:this.handleSharpnessValueChanged.bind(this)}))))}}]),a}(l.default);t.default=h}).call(t,a(0))},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),function(t){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.exposure=0,t.hightlights_value=0,t.shodows_value=0,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return o(a,t),i(a,[{key:"handleExposureValueChange",value:function(e,t){this.hadchanged=!0,this.exposure=.01*this.refs.exposure.val(),e&&this.updataProcess()}},{key:"handleHightlightsValueChange",value:function(e,t){this.hadchanged=!0,this.refs.hightlights.val()<0?this.hightlights_value=.01*-this.refs.hightlights.val():this.hightlights_value=.0066*-this.refs.hightlights.val(),e&&this.updataProcess()}},{key:"handleShodowsValueChange",value:function(e,t){this.hadchanged=!0,this.shodows_value=.01*this.refs.shodows.val(),e&&this.updataProcess()}},{key:"handleExposureValueChanged",value:function(e,t){this.handleExposureValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleHightlightsValueChanged",value:function(e,t){this.handleHightlightsValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleShodowsValueChanged",value:function(e,t){this.handleShodowsValueChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=Fotor.EngineAction.exposure(this.exposure)+Fotor.EngineAction.hightlightsShodows(this.shodows_value,this.hightlights_value);Fotor.mainCanvas.fotorEngine.process_rule(e)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.exposure=0,e.hightlights=0,e.shodows=0,e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.exposure=parseInt(this.refs.exposure.val()),e.hightlights=parseInt(this.refs.hightlights.val()),e.shodows=parseInt(this.refs.shodows.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.exposure.setDefault(e.exposure),this.refs.hightlights.setDefault(e.hightlights),this.refs.shodows.setDefault(e.shodows),this.exposure=.01*this.refs.exposure.val(),this.refs.hightlights.val()<0?this.hightlights_value=.01*-this.refs.hightlights.val():this.hightlights_value=.0066*-this.refs.hightlights.val(),this.shodows_value=.01*this.refs.shodows.val()}},{key:"initUnfoldUI",value:function(){this.refs.exposure.setDefault(0),this.refs.hightlights.setDefault(0),this.refs.shodows.setDefault(0),this.setState({})}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterfold",value:function(){this.hadchanged&&Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1,s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_finetune,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"marginT5 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_finetuneExposure,e.createElement("span",{className:"pull-right",ref:"ExposureSpan"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"exposure",max:"100",min:"-100",default:"0",bindEle:this.refs.ExposureSpan,className:"input-range-grey",onChange:this.handleExposureValueChange.bind(this),onChanged:this.handleExposureValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_finetuneHightlights,e.createElement("span",{className:"pull-right",ref:"HightlightsSpan"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"hightlights",max:"100",min:"-100",default:"0",bindEle:this.refs.HightlightsSpan,className:"input-range-grey",onChange:this.handleHightlightsValueChange.bind(this),onChanged:this.handleHightlightsValueChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_finetuneShadows,e.createElement("span",{className:"pull-right",ref:"ShodowsSpan"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"shodows",max:"100",min:"-100",default:"0",bindEle:this.refs.ShodowsSpan,className:"input-range-grey",onChange:this.handleShodowsValueChange.bind(this),onChanged:this.handleShodowsValueChanged.bind(this)}))))}}]),a}(l.default));t.default=c}).call(t,a(0))},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),function(t){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.temperature_value=0,t.tint_value=0,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return o(a,t),i(a,[{key:"handleTemperatureChange",value:function(e){this.hadchanged=!0,this.temperature_value=this.refs.temperature.val(),e&&this.updataProcess()}},{key:"handleTintChange",value:function(e){this.hadchanged=!0,this.tint_value=this.refs.tint.val(),e&&this.updataProcess()}},{key:"handleTemperatureChanged",value:function(){this.handleTemperatureChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleTintChanged",value:function(){this.handleTintChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=Fotor.EngineAction.temperature(this.temperature_value)+Fotor.EngineAction.tint(this.tint_value);Fotor.mainCanvas.fotorEngine.process_rule(e)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.temperature=0,e.tint=0,e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.temperature=parseInt(this.refs.temperature.val()),e.tint=parseInt(this.refs.tint.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.temperature.setDefault(e.temperature),this.refs.tint.setDefault(e.tint),this.temperature_value=this.refs.temperature.val(),this.tint_value=this.refs.tint.val()}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterfold",value:function(){this.hadchanged&&(Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1),s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"initUnfoldUI",value:function(){this.refs.temperature.setDefault(0),this.refs.tint.setDefault(0),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_color,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"marginT5 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_colorTemperature,e.createElement("span",{ref:"temperatureSpan",className:"pull-right"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"temperature",type:"range",max:"100",min:"-100",default:"0",bindEle:this.refs.temperatureSpan,className:"input-range-grey",onChange:this.handleTemperatureChange.bind(this),onChanged:this.handleTemperatureChanged.bind(this)}),e.createElement("div",{className:"paddingT10 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_colorTint,e.createElement("span",{ref:"tintSpan",className:"pull-right"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"tint",type:"range",max:"50",min:"-50",default:"0",bindEle:this.refs.tintSpan,className:"input-range-grey",onChange:this.handleTintChange.bind(this),onChanged:this.handleTintChanged.bind(this)}))))}}]),a}(l.default));t.default=c}).call(t,a(0))},function(e,t,a){"use strict";(function(e,r,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0}),a(1050);var h=a(82),d=a(8),u=(a(161),function(t){function a(e){o(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.controlDiv=null,t.cropMoveDiv=null,t.cropMT=null,t.cropBT=null,t.cropLM=null,t.cropRM=null,t.cropTL=null,t.cropBL=null,t.cropLL=null,t.cropRL=null,t.cropX=0,t.cropY=0,t.cropWidth=0,t.cropHeight=0,t.circleBarRadius=4.5,t.event_state={},t.docropX=0,t.docropY=0,t.docropWidth=0,t.docropHeight=0,t.centerMoveX=0,t.centerMoveY=0,t.animationStep=0,t.animationDone=8,t.keepProportions=!1,t.keepRatio=1,t.presetSelect=[{key:"Freeform",val:"Freeform"},{key:0,val:"Sample as original"},{key:1,val:"Square"},{key:1/.618,val:"Golden Radio"},{key:.666667,val:"2 x 3 (iPhone)"},{key:.6,val:"3 x 5"},{key:4/3,val:"4 x 3"},{key:4/6,val:"4 x 6 Postcard"},{key:5/7,val:"5 x 7"},{key:.8,val:"8 x 10"},{key:16/9,val:"16 x 9"},{key:851/315,val:"Facebook Cover Photo"},{key:640/1136,val:"640 x 1136 iPhone 5"},{key:1082/1920,val:"1080 x 1920 iPhone 6 plus"},{key:window.screen.height/window.screen.width,val:"Your Screen"}],t.onContentChange=t.onContentChange.bind(t),t.redrawControlLayer=t.redrawControlLayer.bind(t),t.saveEventState=t.saveEventState.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.doCrop=t.doCrop.bind(t),t.resizeControlDown=t.resizeControlDown.bind(t),t.moving=t.moving.bind(t),t.reSizeing=t.reSizeing.bind(t),t.endChangeing=t.endChangeing.bind(t),t.handlerApply=t.handlerApply.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return s(a,t),l(a,[{key:"isChanged",value:function(){return console.log(this.defaultCropX(),this.defaultCropY(),this.defaultCropWidth(),this.defaultCropHeight()),console.log(this.cropX,this.cropY,this.cropWidth,this.cropHeight),this.cropX!=this.defaultCropX()||this.cropY!=this.defaultCropY()||this.cropWidth!=this.defaultCropWidth()||this.cropHeight!=this.defaultCropHeight()}},{key:"defaultCropWidth",value:function(){return Fotor.mainCanvas.canvas.documentWidth}},{key:"defaultCropHeight",value:function(){return Fotor.mainCanvas.canvas.documentHeight}},{key:"defaultCropX",value:function(){return 0}},{key:"defaultCropY",value:function(){return 0}},{key:"afterCropToolUnfold",value:function(){Fotor.mainCanvas.on(d.default.CONTENT_CHANGE,this.onContentChange)}},{key:"afterCropToolFold",value:function(){Fotor.mainCanvas.off(d.default.CONTENT_CHANGE,this.onContentChange)}},{key:"onContentChange",value:function(){this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight(),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"redrawControlLayer",value:function(e,t){var a=this,r=Fotor.mainCanvas.canvas.documentWidth,n=Fotor.mainCanvas.canvas.documentHeight;t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),void 0!=e.viewportTransform&&t.transform.apply(t,e.viewportTransform),t.fillStyle="rgba(102, 102, 102, 0.6)",t.strokeStyle="rgba(255, 255, 255, 0.8)",t.lineWidth=1/e.viewZoom,t.fillRect(0,0,r,n),t.clearRect(this.cropX,this.cropY,this.cropWidth,this.cropHeight),t.setLineDash([5,5]);for(var o=1;o<3;o++)t.beginPath(),t.moveTo(this.cropX+Math.round(this.cropWidth*o/3),this.cropY),t.lineTo(this.cropX+Math.round(this.cropWidth*o/3),this.cropY+this.cropHeight),t.stroke();for(var i=1;i<3;i++)t.beginPath(),t.moveTo(this.cropX,this.cropY+Math.round(this.cropHeight*i/3)),t.lineTo(this.cropX+this.cropWidth,this.cropY+Math.round(this.cropHeight*i/3)),t.stroke();t.restore(),a.refreshDivData()}},{key:"createCropControlDiv",value:function(){null==this.controlDiv&&(this.controlDiv=e("<div class='cropDiv'><div class='moveBar cursor-resize-move' id='cropMoveDiv'></div><div class='lineBar cursor-resize-v' id='cropTL'><span></span></div><div class='lineBar cursor-resize-v' id='cropBL'><span></span></div><div class='lineBar cursor-resize-h' id='cropLL'><span></span></div><div class='lineBar cursor-resize-h' id='cropRL'><span></span></div><div class='circlesBar cursor-resize-l' id='cropLT'></div><div class='circlesBar cursor-resize-r' id='cropRT'></div><div class='circlesBar cursor-resize-r' id='cropLB'></div><div class='circlesBar cursor-resize-l' id='cropRB'></div><div class='squareBar cursor-resize-v' id='cropMT'></div><div class='squareBar cursor-resize-v' id='cropBT'></div><div class='squareBar cursor-resize-h' id='cropLM'></div><div class='squareBar cursor-resize-h' id='cropRM'></div></div>").appendTo(e(".canvas-container")),this.cropMoveDiv=e("#cropMoveDiv"),this.cropMT=e("#cropMT"),this.cropBT=e("#cropBT"),this.cropLM=e("#cropLM"),this.cropRM=e("#cropRM"),this.cropTL=e("#cropTL"),this.cropBL=e("#cropBL"),this.cropLL=e("#cropLL"),this.cropRL=e("#cropRL"),e("#cropMoveDiv").on("mousedown",this.moveControlDown),e("#cropMoveDiv").on("dblclick",this.handlerApply),e(".lineBar").on("mousedown",this.resizeControlDown),e(".squareBar").on("mousedown",this.resizeControlDown),e(".circlesBar").on("mousedown",this.resizeControlDown))}},{key:"removeCropControlDiv",value:function(){if(null!=this.controlDiv){var t=this;e("#cropMoveDiv").off("mousedown",this.moveControlDown),e("#cropMoveDiv").off("dblclick",this.handlerApply),e(".lineBar").off("mousedown",this.resizeControlDown),e(".squareBar").off("mousedown",this.resizeControlDown),e(".circlesBar").off("mousedown",this.resizeControlDown),e(document).off("mousemove",t.moving),e(document).off("mouseup",t.endChangeing),e(".canvas-container")[0].removeChild(this.controlDiv[0]),this.controlDiv=null,this.cropMoveDiv=null,this.cropMT=null,this.cropBT=null,this.cropLM=null,this.cropRM=null,this.cropTL=null,this.cropBL=null,this.cropLL=null,this.cropRL=null}}},{key:"saveEventState",value:function(t){var a=this;a.event_state.save_cropX=a.cropX,a.event_state.save_cropY=a.cropY,a.event_state.save_cropWidth=a.cropWidth,a.event_state.save_cropHeight=a.cropHeight,a.event_state.save_cropRatio=a.cropWidth/a.cropHeight,"cropMoveDiv"==t.currentTarget.id?(a.event_state.min_cropX=0,a.event_state.max_cropX=Fotor.mainCanvas.canvas.documentWidth-a.cropWidth,a.event_state.min_cropY=0,a.event_state.max_cropY=Fotor.mainCanvas.canvas.documentHeight-a.cropHeight):"cropLT"==t.currentTarget.id?(a.event_state.base_x=a.cropX+a.cropWidth,a.event_state.base_y=a.cropY+a.cropHeight):"cropRT"==t.currentTarget.id?(a.event_state.base_x=a.cropX,a.event_state.base_y=a.cropY+a.cropHeight):"cropLB"==t.currentTarget.id?(a.event_state.base_x=a.cropX+a.cropWidth,a.event_state.base_y=a.cropY):"cropRB"==t.currentTarget.id?(a.event_state.base_x=a.cropX,a.event_state.base_y=a.cropY):"cropTL"==t.currentTarget.id||"cropMT"==t.currentTarget.id?a.keepProportions?(a.event_state.base_x=a.cropX+.5*a.cropWidth,a.event_state.base_y=a.cropY+a.cropHeight):(a.event_state.base_x=a.cropX+a.cropWidth,a.event_state.base_y=a.cropY+a.cropHeight):"cropBL"==t.currentTarget.id||"cropBT"==t.currentTarget.id?a.keepProportions?(a.event_state.base_x=a.cropX+.5*a.cropWidth,a.event_state.base_y=a.cropY):(a.event_state.base_x=a.cropX,a.event_state.base_y=a.cropY):"cropLL"==t.currentTarget.id||"cropLM"==t.currentTarget.id?a.keepProportions?(a.event_state.base_x=a.cropX+a.cropWidth,a.event_state.base_y=a.cropY+.5*a.cropHeight):(a.event_state.base_x=a.cropX+a.cropWidth,a.event_state.base_y=a.cropY+a.cropHeight):"cropRL"!=t.currentTarget.id&&"cropRM"!=t.currentTarget.id||(a.keepProportions?(a.event_state.base_x=a.cropX,a.event_state.base_y=a.cropY+.5*a.cropHeight):(a.event_state.base_x=a.cropX,a.event_state.base_y=a.cropY)),a.event_state.mouse_x=(t.clientX||t.pageX||t.originalEvent.touches[0].clientX)+e(window).scrollLeft(),a.event_state.mouse_y=(t.clientY||t.pageY||t.originalEvent.touches[0].clientY)+e(window).scrollTop(),a.event_state.evnt=t}},{key:"moveControlDown",value:function(t){var a=this;t.preventDefault(),t.stopPropagation(),a.saveEventState(t),e(document).on("mousemove",a.moving),e(document).on("mouseup",a.endChangeing)}},{key:"moving",value:function(t){var a=this,r={};t.preventDefault(),t.stopPropagation(),r.x=(t.clientX||t.pageX)+e(window).scrollLeft(),r.y=(t.clientY||t.pageY)+e(window).scrollTop();var n=r.x-a.event_state.mouse_x,o=r.y-a.event_state.mouse_y;a.cropX=a.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],a.cropY=a.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3],a.cropX<a.event_state.min_cropX&&(a.cropX=a.event_state.min_cropX),a.cropX>a.event_state.max_cropX&&(a.cropX=a.event_state.max_cropX),a.cropY<a.event_state.min_cropY&&(a.cropY=a.event_state.min_cropY),a.cropY>a.event_state.max_cropY&&(a.cropY=a.event_state.max_cropY),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"resizeControlDown",value:function(t){var a=this;t.preventDefault(),t.stopPropagation(),a.saveEventState(t),e(document).on("mousemove",a.reSizeing),e(document).on("mouseup",a.endChangeing)}},{key:"reSizeing",value:function(t){var a=this,r={};t.preventDefault(),t.stopPropagation(),r.x=(t.clientX||t.pageX)+e(window).scrollLeft(),r.y=(t.clientY||t.pageY)+e(window).scrollTop();var n=r.x-a.event_state.mouse_x,o=r.y-a.event_state.mouse_y,i={};if("cropLT"==a.event_state.evnt.currentTarget.id?(i.x=a.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=a.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropRT"==a.event_state.evnt.currentTarget.id?(i.x=a.event_state.save_cropWidth+a.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=a.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropLB"==a.event_state.evnt.currentTarget.id?(i.x=a.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=a.event_state.save_cropHeight+a.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropRB"==a.event_state.evnt.currentTarget.id?(i.x=a.event_state.save_cropWidth+a.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=a.event_state.save_cropHeight+a.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropTL"==a.event_state.evnt.currentTarget.id||"cropMT"==a.event_state.evnt.currentTarget.id?(i.x=a.event_state.save_cropX,i.y=a.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropBL"==a.event_state.evnt.currentTarget.id||"cropBT"==a.event_state.evnt.currentTarget.id?(i.x=a.event_state.save_cropWidth+a.event_state.save_cropX,i.y=a.event_state.save_cropHeight+a.event_state.save_cropY+o/Fotor.mainCanvas.canvas.viewportTransform[3]):"cropLL"==a.event_state.evnt.currentTarget.id||"cropLM"==a.event_state.evnt.currentTarget.id?(i.x=a.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=a.event_state.save_cropY):"cropRL"!=a.event_state.evnt.currentTarget.id&&"cropRM"!=a.event_state.evnt.currentTarget.id||(i.x=a.event_state.save_cropWidth+a.event_state.save_cropX+n/Fotor.mainCanvas.canvas.viewportTransform[0],i.y=a.event_state.save_cropHeight+a.event_state.save_cropY),i.x<0?i.x=0:i.x>Fotor.mainCanvas.canvas.documentWidth&&(i.x=Fotor.mainCanvas.canvas.documentWidth),i.y<0?i.y=0:i.y>Fotor.mainCanvas.canvas.documentHeight&&(i.y=Fotor.mainCanvas.canvas.documentHeight),a.keepProportions){var s,l,c,h,d=1,u=1,p=Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight;if("cropLT"==a.event_state.evnt.currentTarget.id||"cropRT"==a.event_state.evnt.currentTarget.id||"cropLB"==a.event_state.evnt.currentTarget.id||"cropRB"==a.event_state.evnt.currentTarget.id){c=Math.abs(a.event_state.base_x-i.x),h=Math.abs(a.event_state.base_y-i.y);c/h<a.event_state.save_cropRatio?(h=h,i.x<=a.event_state.base_x&&i.y<=a.event_state.base_y?(d=a.event_state.save_cropRatio<p?a.event_state.base_y:Fotor.mainCanvas.canvas.documentWidth/a.event_state.save_cropRatio,h=Math.min(h,d),c=h*a.event_state.save_cropRatio,s=a.event_state.base_x-c,l=a.event_state.base_y-h):i.x>a.event_state.base_x&&i.y<=a.event_state.base_y?(d=a.event_state.save_cropRatio<p?a.event_state.base_y:Fotor.mainCanvas.canvas.documentWidth/a.event_state.save_cropRatio,h=Math.min(h,d),c=h*a.event_state.save_cropRatio,s=a.event_state.base_x+c-Fotor.mainCanvas.canvas.documentWidth>0?Fotor.mainCanvas.canvas.documentWidth-c:a.event_state.base_x,l=a.event_state.base_y-h):i.x<=a.event_state.base_x&&i.y>a.event_state.base_y?(d=a.event_state.save_cropRatio<p?Fotor.mainCanvas.canvas.documentHeight-a.event_state.base_y:Fotor.mainCanvas.canvas.documentWidth/a.event_state.save_cropRatio,h=Math.min(h,d),c=h*a.event_state.save_cropRatio,s=a.event_state.base_x-c,l=a.event_state.base_y+h-Fotor.mainCanvas.canvas.documentHeight>0?Fotor.mainCanvas.canvas.documentHeight-h:a.event_state.base_y):i.x>a.event_state.base_x&&i.y>a.event_state.base_y&&(d=a.event_state.save_cropRatio<p?Fotor.mainCanvas.canvas.documentHeight-a.event_state.base_y:Fotor.mainCanvas.canvas.documentWidth/a.event_state.save_cropRatio,h=Math.min(h,d),c=h*a.event_state.save_cropRatio,s=a.event_state.base_x+c-Fotor.mainCanvas.canvas.documentWidth>0?Fotor.mainCanvas.canvas.documentWidth-c:a.event_state.base_x,l=a.event_state.base_y+h-Fotor.mainCanvas.canvas.documentHeight>0?Fotor.mainCanvas.canvas.documentHeight-h:a.event_state.base_y)):(c=c,i.x<=a.event_state.base_x&&i.y<=a.event_state.base_y?(u=a.event_state.save_cropRatio>p?a.event_state.base_x:Fotor.mainCanvas.canvas.documentHeight*a.event_state.save_cropRatio,c=Math.min(c,u),h=c/a.event_state.save_cropRatio,s=a.event_state.base_x-c,l=a.event_state.base_y-h):i.x>a.event_state.base_x&&i.y<=a.event_state.base_y?(u=a.event_state.save_cropRatio>p?Fotor.mainCanvas.canvas.documentWidth-a.event_state.base_x:Fotor.mainCanvas.canvas.documentHeight*a.event_state.save_cropRatio,c=Math.min(c,u),h=c/a.event_state.save_cropRatio,s=a.event_state.base_x+c-Fotor.mainCanvas.canvas.documentWidth>0?Fotor.mainCanvas.canvas.documentWidth-c:a.event_state.base_x,l=a.event_state.base_y-h):i.x<=a.event_state.base_x&&i.y>a.event_state.base_y?(u=a.event_state.save_cropRatio>p?a.event_state.base_x:Fotor.mainCanvas.canvas.documentHeight*a.event_state.save_cropRatio,c=Math.min(c,u),h=c/a.event_state.save_cropRatio,s=a.event_state.base_x-c,l=a.event_state.base_y+h-Fotor.mainCanvas.canvas.documentHeight>0?Fotor.mainCanvas.canvas.documentHeight-h:a.event_state.base_y):i.x>a.event_state.base_x&&i.y>a.event_state.base_y&&(u=a.event_state.save_cropRatio>p?Fotor.mainCanvas.canvas.documentWidth-a.event_state.base_x:Fotor.mainCanvas.canvas.documentHeight*a.event_state.save_cropRatio,c=Math.min(c,u),h=c/a.event_state.save_cropRatio,s=a.event_state.base_x+c-Fotor.mainCanvas.canvas.documentWidth>0?Fotor.mainCanvas.canvas.documentWidth-c:a.event_state.base_x,l=a.event_state.base_y+h-Fotor.mainCanvas.canvas.documentHeight>0?Fotor.mainCanvas.canvas.documentHeight-h:a.event_state.base_y))}else"cropTL"==a.event_state.evnt.currentTarget.id||"cropMT"==a.event_state.evnt.currentTarget.id||"cropBL"==a.event_state.evnt.currentTarget.id||"cropBT"==a.event_state.evnt.currentTarget.id?(h=Math.abs(a.event_state.base_y-i.y),a.event_state.save_cropRatio<p?"cropTL"==a.event_state.evnt.currentTarget.id||"cropMT"==a.event_state.evnt.currentTarget.id?d=a.event_state.base_y:"cropBL"!=a.event_state.evnt.currentTarget.id&&"cropBT"!=a.event_state.evnt.currentTarget.id||(d=Fotor.mainCanvas.canvas.documentHeight-a.event_state.base_y):d=Fotor.mainCanvas.canvas.documentWidth/a.event_state.save_cropRatio,h=Math.min(h,d),c=h*a.event_state.save_cropRatio,s=a.event_state.base_x-.5*c,l=i.y<=a.event_state.base_y?a.event_state.base_y-h:a.event_state.base_y):"cropLL"!=a.event_state.evnt.currentTarget.id&&"cropLM"!=a.event_state.evnt.currentTarget.id&&"cropRL"!=a.event_state.evnt.currentTarget.id&&"cropRM"!=a.event_state.evnt.currentTarget.id||(c=Math.abs(a.event_state.base_x-i.x),a.event_state.save_cropRatio>p?"cropLL"==a.event_state.evnt.currentTarget.id||"cropLM"==a.event_state.evnt.currentTarget.id?u=a.event_state.base_x:"cropRL"!=a.event_state.evnt.currentTarget.id&&"cropRM"!=a.event_state.evnt.currentTarget.id||(u=Fotor.mainCanvas.canvas.documentWidth-a.event_state.base_x):u=Fotor.mainCanvas.canvas.documentHeight*a.event_state.save_cropRatio,c=Math.min(c,u),h=c/a.event_state.save_cropRatio,l=a.event_state.base_y-.5*h,s=i.x<=a.event_state.base_x?a.event_state.base_x-c:a.event_state.base_x);s<0&&(s=0),s+c>Fotor.mainCanvas.canvas.documentWidth&&(s=Fotor.mainCanvas.canvas.documentWidth-c),l<0&&(l=0),l+h>Fotor.mainCanvas.canvas.documentHeight&&(l=Fotor.mainCanvas.canvas.documentHeight-h),a.cropX=s,a.cropY=l,a.cropWidth=Math.max(c,1),a.cropHeight=Math.max(h,1)}else i.x<a.event_state.base_x?(a.cropX=i.x,a.cropWidth=Math.max(a.event_state.base_x-i.x,1)):(a.cropX=a.event_state.base_x,a.cropWidth=Math.max(i.x-a.event_state.base_x,1)),i.y<a.event_state.base_y?(a.cropY=i.y,a.cropHeight=Math.max(a.event_state.base_y-i.y,1)):(a.cropY=a.event_state.base_y,a.cropHeight=Math.max(i.y-a.event_state.base_y,1));Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"endChangeing",value:function(t){var a=this;t.preventDefault(),e(document).off("mousemove",a.reSizeing),e(document).off("mousemove",a.moving),e(document).off("mouseup",a.endChangeing)}},{key:"doCrop",value:function(){this.docropX=this.cropX/Fotor.mainCanvas.canvas.documentWidth,this.docropY=this.cropY/Fotor.mainCanvas.canvas.documentHeight,this.docropWidth=this.cropWidth/Fotor.mainCanvas.canvas.documentWidth,this.docropHeight=this.cropHeight/Fotor.mainCanvas.canvas.documentHeight,this.centerMoveX=.5*Fotor.mainCanvas.canvas.documentWidth-(.5*this.cropWidth+this.cropX),this.centerMoveY=.5*Fotor.mainCanvas.canvas.documentHeight-(.5*this.cropHeight+this.cropY),this.controlDiv.hide(),Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.requestRenderAll(),this.animationStep=0,this.endCropAnimation()}},{key:"endCropAnimation",value:function(){var e=this.docropX*Fotor.mainCanvas.canvas.documentWidth,t=this.docropY*Fotor.mainCanvas.canvas.documentHeight;this.controlDiv.show(),Fotor.mainCanvas.fotorEngine.process_crop([this.docropX,this.docropY],[this.docropWidth,this.docropHeight],!0),Fotor.mainCanvas.resetCanvasSize(this.cropWidth,this.cropHeight),Fotor.mainCanvas.reSetEditorAnimation(),Fotor.mainCanvas.setZoom(Fotor.mainCanvas.getZoom(),!0,null,!0);for(var a=0,r=Fotor.mainCanvas.canvas._objects.length;a<r;a++){var n=Fotor.mainCanvas.canvas._objects[a];n.set({left:n.left-e,top:n.top-t})}Fotor.mainCanvas.applyEditorPic(),Fotor.mainCanvas.canvas.hasCustomControls=!0,this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight(),Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"refreshDivData",value:function(){if(null!=this.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=this,t=Fotor.mainCanvas.canvas.viewportTransform[0]*e.cropX+Fotor.mainCanvas.canvas.viewportTransform[4]-e.circleBarRadius,a=Fotor.mainCanvas.canvas.viewportTransform[3]*e.cropY+Fotor.mainCanvas.canvas.viewportTransform[5]-e.circleBarRadius,r=Fotor.mainCanvas.canvas.viewportTransform[0]*e.cropWidth+2*e.circleBarRadius,n=Fotor.mainCanvas.canvas.viewportTransform[3]*e.cropHeight+2*e.circleBarRadius;e.controlDiv.css({left:t+"px",top:a+"px",width:r+"px",height:n+"px"});var o=.5*r-e.circleBarRadius,i=.5*n-e.circleBarRadius,s=2*e.circleBarRadius,l=2*e.circleBarRadius,c=r-4*e.circleBarRadius,h=n-4*e.circleBarRadius;e.cropMoveDiv.css({left:s+"px",top:l+"px",width:c+"px",height:h+"px"}),e.cropMT.css({left:o+"px"}),e.cropBT.css({left:o+"px"}),e.cropLM.css({top:i+"px"}),e.cropRM.css({top:i+"px"}),e.cropTL.css({top:0,left:"4px",width:r-8+"px",height:2*e.circleBarRadius+"px"}),e.cropBL.css({bottom:0,left:"4px",width:r-8+"px",height:2*e.circleBarRadius+"px"}),e.cropLL.css({top:"4px",left:0,width:2*e.circleBarRadius+"px",height:n-8+"px"}),e.cropRL.css({top:"4px",right:0,width:2*e.circleBarRadius+"px",height:n-8+"px"}),this.forceUpdate()}}},{key:"initUnfoldUI",value:function(){Fotor.mainCanvas.canvas.mouseEnabled=!1,this.refs.dropSelectDom.setValue("Freeform"),this.handleCheckboxNoActive()}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterfold",value:function(){c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isCustomBeforObjectRender=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,this.removeCropControlDiv(),this.afterCropToolFold(),Fotor.mainCanvas.canvas.requestRenderAll(),this.setState({cropWidth:0,cropHeight:0})}},{key:"afterUnfold",value:function(){c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=this.redrawControlLayer,Fotor.mainCanvas.canvas.hasCustomControls=!0,Fotor.mainCanvas.canvas.isCustomBeforObjectRender=!0,Fotor.mainCanvas.canvas.updateViewTransform(),this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight(),isNaN(this.cropX)&&console.log("查看是不是NAN："+this.cropX),this.createCropControlDiv(),this.afterCropToolUnfold(),Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.progressBar.hide(),this.forceUpdate()}},{key:"render",value:function(){var e=this;return r.createElement("div",{className:"clearfix "},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_crop,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement(Fotor.ui.SelectDrop,{ref:"dropSelectDom",defaultValue:"Freeform",items:this.presetSelect,onChange:this.handleSelectChange.bind(this)}),r.createElement("div",{className:"marginT15 clearfix"},r.createElement("ul",{className:"ul-no-style inline-inputs clearfix"},r.createElement("li",{className:"pull-left"},r.createElement("input",{ref:"inputWidth",className:"custom-input "+(this.state.isError?"custom-input-error":""),"data-type":"width",value:Math.floor(e.cropWidth).toString(),onBlur:this.inputBlur.bind(this),onKeyDown:this.inputKeydown.bind(this),onKeyUp:this.inputKeyup.bind(this),onChange:this.inputValueChange.bind(this)})),r.createElement("li",{className:"icon-x pull-left"}),r.createElement("li",{className:"pull-left"},r.createElement("input",{ref:"inputHeight",className:"custom-input "+(this.state.isError?"custom-input-error":""),"data-type":"height",value:Math.floor(e.cropHeight).toString(),onBlur:this.inputBlur.bind(this),onKeyDown:this.inputKeydown.bind(this),onKeyUp:this.inputKeyup.bind(this),onChange:this.inputValueChange.bind(this)})),r.createElement("li",{className:"pull-right",onClick:this.swapWtoH.bind(this)},r.createElement("div",{className:"icon-34 switch-h "+(this.keepProportions?"":"disable")})))),r.createElement("div",{className:"marginT15"},r.createElement(Fotor.ui.Checkbox,{text:Fotor.globalConfig.lang.editor_workspace_basic_crop_keep_Proportions,ref:"checkbox",onClick:this.handleCheckboxClick.bind(this)})),r.createElement("div",{className:"editor-folder-btns paddingT10 clearfix"},r.createElement(Fotor.ui.Button,{className:"apply-btn",text:Fotor.globalConfig.lang.editor_workspace_effect_applyButton,onClick:this.handlerApply.bind(this)})))))}},{key:"handleCheckboxClick",value:function(e){e?(this.keepProportions=!0,this.keepRatio=this.cropWidth/this.cropHeight):(this.refs.dropSelectDom.setValue("Freeform"),this.keepProportions=!1),this.forceUpdate()}},{key:"handleCheckboxActive",value:function(){n.findDOMNode(this.refs.checkbox);this.refs.checkbox.isSelected()||(this.refs.checkbox.setSelect(!0),this.keepProportions=!0,this.keepRatio=this.cropWidth/this.cropHeight)}},{key:"handleCheckboxNoActive",value:function(){n.findDOMNode(this.refs.checkbox);this.refs.checkbox.isSelected()&&(this.refs.checkbox.setSelect(!1),this.keepProportions=!1)}},{key:"handleSelectChange",value:function(e){if("Freeform"==e?(this.refs.checkbox.setSelect(!1),this.handleCheckboxClick(!1)):(this.refs.checkbox.setSelect(!0),this.handleCheckboxClick(!0)),"Freeform"==e)this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight();else if(0==e)this.cropX=this.defaultCropX(),this.cropY=this.defaultCropY(),this.cropWidth=this.defaultCropWidth(),this.cropHeight=this.defaultCropHeight();else{this.handleCheckboxActive();var t=Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight;e<1?e>t?(this.cropWidth=Fotor.mainCanvas.canvas.documentWidth,this.cropHeight=Fotor.mainCanvas.canvas.documentWidth/e):(this.cropWidth=e*Fotor.mainCanvas.canvas.documentHeight,this.cropHeight=Fotor.mainCanvas.canvas.documentHeight):e<t?(this.cropWidth=e*Fotor.mainCanvas.canvas.documentHeight,this.cropHeight=Fotor.mainCanvas.canvas.documentHeight):(this.cropWidth=Fotor.mainCanvas.canvas.documentWidth,this.cropHeight=Fotor.mainCanvas.canvas.documentWidth/e),this.cropX=.5*(Fotor.mainCanvas.canvas.documentWidth-this.cropWidth),this.cropY=.5*(Fotor.mainCanvas.canvas.documentHeight-this.cropHeight)}Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"getEventObject",value:function(t){return{e:t,target:t.target,value:e(t.target).val(),parent:e(t.target).parent()}}},{key:"inputKeydown",value:function(e){var t=e.keyCode;return-1!=[8,46,37,39,13].indexOf(t)||(t>=48&&t<=57||(t>=96&&t<=105||(!(!e.ctrlKey&&!e.metaKey||86!=t)||(e.stopPropagation(),e.preventDefault(),!1))))}},{key:"inputKeyup",value:function(t){var a=e(t.target),r=this.getEventObject(t),o=e(r.target).val(),i=n.findDOMNode(this.refs.cropContent),s=e(i).find("input");if(parseInt(o)<1)return e(t.target).val(1),!1;if(13==t.keyCode){var l=e(s).index(r.target);if(0==l)return e(s).eq(1).focus(),!1;e(s).blur(),this.handlerApply()}else if(9==t.keyCode){var a=t.target,s=e(this.refs.toolContent).find(".custom-input"),l=e(s).index(e(a));l=0==l?1:0,e(s).eq(l).focus()}else this.numberInputOnly(a)}},{key:"inputValueChange",value:function(t){var a=this.getEventObject(t),r=Math.max(this.numberFormat(a.value),1),n=!0;if("width"==e(a.target).data("type")&&(n=!1),this.keepProportions){var o,i,s=Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight;n?(i=this.keepRatio<s?Math.min(r,Fotor.mainCanvas.canvas.documentHeight):Math.min(r,Fotor.mainCanvas.canvas.documentWidth/this.keepRatio),o=i*this.keepRatio,this.cropX+o>Fotor.mainCanvas.canvas.documentWidth&&(this.cropX=.5*(Fotor.mainCanvas.canvas.documentWidth-o)),this.cropY+i>Fotor.mainCanvas.canvas.documentHeight&&(this.cropY=.5*(Fotor.mainCanvas.canvas.documentHeight-i)),this.cropWidth=o,this.cropHeight=i):(o=this.keepRatio>s?Math.min(r,Fotor.mainCanvas.canvas.documentWidth):Math.min(r,Fotor.mainCanvas.canvas.documentHeight*this.keepRatio),i=o/this.keepRatio,this.cropX+o>Fotor.mainCanvas.canvas.documentWidth&&(this.cropX=.5*(Fotor.mainCanvas.canvas.documentWidth-o)),this.cropY+i>Fotor.mainCanvas.canvas.documentHeight&&(this.cropY=.5*(Fotor.mainCanvas.canvas.documentHeight-i)),this.cropWidth=o,this.cropHeight=i)}else n?(r=Math.min(r,Fotor.mainCanvas.canvas.documentHeight),this.cropHeight=r):(r=Math.min(r,Fotor.mainCanvas.canvas.documentWidth),this.cropWidth=r);Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"numberInputOnly",value:function(t){var a=e(t).val(),r=a.replace(/\D/g,"");return r=parseInt(r),isNaN(r)&&(r=""),a!=r&&e(t).val(r),r}},{key:"numberFormat",value:function(e){if(""==e||void 0==e)return"";var t=e.replace(/\D/g,"");return t=parseInt(t),isNaN(t)&&(t=""),t}},{key:"checkWidthHeight",value:function(){return{width:this.refs.inputWidth.getValue(),height:this.refs.inputHeight.getValue()}}},{key:"inputBlur",value:function(e){this.inputValueChange(e),e.stopPropagation(),e.preventDefault()}},{key:"swapWtoH",value:function(){if(this.keepProportions){var e=this.cropWidth,t=this.cropHeight,a=e/t,r=1/a;r<Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight?(this.cropWidth=Fotor.mainCanvas.canvas.documentHeight*r,this.cropHeight=Fotor.mainCanvas.canvas.documentHeight,this.cropX=.5*(Fotor.mainCanvas.canvas.documentWidth-this.cropWidth),this.cropY=0):(this.cropWidth=Fotor.mainCanvas.canvas.documentWidth,this.cropHeight=Fotor.mainCanvas.canvas.documentWidth/r,this.cropX=0,this.cropY=.5*(Fotor.mainCanvas.canvas.documentHeight-this.cropHeight)),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"handlerApply",value:function(){0==Fotor.mainCanvas.saveApplyZoomVal&&(Fotor.mainCanvas.saveApplyZoomVal=Fotor.mainCanvas.getZoom()),this.doCrop()}},{key:"getDefaultHistoryData",value:function(){return{}}},{key:"getCurrentHistoryData",value:function(){return{}}},{key:"loadTempHistoryData",value:function(e){this.refs.dropSelectDom.setValue("Freeform"),this.handleSelectChange("Freeform"),this.handleCheckboxNoActive()}},{key:"cancelHandler",value:function(){this.tryFold()}}]),a}(h.default));t.default=u}).call(t,a(1),a(0),a(15))},function(e,t,a){var r=a(1051);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,".cropDiv {\n  position: absolute;\n  left: 0px;\n  top: 0px;\n  z-index: 5; }\n\n.circlesBar {\n  position: absolute;\n  width: 14px;\n  height: 14px; }\n\n#cropLT {\n  left: 4px;\n  top: 4px;\n  background: url("+r(a(175))+") no-repeat; }\n\n#cropRT {\n  right: 4px;\n  top: 4px;\n  background: url("+r(a(176))+") no-repeat; }\n\n#cropLB {\n  left: 4px;\n  bottom: 4px;\n  background: url("+r(a(177))+") no-repeat; }\n\n#cropRB {\n  right: 4px;\n  bottom: 4px;\n  background: url("+r(a(178))+") no-repeat; }\n\n.squareBar {\n  position: absolute;\n  background: url("+r(a(1052))+") no-repeat;\n  width: 9px;\n  height: 9px; }\n\n.lineBar {\n  position: absolute; }\n\n.lineBar span {\n  display: block;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.6); }\n\n#cropTL span,\n#cropBL span {\n  margin-top: 4px;\n  height: 1px; }\n\n#cropLL span,\n#cropRL span {\n  margin-left: 4px;\n  width: 1px; }\n\n#cropMT {\n  top: 4px; }\n\n#cropBT {\n  bottom: 4px; }\n\n#cropLM {\n  left: 4px; }\n\n#cropRM {\n  right: 4px; }\n\n#cropMT, #cropBT {\n  width: 14px;\n  height: 4px;\n  background: url("+r(a(1053))+") no-repeat; }\n\n#cropLM, #cropRM {\n  width: 4px;\n  height: 14px;\n  background: url("+r(a(1054))+") no-repeat; }\n\n.cursor-resize-l {\n  cursor: url("+r(a(88))+") 8 8, auto; }\n\n.cursor-resize-r {\n  cursor: url("+r(a(86))+") 8 8, auto; }\n\n.cursor-resize-h {\n  cursor: url("+r(a(87))+") 8 8, auto; }\n\n.cursor-resize-v {\n  cursor: url("+r(a(85))+") 8 8, auto; }\n\n.cursor-resize-move {\n  cursor: url("+r(a(55))+") 8 8, auto; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJCAYAAADgkQYQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzFCOEMzNjRDNzREMTFFNkI0NzZFOTNBNzk4M0RBRDUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzFCOEMzNjVDNzREMTFFNkI0NzZFOTNBNzk4M0RBRDUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMUI4QzM2MkM3NEQxMUU2QjQ3NkU5M0E3OTgzREFENSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMUI4QzM2M0M3NEQxMUU2QjQ3NkU5M0E3OTgzREFENSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PrYA230AAAAnSURBVHjaYvwPBAwEAAuIYGRk9MOlAGjGJiYGIsCQVcRITDgBBBgA3NwMCzLLhOMAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAECAYAAAC+0w63AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzNGRjZGMzUyOUJEMTFFNzhDRURFQzU2QUE3QTcwMzkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzNGRjZGMzYyOUJEMTFFNzhDRURFQzU2QUE3QTcwMzkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozM0ZGNkYzMzI5QkQxMUU3OENFREVDNTZBQTdBNzAzOSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozM0ZGNkYzNDI5QkQxMUU3OENFREVDNTZBQTdBNzAzOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pvv9+iQAAAAkSURBVHjaYvwPBAxkABYQwcjImE6KJqBdM5kYyASM5DoVIMAAR2sMAdDiUj4AAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAOCAYAAAAIar0YAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkVGQUUwNDUyOUJEMTFFNzgwNDNFODk0NkVCOERBOTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MkVGQUUwNDYyOUJEMTFFNzgwNDNFODk0NkVCOERBOTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyRUZBRTA0MzI5QkQxMUU3ODA0M0U4OTQ2RUI4REE5MiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyRUZBRTA0NDI5QkQxMUU3ODA0M0U4OTQ2RUI4REE5MiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuM86TYAAAAgSURBVHjaYvwPBAzIACqQBsIgNhMDGhg6AozongMIMAA2ZBDVNSSHTwAAAABJRU5ErkJggg=="},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=function(t){function a(e){n(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.resizeMaxWidth=0,t.resizeMaxHeight=0,t.resizeWidth=0,t.resizeHeight=0,t.resizeByProp=!1,t.resizeWidthTxt=null,t.resizeHeightTxt=null,t.lock_proportion=!0,t.handleToolFolderClick=t.handleToolFolderClick.bind(t),t.onKeyDownHandler=t.onKeyDownHandler.bind(t),t.lockChanged=t.lockChanged.bind(t),t.handleClickCheckbox=t.handleClickCheckbox.bind(t),t.state={width:2e3,height:2e3,rate:1,isLock:!0,minWidth:1,minHeight:1,maxWidth:1e4,maxHeight:1e4,isError:!1,disable:!1,errorInfo:""},t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return i(a,t),s(a,[{key:"handleClickCheckbox",value:function(e){this.resizeByProp=e,this.checkShowValue(e),this.checkIsError(null)}},{key:"checkShowValue",value:function(t){var a=e(this.refs.toolContent).find(".custom-input"),r=e(a).eq(0).val(),n=e(a).eq(1).val();t?(this.resizeWidthTxt.value=Math.round(r/Fotor.mainCanvas.canvas.documentWidth*100),this.resizeHeightTxt.value=Math.round(n/Fotor.mainCanvas.canvas.documentHeight*100)):(this.resizeWidthTxt.value=Math.round(Math.max(r/100*Fotor.mainCanvas.canvas.documentWidth,1)),this.resizeHeightTxt.value=Math.round(Math.max(n/100*Fotor.mainCanvas.canvas.documentHeight,1))),this.forceUpdate()}},{key:"getDefaultSize",value:function(){this.resizeMaxWidth=this.resizeWidth=Math.round(Fotor.mainCanvas.canvas.documentWidth),this.resizeMaxHeight=this.resizeHeight=Math.round(Fotor.mainCanvas.canvas.documentHeight),this.resizeWidthTxt=e("#widthTxt")[0],this.resizeHeightTxt=e("#heightTxt")[0],this.resizeWidthTxt.value=Math.round(this.resizeWidth),this.resizeHeightTxt.value=Math.round(this.resizeHeight)}},{key:"reSetDefaultSize",value:function(){this.resizeMaxWidth=this.resizeWidth=this.resizeMaxHeight=this.resizeHeight=0,this.resizeWidthTxt=this.resizeHeightTxt=null}},{key:"lockChanged",value:function(e){this.setState({isLock:!this.state.isLock})}},{key:"afterfold",value:function(){Fotor.mainCanvas.canvas.off("resize",this.getDefaultSize,this),this.reSetDefaultSize(),this.resizeByProp=!1,l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.forceUpdate()}},{key:"initUnfoldUI",value:function(){this.getDefaultSize(),this.refs.percentBox.setSelect(!1),this.checkIsError(null)}},{key:"afterUnfold",value:function(){l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.updateViewTransform(),Fotor.mainCanvas.canvas.on("resize",this.getDefaultSize,this),Fotor.progressBar.hide()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_resize,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("ul",{ref:"inputContainer",className:"ul-no-style inline-inputs clearfix"},r.createElement("li",{className:"pull-left"},r.createElement("input",{type:"text",id:"widthTxt",maxLength:5,className:"custom-input custom-input-big "+(this.resizeByProp?"show-percent ":"")+(this.state.isError?"custom-input-error":""),onKeyDown:this.onKeyDownHandler.bind(this),onKeyUp:this.onInputKeyUp.bind(this),onBlur:this.inputBlur.bind(this),onChange:this.inputValueChange.bind(this)})),r.createElement("li",{className:"pull-right"},r.createElement("input",{type:"text",id:"heightTxt",maxLength:5,className:"custom-input custom-input-big "+(this.resizeByProp?"show-percent ":"")+(this.state.isError?"custom-input-error":""),onKeyDown:this.onKeyDownHandler.bind(this),onKeyUp:this.onInputKeyUp.bind(this),onBlur:this.inputBlur.bind(this),onChange:this.inputValueChange.bind(this)})),r.createElement("li",{className:"lock-container",onClick:this.lockChanged},r.createElement("i",{className:"icon-lock "+(this.state.isLock?"locked":"")}))),r.createElement("div",{className:"clearfix paddingT10"},r.createElement(Fotor.ui.Checkbox,{ref:"percentBox",text:Fotor.globalConfig.lang.editor_workspace_basic_resize_percent,onClick:this.handleClickCheckbox.bind(this)})),r.createElement("div",{className:"paddingT5 red",style:{minHeight:"18px",lineHeight:"12px"}},this.state.errorInfo),r.createElement("div",{className:"clearfix marginT0"},r.createElement(Fotor.ui.Button,{ref:"applyBtn",className:"apply-btn text-center",text:Fotor.globalConfig.lang.editor_workspace_effect_applyButton,onClick:this.applyHandler.bind(this)})))))}},{key:"applyHandler",value:function(){0==Fotor.mainCanvas.saveApplyZoomVal&&(Fotor.mainCanvas.saveApplyZoomVal=Fotor.mainCanvas.getZoom());var t=e(this.refs.toolContent).find(".custom-input");this.resizeWidth=e(t).eq(0).val(),this.resizeHeight=e(t).eq(1).val(),this.resizeByProp&&(this.resizeWidth*=Fotor.mainCanvas.canvas.documentWidth/100,this.resizeHeight*=Fotor.mainCanvas.canvas.documentHeight/100);for(var a=this.resizeWidth/Fotor.mainCanvas.canvas.documentWidth,r=this.resizeHeight/Fotor.mainCanvas.canvas.documentHeight,n=0,o=Fotor.mainCanvas.canvas._objects.length;n<o;n++){var i=Fotor.mainCanvas.canvas._objects[n],s=i.left/Fotor.mainCanvas.canvas.documentWidth,l=i.top/Fotor.mainCanvas.canvas.documentHeight;i.set({left:s*this.resizeWidth,top:l*this.resizeHeight,scaleX:i.scaleX*a*(i.flipX?-1:1),scaleY:i.scaleY*r*(i.flipY?-1:1)})}Fotor.mainCanvas.fotorEngine.process_resize(this.resizeWidth,this.resizeHeight),Fotor.mainCanvas.resetCanvasSize(this.resizeWidth,this.resizeHeight),Fotor.mainCanvas.editorZoomFit(),this.resizeByProp?(e(t).eq(0).val(100),e(t).eq(1).val(100)):(e(t).eq(0).val(this.resizeWidth),e(t).eq(1).val(this.resizeHeight)),this.resizeMaxWidth==this.resizeWidth&&this.resizeMaxHeight==this.resizeHeight||Fotor.mainCanvas.applyEditorPic()}},{key:"onKeyDownHandler",value:function(t){var a=t.keyCode,r=e(t.target).val();return r=Number(r),-1!=[8,46,37,39,13].indexOf(a)||(a>=48&&a<=57||(a>=96&&a<=105||(!(!t.ctrlKey&&!t.metaKey||86!=a)||(t.stopPropagation(),t.preventDefault(),!1))))}},{key:"onInputKeyUp",value:function(t){var a=e(t.target),r=e(this.refs.toolContent),n=e(r).find("input");if(13==t.keyCode){var o=e(n).index(a);if(0==o)return e(n).eq(1).focus(),!1;e(n).blur(),this.applyHandler()}else if(9==t.keyCode){var a=t.target,n=e(this.refs.toolContent).find(".custom-input"),o=e(n).index(e(a));o=0==o?1:0,e(n).eq(o).focus()}else this.numberInputOnly(a);this.checkIsError(t),t.stopPropagation(),t.preventDefault()}},{key:"inputValueChange",value:function(t){var a=e(t.target),r=this.numberInputOnly(a),n=e(this.refs.toolContent),o=e(n).find("input"),i=e(o).index(a),s=e(o).eq(0==i?1:0);this.numberInputOnly(s);if(""!=r){if(this.checkIsError(t),this.state.isLock)if(this.resizeByProp)i=0==i?1:0,e(o).eq(i).val(r);else{var l,c=Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.canvas.documentHeight;0==i?(l=Math.round(r/c),e(o).eq(1).val(l)):(l=Math.round(r*c),e(o).eq(0).val(l))}}else this.setState({isError:!0});t.stopPropagation(),t.preventDefault()}},{key:"inputBlur",value:function(e){this.inputValueChange(e),e.stopPropagation()}},{key:"checkIsError",value:function(t){var a,r=e(this.refs.toolContent),n=e(r).find("input");a=null!=t?e(t.target):e(n).eq(0);var o=this.numberInputOnly(a),i=e(n).index(a),s=e(n).eq(0==i?1:0),l=this.numberInputOnly(s),c={w:o,h:l};1==i&&(c={w:l,h:o});var h=!1;if(this.resizeByProp)(c.w>100||c.h>100)&&(h=!0,this.setState({errorInfo:Fotor.globalConfig.lang.editor_workspace_basic_resize_maxExcess+" 100% x 100%"})),(c.w<=0||c.h<=0)&&(h=!0,this.setState({errorInfo:Fotor.globalConfig.lang.editor_workspace_basic_resize_minExcess+" 0% x 0%"}));else{if(c.w>this.resizeMaxWidth||c.h>this.resizeMaxHeight){h=!0;var d=this.resizeMaxWidth,u=this.resizeMaxHeight;this.state.errorInfo=Fotor.globalConfig.lang.editor_workspace_basic_resize_maxExcess+" "+d+" x "+u}(c.w<this.state.minWidth||c.h<this.state.minHeight)&&(h=!0,this.state.errorInfo=Fotor.globalConfig.lang.editor_workspace_basic_resize_minExcess+" "+this.state.minWidth+" x "+this.state.minHeight)}h?this.refs.applyBtn.disable():(this.refs.applyBtn.enable(),this.state.errorInfo=""),this.setState({isError:h})}},{key:"numberInputOnly",value:function(t){var a=e(t).val(),r=a.replace(/\D/g,"");return r=parseInt(r),isNaN(r)&&(r=""),a!=r&&e(t).val(r),r}}]),a}(c.default);t.default=h}).call(t,a(1),a(0))},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),function(t){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.rotateVal=0,t.LeftOrRight=0,t.HVFF=null,t.drawScale=1,t.handleValueChange=t.handleValueChange.bind(t),t.handleValueChanged=t.handleValueChanged.bind(t),t.LeftHandler=t.LeftHandler.bind(t),t.RightHandler=t.RightHandler.bind(t),t.HorizontalHandler=t.HorizontalHandler.bind(t),t.VerticalHandler=t.VerticalHandler.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return o(a,t),i(a,[{key:"helperDrawLiner",value:function(e,t){var a=Fotor.mainCanvas.canvas.documentWidth,r=Fotor.mainCanvas.canvas.documentHeight,n=50/e.viewZoom,o=Math.ceil(a/(2*n)),i=Math.ceil(r/(2*n));t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.strokeStyle="rgba(255, 255, 255, 0.6)",t.save(),t.lineWidth=2/e.viewZoom,t.beginPath(),t.moveTo(0,.5*r),t.lineTo(a,.5*r),t.stroke(),t.beginPath(),t.moveTo(.5*a,0),t.lineTo(.5*a,r),t.stroke(),t.restore(),t.save(),t.lineWidth=1/e.viewZoom;for(var s=0;s<i;s++)Math.round(.5*r+n*s)<r&&(t.beginPath(),t.moveTo(0,Math.round(.5*r+n*s)),t.lineTo(a,Math.round(.5*r+n*s)),t.stroke()),Math.round(.5*r-n*s)>0&&(t.beginPath(),t.moveTo(0,Math.round(.5*r-n*s)),t.lineTo(a,Math.round(.5*r-n*s)),t.stroke());for(var l=0;l<o;l++)Math.round(.5*a+n*l)<a&&(t.beginPath(),t.moveTo(Math.round(.5*a+n*l),0),t.lineTo(Math.round(.5*a+n*l),r),t.stroke()),Math.round(.5*a-n*l)>0&&(t.beginPath(),t.moveTo(Math.round(.5*a-n*l),0),t.lineTo(Math.round(.5*a-n*l),r),t.stroke());t.restore(),t.restore()}},{key:"handleValueChange",value:function(e,t){this.rotateVal=this.refs.rotate.val(),0!=this.rotateVal?this.hadchanged=!0:this.hadchanged=!1,this.drawScale=Fotor.mainCanvas.fotorEngine.process_rotation("intensity",-1*this.rotateVal),!Fotor.mainCanvas.canvas.hasCustomControls&&e?(Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawLiner,Fotor.mainCanvas.canvas.hasCustomControls=!0,Fotor.mainCanvas.canvas.mouseEnabled=!1,Fotor.mainCanvas.canvas.requestRenderAll()):void 0!=e&&null!=e||(Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"handleValueChanged",value:function(e,t){this.handleValueChange(),this.LeftOrRight=0,this.HVFF=null,Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"LeftHandler",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_rotation("RR"),Fotor.mainCanvas.fotorEngine.refresh_record(),this.LeftOrRight=90,this.HVFF=null,this.doRotate(this.LeftOrRight),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"RightHandler",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_rotation("LR"),Fotor.mainCanvas.fotorEngine.refresh_record(),this.LeftOrRight=-90,this.HVFF=null,this.doRotate(this.LeftOrRight),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"HorizontalHandler",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_rotation("HF"),Fotor.mainCanvas.fotorEngine.refresh_record(),this.HVFF=!0,this.LeftOrRight=0,this.doHVFF(this.HVFF),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"VerticalHandler",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_rotation("VF"),Fotor.mainCanvas.fotorEngine.refresh_record(),this.HVFF=!1,this.LeftOrRight=0,this.doHVFF(this.HVFF),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"getDefaultHistoryData",value:function(){var e={};return e.rotateVal=0,e.docWidth=Fotor.mainCanvas.documentWidth,e.docHeight=Fotor.mainCanvas.documentHeight,e.LeftOrRight=0,e.HVFF=null,e.currentStep=-1,e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.rotateVal=parseInt(this.refs.rotate.val()),e.docWidth=Fotor.mainCanvas.documentWidth,e.docHeight=Fotor.mainCanvas.documentHeight,e.LeftOrRight=this.LeftOrRight,e.HVFF=this.HVFF,e.currentStep=Fotor.historyManager.currentStep+1,e}},{key:"loadTempHistoryData",value:function(e,t){if(t?(this.hadchanged=!1,this.refs.rotate.setDefault(e.rotateVal),this.rotateVal=e.rotateVal,Fotor.mainCanvas.resetCanvasSize(e.docWidth,e.docHeight),Fotor.mainCanvas.editorZoomFit()):this.hadchanged||(this.hadchanged=!0),0!=e.rotateVal)this.refs.rotate.setDefault(e.rotateVal),this.rotateVal=e.rotateVal,Fotor.mainCanvas.resetCanvasSize(e.docWidth,e.docHeight),Fotor.mainCanvas.editorZoomFit();else if(-1!=e.currentStep)if(e.currentStep>Fotor.historyManager.currentStep)this.LeftOrRight=e.LeftOrRight,0!=this.LeftOrRight&&this.doRotate(this.LeftOrRight),this.HVFF=e.HVFF,null!=this.HVFF&&this.doHVFF(!this.HVFF);else{var a=Fotor.historyManager.readStep(Fotor.historyManager.currentStep);this.LeftOrRight=a.afterData.toolData.LeftOrRight,0!=this.LeftOrRight&&this.doRotate(-1*this.LeftOrRight),this.HVFF=a.afterData.toolData.HVFF,null!=this.HVFF&&this.doHVFF(!this.HVFF)}}},{key:"doRotate",value:function(e){var t=e*Math.PI/180,a=Fotor.mainCanvas.canvas.documentBounds;Fotor.mainCanvas.resetCanvasSize(a.height,a.width);var r=new FotorUtils.Geom.Matrix;r.rotate(t);for(var n=fabric.util.transformRectangle(a,r.toArray()),o=0,i=Fotor.mainCanvas.canvas._objects.length;o<i;o++){var s=Fotor.mainCanvas.canvas._objects[o].calcTransformMatrix(),l=fabric.util.multiplyTransformMatrices(r.toArray(),s),c=fabric.util.qrDecompose(l);console.log(c);var h=Fotor.mainCanvas.canvas._objects[o];h.set({left:c.translateX-n.x,top:c.translateY-n.y,angle:c.angle,scaleX:c.scaleX*(h.flipX?-1:1),scaleY:c.scaleY*(h.flipY?-1:1)})}Fotor.mainCanvas.editorZoomFit()}},{key:"doHVFF",value:function(e){var t=(e?Math.PI:Math.PI,Fotor.mainCanvas.canvas.documentBounds),a=new FotorUtils.Geom.Matrix;a.scale(e?-1:1,e?1:-1);var r=fabric.util.transformRectangle(t,a.toArray());console.log(r);for(var n=0,o=Fotor.mainCanvas.canvas._objects.length;n<o;n++){var i=Fotor.mainCanvas.canvas._objects[n].calcTransformMatrix(),s=fabric.util.multiplyTransformMatrices(a.toArray(),i),l=fabric.util.qrDecompose(s);console.log(l);var c=Fotor.mainCanvas.canvas._objects[n];c.set({left:l.translateX-r.x,top:l.translateY-r.y,angle:l.angle,scaleX:l.scaleX*(c.flipX?-1:1),scaleY:l.scaleY*(c.flipY?-1:1)})}Fotor.mainCanvas.editorZoomFit()}},{key:"initUnfoldUI",value:function(){this.refs.rotate.setDefault(0),this.setState({})}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"afterfold",value:function(){this.hadchanged&&Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1,s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_rotate,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("ul",{id:"colorChannel",className:"inline-list clearfix"},e.createElement("li",{onClick:this.LeftHandler},e.createElement("i",{className:"icon-rotate-34 rotate-left"})),e.createElement("li",{onClick:this.RightHandler},e.createElement("i",{className:"icon-rotate-34 rotate-right"})),e.createElement("li",{onClick:this.HorizontalHandler,className:"pull-right"},e.createElement("i",{className:"icon-rotate-34 flip-h"})),e.createElement("li",{onClick:this.VerticalHandler,className:"pull-right"},e.createElement("i",{className:"icon-rotate-34 flip-v"}))),e.createElement("div",{className:"marginT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_rotateStraighten,e.createElement("span",{className:"pull-right",ref:"rotateSpan"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"rotate",max:"45",min:"-45",default:"0",className:"input-range-grey",bindEle:this.refs.rotateSpan,onChange:this.handleValueChange,onChanged:this.handleValueChanged}))))}}]),a}(l.default));t.default=c}).call(t,a(0))},function(e,t,a){"use strict";(function(e,r,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var h=a(82),d=(a(1001),a(1058)),u=function(t){function a(e){o(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.curveBoxChange=t.curveBoxChange.bind(t),t.curveBoxChangeEnd=t.curveBoxChangeEnd.bind(t),t.showrgbBox=t.showrgbBox.bind(t),t.showrBox=t.showrBox.bind(t),t.showgBox=t.showgBox.bind(t),t.showbBox=t.showbBox.bind(t),t.reSetAllBox=t.reSetAllBox.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return s(a,t),l(a,[{key:"showrBox",value:function(t){if(t){var a=this.findParentLiDOM(t.target);e(a).parent().find("li").removeClass("active"),e(a).addClass("active")}var n=r.findDOMNode(this.refs.rBox),o=r.findDOMNode(this.refs.gBox),i=r.findDOMNode(this.refs.bBox),s=r.findDOMNode(this.refs.rgbBox);e(n).css("display","block"),e(o).css("display","none"),e(i).css("display","none"),e(s).css("display","none");var l=this.refs.rBox,c=this.refs.gBox,h=this.refs.bBox,d=this.refs.rgbBox;null!=l.state.boxAddEvent&&l.state.boxAddEvent(),null!=c.state.boxRemoveEvent&&c.state.boxRemoveEvent(),null!=h.state.boxRemoveEvent&&h.state.boxRemoveEvent(),null!=d.state.boxRemoveEvent&&d.state.boxRemoveEvent(),l.setCurvePenColor("#ff0000")}},{key:"showgBox",value:function(t){if(t){var a=this.findParentLiDOM(t.target);e(a).parent().find("li").removeClass("active"),e(a).addClass("active")}var n=r.findDOMNode(this.refs.rBox),o=r.findDOMNode(this.refs.gBox),i=r.findDOMNode(this.refs.bBox),s=r.findDOMNode(this.refs.rgbBox);e(n).css("display","none"),e(o).css("display","block"),e(i).css("display","none"),e(s).css("display","none");var l=this.refs.rBox,c=this.refs.gBox,h=this.refs.bBox,d=this.refs.rgbBox;null!=l.state.boxRemoveEvent&&l.state.boxRemoveEvent(),null!=c.state.boxAddEvent&&c.state.boxAddEvent(),null!=h.state.boxRemoveEvent&&h.state.boxRemoveEvent(),null!=d.state.boxRemoveEvent&&d.state.boxRemoveEvent(),c.setCurvePenColor("#00ff00")}},{key:"showbBox",value:function(t){if(t){var a=this.findParentLiDOM(t.target);e(a).parent().find("li").removeClass("active"),e(a).addClass("active")}var n=r.findDOMNode(this.refs.rBox),o=r.findDOMNode(this.refs.gBox),i=r.findDOMNode(this.refs.bBox),s=r.findDOMNode(this.refs.rgbBox);e(n).css("display","none"),e(o).css("display","none"),e(i).css("display","block"),e(s).css("display","none");var l=this.refs.rBox,c=this.refs.gBox,h=this.refs.bBox,d=this.refs.rgbBox;null!=l.state.boxRemoveEvent&&l.state.boxRemoveEvent(),null!=c.state.boxRemoveEvent&&c.state.boxRemoveEvent(),null!=h.state.boxAddEvent&&h.state.boxAddEvent(),null!=d.state.boxRemoveEvent&&d.state.boxRemoveEvent(),h.setCurvePenColor("#0000ff")}},{key:"showrgbBox",value:function(t){if(t){var a=this.findParentLiDOM(t.target);e(a).parent().find("li").removeClass("active"),e(a).addClass("active")}var n=r.findDOMNode(this.refs.rBox),o=r.findDOMNode(this.refs.gBox),i=r.findDOMNode(this.refs.bBox),s=r.findDOMNode(this.refs.rgbBox);e(n).css("display","none"),e(o).css("display","none"),e(i).css("display","none"),e(s).css("display","block");var l=this.refs.rBox,c=this.refs.gBox,h=this.refs.bBox,d=this.refs.rgbBox;null!=l.state.boxRemoveEvent&&l.state.boxRemoveEvent(),null!=c.state.boxRemoveEvent&&c.state.boxRemoveEvent(),null!=h.state.boxRemoveEvent&&h.state.boxRemoveEvent(),null!=d.state.boxAddEvent&&d.state.boxAddEvent(),d.setCurvePenColor("#8c8c8c")}},{key:"showNullBox",value:function(){var t=r.findDOMNode(this.refs.rBox),a=r.findDOMNode(this.refs.gBox),n=r.findDOMNode(this.refs.bBox),o=r.findDOMNode(this.refs.rgbBox);e(t).css("display","none"),e(a).css("display","none"),e(n).css("display","none"),e(o).css("display","none");var i=this.refs.rBox,s=this.refs.gBox,l=this.refs.bBox,c=this.refs.rgbBox;null!=i.state.boxRemoveEvent&&i.state.boxRemoveEvent(),null!=s.state.boxRemoveEvent&&s.state.boxRemoveEvent(),null!=l.state.boxRemoveEvent&&l.state.boxRemoveEvent(),null!=c.state.boxRemoveEvent&&c.state.boxRemoveEvent()}},{key:"reSetAllBox",value:function(e){var t=this.refs.rBox,a=this.refs.gBox,r=this.refs.bBox,n=this.refs.rgbBox;null!=t.state.reSet&&t.state.reSet(),null!=a.state.reSet&&a.state.reSet(),null!=r.state.reSet&&r.state.reSet(),null!=n.state.reSet&&n.state.reSet();var o=this.pointsToString(n.state.pointsArray),i=this.pointsToString(t.state.pointsArray),s=this.pointsToString(a.state.pointsArray),l=this.pointsToString(r.state.pointsArray);e&&(Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.curve(i,s,l,o)),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData()))}},{key:"pointsToString",value:function(e){var t="",a=e.length;if(a>0)for(var r=0;r<a;r++)t+="point "+e[r].x+" "+e[r].y+" ";else 0==a&&(t+="point 0 0 ",t+="point 255 255 ");return t}},{key:"curveBoxChange",value:function(e){this.hadchanged=!0;var t=this.refs.rBox,a=this.refs.gBox,r=this.refs.bBox,n=this.refs.rgbBox,o=this.pointsToString(n.state.pointsArray),i=this.pointsToString(t.state.pointsArray),s=this.pointsToString(a.state.pointsArray),l=this.pointsToString(r.state.pointsArray);Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.curve(i,s,l,o))}},{key:"curveBoxChangeEnd",value:function(e){this.curveBoxChange(e),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"getDefaultHistoryData",value:function(){var e={};return e.MasterCurve=[{x:0,y:0},{x:255,y:255}],e.RedCurve=[{x:0,y:0},{x:255,y:255}],e.GreenCurve=[{x:0,y:0},{x:255,y:255}],e.BlueCurve=[{x:0,y:0},{x:255,y:255}],e.currentBox="RGB",e}},{key:"getCurrentHistoryData",value:function(){var e={},t=this.refs.rBox,a=this.refs.gBox,r=this.refs.bBox,n=this.refs.rgbBox;return e.currentBox=this.refs.dropSelectDom.val(),e.MasterCurve=n.state.pointsArray,e.RedCurve=t.state.pointsArray,e.GreenCurve=a.state.pointsArray,e.BlueCurve=r.state.pointsArray,e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0);var a=this.refs.rBox,r=this.refs.gBox,n=this.refs.bBox,o=this.refs.rgbBox;this.refs.dropSelectDom.setValue(e.currentBox),this.handleSelectChange(e.currentBox),this.boxLoadHistory(o,e.MasterCurve),this.boxLoadHistory(a,e.RedCurve),this.boxLoadHistory(r,e.GreenCurve),this.boxLoadHistory(n,e.BlueCurve)}},{key:"boxLoadHistory",value:function(e,t){e.state.setCurvePts(t)}},{key:"findParentLiDOM",value:function(t){var a=e(t).parent();return e(a).hasClass("inline-list")?t:this.findParentLiDOM(e(a))}},{key:"applyHandler",value:function(){this.fold()}},{key:"preFold",value:function(){c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"preFold",this).call(this);var e=this,t=e.refs.rBox,r=e.refs.gBox,n=e.refs.bBox,o=e.refs.rgbBox;o.off("change",e.curveBoxChange),t.off("change",e.curveBoxChange),r.off("change",e.curveBoxChange),n.off("change",e.curveBoxChange),o.off("changeEnd",e.curveBoxChangeEnd),t.off("changeEnd",e.curveBoxChangeEnd),r.off("changeEnd",e.curveBoxChangeEnd),n.off("changeEnd",e.curveBoxChangeEnd),this.showNullBox()}},{key:"afterfold",value:function(){this.hadchanged&&Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1,c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this);var e=this,t=this.refs.rBox,r=this.refs.gBox,n=this.refs.bBox,o=this.refs.rgbBox;o.on("change",e.curveBoxChange),t.on("change",e.curveBoxChange),r.on("change",e.curveBoxChange),n.on("change",e.curveBoxChange),o.on("changeEnd",e.curveBoxChangeEnd),t.on("changeEnd",e.curveBoxChangeEnd),r.on("changeEnd",e.curveBoxChangeEnd),n.on("changeEnd",e.curveBoxChangeEnd),Fotor.progressBar.hide()}},{key:"initUnfoldUI",value:function(){var e=this;e.reSetAllBox(null),e.showrgbBox(null),this.setState({})}},{key:"render",value:function(){return n.createElement("div",{className:"clearfix"},n.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_curves,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},this.isUnfold&&n.createElement("div",{className:"editor-folder-inner clearfix"},n.createElement(Fotor.ui.SelectDrop,{ref:"dropSelectDom",defaultValue:Fotor.globalConfig.lang.editor_workspace_basic_curvesRGB,items:[Fotor.globalConfig.lang.editor_workspace_basic_curvesRGB,Fotor.globalConfig.lang.editor_workspace_basic_curvesR,Fotor.globalConfig.lang.editor_workspace_basic_curvesG,Fotor.globalConfig.lang.editor_workspace_basic_curvesB],className:"no-scroll",displayItems:5,onChange:this.handleSelectChange.bind(this)}),n.createElement("div",{className:"clearfix"},n.createElement(d,{ref:"rgbBox"}),n.createElement(d,{ref:"rBox"}),n.createElement(d,{ref:"gBox"}),n.createElement(d,{ref:"bBox"})),n.createElement("div",{className:"clearfix editor-folder-btns paddingT5 paddingB5"},n.createElement("a",{className:"btn btn-warning apply-btn",onClick:this.reSetAllBox},Fotor.globalConfig.lang.editor_workspace_basic_curvesRGBResetButton)))))}},{key:"handleSelectChange",value:function(e){switch(e){case Fotor.globalConfig.lang.editor_workspace_basic_curvesRGB:this.showrgbBox();break;case Fotor.globalConfig.lang.editor_workspace_basic_curvesR:this.showrBox();break;case Fotor.globalConfig.lang.editor_workspace_basic_curvesG:this.showgBox();break;case Fotor.globalConfig.lang.editor_workspace_basic_curvesB:this.showbBox()}}}]),a}(h.default);t.default=u}).call(t,a(1),a(15),a(0))},function(e,t,a){(function(t,r,n){var o=a(13),i=function(e){return e&&e.__esModule?e:{default:e}}(o);a(1059);var s=a(1001),l=a(5),c=l({displayName:"curveBox",mixins:[Fotor.Evented],getInitialState:function(){return{curvePts:[],pointsArray:[],curvePenColor:"#8c8c8c",resize:null,reDrawFun:null,boxAddEvent:null,boxRemoveEvent:null,reSet:null,setCurvePts:null,curveboxSize:260}},setCurvePenColor:function(e){this.state.curvePenColor=e,null!=this.state.reDrawFun&&this.state.reDrawFun()},curvePtsPush:function(e){var t=this.state.curvePts;t.push(e),this.setState({curvePts:t})},curvePtsSplice:function(e,t,a){var r=this.state.curvePts;void 0==a?r.splice(e,t):r.splice(e,t,a),this.setState({curvePts:r})},componentWillUnmount:function(){t(window).off("layoutChange",this.resizeFuc),Fotor.app.off(i.default.THEME_CHANGE,this.resizeFuc)},componentDidMount:function(){function e(){M=w.state.curveboxSize,S=w.state.curveboxSize;var e="black"==Fotor.globalConfig.theme;N="#1e1e1e",P=e?"#323232":"#ebebeb",B=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(N),.01),z=new jsDraw2DX.jxBrush(new jsDraw2DX.jxColor(P)),U=new jsDraw2DX.jxRect(new jsDraw2DX.jxPoint(0,0),M,S,B,z),G=e?"#3c3c3e":"#d2d2d2",O="#ac975e",j=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(G),1),L=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(O),1),H=5,Z=5,U.remove(),U=new jsDraw2DX.jxRect(new jsDraw2DX.jxPoint(0,0),M,S,B,z),U.draw(T),a(!0),C()}function a(e){var t=M/H,a=S/Z,r=H-1,n=Z-1;if(e){for(var o=0;o<Y.length;o++)Y[o].remove();Y=[]}for(var i=0;i<r;i++){var s=t*(i+1),l=new jsDraw2DX.jxLine(new jsDraw2DX.jxPoint(s,0),new jsDraw2DX.jxPoint(s,S),j);l.draw(D),Y.push(l)}for(var c=0;c<n;c++){var h=a*(c+1),l=new jsDraw2DX.jxLine(new jsDraw2DX.jxPoint(0,h),new jsDraw2DX.jxPoint(M,h),j);l.draw(D),Y.push(l)}var d=new jsDraw2DX.jxLine(new jsDraw2DX.jxPoint(0,S),new jsDraw2DX.jxPoint(M,0),L);d.draw(D),Y.push(d)}function n(){F.addEventListener("mousemove",m),F.addEventListener("mousedown",c),F.addEventListener("mouseup",p),t(document).on("mouseup",p)}function o(){F.removeEventListener("mousemove",m),F.removeEventListener("mousedown",c),F.removeEventListener("mouseup",p),t(document).on("mouseup",p)}function l(e,t){var a=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(w.state.curvePenColor),$),r=new jsDraw2DX.jxLine(e,t,a);return r.draw(R),r}function c(e,t){var a,r=event.offsetX,n=event.offsetY,o=y(r,n),i=h(o);i>-2&&(i>=0?se=i:-1!=(a=d(o.x))&&(u(a,o),se=a,C(),ie=null),se>-1&&(le=!0))}function h(e){if(e.x<=0)return 0;if(e.x>=255)return w.state.curvePts.length-1;var t=Math.max(0,Math.min(255,f().calculateY(e.x)));if(Math.abs(t-e.y)<=20){for(var a,r=0,n=-1,o=10;r<w.state.curvePts.length&&(a=Math.abs(w.state.curvePts[r].x-e.x),a<o&&(o=a,n=r),!(w.state.curvePts[r].x>e.x));)r++;return n}return-2}function d(e){for(var t=0;t<w.state.curvePts.length;t++){if(w.state.curvePts[t].x>=e)return t}return-1}function u(e,t){e>=0&&e<=w.state.curvePts.length&&w.curvePtsSplice(e,0,t)}function p(e,t){le&&(ae=!0,se>-1&&(le=!1,re||C()),W=-1,Q=-1,re=!1,se=-1)}function m(e){ee=event.offsetX,te=event.offsetY,ee<0&&(ee=0),te<0&&(te=0),ee>M&&(ee=M),te>S&&(te=S);var t=!1,a=y(ee,te);if(a.x=Math.round(a.x),a.y=Math.round(a.y),se>-1){var r=0,n=255;se>0&&(r=w.state.curvePts[se-1].x+2);var o=se+(re?0:1);if(o<w.state.curvePts.length&&(n=w.state.curvePts[o].x-2),t=!1,(se>0&&se<w.state.curvePts.length-1||re)&&(t=a.x<r-1||a.x>n+1||a.y<0||a.y>255),t!=re&&(t?(W=-1,Q=-1,w.curvePtsSplice(se,1),oe=!0,C(),ie=null):u(se,new jsDraw2DX.jxPoint(0,0)),re=t),!re){var i=w.state.curvePts[se];W=Math.max(Math.min(Math.round(a.x),n),r),Q=Math.max(Math.min(Math.round(a.y),255),0),i.x=W,i.y=Q,ne=!0,C(),ie=null}}}function f(){if(null==ie){ie=s.createNew();for(var e=0;e<w.state.curvePts.length;e++){var t=w.state.curvePts[e];ie.add(t.x,t.y)}}return ie}function g(){w.state.curvePts=[],w.curvePtsPush(new jsDraw2DX.jxPoint(0,0)),w.curvePtsPush(new jsDraw2DX.jxPoint(255,255)),null!=ie&&(ie=null),C()}function v(e){if(e)if(e.length>0){w.state.curvePts=[];for(var t=0;t<e.length;t++)w.curvePtsPush(new jsDraw2DX.jxPoint(e[t].x,e[t].y));null!=ie&&(ie=null),C()}else g()}function b(e){if(V&&0!=V.length){for(var t=0;t<V.length;t++)V[t].remove();V=[]}else V=[];var a=new jsDraw2DX.jxPoint(0,0),r=new jsDraw2DX.jxPoint(0,0);for(a=y(r.x,r.y),a.y=Math.max(Math.min(e.calculateY(a.x),255),0);a.x<=255;){r.x++;var n=y(r.x,r.y);n.y=Math.max(Math.min(e.calculateY(a.x),255),0);var o=x(a.x,a.y),i=x(n.x,n.y),s=l(o,i);V.push(s),a.x=n.x,a.y=n.y}}function _(e,t){var a=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(q),.01),r=new jsDraw2DX.jxBrush(new jsDraw2DX.jxColor(K));e<X&&(e=X),e>M-X&&(e=M-X),t<X&&(t=X),t>S-X&&(t=S-X);var n=new jsDraw2DX.jxCircle(new jsDraw2DX.jxPoint(e,t),X,a,r);n.draw(R),J.push(n)}function y(e,t){var a=255*e/(M-1),r=255*(M-1-t)/(M-1);return new jsDraw2DX.jxPoint(a,r)}function x(e,t){var a=e*(M-1)/255,r=M-1-t*(M-1)/255;return new jsDraw2DX.jxPoint(a,r)}function C(){if(null!=f()){var e=w.state.curvePts.length;if(J&&0!=J.length){for(var t=0;t<J.length;t++)J[t].remove();J=[]}else J=[];for(var a=0;a<e;a++){var r=x(w.state.curvePts[a].x,w.state.curvePts[a].y);_(r.x,r.y)}for(var n=new Array,o=0;o<w.state.curvePts.length;o++){var i=w.state.curvePts[o];n.push({x:i.x,y:i.y})}w.state.pointsArray=n,b(f()),(oe||ne)&&(oe=ne=!1,w.trigger("change")),ae&&(w.trigger("changeEnd"),ae=!1)}}var w=this,A=this.refs.curveBackGroundHolder,E=this.refs.curveBackLineHolder,F=this.refs.curveBoxDisplayHolder,k=r.findDOMNode(A),M=t(k).parent().width(),S=t(k).parent().height(),T=new jsDraw2DX.jxGraphics(A),D=new jsDraw2DX.jxGraphics(E),R=new jsDraw2DX.jxGraphics(F),I="black"==Fotor.globalConfig.theme,N="#1e1e1e",P=I?"#323232":"#f5f5f5",B=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(N),.01),z=new jsDraw2DX.jxBrush(new jsDraw2DX.jxColor(P)),U=new jsDraw2DX.jxRect(new jsDraw2DX.jxPoint(0,0),M,S,B,z);U.draw(T);var G=I?"#3c3c3e":"#d2d2d2",O="#ac975e",j=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(G),1),L=new jsDraw2DX.jxPen(new jsDraw2DX.jxColor(O),1),H=(new jsDraw2DX.jxLine(new jsDraw2DX.jxPoint(0,S),new jsDraw2DX.jxPoint(M,0),L),5),Z=5,Y=[];a(!1);var W,Q,V,J,X=4,q="#a0a0a0",K="#a0a0a0",$=1,ee=0,te=0,w=this,ae=!1,re=!1,ne=!1,oe=!1,ie=null,se=-1,le=!1;this.curvePtsPush(new jsDraw2DX.jxPoint(0,0)),this.curvePtsPush(new jsDraw2DX.jxPoint(255,255)),w.state.resize=e,w.state.reDrawFun=C,w.state.boxAddEvent=n,w.state.boxRemoveEvent=o,w.state.reSet=g,w.state.setCurvePts=v,this.resizeFuc(),t(window).on("layoutChange",this.resizeFuc),Fotor.app.on(i.default.THEME_CHANGE,this.resizeFuc)},resizeFuc:function(){var e=t(window).width(),a=260;e<Fotor.holderWidth()&&(a=196),this.setState({curveboxSize:a});var r=this;setTimeout(function(){r.state.resize()},200)},render:function(){return n.createElement("div",{className:"curvebox clearfix"},n.createElement("div",{ref:"curveBackGroundHolder",style:{position:"absolute",width:this.state.curveboxSize,height:this.state.curveboxSize}}),n.createElement("div",{ref:"curveBackLineHolder",style:{position:"absolute",width:this.state.curveboxSize,height:this.state.curveboxSize}}),n.createElement("div",{ref:"curveBoxDisplayHolder",style:{position:"absolute",width:this.state.curveboxSize,height:this.state.curveboxSize}}))}});e.exports=c}).call(t,a(1),a(15),a(0))},function(e,t,a){var r=a(1060);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){t=e.exports=a(2)(!1),t.push([e.i,".curvebox {\n  position: relative;\n  margin-top: 4px;\n  width: 100%;\n  padding-top: 100%; }\n  .curvebox div {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%; }\n",""])},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=function(t){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.intensity_value=0,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="basic",t}return o(a,t),i(a,[{key:"handleIntensityChange",value:function(e){this.hadchanged=!0,this.intensity_value=this.refs.intensity.val(),e&&this.updataProcess()}},{key:"handleIntensityChanged",value:function(){this.handleIntensityChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=.008*this.intensity_value,t=Fotor.EngineAction.vignette(e);Fotor.mainCanvas.fotorEngine.process_rule(t)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.intensity=0,e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.intensity=parseInt(this.refs.intensity.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.intensity.setDefault(e.intensity),this.intensity_value=this.refs.intensity.val()}},{key:"applyHandler",value:function(){this.fold()}},{key:"afterfold",value:function(){this.hadchanged&&(Fotor.mainCanvas.applyEditorPic(),this.hadchanged=!1),s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"initUnfoldUI",value:function(){this.refs.intensity.setDefault(0),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_basic_vignette||"vignette",onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"marginT5 clearfix"},Fotor.globalConfig.lang.editor_workspace_basic_vignette_intensity||"intensity",e.createElement("span",{ref:"intensitySpan",className:"pull-right"},"0")),e.createElement(Fotor.ui.InputRange,{ref:"intensity",type:"range",max:"100",min:"0",default:"0",bindEle:this.refs.intensitySpan,className:"input-range-grey",onChange:this.handleIntensityChange.bind(this),onChanged:this.handleIntensityChanged.bind(this)}))))}}]),a}(l.default);t.default=c}).call(t,a(0))},function(e,t,a){var r=a(1063);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,".basic-hdr {\n  position: relative;\n  z-index: 11;\n  display: block;\n  margin-top: 8px;\n  margin-left: 4px;\n  width: 300px;\n  height: 210px;\n  background: url("+r(a(1064))+");\n  background-size: cover;\n  -webkit-background-size: cover;\n  -moz-background-size: cover;\n  cursor: pointer; }\n\n.basic-hdr_zh_CN {\n  background-image: url("+r(a(1065))+"); }\n\n.basic-hdr_de_DE {\n  background-image: url("+r(a(1066))+"); }\n\n.basic-hdr_fr_FR {\n  background-image: url("+r(a(1067))+"); }\n\n.basic-hdr_ja_JP {\n  background-image: url("+r(a(1068))+"); }\n\n.basic-hdr_ru_RU {\n  background-image: url("+r(a(1069))+"); }\n\n.basic-hdr_zh_TW {\n  background-image: url("+r(a(1070))+"); }\n\n.basic-hdr_es_ES {\n  background-image: url("+r(a(1071))+"); }\n\n.basic-hdr_pt_BR {\n  background-image: url("+r(a(1072))+"); }\n\n@media (max-width: 1279px) {\n  body.no-ads .basic-hdr {\n    width: 226px;\n    height: 158px; } }\n\n@media (max-width: 1439px) {\n  body.ads .basic-hdr {\n    width: 226px;\n    height: 158px; } }\n",""])},function(e,t,a){e.exports=a.p+"images/en_US6384b88574a9fd2812abd29e4c4fae03.png"},function(e,t,a){e.exports=a.p+"images/zh_CNf2028ee7d92884ba2f947a9764d39aea.png"},function(e,t,a){e.exports=a.p+"images/de_DE2e5f55c421aa95bce476ffe1e8dc73d9.png"},function(e,t,a){e.exports=a.p+"images/fr_FRdc350de23880c798e6b5452a3c16a2cc.png"},function(e,t,a){e.exports=a.p+"images/ja_JP00e6357397be5e7ac10668c21c772828.png"},function(e,t,a){e.exports=a.p+"images/ru_RUb2af4f98d8cf80f6606ccea3045efabb.png"},function(e,t,a){e.exports=a.p+"images/zh_TW8510480b2bfddbd1ab2db5d4fee3b9b1.png"},function(e,t,a){e.exports=a.p+"images/es_ESf079f5b4452ee979192b310a6ec7ae55.png"},function(e,t,a){e.exports=a.p+"images/pt_BRdbb34044e85aeee969408cfadc3a394a.png"},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i,s=a(1074),l=n(s),c=a(1075),h=(n(c),a(1094)),d=n(h),u=a(1114),p=n(u),m=a(1117),f=n(m),g=a(1118),v=n(g),b=a(1120),_=n(b),y=a(1125),x=n(y),C=a(1130),w=n(C),A=a(1131),E=n(A),F=a(166),k=n(F),M=a(6),S=n(M),T=a(8),D=n(T),R=a(13),I=n(R),N=a(779),P=n(N);a(1132);var B=a(20).default,z=a(5),U=z((i={displayName:"EffectList",mixins:[Fotor.mixin],ismount:!1,actionNewbieGuideName:"editorEffectList",newbieGuideUpdateId:0,getInitialState:function(){return{scrollArea:null,langChange:!1,newbieGuide:!1,effectList:["Artistic","Returned","Classic","Warmwinter","Christmas","Festive","Cinematic","Sunnedup","Lomo","Chromed","Mono","Vintage","Filmatic","Disposable","Serenity","Funky","Cool","Scenes","Bandw","Analog","Groovy","Mellow","Grayscale","Purity","Retro","Oilpainted","Refreshing","Spring","Faded","Vignetteparty"]}},componentDidMount:function(){this.ismount=!0,this.removeLoading(),this.setState({scrollArea:this.refs.scrollArea}),Fotor.favoriteManager.on(k.default.UPDATE,this.updateData),Fotor.app.on(k.default.UPDATE,this.updateData),Fotor.mainCanvas?this.init():Fotor.app.on(S.default.APP_INIT,this.init)},componentWillUnmount:function(){this.ismount=!1,Fotor.favoriteManager.off(k.default.UPDATE,this.updateData),Fotor.app.off(k.default.UPDATE,this.updateData),Fotor.app.off(I.default.LANGUAGE_CHANGE,this.updateLang),Fotor.mainCanvas.off(D.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.off(D.default.EXIT_EDITOR_MODE,this.updateData)},init:function(){Fotor.mainCanvas.on(D.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.on(D.default.EXIT_EDITOR_MODE,this.updateData),Fotor.app.on(I.default.LANGUAGE_CHANGE,this.updateLang),this.newbieGuideDetect()},newbieGuideDetect:function(){Fotor.newbieGuide&&!Fotor.newbieGuide.guide.editor.effect&&this.refs.scrollArea&&Fotor.mainCanvas&&Fotor.mainCanvas.editorMode&&!Fotor.plusEditorMode&&!Fotor.isSampleRouter?Fotor.newbieGuide.doAction({name:this.actionNewbieGuideName,show:this.showNewbieGuide,hide:this.hideNewbieGuide}):this.hideNewbieGuide()},showNewbieGuide:function(){var e=this;setTimeout(function(){return e.refs.scrollArea.scrollBottom()},1200),this.setState({newbieGuide:!0}),this.updateLang(),this.newbieGuideUpdateId=setInterval(this.updateNewbieGuidPosition,50)},updateNewbieGuidPosition:function(){if(t("#tiltShiftTool").length>0&&t("#effect-newbie-guide").length>0){var e=t("#tiltShiftTool").offset(),a=t("#effect-newbie-guide").height();t("#effect-newbie-guide").css("top",e.top-a/2-64-20),t("#effect-newbie-guide").css("display","block")}},updateData:function(){this.ismount&&(this.forceUpdate(),this.newbieGuideDetect())},updateLang:function(){var e=this;this.ismount&&(this.setState({langChange:!0}),setTimeout(function(){e.ismount&&e.setState({langChange:!1})},300))}},o(i,"componentWillUnmount",function(){Fotor.favoriteManager.off(k.default.UPDATE,this.updateData),Fotor.app.off(S.default.APP_INIT,this.init),Fotor.mainCanvas.off(D.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.off(D.default.EXIT_EDITOR_MODE,this.updateData),Fotor.app.off(I.default.LANGUAGE_CHANGE,this.updateLang),this.hideNewbieGuide(),Fotor.newbieGuide&&Fotor.newbieGuide.removeActionByName(this.actionNewbieGuideName)}),o(i,"handleScroll",function(e){e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200)}),o(i,"render",function(){var e=this;return r.createElement("div",{id:"toolbar"},r.createElement("div",{className:"toolbar-cover",style:{display:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode?"none":"block"}}),r.createElement("div",{className:"toolbar-loading"},r.createElement("div",{className:"loading-round"},r.createElement("div",null),r.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),r.createElement(P.default,{ref:"helpTip"}),r.createElement("div",{className:"toolbar"},r.createElement("div",{className:"toolbar-list"},r.createElement(B,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},!Fotor.plusEditorMode&&!Fotor.frameMode&&r.createElement("a",{href:"http://goart.fotor.com/pc/",target:"_blank",className:"goartLink "+FotorUtils.I18N.getLocale()}),r.createElement(E.default,{className:"marginT0",scroller:this.state.scrollArea,langChange:this.state.langChange}),this.state.effectList.map(function(t){return r.createElement(l.default,{toolName:t,effectGroupId:t,key:t,scroller:e.state.scrollArea,langChange:e.state.langChange})}),r.createElement(d.default,{toolName:"MagicBrush",effectGroupId:"MagicBrush",scroller:this.state.scrollArea,langChange:this.state.langChange}),r.createElement(_.default,{toolName:"LensFlare",effectGroupId:"LensFlare",scroller:this.state.scrollArea,langChange:this.state.langChange}),r.createElement(w.default,{toolName:"Particles",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide}),r.createElement(p.default,{toolName:"ColorSplash",effectGroupId:"ColorSplash",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(f.default,{toolName:"Pixelate",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide}),r.createElement(x.default,{toolName:"TiltShift",ref:"TiltShift",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(v.default,{toolName:"PhotoBlur",scroller:this.state.scrollArea,langChange:this.state.langChange,newbieGuide:this.state.newbieGuide,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement("div",{style:{height:"50px"}}," "))),this.state.newbieGuide&&!Fotor.plusEditorMode&&r.createElement("div",{id:"effect-newbie-guide",className:"active"},r.createElement("a",{className:"close",onClick:this.handleCloseNewbieGuide}),Fotor.globalConfig.lang.newbieGuide_editor_effect_special_tip,r.createElement("div",{className:"clearfix paddingT10"},r.createElement("a",{className:"skip",onClick:this.handleSkip},Fotor.globalConfig.lang.newbieGuide_skip_btn),r.createElement("a",{onClick:this.handleCloseNewbieGuide},Fotor.globalConfig.lang.newbieGuide_readBtn)))))}),o(i,"handleCloseNewbieGuide",function(){this.hideNewbieGuide(),Fotor.newbieGuide&&(Fotor.newbieGuide.guide.editor.effect=!0,Fotor.newbieGuide.saveGuide(),Fotor.newbieGuide.removeActionByName(this.actionNewbieGuideName))}),o(i,"handleSkip",function(){this.handleCloseNewbieGuide(),Fotor.newbieGuide&&Fotor.newbieGuide.skip()}),o(i,"hideNewbieGuide",function(){clearInterval(this.newbieGuideUpdateId),this.newbieGuideUpdateId=0,this.setState({newbieGuide:!1}),this.updateLang(),t("#effect-newbie-guide").css("display","none")}),o(i,"showHelpTip",function(e,t,a,r){this.refs.helpTip&&this.refs.helpTip.show(e,t,a,r)}),o(i,"hideHelpTip",function(){this.refs.helpTip&&this.refs.helpTip.hide()}),i));e.exports=U}).call(t,a(1),a(0))},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),a(1002)),h=function(t){function l(e){r(this,l);var t=n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.state.groupData=null,t.state.deEffect=!1,t.state.thumbImg=null,t.state.isSmallPic=!1,t.hadfoldItem=!0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return o(l,t),i(l,[{key:"loadData",value:function(e){var t=a(163)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"applyHandler",value:function(){s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["webglEffectItem_"+t].state.beSelected&&this.refs["webglEffectItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["webglEffectItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["webglEffectItem_"+t]&&this.refs["webglEffectItem_"+t].cancelHandler();this.state.isSmallPic=!1,s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"afterfold",this).call(this),this.setState({deEffect:!1})}},{key:"afterUnfold",value:function(){var e=this,t=!1;t=!0,setTimeout(function(){e.creatImgThumb(function(){if(t)for(var a=e.state.groupData.items.length,r=0;r<a;r++)e.refs["webglEffectItem_"+r].updataThumbImage();e.setState({deEffect:!0}),Fotor.progressBar.hide()})},100),e.setState({deEffect:!0})}},{key:"creatImgThumb",value:function(e){var t=this;Fotor.mainCanvas.requestDocumentToolThumb().then(function(a){Fotor.mainCanvas.doEffectCanvas||(Fotor.mainCanvas.doEffectCanvas=document.createElement("canvas")),Fotor.mainCanvas.doEffectCanvas.getContext("2d").clearRect(0,0,Fotor.mainCanvas.doEffectCanvas.width,Fotor.mainCanvas.doEffectCanvas.height),Fotor.mainCanvas.doEffectCanvas.setAttribute("width",a.width),Fotor.mainCanvas.doEffectCanvas.setAttribute("height",a.height),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.set_image(a,a.width,a.height,Fotor.mainCanvas.engineFluentSize,null,!0),Fotor.mainCanvas.effectThumb=a.toDataURL("image/jpeg",.7),t.state.thumbImg=Fotor.mainCanvas.effectThumb,e&&e()})}},{key:"componentWillReceiveProps",value:function(e){var t=this;e&&null==t.state.groupData&&t.setState({groupData:t.loadData(e.effectGroupId)})}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"loadTempHistoryData",value:function(e,t){var a=this;a.creatImgThumb(function(){for(var e=a.state.groupData.items.length,t=0;t<e;t++)a.refs["webglEffectItem_"+t]&&(a.refs["webglEffectItem_"+t].cancelHandler(),a.refs["webglEffectItem_"+t].updataThumbImage());a.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()})}},{key:"doItemUnFold",value:function(e){for(var t=this.state.groupData.items.length,a=0;a<t;a++)void 0==e||null==e||"toBig"==e||"updataThumb"==e?void 0==e||null==e||"toBig"==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):void 0!=e&&null!=e&&"updataThumb"!=e||this.refs["webglEffectItem_"+a].updataThumbImage():this.refs["webglEffectItem_"+a]!=e&&this.refs["webglEffectItem_"+a].state.beSelected?this.refs["webglEffectItem_"+a].setState({beSelected:!1}):this.refs["webglEffectItem_"+a]!=e||this.refs["webglEffectItem_"+a].state.beSelected?this.refs["webglEffectItem_"+a]==e&&this.refs["webglEffectItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({deEffect:!0})}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title]?Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase():"NO KEY: "+this.state.groupData.title,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},this.state.groupData.items.map(function(a,r){return e.createElement(c,{ref:"webglEffectItem_"+r,unFoldFun:t.doItemUnFold.bind(t),data:a,doEffect:t.state.deEffect,key:r,vip:t.state.groupData.isVip,effectGroupId:t.props.effectGroupId,thumbImg:t.state.thumbImg,scroller:t.props.scroller})}))):e.createElement("div",null)}}]),l}(l.default);t.default=h}).call(t,a(0))},function(e,t,a){"use strict";(function(e,r,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0}),a(1076);var h=a(82),d=a(1079),u=a(8),p=function(t){function h(e){o(this,h);var t=i(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e));return t.state.groupData=null,t.state.stickerGroup=null,t.state.btnImageSrc=null,t.state.faceDeformer=null,t.state.loadNextFun=null,t.state.loadNextIndex=null,t.state.jsLoadComplete=!1,t.state.faceFoundComplete=!1,t.state.picHasFace=!1,t.state.hadUsedVip=!1,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t.state.hideHelpTipTimeId=0,t}return s(h,t),l(h,[{key:"loadData",value:function(e){var t=a(163)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"loadImageSrc",value:function(e){if(e){for(var t=[],r=0;r<e.items.length;r++){var n=a(797)("./"+e.items[r].btnSrc+".png");t.push(n)}return t}}},{key:"loadStickerData",value:function(){var e=a(1088);return"string"==typeof e?""!==e&&(e=JSON.parse(e)):e=e,e}},{key:"applyHandler",value:function(){c(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"applyHandler",this).call(this);var t=this;this.state.hadUsedVip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.fotorEngine.clean();var a=document.createElement("canvas");e(a).attr({width:Fotor.mainCanvas.editorCanvasEle[0].width,height:Fotor.mainCanvas.editorCanvasEle[0].height}),a.getContext("2d")&&(a.getContext("2d").drawImage(Fotor.mainCanvas.editorCanvasEle[0],0,0),a.getContext("2d").drawImage(Fotor.mainCanvas.beautyCanvasEle[0],0,0)),Fotor.mainCanvas.fotorEngine.set_image(a,a.width,a.height,Fotor.mainCanvas.engineFluentSize,Fotor.mainCanvas.engineStep),Fotor.mainCanvas.applyEditorPic(t.applyfold)}},{key:"cancelHandler",value:function(){this.state.hadUsedVip&&Fotor.vipResManager.resetWaterMark(),this.tryFold()}},{key:"applyfold",value:function(){this.preFold(),this.afterfold(),c(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"fold",this).call(this);var t=this,a=r.findDOMNode(this.refs.toolTitle),n=r.findDOMNode(this.refs.toolContent);t.refs.toolTitle&&t.refs.toolTitle.deactivate&&this.refs.toolTitle.deactivate(),"block"==e(n).css("display")&&(e(n).slideUp("fast",function(){t.scrollerUpFix(t.props.scroller)}),e(a).removeClass("title-drop-active"))}},{key:"afterfold",value:function(){e(".halloweenImageDiv").find(".halloweenImage ").removeClass("effectSelected"),this.state.loadNextFun=null,this.state.loadNextIndex=null,this.state.jsLoadComplete=!1,this.state.faceFoundComplete=!1,this.state.picHasFace=!1,this.state.hadUsedVip=!1,Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(u.default.CONTENT_CHANGE),c(h.prototype.__proto__||Object.getPrototypeOf(h.prototype),"afterfold",this).call(this)}},{key:"afterUnfold",value:function(){FotorAnalytic.pageView("/editorTool/effect/halloween/afterUnfold",Fotor.routerManager.getToolPath()),Fotor.progressBar.hide();var e=this;a.e(11).then(function(){window.clm=a(1091),Fotor.common.utils.LoadScript("//pub-static.haozhaopian.net/static/web/share/js/libs/clmtrackr-dev/auto_face_deformer.js?version=1.86",e.afterJsLoad.bind(e))}.bind(null,a)).catch(a.oe),this.state.loadNextFun=null,this.state.loadNextIndex=null}},{key:"afterJsLoad",value:function(){var e=this;this.state.jsLoadComplete=!0,Fotor.mainCanvas.enterBeautyMode(!1,!1),document.addEventListener("faceFound",e.faceFoundHandler.bind(e)),document.addEventListener("faceNotFound",e.faceNotFoundHandler.bind(e)),e.state.faceDeformer=new autoFaceDeformer,e.state.faceDeformer.loadImage(Fotor.mainCanvas.editorCanvasEle[0]),e.state.faceDeformer.startDetection()}},{key:"faceFoundHandler",value:function(){this.state.picHasFace=!0,this.state.faceFoundComplete=!0,this.state.loadNextFun&&this.state.loadNextIndex&&this.state.loadNextFun(this.state.loadNextIndex),this.forceUpdate(),this.forceUpdate()}},{key:"faceNotFoundHandler",value:function(){this.state.picHasFace=!1,this.state.faceFoundComplete=!0,this.popNoFaceFrame(),this.forceUpdate(),this.forceUpdate()}},{key:"popNoFaceFrame",value:function(){Fotor.progressBar.hide(),e(".halloweenImageDiv").find(".halloweenImage ").removeClass("effectSelected"),Fotor.popup.doPopup({content:Fotor.globalConfig.lang.editor_workspace_effect_halloween_noface,confirmBtnText:Fotor.globalConfig.lang.newbieGuide_readBtn},function(){})}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e&&null==t.state.groupData){var a=t.loadData(e.effectGroupId),r=t.loadStickerData(),n=t.loadImageSrc(a);t.setState({groupData:a,btnImageSrc:n,stickerGroup:r})}}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"randomHalloweenEffect",value:function(){Fotor.progressBar.show(!0),e(".halloweenImageDiv").find(".halloweenImage ").removeClass("effectSelected"),this.state.jsLoadComplete&&this.state.faceFoundComplete?this.state.picHasFace?this.daRandomHalloweenEffect():this.popNoFaceFrame():(this.state.loadNextFun=this.daRandomHalloweenEffect.bind(this),this.state.loadNextIndex=999)}},{key:"daRandomHalloweenEffect",value:function(){FotorAnalytic.pageView("/editorTool/effect/halloweenTool/tryRandom",Fotor.routerManager.getToolPath());var e=this,t=[],r=new Image,n=new Image,o=new Image,i=new Image;r.crossOrigin="anonymous",n.crossOrigin="anonymous",o.crossOrigin="anonymous",i.crossOrigin="anonymous",r.onload=function(){if(t.push({img:r,points:e.state.groupData.items[0].commond,special:e.state.groupData.items[0].special}),t.length>=4){e.state.faceDeformer.drawToCanvas(t);var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(a.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),a.drawImage(e.state.faceDeformer.getCanvas(),0,0)):console.log("素材加载失败了哦..."),e.state.loadNextFun=null,e.state.loadNextIndex=null,Fotor.progressBar.hide()}},n.onload=function(){if(t.push({img:n,points:e.state.groupData.items[1].commond,special:e.state.groupData.items[1].special}),t.length>=4){e.state.faceDeformer.drawToCanvas(t);var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(a.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),a.drawImage(e.state.faceDeformer.getCanvas(),0,0)):console.log("素材加载失败了哦..."),e.state.loadNextFun=null,e.state.loadNextIndex=null,Fotor.progressBar.hide()}},o.onload=function(){if(t.push({img:o,points:e.state.groupData.items[2].commond,special:e.state.groupData.items[2].special}),t.length>=4){e.state.faceDeformer.drawToCanvas(t);var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(a.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),a.drawImage(e.state.faceDeformer.getCanvas(),0,0)):console.log("素材加载失败了哦..."),e.state.loadNextFun=null,e.state.loadNextIndex=null,Fotor.progressBar.hide()}},i.onload=function(){if(t.push({img:i,points:e.state.groupData.items[3].commond,special:e.state.groupData.items[3].special}),t.length>=4){e.state.faceDeformer.drawToCanvas(t);var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(a.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),a.drawImage(e.state.faceDeformer.getCanvas(),0,0)):console.log("素材加载失败了哦..."),e.state.loadNextFun=null,e.state.loadNextIndex=null,Fotor.progressBar.hide()}},new Promise(function(e){e()}).then(function(){r.src=a(797)("./"+e.state.groupData.items[0].faceSrc+".png"),n.src=a(797)("./"+e.state.groupData.items[1].faceSrc+".png"),o.src=a(797)("./"+e.state.groupData.items[2].faceSrc+".png"),i.src=a(797)("./"+e.state.groupData.items[3].faceSrc+".png")}.bind(null,a)).catch(a.oe),this.state.hadUsedVip=!1,this.state.hadUsedVip?Fotor.vipResManager.setEditorWaterMark():(Fotor.vipResManager.unsetEditorVip(),Fotor.vipResManager.resetWaterMark())}},{key:"findParentDOM",value:function(t){if(e(t).hasClass("halloweenImageDiv"))return t;var a=e(t).parent();return this.findParentDOM(a)}},{key:"doHalloweenEffect",value:function(t){var a=this.findParentDOM(e(t.target)),r=e(a).attr("data-index");e(".halloweenImageDiv").find(".halloweenImage ").removeClass("effectSelected"),e(a).find(".halloweenImage ").addClass("effectSelected"),Fotor.progressBar.show(!0),this.state.jsLoadComplete&&this.state.faceFoundComplete?this.state.picHasFace?this.doHalloweenEffectByIndex(r):this.popNoFaceFrame():(this.state.loadNextFun=this.doHalloweenEffectByIndex.bind(this),this.state.loadNextIndex=r)}},{key:"doHalloweenEffectByIndex",value:function(e){FotorAnalytic.pageView("/editorTool/effect/halloweenTool/tryEffectById"+e,Fotor.routerManager.getToolPath());var t=this,r=new Image;r.crossOrigin="anonymous",r.onload=function(){var a=[{img:r,points:t.state.groupData.items[e].commond,special:t.state.groupData.items[e].special}];t.state.faceDeformer.drawToCanvas(a);var n=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d")?(n.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),n.drawImage(t.state.faceDeformer.getCanvas(),0,0)):console.log("素材加载失败了哦..."),t.state.loadNextFun=null,t.state.loadNextIndex=null,Fotor.progressBar.hide()},new Promise(function(e){e()}).then(function(){r.src=a(797)("./"+t.state.groupData.items[e].faceSrc+".png")}.bind(null,a)).catch(a.oe),this.state.hadUsedVip=t.state.groupData.items[e].isVip,this.state.hadUsedVip?Fotor.vipResManager.setEditorWaterMark():(Fotor.vipResManager.unsetEditorVip(),Fotor.vipResManager.resetWaterMark())}},{key:"showStickerHelpTip",value:function(t){if(this.state.showHelpTip=!this.state.showHelpTip,this.state.showHelpTip){clearTimeout(this.state.hideHelpTipTimeId);var r=e(this.refs.stickerhelpTip).offset();this.props.showHelpTip&&this.props.showHelpTip(a(1089),Fotor.globalConfig.lang.editor_workspace_effect_halloween_stackers_tip,r.top-64,r.left-70)}t.stopPropagation()}},{key:"hideStickerHelpTip",value:function(){var e=this;clearTimeout(this.state.hideHelpTipTimeId),this.state.hideHelpTipTimeId=setTimeout(function(){e.state.showHelpTip=!1,e.props.hideHelpTip&&e.props.hideHelpTip()},300)}},{key:"render",value:function(){var e=this;if(null!=this.state.groupData){var t=this.state.stickerGroup.background;t&&""!=t&&"-1"==t.indexOf("#")&&(t="#"+t);var r={margin:"10px 0 0 0",display:"block",backgroundColor:t};return n.createElement("div",null,n.createElement(Fotor.ui.TitleDrop,{specialIcon:window.specialIcon&&window.specialIcon[window.specialIcon.festival],ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,helpTip:Fotor.globalConfig.lang.editor_workspace_effect_halloween_tip,helpTipGif:a(1090),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,text:Fotor.globalConfig.lang[this.state.groupData.title]?Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase():"NO KEY: "+this.state.groupData.title,onClick:this.handleToolFolderClick.bind(this)}),n.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},n.createElement("div",{style:{margin:"0 8px 8px 4px"}},n.createElement("div",{className:"clearfix marginT20"},n.createElement("div",{className:"halloween_faceText pull-left"},Fotor.globalConfig.lang.editor_workspace_effect_halloween_label_face),n.createElement(Fotor.ui.Button,{className:"halloween_randomBtn pull-right",ref:"uploadFileBtn",text:Fotor.globalConfig.lang.editor_workspace_effect_halloween_btn_random,onClick:e.randomHalloweenEffect.bind(this)})),n.createElement("div",{className:"clearfix halloween_t_line marginT20"}),n.createElement("div",{className:"clearfix"},this.state.groupData.items.map(function(t,a){return n.createElement("div",{className:"halloweenImageDiv",key:a,"data-index":t.index},n.createElement("div",{className:"halloweenImage",onClick:e.doHalloweenEffect.bind(e),style:{background:"url("+e.state.btnImageSrc[t.index]+") center"}}),n.createElement("div",{className:"halloweenName"}," ",Fotor.globalConfig.lang[t.name]))})),n.createElement("div",{className:"clearfix effect-item-btns paddingT20"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:e.applyHandler.bind(e)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:e.cancelHandler.bind(e)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)),n.createElement("div",{className:"clearfix halloween_b_line marginT30"}),n.createElement("div",null,n.createElement("div",{style:{display:"inline-block"}},Fotor.globalConfig.lang.editor_workspace_effect_halloween_label_stackers),n.createElement("span",{className:"halloween-help-tip",ref:"stickerhelpTip",onMouseOver:e.showStickerHelpTip.bind(e),onMouseOut:e.hideStickerHelpTip.bind(e),onClick:function(e){return e.stopPropagation()}})),n.createElement("div",{className:"clearfix clearfix sticker-group sticker-group-4",style:r},this.state.stickerGroup.items.map(function(e,t){return n.createElement(d,{data:e,display:!0,key:e.id,cols:4})})))))}return n.createElement("div",null)}}]),h}(h.default);t.default=p}).call(t,a(1),a(15),a(0))},function(e,t,a){var r=a(1077);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,"/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n.halloween_faceText {\n  font-size: 14px;\n  cursor: default;\n  color: #1e1e1e;\n  line-height: 30px;\n  vertical-align: middle; }\n\n.halloween_randomBtn {\n  line-height: 10px;\n  font-size: 12px; }\n\n.halloween_t_line {\n  width: 100%;\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.3);\n  margin-bottom: 20px; }\n\n.halloween_b_line {\n  width: 100%;\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.3);\n  margin-bottom: 30px; }\n\n.halloweenImageDiv {\n  display: inline-block;\n  position: relative;\n  width: 100px;\n  margin-right: 30px;\n  margin-left: 20px; }\n  .halloweenImageDiv .halloweenImage {\n    display: block;\n    cursor: pointer;\n    width: 100%;\n    height: 100px;\n    margin-top: 10px;\n    margin-bottom: 10px; }\n  .halloweenImageDiv .halloweenName {\n    width: 100%;\n    text-align: center;\n    color: #646464; }\n  .halloweenImageDiv:hover .halloweenImage {\n    box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3);\n    -webkit-box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3);\n    -moz-box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3); }\n  .halloweenImageDiv:hover .effectSelected {\n    box-shadow: 0 0 0 1px #ac9753;\n    -webkit-box-shadow: 0 0 0 1px #ac9753;\n    -moz-box-shadow: 0 0 0 1px #ac9753; }\n  .halloweenImageDiv:hover .halloweenName {\n    color: #646464; }\n  .halloweenImageDiv:active .halloweenImage {\n    box-shadow: 0 0 0 1px #ac975e;\n    -webkit-box-shadow: 0 0 0 1px #ac975e;\n    -moz-box-shadow: 0 0 0 1px #ac975e; }\n  .halloweenImageDiv:active .effectSelected {\n    box-shadow: 0 0 0 1px #ac9753;\n    -webkit-box-shadow: 0 0 0 1px #ac9753;\n    -moz-box-shadow: 0 0 0 1px #ac9753; }\n  .halloweenImageDiv:active .halloweenName {\n    color: #ac975e; }\n  .halloweenImageDiv .effectSelected {\n    box-shadow: 0 0 0 1px #ac9753;\n    -webkit-box-shadow: 0 0 0 1px #ac9753;\n    -moz-box-shadow: 0 0 0 1px #ac9753; }\n\n.halloween-help-tip {\n  position: relative;\n  display: inline-block;\n  width: 14px;\n  height: 14px;\n  margin-left: 10px;\n  margin-bottom: 2px;\n  vertical-align: middle;\n  background: url("+r(a(1078))+") top no-repeat;\n  cursor: default; }\n\n@media (max-width: 1279px) {\n  body.no-ads .halloweenImageDiv {\n    width: 75px;\n    margin-right: 18px;\n    margin-left: 18px; }\n    body.no-ads .halloweenImageDiv .halloweenImage {\n      height: 75px; } }\n\n@media (max-width: 1439px) {\n  body.ads .halloweenImageDiv {\n    width: 75px;\n    margin-right: 18px;\n    margin-left: 18px; }\n    body.ads .halloweenImageDiv .halloweenImage {\n      height: 75px; } }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjQ5MDc5NkNCM0ZCMTFFNzg3MjVBREQzMzIxRjlFOUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjQ5MDc5NkRCM0ZCMTFFNzg3MjVBREQzMzIxRjlFOUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NDkwNzk2QUIzRkIxMUU3ODcyNUFERDMzMjFGOUU5QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2NDkwNzk2QkIzRkIxMUU3ODcyNUFERDMzMjFGOUU5QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Ptq+H/8AAAFUSURBVHjabNLLK4RRGMfxl2aSS2TBRmwUFlbKWEgxQ24rKdmymIWNXDZjIzb+A6spk4XbaiiRhMSCKTZGwgobJUVuofg++k2mw1OfzTnPr3Pe8z6+WCzmqXJRh27UokTr1zhEHAd4tsXMtNAI5pBEm4KmA2eYV4/1ej5kYBBDOvEchajR3i2msakTPzFlwSqMIoALFCGKVjwq2KubBBSOZ+qkMYWs2lEtxcjHuPasJ2JXtmAL1r3fmkU5LlGPD5yk7a8hZMEyXHl/qwt72MBk2voNSi34gpx/giGsYMBZL8CDPc6RXnDXaYjoVd2yb0/aiQvoQ5bTsIxTZ816+rFowRk0I+yEj7HvhMLqjdpV3zRm2/jCEu41JVZ+DUSP/XgELePTps1io65dgR3NqF9j14BONCHxM3J5r1upqySesoM2csOYQCXeNYKrNo703qWavwUYAPHUThYUfDwrAAAAAElFTkSuQmCC"},function(e,t,a){(function(t,r){var n=a(53).default,o=a(5),i=o({displayName:"HalloweenStickerItem",hanldeClick:function(e,a){var r=this;if(!this.props.data.vip||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())r.doClickAction(e,a);else{var n=t.Deferred();n.promise().then(function(){r.doClickAction(e,a)});var o=Fotor.vipResManager.getUpgradeContent("resource");Fotor.common.User.useVipResource(o,n,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doClickAction:function(e,a){var r=FotorUtils.Object.simpleClone(this.props.data);if(r.innerCategory=Number(r.innerCategory),r.hasBorder=!1,r.fileScale=r.scale,r=FotorUtils.Object.simpleClone(r),a){var n=t("#canvas").offset(),o={x:(e.pageX?e.pageX:e.clientX)-n.left,y:(e.pageY?e.pageY:e.clientY)-n.top};o.x=o.x<-50?-50:o.x,Fotor.mainCanvas.placeObject("fotor/sticker",r,o)}else Fotor.mainCanvas.placeObject("fotor/sticker",r);FotorAnalytic.pageView("/editorTool/halloween/sticker/"+r.id+"/click",Fotor.routerManager.getToolPath())},handleDragStart:function(e){var a=this;if(!(this.props.data.vip||this.props.groupData&&this.props.groupData.vip)||FotorUser.checkIsVip()||Fotor.loginStateManager.isAdmin())a.doDragAction(e);else{var r=t.Deferred();r.promise().then(function(){a.doDragAction(e)});var n=Fotor.vipResManager.getUpgradeContent("resource");Fotor.common.User.useVipResource(n,r,Fotor.routerManager.getToolPath()+"/sticker/"+this.props.data.id)}e.stopPropagation()},doDragAction:function(e){var t="//pub-static.haozhaopian.net"+this.props.data.thumb,a=(this.props.data.url,document.createElement("img"));a.src=t;var r=FotorUtils.Object.simpleClone(this.props.data);r.innerCategory=parseInt(r.innerCategory),r.hasBorder=!1;try{e.dataTransfer.setDragImage(a,a.width/2,a.height/2)}catch(e){}e.dataTransfer.effectAllowed="copy";Fotor.dragHelper.setCurrentDragObject(r,"fotor/sticker"),e.dataTransfer.setData("text","fotor/sticker"),FotorAnalytic.pageView("/editorTool/halloween/sticker/"+r.id+"/click",Fotor.routerManager.getToolPath())},render:function(){return r.createElement("div",{className:"sticker-item-wrapper"},r.createElement("div",{className:"sticker-item",ref:"stickerItem",draggable:"true",onClick:this.hanldeClick,onDragStart:this.handleDragStart},this.props.data.vip&&r.createElement("span",{className:"search-vip"}),r.createElement(n,{"data-display":this.props.display},r.createElement("img",{src:"//pub-static.haozhaopian.net"+this.props.data.thumb}))))}});e.exports=i}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/halloweenBtn_043e0984884d754355a578211484e3f40.png"},function(e,t,a){e.exports=a.p+"images/halloweenBtn_1f9a22ad22ab9f08868fbef212bfb24f5.png"},function(e,t,a){e.exports=a.p+"images/halloweenBtn_216952f708150eca9f6959ab4bea13581.png"},function(e,t,a){e.exports=a.p+"images/halloweenBtn_3b63b2b473c9db4a1f029cb58f6bb48a5.png"},function(e,t,a){e.exports=a.p+"images/halloween_09341456295b1736315137c2daa54e309.png"},function(e,t,a){e.exports=a.p+"images/halloween_11f35d26a1aa85aa72034ca7ec2770a3f.png"},function(e,t,a){e.exports=a.p+"images/halloween_29f57f5aef1f85e0efa15d75a37cc99f2.png"},function(e,t,a){e.exports=a.p+"images/halloween_316d48a8ba632e53099f9da29c87783aa.png"},function(e,t){e.exports='{\r\n  "background": "fadede",\r\n  "items": [\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf1/5375f484-f87b-46ee-a920-3d6f26585cfb_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319516000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf1/5375f484-f87b-46ee-a920-3d6f26585cfb.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296485000,\r\n      "name": "hf1",\r\n      "width": 90,\r\n      "sortNum": 5353,\r\n      "id": "7e9f0ea8-5a24-41b7-85e7-ad94f0bac6cd",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf2/79c6749d-a10c-4922-992a-a7b02a163053_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319732000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf2/79c6749d-a10c-4922-992a-a7b02a163053.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296500000,\r\n      "name": "hf2",\r\n      "width": 80,\r\n      "sortNum": 5354,\r\n      "id": "d65cb874-4432-4ffb-b6f0-6746b06d9a5c",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf3/b4f1cf30-0dfc-42ad-8dab-e037c03723d6_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319582000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf3/b4f1cf30-0dfc-42ad-8dab-e037c03723d6.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296515000,\r\n      "name": "hf3",\r\n      "width": 184,\r\n      "sortNum": 5355,\r\n      "id": "82961bf2-cd73-420b-aea4-b90c66574de3",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf4/70e0854a-ca0d-48e3-9f94-6ef987b1f43a_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319587000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf4/70e0854a-ca0d-48e3-9f94-6ef987b1f43a.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296533000,\r\n      "name": "hf4",\r\n      "width": 188,\r\n      "sortNum": 5356,\r\n      "id": "b31bfcc2-4a71-4c63-854e-37ba9266199b",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf6/e1e57153-adab-4906-b94e-fe9798748f57_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319597000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf6/e1e57153-adab-4906-b94e-fe9798748f57.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296548000,\r\n      "name": "hf6",\r\n      "width": 118,\r\n      "sortNum": 5357,\r\n      "id": "7a970d63-99e7-497b-bae5-054ac9747f50",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf5/ad0bca9c-ebd2-4882-88e4-303ffeaa5c74_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319602000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf5/ad0bca9c-ebd2-4882-88e4-303ffeaa5c74.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296572000,\r\n      "name": "hf5",\r\n      "width": 42,\r\n      "sortNum": 5358,\r\n      "id": "a41f0009-d1c4-45c1-9ef1-7adde20815eb",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf7/083423f7-0523-4085-8383-b1029f355d53_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319612000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf7/083423f7-0523-4085-8383-b1029f355d53.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296593000,\r\n      "name": "hf7",\r\n      "width": 192,\r\n      "sortNum": 5359,\r\n      "id": "8112acce-0b04-4061-ae19-a590676e6b05",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf8/28024526-ee29-49cc-8e74-1d50647c8a19_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319616000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf8/28024526-ee29-49cc-8e74-1d50647c8a19.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296605000,\r\n      "name": "hf8",\r\n      "width": 200,\r\n      "sortNum": 5360,\r\n      "id": "970ba2be-de18-42c5-8730-edcacacd3d59",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf9/f1dbd126-1def-4ab1-86f0-fcba61a6bafd_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319627000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf9/f1dbd126-1def-4ab1-86f0-fcba61a6bafd.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296618000,\r\n      "name": "hf9",\r\n      "width": 200,\r\n      "sortNum": 5361,\r\n      "id": "bf5c62e4-a653-47de-8c0d-3d8e0ec06a55",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 104\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf10/40728525-c24d-47b9-9f92-c0e6693368f0_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319631000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf10/40728525-c24d-47b9-9f92-c0e6693368f0.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296631000,\r\n      "name": "hf10",\r\n      "width": 200,\r\n      "sortNum": 5362,\r\n      "id": "ea63d56c-0ade-4da9-b811-362db493f4d8",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 168\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf11/0b76df71-8a3e-43d2-9e12-9b75f490f22a_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319641000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf11/0b76df71-8a3e-43d2-9e12-9b75f490f22a.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296645000,\r\n      "name": "hf11",\r\n      "width": 26,\r\n      "sortNum": 5363,\r\n      "id": "969086f6-3c52-466d-aca9-e30b0f3bccf6",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf12/2068f8f0-bade-46df-a33e-9c48d14dfaca_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319645000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf12/2068f8f0-bade-46df-a33e-9c48d14dfaca.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296662000,\r\n      "name": "hf12",\r\n      "width": 200,\r\n      "sortNum": 5364,\r\n      "id": "cd33fb01-4946-4fb1-80e1-8e741a78b632",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 96\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf13/10ce40f5-6bfe-41ee-afb4-94df9dcbdffb_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319728000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf13/10ce40f5-6bfe-41ee-afb4-94df9dcbdffb.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296676000,\r\n      "name": "hf13",\r\n      "width": 200,\r\n      "sortNum": 5365,\r\n      "id": "5eba781c-5949-4bbb-a3a5-b6f706344c7e",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 104\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf14/48584b13-8e26-4bfe-b80a-abdcdd020bab_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319659000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf14/48584b13-8e26-4bfe-b80a-abdcdd020bab.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296689000,\r\n      "name": "hf14",\r\n      "width": 198,\r\n      "sortNum": 5366,\r\n      "id": "4677c959-bf53-4c61-bec4-a0ed4058b599",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf15/9eb7bc28-c1fd-4f29-a2bb-feef16c4b436_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319685000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf15/9eb7bc28-c1fd-4f29-a2bb-feef16c4b436.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296703000,\r\n      "name": "hf15",\r\n      "width": 200,\r\n      "sortNum": 5367,\r\n      "id": "66a3d93e-257a-46a9-95e5-a8ec658729ff",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 116\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf17/1bd521c8-38d5-4eb9-8718-139eee096918_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319674000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf17/1bd521c8-38d5-4eb9-8718-139eee096918.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296731000,\r\n      "name": "hf17",\r\n      "width": 200,\r\n      "sortNum": 5369,\r\n      "id": "09398018-1663-458a-bc4a-4c7155550b1e",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 174\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_05/3c50786e-c74d-41fa-acd0-e3f159e5e266_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_05/41a329be-d409-423c-80dc-884c55e00ed7.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069401000,\r\n      "name": "halloween_cl_20170122_05",\r\n      "width": 768,\r\n      "sortNum": 2969,\r\n      "id": "7ef08fef-00d3-428a-97ad-ea91f327ce03",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 768\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_06/dbeccb28-bdd6-4d9b-9e28-c4c356ef83ad_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_06/eb4cd4b1-c4bc-4b81-b3ac-895eeafbea2a.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069417000,\r\n      "name": "halloween_cl_20170122_06",\r\n      "width": 767,\r\n      "sortNum": 2970,\r\n      "id": "a8b04af1-0638-4df0-8b26-b15fc7a5ac34",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 768\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_07/5eef1404-d838-4e8f-8d0d-a16837cc8eb6_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_07/53c00f70-ee88-49c2-b464-bf2de1832d94.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069434000,\r\n      "name": "halloween_cl_20170122_07",\r\n      "width": 768,\r\n      "sortNum": 2971,\r\n      "id": "f40d9501-ed5a-4412-b78d-40d81bc4b268",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 767\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_08/66ef0436-30e0-4668-ba4d-d392788fd518_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_08/220ee09c-1490-4046-bbba-d4da26bfce20.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069456000,\r\n      "name": "halloween_cl_20170122_08",\r\n      "width": 767,\r\n      "sortNum": 2972,\r\n      "id": "bbb543ee-a45c-4d46-9abe-07a58b0a868c",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 767\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_09/60a0af69-4742-4e6e-9529-0a24cd6b4c42_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_09/e766f330-7038-4aac-93a5-eb1778d98cc0.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069474000,\r\n      "name": "halloween_cl_20170122_09",\r\n      "width": 619,\r\n      "sortNum": 2973,\r\n      "id": "2148a4a0-962e-4dee-ab56-9d462e2a1f77",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 768\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_10/94425913-3f87-4271-bd95-5cdc28a03566_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_10/0b9c52e1-6e96-4e7a-b548-05482be43a4b.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069489000,\r\n      "name": "halloween_cl_20170122_10",\r\n      "width": 656,\r\n      "sortNum": 2974,\r\n      "id": "83818e56-a0cd-44e8-be47-d75480f632e6",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 768\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/spooky_cl_20170122_03/9f99e819-f6b8-40b7-b986-3fe67dd1e86b_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1488959946000,\r\n      "label": null,\r\n      "url": "/assets/stickers/spooky_cl_20170122_03/9c8b72f6-e30a-47bc-ad1d-094170934762.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485054461000,\r\n      "name": "spooky_cl_20170122_03",\r\n      "width": 140,\r\n      "sortNum": 5,\r\n      "id": "a78df28b-e7f5-463f-a7ef-63c61ce37da6",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_12/c9d19ac3-f5d5-4c72-b523-48fb2a469d56_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_12/a75a4aa7-ae4d-4275-beaa-0120b2fac48d.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069520000,\r\n      "name": "halloween_cl_20170122_12",\r\n      "width": 616,\r\n      "sortNum": 2976,\r\n      "id": "2680fa1d-4d3a-4b4d-a6e5-457b5c73d4d1",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 768\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_13/42f8f7c4-804b-4b85-b739-eef7d03b679c_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_13/62f63b86-b082-47b5-81bc-7ade16ae1382.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069539000,\r\n      "name": "halloween_cl_20170122_13",\r\n      "width": 1024,\r\n      "sortNum": 2977,\r\n      "id": "a6331923-b97c-4cb9-91b6-fa407ed18752",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 745\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_14/93635aff-32cc-4c3e-aeb6-7535043f0a89_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_14/df924008-6636-4eaa-9458-055706f9247d.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069557000,\r\n      "name": "halloween_cl_20170122_14",\r\n      "width": 1024,\r\n      "sortNum": 2978,\r\n      "id": "ae5c1ef4-363a-4610-8282-25b1f3940aa7",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 419\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_15/73588af4-c02d-46de-8232-ae45ff7ceddc.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_15/73588af4-c02d-46de-8232-ae45ff7ceddc.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069572000,\r\n      "name": "halloween_cl_20170122_15",\r\n      "width": 1024,\r\n      "sortNum": 2979,\r\n      "id": "378f2d12-20ab-4b5e-b18e-1c928027613d",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 382\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_16/515b313e-2e84-4218-a79f-877ad1614884_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_16/08bffb4f-4036-4a15-9a27-af6082b6c29a.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069589000,\r\n      "name": "halloween_cl_20170122_16",\r\n      "width": 1024,\r\n      "sortNum": 2980,\r\n      "id": "d1d5677d-d23d-4bf1-a7fa-26cee113a59a",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 548\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_17/faad5521-5cb4-4897-b5d7-9d8cb473ea47_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_17/d4d407aa-cd97-4805-815e-bafa07fd4613.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069607000,\r\n      "name": "halloween_cl_20170122_17",\r\n      "width": 387,\r\n      "sortNum": 2981,\r\n      "id": "2d37c782-ddb9-4b2f-ab2b-69a4616e2efd",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 191\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_18/4c5db2f4-1327-45b2-80fd-2fccd567db61_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_18/4c5db2f4-1327-45b2-80fd-2fccd567db61.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069624000,\r\n      "name": "halloween_cl_20170122_18",\r\n      "width": 322,\r\n      "sortNum": 2982,\r\n      "id": "37247025-2bf5-4856-82f2-9658ebb9879e",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 339\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_19/1ddba3e1-75a7-4ce4-a2f3-2b593f5c5143_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_19/b3c7b6d1-7cdd-4dee-a557-267d03992789.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069648000,\r\n      "name": "halloween_cl_20170122_19",\r\n      "width": 391,\r\n      "sortNum": 2983,\r\n      "id": "60eca0f5-4652-4f55-add5-4a3013a9aa14",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 256\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_20/ee8550f4-c8e0-47d9-ba12-3eb6c0d222aa_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_20/c89d02e4-f8b7-4481-a9a3-f81a55d64a76.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069663000,\r\n      "name": "halloween_cl_20170122_20",\r\n      "width": 358,\r\n      "sortNum": 2984,\r\n      "id": "380231f6-76e0-4676-a7a7-20af9b45a4db",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 274\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_04/d8b88011-d8b1-4e73-965c-0d5e787edd72_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_04/d8b88011-d8b1-4e73-965c-0d5e787edd72.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485049933000,\r\n      "name": "Gothic_cl_20170122_04",\r\n      "width": 92,\r\n      "sortNum": 1,\r\n      "id": "b10d2963-a0d4-4a68-b0f0-9bf4a0fbda89",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_06/d3010eec-5c37-4a2c-a463-df7b62611a09_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_06/36e67384-ea13-47b4-954a-dd6315c4943c.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485049988000,\r\n      "name": "Gothic_cl_20170122_06",\r\n      "width": 79,\r\n      "sortNum": 2,\r\n      "id": "3d030546-4f1e-423b-8563-8353b871764e",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_05/3d7d8b83-9b39-49e1-92e8-72851078639e_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_05/3d7d8b83-9b39-49e1-92e8-72851078639e.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485049961000,\r\n      "name": "Gothic_cl_20170122_05",\r\n      "width": 109,\r\n      "sortNum": 3,\r\n      "id": "9748c57a-c363-4e2b-b3a6-0378a805f545",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_09/59bca591-ea0e-4e9a-bdc2-88b7457089d2_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_09/ba7953f0-57fc-4501-9151-3c3599695313.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485050503000,\r\n      "name": "Gothic_cl_20170122_09",\r\n      "width": 200,\r\n      "sortNum": 4,\r\n      "id": "4bf13a4e-51cd-40aa-a92a-dd8dba1a9e41",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 113\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_08/6be2a500-4695-4960-9393-862c6ef86d62_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_08/6be2a500-4695-4960-9393-862c6ef86d62.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485050481000,\r\n      "name": "Gothic_cl_20170122_08",\r\n      "width": 168,\r\n      "sortNum": 5,\r\n      "id": "f5810086-bf53-4b0e-b7a6-48d2f23595c0",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_003/54454c8a-8dcf-48de-8d7a-cb838b821589_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_003/54454c8a-8dcf-48de-8d7a-cb838b821589.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485049914000,\r\n      "name": "Gothic_cl_20170122_03",\r\n      "width": 200,\r\n      "sortNum": 6,\r\n      "id": "6d1ea7f8-30ae-4876-8498-c587c2a21c93",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 44\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_07/cd4842d4-90b3-405c-8502-8f2d55b36d83_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_07/68d1beb0-8301-4171-b935-a58388de0391.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485050008000,\r\n      "name": "Gothic_cl_20170122_07",\r\n      "width": 200,\r\n      "sortNum": 7,\r\n      "id": "f261c092-87fc-48a2-a5ab-e918cc5a8acb",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 167\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_02/a9ae5eb4-e6c6-45a4-9812-db307172e9c2_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_02/a9ae5eb4-e6c6-45a4-9812-db307172e9c2.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485049893000,\r\n      "name": "Gothic_cl_20170122_02",\r\n      "width": 200,\r\n      "sortNum": 8,\r\n      "id": "fbc5e685-9aaa-4329-ac74-89a9aa6b3761",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 180\r\n    },\r\n    {\r\n      "cacheAble": true,\r\n      "thumb": "/assets/stickers/Gothic_cl_20170122_01/0c6f5335-30ce-40f8-bbc4-507c4f6bf4a9_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1498016181000,\r\n      "label": null,\r\n      "url": "/assets/stickers/Gothic_cl_20170122_01/ce2c44ac-f824-47a8-ab59-613922cdf43a.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485049872000,\r\n      "name": "Gothic_cl_20170122_01",\r\n      "width": 155,\r\n      "sortNum": 9,\r\n      "id": "8ba0cf62-e451-4ee4-8024-c4491743c516",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/spooky_cl_20170122_07/f4517101-0ad6-42f5-a243-fb640c8d2ccb_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1492568215000,\r\n      "label": null,\r\n      "url": "/assets/stickers/spooky_cl_20170122_07/f4517101-0ad6-42f5-a243-fb640c8d2ccb.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485054528000,\r\n      "name": "spooky_cl_20170122_07",\r\n      "width": 177,\r\n      "sortNum": 1,\r\n      "id": "35054ccd-6cf8-462d-83d4-74f58e3bca40",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/spooky_cl_20170122_06/edb63a14-5fd1-41e8-b3dd-4ebfbd118745_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1488941459000,\r\n      "label": null,\r\n      "url": "/assets/stickers/spooky_cl_20170122_06/edb63a14-5fd1-41e8-b3dd-4ebfbd118745.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485054515000,\r\n      "name": "spooky_cl_20170122_06",\r\n      "width": 200,\r\n      "sortNum": 2,\r\n      "id": "7e75c16f-113d-4626-ae6e-df77c4b191e3",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 96\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/hf16/d9842d94-2b22-4823-8fe5-d2ce3082edcc_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1508319680000,\r\n      "label": null,\r\n      "url": "/assets/stickers/hf16/d9842d94-2b22-4823-8fe5-d2ce3082edcc.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1508296718000,\r\n      "name": "hf16",\r\n      "width": 200,\r\n      "sortNum": 5368,\r\n      "id": "8ce1d646-7a75-4c05-8216-47ee998659c0",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 94\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/spooky_cl_20170122_05/9776a5f4-0c7e-47d1-85b1-6bc30283bd37_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1492741961000,\r\n      "label": null,\r\n      "url": "/assets/stickers/spooky_cl_20170122_05/e1085462-4139-45ca-bdd5-e03e4307f271.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485054502000,\r\n      "name": "spooky_cl_20170122_05",\r\n      "width": 200,\r\n      "sortNum": 3,\r\n      "id": "db4182e1-adb5-4f98-8b9c-52227e72ae44",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 111\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/spooky_cl_20170122_04/593dbcb8-7650-4945-b90b-307927e6ffda_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1492742288000,\r\n      "label": null,\r\n      "url": "/assets/stickers/spooky_cl_20170122_04/593dbcb8-7650-4945-b90b-307927e6ffda.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485054484000,\r\n      "name": "spooky_cl_20170122_04",\r\n      "width": 200,\r\n      "sortNum": 4,\r\n      "id": "02c6cdfd-a802-4f55-b361-cea763060efb",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 200\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_11/0d7ab761-857c-4e4c-a4a7-1c51fd7da7c7_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_11/ff46b30d-0e31-45e6-be52-2a612bf0be2f.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069504000,\r\n      "name": "halloween_cl_20170122_11",\r\n      "width": 716,\r\n      "sortNum": 2975,\r\n      "id": "a4cda646-19cb-443c-be0d-0354c3d3c47c",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 767\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/spooky_cl_20170122_02/b9663a1f-6511-40c9-824b-114dbc3504ba_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1488260580000,\r\n      "label": null,\r\n      "url": "/assets/stickers/spooky_cl_20170122_02/91e8983a-9d36-4846-9cf3-6f48091108e5.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485054447000,\r\n      "name": "spooky_cl_20170122_02",\r\n      "width": 200,\r\n      "sortNum": 6,\r\n      "id": "31070e9e-87e2-4956-ac5f-70594a452ed2",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 199\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/spooky_cl_20170122_01/dab17249-cac5-4b89-8ce1-b71a5f754bb4_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1488266337000,\r\n      "label": null,\r\n      "url": "/assets/stickers/spooky_cl_20170122_01/df313239-3d41-43d6-9993-fd7f8ef46450.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485054433000,\r\n      "name": "spooky_cl_20170122_01",\r\n      "width": 200,\r\n      "sortNum": 7,\r\n      "id": "40d03853-2435-4a1e-add8-3640e1d3460e",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 192\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_01/8d59410c-6107-4a7c-a0be-707d85f59605_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_01/f5992ac0-3539-430e-906c-eb2cafe1c5a2.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069257000,\r\n      "name": "halloween_cl_20170122_01",\r\n      "width": 887,\r\n      "sortNum": 2965,\r\n      "id": "d7d72908-a2a4-48f1-893a-bec4191d8b87",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 767\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_02/3b1523a7-ec28-4f93-99c1-1f372b6b7126_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_02/9eba6bf4-551d-4c73-ba0a-ac9e606745e9.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069324000,\r\n      "name": "halloween_cl_20170122_02",\r\n      "width": 691,\r\n      "sortNum": 2966,\r\n      "id": "fda3689b-8264-4f27-bb6b-2f2d86ed8f50",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 768\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_03/4a6896d3-5777-412e-9661-d6b04ec41f17_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_03/34d4a46b-22a0-46d7-820a-794caf1826c8.png",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069340000,\r\n      "name": "halloween_cl_20170122_03",\r\n      "width": 845,\r\n      "sortNum": 2967,\r\n      "id": "b393e93d-1824-4ae1-8e82-9c85879c669c",\r\n      "hasBorder": false,\r\n      "stickerType": "png",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 768\r\n    },\r\n    {\r\n      "cacheAble": false,\r\n      "thumb": "/assets/stickers/halloween_cl_20170122_04/b7d8f2b7-38c3-4735-8fac-373e7a8a8c84_thumb.png",\r\n      "scale": 0.5,\r\n      "updateTime": 1495678425000,\r\n      "label": null,\r\n      "url": "/assets/stickers/halloween_cl_20170122_04/b7d8f2b7-38c3-4735-8fac-373e7a8a8c84.svg",\r\n      "innerCategory": "0",\r\n      "createTime": 1485069379000,\r\n      "name": "halloween_cl_20170122_04",\r\n      "width": 806,\r\n      "sortNum": 2968,\r\n      "id": "4177ad3f-71c1-4948-a6a7-77450577d75c",\r\n      "hasBorder": false,\r\n      "stickerType": "svg",\r\n      "state": 0,\r\n      "vip": false,\r\n      "stretchMode": "equal",\r\n      "height": 768\r\n    }\r\n  ]\r\n}\r\n'},function(e,t,a){e.exports=a.p+"images/halloween5eddbe9d5bcb4fe185ae607d549278aa.jpg"},function(e,t,a){e.exports=a.p+"images/halloween649f3cd5ce7ea3fc140b8dd43b86a225.gif"},,,,function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),a(1095)),h=function(t){function l(e){r(this,l);var t=n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.state.groupData=null,t.state.showItem=!1,t.state.isSmallPic=!1,t.hadfoldItem=!0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return o(l,t),i(l,[{key:"loadData",value:function(e){var t=a(163)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"applyHandler",value:function(){s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["MagicBrushItem_"+t].state.beSelected&&this.refs["MagicBrushItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["MagicBrushItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["MagicBrushItem_"+t].cancelHandler();this.state.isSmallPic=!1,s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"afterfold",this).call(this),this.setState({showItem:!1})}},{key:"afterUnfold",value:function(){this.setState({showItem:!0}),Fotor.progressBar.hide()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e&&null==t.state.groupData&&t.setState({groupData:t.loadData(e.effectGroupId)})}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e.swtichMode=!1,e}},{key:"loadTempHistoryData",value:function(e,t){for(var a=this.state.groupData.items.length,r=0;r<a;r++)this.refs["MagicBrushItem_"+r].cancelHandler();this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}},{key:"doItemUnFold",value:function(e){Fotor.historyManager.mergeTempStep();for(var t=this.state.groupData.items.length,a=0;a<t;a++)void 0==e||null==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.refs["MagicBrushItem_"+a]!=e&&this.refs["MagicBrushItem_"+a].state.beSelected?(this.refs["MagicBrushItem_"+a].exitMagicBrushMode(),this.refs["MagicBrushItem_"+a].setState({beSelected:!1})):this.refs["MagicBrushItem_"+a]!=e||this.refs["MagicBrushItem_"+a].state.beSelected?this.refs["MagicBrushItem_"+a]==e&&this.refs["MagicBrushItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({showItem:!0})}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase(),onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},this.state.groupData.items.map(function(a,r){return e.createElement(c,{ref:"MagicBrushItem_"+r,unFoldFun:t.doItemUnFold.bind(t),data:a,showItem:t.state.showItem,key:r,vip:t.state.groupData.isVip,scroller:t.props.scroller})}))):e.createElement("div",null)}}]),l}(l.default);t.default=h}).call(t,a(0))},function(e,t,a){(function(t,r){var n=a(8),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=(a(53).default,a(5)),s=i({displayName:"MagicBrushItem",getInitialState:function(){return{beSelected:!1,unFoldFun:null,last_Point:null,canvas_Point:null,circel_Point:null,canvas_isDrawing:!1,brush_Size:0,brush_opacity:100,isMoving:!1,hadchanged:!1,brushPoints:[],thumbSrc:"",opacity:0}},componentDidMount:function(){this.props&&(this.state.unFoldFun=this.props.unFoldFun,""==this.state.thumbSrc&&(this.state.thumbSrc=a(798)("./"+this.props.data.thumb+".jpg")))},clickHandler:function(e){this.state.unFoldFun&&this.state.unFoldFun(this);var t=this;if(this.state.beSelected)t.exitMagicBrushMode();else{Fotor.mainCanvas.fotorEngine.clean();var r=Math.max(this.props.data.outsideRadius,this.props.data.innerRadius);this.state.brush_Size=r,this.refs.brushSize.setDefault(this.props.data.defaultSize),this.state.brush_opacity=this.props.data.blendOpacity,this.refs.intensity.setDefault(this.state.brush_opacity),Fotor.mainCanvas.canvas.mouseEnabled=!1,Fotor.mainCanvas.fotorEngine.process_rule("",!0),Fotor.progressBar.show(!0);try{var n=new Image;n.crossOrigin="anonymous","star4x4_01"==t.props.data.fileName?n.src=a(969):"star4x4_05"==t.props.data.fileName?n.src=a(970):"star4x4_04"==t.props.data.fileName?n.src=a(971):"star4x4_03"==t.props.data.fileName&&(n.src=a(972)),n.complete&&(Fotor.mainCanvas.fotorEngine.set_magic_resource(n,t.props.data.fileName),t.enterMagicBrushMode()),n.onload=function(){Fotor.mainCanvas.fotorEngine.set_magic_resource(n,t.props.data.fileName),t.enterMagicBrushMode()}}catch(e){console.log("加载材质出错了，怎么解决呢？！")}Fotor.vipResManager.setEditorWaterMark()}var o=!this.state.beSelected;this.setState({beSelected:o});var t=this;setTimeout(function(){o?t.scrollerFix():t.scrollerUpFix()},300)},enterMagicBrushMode:function(){Fotor.mainCanvas.trigger(o.default.ENGINELAYER_CHANGE),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,t(".upper-canvas").on("mousedown",this.moveControlDown),t(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()},exitMagicBrushMode:function(){this.state.hadchanged=!1,this.state.brushPoints=[],Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(o.default.CONTENT_CHANGE),t(".upper-canvas").off("mousedown",this.moveControlDown),t(document).off("mousemove",this.drawMoving),t(document).off("mouseup",this.endChangeing)},drawBeauty:function(){var e={};e.pModel=this.props.data.pModel,e.opacity=this.props.data.opacity,Math.max(this.props.data.outsideRadius,this.props.data.innerRadius)==this.props.data.outsideRadius?(e.outsideRadius=this.state.brush_Size,e.innerRadius=this.props.data.innerRadius/this.props.data.outsideRadius*e.outsideRadius,e.texSize=this.props.data.texSize/this.props.data.outsideRadius*e.outsideRadius,e.pointStride=this.props.data.pointStride/this.props.data.outsideRadius*e.outsideRadius):(e.innerRadius=this.state.brush_Size,e.outsideRadius=this.props.data.outsideRadius/this.props.data.innerRadius*e.innerRadius,e.texSize=this.props.data.texSize/this.props.data.innerRadius*e.innerRadius,e.pointStride=this.props.data.pointStride/this.props.data.innerRadius*e.innerRadius),e.numRatio=this.props.data.numRatio,e.fileName=this.props.data.fileName,e.blendModel=this.props.data.blendModel,e.blendOpacity=this.props.data.blendOpacity,null!=this.props.data.angle&&(e.angle=this.props.data.angle),e.points=[this.state.last_Point,this.state.canvas_Point],Fotor.mainCanvas.fotorEngine.process_magic_painter_rule(e,function(){}),this.state.last_Point=this.state.canvas_Point},moveControlDown:function(e){e.preventDefault(),e.stopPropagation(),this.state.hadchanged=!0,this.getEventPoint(e)&&(this.state.canvas_isDrawing=!0,t(document).on("mouseup",this.endChangeing),this.state.last_Point=this.state.canvas_Point,this.drawBeauty())},drawMoving:function(e){if(this.getEventPoint(e)){if(this.state.isMoving||(this.state.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.state.circel_Point=this.state.canvas_Point,null!=this.state.last_Point&&void 0!=this.state.last_Point){Fotor.EngineAction.distanceBetween(this.state.last_Point,this.state.canvas_Point)>.75*this.props.data.pointStride&&this.state.canvas_isDrawing&&this.drawBeauty()}Fotor.mainCanvas.canvas.requestRenderAll()}else this.state.isMoving&&(this.state.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.state.isMoving=!1},endChangeing:function(e){this.state.canvas_isDrawing&&(this.state.canvas_isDrawing=!1,this.getEventPoint(e)&&this.drawBeauty(),Fotor.mainCanvas.trigger(o.default.BEAUTYLAYER_CHANGE)),t(document).off("mouseup",this.endChangeing)},getEventPoint:function(e){this.state.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.state.canvas_Point.x>r&&this.state.canvas_Point.x<r+o&&(t=(this.state.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.state.canvas_Point.y>n&&this.state.canvas_Point.y<n+i&&(a=(this.state.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.state.canvas_Point={x:t,y:a},!0)},helperDrawCursorCircel:function(e,t){if(this.state.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.state.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.state.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.state.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.restore()}},handleBrushSizeChange:function(e){var t=this.refs.brushSize.val(),a=Math.max(this.props.data.outsideRadius,this.props.data.innerRadius);this.state.brush_Size=.01*t*a*2,this.state.isMoving=!0,this.state.circel_Point={},this.state.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.state.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()},handleBrushSizeChanged:function(e){this.handleBrushSizeChange(e),this.state.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()},handleRecoveredChange:function(e){if(this.state.brush_opacity=this.refs.intensity.val(),this.refs.IntensitySpan&&t(this.refs.IntensitySpan).html(this.state.brush_opacity),this.state.hadchanged){var a={};a.pModel=this.props.data.pModel,a.blendOpacity=this.state.brush_opacity,a.fileName=this.props.data.fileName,a.blendModel=this.props.data.blendModel,Fotor.mainCanvas.fotorEngine.process_magic_painter_rule(a,function(){})}},handleRecoveredChanged:function(e){this.handleRecoveredChange(e)},componentWillReceiveProps:function(e){var t=this;e&&e.showItem&&(t.state.unFoldFun=e.unFoldFun,""==this.state.thumbSrc&&(this.state.thumbSrc=a(798)("./"+this.props.data.thumb+".jpg")))},applyHandler:function(e){this.props.vip&&Fotor.vipResManager.setEditorVip(),this.doApplyHandler(e)},doApplyHandler:function(e){this.state.hadchanged?Fotor.mainCanvas.applyEditorPic(this.afterApplyHandler):this.cancelHandler()},afterApplyHandler:function(){this.state.unFoldFun(this),this.exitMagicBrushMode(),this.setState({beSelected:!1})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.exitMagicBrushMode(),this.setState({beSelected:!1}),Fotor.vipResManager.resetWaterMark()},render:function(){var e=this;return r.createElement("div",{ref:"item",className:"effect-item effect-item-90 "+(e.state.beSelected?"active active-278":"")},e.props.data.isVip?r.createElement("span",{className:"vip"}):"",r.createElement("div",{"data-display":e.props.doEffect},r.createElement("div",{className:"effect-item-img clearfix",onClick:e.clickHandler},r.createElement("div",{className:"effect-item-title"},Fotor.globalConfig.lang[e.props.data.name].toUpperCase()),r.createElement("img",{ref:"itemImg",src:e.state.thumbSrc,onLoad:this.onImageLoad,style:{opacity:this.state.opacity}})),r.createElement("div",{className:"effect-item-inner clearfix"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:""},Fotor.globalConfig.lang.editor_workspace_effect_tag_Intensity,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"SizeSpan"},"100"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"intensity",max:"100",min:"0",className:"input-range-grey",bindEle:e.refs.SizeSpan,onChange:e.handleRecoveredChange,onChanged:e.handleRecoveredChanged})),r.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size,r.createElement("div",{className:"pull-right",ref:"RecoveredSpan"},"100")),r.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:e.props.data.maxSize,min:e.props.data.minSize,className:"input-range-grey",bindEle:e.refs.RecoveredSpan,onChange:e.handleBrushSizeChange,onChanged:e.handleBrushSizeChanged}),r.createElement("div",{className:"clearfix effect-item-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:e.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:e.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},imageInterval:0,onImageLoad:function(){this.imageInterval=setInterval(this.showImage,30)},showImage:function(){var e=this.state.opacity+.1;this.setState({opacity:e}),e>=1&&clearInterval(this.imageInterval)},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),r=t(this.refs.item).offset(),n=t(".toolbar-list").height(),o=t(".toolbar-list").offset(),i=-e.state.topPosition,s=a;if(r.top<80){var l=r.top-o.top-i;return void e.scrollYTo(l)}if(r.top+s>n+o.top){var l=r.top-o.top-i;s<n&&(l-=n-s),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),r=e.state.topPosition,n=a.realHeight-a.containerHeight;r>n?t(e.content).stop().animate({"margin-top":-n},300,function(){e.handleWindowResize()}):e.handleWindowResize()}});e.exports=s}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/default_01a7ed755615ebccdf9de154136e31fc67.jpg"},function(e,t,a){e.exports=a.p+"images/default_0208d03523285e562f0688235b8a5d4d6e.jpg"},function(e,t,a){e.exports=a.p+"images/default_03859befd1243cb9832b39322c80647ca6.jpg"},function(e,t,a){e.exports=a.p+"images/default_04f2cd62f246588f2c5f4819f276f5ff35.jpg"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QNfaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9IjlDRDY0RDdEQTExRDRFRTE0REUxOTNCNDRFMjkzOTEzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjZDRkJBNzlEQzEzMTExRTZBQzdEQzRFNDQxODg3RTIyIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjZDRkJBNzlDQzEzMTExRTZBQzdEQzRFNDQxODg3RTIyIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RThDMUI1RTBDMThERTUxMTg4RTNENzlGRTMzNUQ1NUYiIHN0UmVmOmRvY3VtZW50SUQ9IjlDRDY0RDdEQTExRDRFRTE0REUxOTNCNDRFMjkzOTEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAWgEsAwERAAIRAQMRAf/EAJQAAAICAwEBAAAAAAAAAAAAAAECAAMEBQYHCAEBAAIDAQAAAAAAAAAAAAAAAAEFAgMEBhAAAQMDAgMFBgUCAwkAAAAAAQACAxEEBRIGITFBUYEiEwdhcZEyYhShsUJSI6IIwVMV0XKCM0Njc4MmEQEAAgICAgEDBQEBAAAAAAAAAQIRAxIEITFRQWEFcbEiMhOBI//aAAwDAQACEQMRAD8A8tBQO0oHBQEIHBQMCgcFBY1yC1rkDhyBw5BYHIHDkDAoGBQMCg2eB27nM/cutsRZvu3s/wCdIKNiir1lldRjfjX2IOnbsPb+OdTcW5I2zAitlio/uXjt1Svoz+lBsLfHek4dpjs8ndfXLc+XXuZQJM4IbBm1PTO7Hhs8jaE8nx3Jf+Dw4LD/AEr8wy4z8MG89JLe4GrAZtkrzytcizyX07BLHVvxas2Li87t7OYG6Ftl7N9q93CKU+KGT2xyt8Lvz9iDW6kA1IBqQAuQAuQAlANSBS9BNSAFyAVQKXIAXIFLkClyAauKDngUDgoHaUDVQMCgYFA7SgaqB2vNeKCwOQWNKB2uQOHIHa5BYDxQddtraVicfHuLc0rrbBEn7OzjqLm/c08mfsh7X9enags3Dv6b7H7aB0WC2/HVsOOtf42H3hvikeepWnbvrTx7n4dGnrW2evXy8+u99wtOjH2xk/7s5p8GN/xXLbZst9eMfZZaujrj3/KW825Jum+LbmecWtseLWsYGl3u9iqOz2IjxEzMrWnW11jzWHfWOWuIWhrw2QDqRQ/ELg/3v8td+rSfs39lm7Z48bSKc6cSO5dOrv2q4dvSdDDdW17YOtLqOPI4uYUktJwHsPuryIV51u/W/tV7etNZeVepmwbrAW0u4Nvt+6263xXdu8l1xZVNCT/mQ1Pzc29eHFWLmeYu3BcdGtHcgrOfuuhA7kCHPXf7/wAECnOXf7ygX/W7r/MKB2Z25B4ur7Cgy4c3E/hIKe0IM1k7Ht1MdUILBJVBC5ApcgUuQDUgBKBdSDQoC0oHBQOCgYIGBQOCgcFAw5IGBQOHILGuQWAlBaxB1Oydu2d/Nc5jMN/+cw4El+3kbiVwrFas6nXzf9PvQYu+t8STzOyV/Qyub5ePsGcI4428GsaB8rG9e1cu7dOeNff7O3q9Xl/K39f3eVX2Rvslc+ddSGWQ8G9GtHY0dAtNaxVaR58Q63Zu1WTUvbtmqIH+Nh/Ue33Kr7van+tVhq18YzPt6DGQ0AAUA5AKqbML2SKJhGF8cxa4OaaEdViiYbWyyc9s4TwH/wAsf6T3LKl5rOYc2zTFvEu2xGVhuIRPEA+KQFlxbvAcHAijmPaeBBHxXo+h3YtGJUXa600l8/8Aq9sGLamejuMZFo25lgZMaAdQhkbxltT18HzMr+n3K3cTgXFAqAEoFJQBBA8jkgyra+kicCCg3dteNmaCD4uoQZIkqghcgBcECl6BS4oBX2oNMAgNEBHBAwKBwUDhAQUDgoGDkDBA4qgsYCgdpQWayBUAud0aOZPQD2lB6LujTgcLjdqufpjx0P3+acOTryca31/3BRoWnft4Vz9W7r6ud4h4ZmsnNk8hJcycAfDEzo1g+VoXLrriPPtcziPEMjAYx17fRQgeEkF59g5rR2dvGsy6evTMvWbeNkMTY4xpY0UAHYF5+05d64OKxDNciFjZCFAy7WbxFteBCiYYWhtMDlnWWQaHOpBKdMo9/I9y2adnC2XP2dPOv3dHvfb7dzbIy2HDBJdsiN7iz1bcwAvbQ/UKt9tV6/q7edMvMba4l8ph2tocARUVoeYXQ1ogQlAEEQKUAQZNpdOjeOPDqg3sM4e0HtQXaj2oBVANSBaoJqQawtQRAaIIEDBAwKBgUDgoCCg6nZ3p9mt0smms5oLS1gcI3XFwXUc+lS1jGAk0HMoOxi/t/wA0Rx3BYg9nkToHH9v24K+HO48++O4H+BQI7+37dQILctjXdlDMPj4UGwwnoTnbHL2OQyd/YzY+zuI57qCEyuke2N2oNaS0N+YDmg4L1Qy8s4yd2538uRunNr9APH8AuDsznZFfhadCmKzZ5ZHGXO4BTMuuId9sSwaGy3BbxqGNP5qn7t8zhY6YxV2zIvYq/DObLWxt7EwxmxvLHYmEcgMQ7FGGXI0TC19exYpmyOcQ5RhMPStqX7pbewuDxc0hj69dPBeh/EbMxh5v8hr42fMG+MUzEb0z2MjFI7W+mbGPoe7zG/g9XKvaIlAEEKAFAEClAGmhQbbHT1bpPRBsmvqEB1IFLkALkA1IMOqBSgIKAoICgaqCVQOHUQMHCqD2n0guombViZGQJm3Vz5/e5pZ/Sg9Hiu5KDiEF/wB46gHDh1HVAW3jq8SgyLi9abKZhPjcx2mnbpKD5e9SIXeVYtoaOfI4+9Vm6cbZ/Rc9KP8Ay/642C2q8ABarXddavRtpQCPHDhxLiqrsTmzsj06JooFzkycVRicIg7Wg9aIZMWACnM9qxmCJY8w59vRQ2Vl6DtIWzLVjYauibMPL1GtagF39SvPxURynHpRfkZmZ8+3gHrO5h9UtxFnLz2Vp+7ymVV4q3FIJVAtUAQAlACUC1QZdhJR4CDcRv4IG1FANRQCqAVQYetBNSCa0DByCVQEOQNqqglUBDkG1w+6c5h45I8dciFkjtb2uYHjVSlRVBtWeqO+Gcr+OntgYguj9WN8N53MD/fCB+TkGXD6x7yYRqitJQO0SM/JxQb/AGz6z3mR3Hjsdk8eLeC8mbbuuo5NTGuk8LSQQDp1UCDXep2Gey0DtJra3DmO4cg7kqruxi+flb/jrZrNXCWloAKlvGq5JlYx7drt5xFnoHDS5cW322ty1zhwB4LSnwcKEGAUIybiiTji0jqiCOYSQmGUS9C2dZlllZsd4Q4mQk8KAmtVffiNeKzKh/IXzd8t7yzAzG8c5lGmsd3fTPjP0Nd5bfwYrdXtRVAEAQAlAKoFKAFBkWfzhBto3cEFmtANSAFxQCqDA1IG1IDqQEOQNVBKoCHIG1ICEAKCVogYPHVA4lCAmQto+N2mRhD43djmmrT3EIPdpH2+8drQZRlB/q0FJgOPl3kPhkaf+MLk7mrlTMe4dHV28LxLzJ+NkgkfFI0tkjJa9p6EKmy9BExPltMK/Q4xn9XELTshnluwtGErGkqMIysBUYDBMIysY1YmWZjbB15eRwN/WfGexo5lZ0pNpxH1a9mzjGW/9RdxxbU9PspkmOEd3PF9hi2nmZpxoFB9LauPZRes6+rhSIec2X5Wy+TmeFjWt4gAAV58FuYLWuqEBQCqAFAEAQBBlWjeNUGyYaAIG1IBqQCpQSpQYNUEqgIKBgUDAoDWqCIGBQMCgKBHmiCsvQVOl4oIZvCg7v0i37Bhsm/AZWQMwuXlb5dw40ba3Z8LJDXgGScGv7DQoPTt4bTlmkfeQMpdxD+eID52jk9vbwVN2+vNJzHpadTtRjjLhmwujkDgKEFcM+VpEtxA8SMDhz6haJjCcr2rEOEwLWNJ6LFEyyYYHvc2NjS57jRrRxJKYYTbHl3G38Iyygc+ZzWPLS+5mcQGxsaKmrjwAHUq86HT4/ysqO12OXiPT5p9ZvUmLee6WR455O3MQHQYzoJnnhLdU+umln0+9WzhcXG6rUFrHILKoASgBKBUEQRoqaIM+3ZQIMxvIIIgBKAFyAa+KDDBQGqCICCgYFAQUDhBEBqgJdQIK3GvNBVITRBSQ48kCO1BBjycQQ4VB4EHkg9W9MfWmLGW9vt7djnvx0RDLDNVL5LVh+WOcfM+JvRw4tHOoUTETGJIesZbamPysLL+1lZpnbqivbekkEoPJ3h4d4Vbu6GfNXbp7k18T6czNtnMWTyfK82Lq+M6h/tCrdmi9fcLGnZpb6rjiMiK1gJA5lrmuHKv6SVpnXZsjdX5G1xtxcOIibyFS5xDQO8rCtZlNtsR7bm02rdyMDi8MqaGrTQDtBNK9wXRTqXt6c1+3WHQ22NxWCx82Svp47S0t26rrI3LgxjW+88B+ZVr1uhFPM+1fu7U3/R87+sPrs/dccu2dr67bbFaXl66rZr8NNQ3TwMcNRWnN3Wg4KxcrypjqFqDNhegyAUFgdwQSqAIIgiC6GPigzoxQBBbqoEALkCkoASgXUgxwgKAoIgIQGqBgUDghBECPdRAo4oFcgjWhBTLzQY7xwQYknAoN1tPfe69pzl+CyD7eFxrLYyfy2slP3Qu8I97aFB63hv7lca9jW5/b8kU/wCu4xsrSz3+XLR1fZVB1Vv65+k1yNT766t3Hm25s3avi0OWE66z9ITyn5Gf149KbVpdHeXd079ttaPqe9+gJGusfSDlLkdw/wB0kcMT2bZ2xI+4NQy7ycrSwD93kw8a+wuWaHh2899b23fd/cbivprlrTWG0aPLtovZHC3wD380GmsGEElw+KDNcynEIL4q8EGUCaIHaeiB0EQQNJQWxx/FBlRsogtBogmpANSCVKBaoJUIKGoCgKCIGHJAUBQFAUCOQTogUoCeSDGk5oKnckGJKgpQFAw70EHegZvMc0FjuX6e9AI//X3oJJy/6SClnd3IMhnyoHbzQWICEFrO5BczuQXD5UEQRAEEQKUAQf/Z"},function(e,t,a){e.exports=a.p+"images/default_066baf863dfef038a7ec2cf4d5ed57266d.jpg"},function(e,t,a){e.exports=a.p+"images/default_0789f901b29c461b8f20a3401726815119.jpg"},function(e,t,a){e.exports=a.p+"images/magic_164afb45a801b0c04c004a0b5826eb780.jpg"},function(e,t,a){e.exports=a.p+"images/magic_2936b6d0cc0b2a2e6836e16c37aee255c.jpg"},function(e,t,a){e.exports=a.p+"images/magic_31fe89f152460580867ad7941e672cef9.jpg"},function(e,t,a){e.exports=a.p+"images/magic_4e4dc772bf2f6f9437d1077d5ec0f1161.jpg"},function(e,t,a){e.exports=a.p+"images/pressed_018d8095b44f9d29a662327811c1aa4731.jpg"},function(e,t,a){e.exports=a.p+"images/pressed_02b4db5df309ec23071abb0cc82a16ebd8.jpg"},function(e,t,a){e.exports=a.p+"images/pressed_035f705dc4906bc11c13efc9b98d528fa7.jpg"},function(e,t,a){e.exports=a.p+"images/pressed_049650bb32f61c1c01e0a32a537ed2f5f7.jpg"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QNfaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9IjlDRDY0RDdEQTExRDRFRTE0REUxOTNCNDRFMjkzOTEzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjY5MTc1QUNFQzEzMTExRTY4NjQ0OEVGRTZBREUxNkY5IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY5MTc1QUNEQzEzMTExRTY4NjQ0OEVGRTZBREUxNkY5IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RThDMUI1RTBDMThERTUxMTg4RTNENzlGRTMzNUQ1NUYiIHN0UmVmOmRvY3VtZW50SUQ9IjlDRDY0RDdEQTExRDRFRTE0REUxOTNCNDRFMjkzOTEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQABgQEBAUEBgUFBgkGBQYJCwgGBggLDAoKCwoKDBAMDAwMDAwQDA4PEA8ODBMTFBQTExwbGxscHx8fHx8fHx8fHwEHBwcNDA0YEBAYGhURFRofHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8f/8AAEQgAWgEsAwERAAIRAQMRAf/EAKUAAAICAwEBAAAAAAAAAAAAAAECAAMEBgcFCAEBAQADAQEBAAAAAAAAAAAAAAECAwUEBgcQAAEDAgUCAwUEBgcJAAAAAAEAAgMRBCExEgUGQQdRgSJhcTJCE6GxMxTwkVJyIwjB0eFigiQVorLCY3ODVCUWEQEAAgIABAMHAwIHAAAAAAAAAQIRAyExEgRBUQVhcZHRMhMGgbEiQiOhwYIzFDQV/9oADAMBAAIRAxEAPwDlwKLJmlEOCgIQOCgdpQMCUFrXILGuQWByBw5A4cgcOQMCgYFAwQepsXGt+3+Z8Wz2b7r6P481QyGL/qSuo0e7P2Ly91pm8cOcPo/xz1Wna7LRsnGu0e/jHL4toh4NxDbSP/oeSiacH1WW0M+pT2GZ4IPk0LxfapH1Wz7nb7j8qvPDTr/W/wAo+csmGw7Vh1I7DcbgdHS3ej7GAJnV5T8XPv8AkXfz/VSPdX5vQi4x2yu6f5K/tvbHdl/2ODlf7U+E/FjX8j76v9VJ99Y/yU33aXbLkF/H97pIcW2m4sDcPASxj72pOik/Tb4vf235daOG7X+tPlPzaNvvG9/2GUR7vYyWoc7THOfVBIf+XK2rTX9fsWi+u1OcPquz9R0dzGdVot7OVo98c3malg9mQ1IqakALkUNSIFSoASqF1omQ1KGQLkUC5EAuQyUuRMgXKmSlyAakR4IK+gfiMmBRDtKBqoGBQMCgdpQMCgdrjVBaHIHDkFgKBg5BY1yBwfHLqg3HjnEdvisIuQ8sdJBssuO37fES25vj4imMcP8Aezd0oMwr5T3Gl/IttTJHs+xRem2222H04w0dCG+qR3iVJjJEuZX3cN5fo263BaMpJq4/4WrmzoxPF1dd+qIl7PHZuU3xFxdzC2tzi1jGBpd+vovFu21jhD301Rji3qy3a4hABDHgdSKH9YXk+9aFnt6y2LbuRR4awQOtMSPJbad1Mc3m2dr5NvsN1tr2xfaztiv9unGmW1mAkjcPChyK6OrfEx5w8U1trtFqzNbxymOEuZ9yu3txslnJv/Gmuu9jZ6r2ydWSezH7YOckI6k4t61GS+iPqry8vJ9h6X+S22Y17sdfhbl1e/2/u5YeQXFMGtofYtP23dn1CfIh3+69g8k+2k+oWId+u/2vsT7bD/0LFO93f7av20/9Cxf9auv2yn20/wCfbzOzfLkHF1fep9tlX1CzKh3tjsJGge0LGaPTTvonmzY7iOQVY7UFhh663ieSwSVRnEoXKKBciFLlQC5EKXIZDUiZeGvoH4nJmlEOCgcFAwQMCgYFA4KBuiBgUDhyCxrkFgKC1maDbOD8f267fdb5vjS7j2z6TPD/AOVcvFYrUV6H4n+zDqg8juBz6d077+8P1LmarbOzbhHHG3BrWgfCxowwzQchvb+93G5M91KZZHZVyaPBo6BBtnD+LslAvrtmqMfhMPU+JXP9QzFMw6Xp146prLfmEAAAUAXCl2cLmyLFV8cxaQ5poRkVEmHq2O6XFq8XNu6jspYz8LvJZUvNZzDVfXFuEuicc36O5ibcQkEkaZoXY55tcOtV1u3354w5G/TNZxLh3eTt/DxjeY9x2qLRx3dyX2jRlbzjGS29g+aP2YdFu2UiOMcpfS+ld9O6nTaf7lf8Y8/m52StbqSRGMgSqhSUYgSqiBxChFsMi3vZI3Ag0WNq5enT3M1l7VretmbnR3ULRNcOzp3xeGW2SqxeiLDqRclJQyBciZKXImQ1IZeQAvoH4rI0RBCBwUDAoHCBgUDAoHBQMEDCqCxoPggdpQWB7/kbqkNAxgzc44Nb5nBB0PnE9vsO1bfxiM6YNlgE+5vFP4l7K3XM51My0nSg+et33Kfcr+W6lJq8+hpPwsHwtCDJ2DbDfX8cPyk1efYM0HV4I2RxNjYKMaAAB4BYbKRasxPiz13mtomPBZVfL3pNZmJ8H09LRaImPEwcViyO2SimBk202JByIUS0PW2Dd3bfuTHk/wAGT0TD2HI+Sz1bOi2Wnfq66+1vnJtjbyrhm6bFgZ5YvzO3uzpcweuOn71NPmu3rnqiauX2+77O2t/Ln7vF8o1NPUC1wwc05gjMH3LU+2yBRiQqoBKMQVQEQCiZX21w6N4IKxtXL0aN01l7sE4e0OC88w7uvZmMrw9Yt2ULkMlLkTIFyGQ1ImXnlq+gfjEoEQaIIEDBAwKBgUDgoGBQbbxHttyDk9ob20lt7Sz1ujZNcOdV7m/FpYwF1AcKoNpj/l/5AW1/13b6+H05/wCpA47Acnr6d424+8Tt+9qBHdgOZNI07htrq5UkkH/Ag9TjvZDkO1b3t27btdWMm3WNwy4uIYXve9/06ua0VaB8YCDlvdbdpphdyucTJf3Ty89SNRd/Ug5axhc5BvvBbANbNcEYmjQg3RkfsQOYwuP6jpxMWjxdb0/dwmvkOgeC5uHR6g+mFMMuo0TSHLHC5FziCphlDqnBtxdJZ2U1avZRhPtaaLqdnfhDi95TFph87dytrj2rn/ILCIUhjvJHxDwbNSUf7637IxaX0/p+yb6KTPl+3BrJWL1lRjkFUBEREkpRjIA0KpEvT26f5StN4dXtNvg9Rr8FpdOth1IyyBciZKXIZDUiZYxXffjclqiCCgJQQFA1UEDggcOQM1wQd17WXMbOI7e2Iio+r9X9/wCq6v2UQb7HdvIGSC784aAUApmanFAW3hr4ILb+7DttuG19ZjeW08Q00QfJnc6F/wBazZjT1u80GnQW3qoAg6LxWARbc3xJKD324IGWrfq66TVt07Oi0SIXzkw78SdrQViZMWAD2+KixKmQKYbIl0fgjbdlo5sZLmNewx1NcXNBkGHgV0O0iOLl95MzPFxbvg5h7q78WZaoK+/6DKr17fql3vSf+tX9f3aKVre+S1VQKoiIgVRCkqsQVGRZvpIFrvD1drbFnsRvwWiYdqlllVGzIVRMgXImU1IZYmtd5+PSmpEQOQMHIJqQMHIDWqA1oggcg9zZua8h2a1/K7fOxkIcXhskYfQuxOZCD1G92ecNwF1bn324/ocgtZ3g5w3OS1f74SPucgzbfvXyphH1rK1lAz0ukYT+vUg2LineJu9cjsdovbCSz/PPNvHNqa+P6j2nSDShAJwqg03urtL2CGTT+FM+MoNHtbQAVLcSc0G6bA6lmGig0lB6zXOGAOCBwgJGK4vfaum+Y5S6/Z7equJ8EBIXhexY04U6qBXNqphlEumdvrBw2+2wxlcX+RP9i6XZU4OX3l/5S+dO5G7x7r3A5BfRGsMl49kTuhbDSIH/AGFuvOZl9L6fSa6KRPl+7XKrF6wRERMgSiFVQEQCiLbb8RSzdo+p68TsF55dqkrdSjbkNSGQ1ImUqhlhal3X5DIhyIIcgYOQGqCAoGDkB1ID0QRANSBg8IHbKEDx3M1vLHc27tNxA9s0LsqPjIc37Qg7ZyawteVcdg3W0AMe6QMuoiMmzU9bfJ4IQcj/ACLonOa5ulzCQ5p6EZhB62zP0OdH44hB7IQO0miB8wvP3WrrpPnDf22zov7EC4OHaysa3NYzBll7fYS3t3FbRirpDT3DqfJWKTM4hLXisZb/AMp3uHhvAtx3htBLbQC229h+a4l/hx09xOryXapXoq5muk7dsV854vkoPccS7U44uccyTiT5rS+yieB2uqFFFESqIVVARERAVF9q31VWFno7eOL04zQLRLrUPqRsympEyXUhlNSJlh1XcfkspVEEOQMCgYFA1aoJkgIKBgUBQI4gIKy9BW6bHNBHTnTmg6P2Z5xb210/ie7TBljuEmvaZnn0w3jviiJPwtm6f3veg2bm/DZYZpL62io4E/moQMQR84H3oNKjjdHIHN6eCD2IXNkYHDzQXAIHAQENNaLhd1q6L+yXX7fb1V9rJiicS1rQS9xoGgVJK8zdl0Th3FzatE8wpdSt9Vco2ZkV+9dPte36f5TzeDuN/Vwjk4R317lRcm5BHsm1Stk49sr3NilYatubmmmSavVrfhZ5nqt95y9/p+no/lPOXO4nVatMu9rngtY7FRsPVRAKqAiIiAqIMShDMtmUWq0vforhmtyWp76iSjLIEoxyGpEyGpUyxqrtvyeUqgiAgoGBQMCgZAUBqghdQIK3GqCmQlBUdXRAji4ZoMeSjgQ7EHog7R21702dxDBx/mU/0powIrDf5DVrwMGxXZ6O6CTI/Nig3TkXbqKd35myLYHyDWKYwyA4hzS3KviMEGnz7FvG2yUuLZwYTTW0amn3EIMiTbNwhJbLbSMc34hp1UqK5t1DJAbTb7q6cW28ZlLRV1CAAPEkkBB7FjxPcrmMPj04uoRjRo8S6lPILy91o668OcPR2+3onjybjsnFbDaYn311K1v0WF015OWxxRtGZq4hrR7SVq09rFOM82W3uJtwhxXvH37i3OG54lwyT/1jqx7lvbSWuuAPiit8qRHJz/m6YZ+ieTLRrzbi4qwgaR4LVLt0nDOhctcvfrsvBxWLetBwUERAREQBUWxR1KxmW7XRnRNoFql0NdV1Vg3gSqZAlEyUlEyFVUyoC7T8qkUBQRAyAoCCgeoQRAj3IFCBXY4II1qCiXNBjyDBBiSDMHEHAgoNr4V3T5jxCkG3XQutrr6tqvKywf8Abx1RH9009iDrOyfzF8PuwGb5td1tUp+KW2pdwE+70vA94QbZa9ze0FyysfIrKKuJZNE6F2PiC0IBP3Q7P2LdR3+zkIxDLeJ0rvINag1LkX80PF7Frmce2K83eYfDNef5SAHx0jXI77EHDOfd1+dc3d9Lerox7a12qLarZpitWkZFzc5HDxeStc83ppXhlq9i31GvuWF3r7eOLNcwjJanRhfETgsZevXLLaTRa3riTtKKdREQShKGDsjqpMttKMqNlFrmXspRcMFi9EDqUXIalTIFyJkC5GOQqqZVBdl+WyZBEEQN4ICgKBkEQVuQMgrOaBjkgxn5oKnfCgw5UFXVAwQHogLf0ogIzGaCS/4fNeXfzd30v/bn3qo+v4S1fF7o/wBIyZfJ5KwW/Qsf6UVZUZLMlhL115HbmsWaxQFCDsUltqvYsJeii5uSxl6KmRmCgCqIiAUQOqI//9k="},function(e,t,a){e.exports=a.p+"images/pressed_06ee6659dc4c884f4ce897f961b82867dd.jpg"},function(e,t,a){e.exports=a.p+"images/pressed_075f1556acfe419d708581484968f4b330.jpg"},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),a(1115)),h=function(t){function l(e){r(this,l);var t=n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.state.groupData=null,t.state.showItem=!1,t.state.isSmallPic=!1,t.hadfoldItem=!0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return o(l,t),i(l,[{key:"loadData",value:function(e){var t=a(163)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"applyHandler",value:function(){s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["colorSplashItem_"+t].state.beSelected&&this.refs["colorSplashItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["colorSplashItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["colorSplashItem_"+t].cancelHandler();this.state.isSmallPic=!1,s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"afterfold",this).call(this),this.setState({showItem:!1})}},{key:"afterUnfold",value:function(){this.setState({showItem:!0}),Fotor.progressBar.hide()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e&&null==t.state.groupData&&t.setState({groupData:t.loadData(e.effectGroupId)})}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e.swtichMode=!1,e}},{key:"loadTempHistoryData",value:function(e,t){var a=this.state.groupData.items.length;if(this.hadItemUnfold()){for(var r=0;r<a;r++)if(this.refs["colorSplashItem_"+r].state.beSelected)return void this.refs["colorSplashItem_"+r].loadTempHistoryData(e,t)}else{for(var n=0;n<a;n++)this.refs["colorSplashItem_"+n].cancelHandler();this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}}},{key:"doItemUnFold",value:function(e){Fotor.historyManager.mergeTempStep();for(var t=this.state.groupData.items.length,a=0;a<t;a++)void 0==e||null==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.refs["colorSplashItem_"+a]!=e&&this.refs["colorSplashItem_"+a].state.beSelected?(this.refs["colorSplashItem_"+a].exitColorSplashMode(),this.refs["colorSplashItem_"+a].setState({beSelected:!1})):this.refs["colorSplashItem_"+a]!=e||this.refs["colorSplashItem_"+a].state.beSelected?this.refs["colorSplashItem_"+a]==e&&this.refs["colorSplashItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({showItem:!0})}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.newbieGuide?" bright":"",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_effect_ColorSplash_tip,helpTipGif:a(1116),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},this.state.groupData.items.map(function(a,r){return e.createElement(c,{ref:"colorSplashItem_"+r,unFoldFun:t.doItemUnFold.bind(t),data:a,showItem:t.state.showItem,key:r,scroller:t.props.scroller})}))):e.createElement("div",null)}}]),l}(l.default);t.default=h}).call(t,a(0))},function(e,t,a){(function(t,r){var n=a(8),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=(a(53).default,a(5)),s=i({displayName:"ColorSplashItem",getInitialState:function(){return{beSelected:!1,unFoldFun:null,last_Point:null,canvas_Point:null,circel_Point:null,canvas_isDrawing:!1,brush_Size:0,brush_opacity:100,isMoving:!1,hadchanged:!1,savedOrgImg:null,eraserPat:null,isEraserMode:!1,brushPoints:[],beSwapLayer:!1,frontDefaultOpacity:100,backDefaultOpacity:100,itemIcon:"",defaultIcon:"",actionIcon:"",opacity:0}},componentDidMount:function(){this.props&&(this.state.unFoldFun=this.props.unFoldFun,null!=this.props.data.frontDefaultBlend&&void 0!=this.props.data.frontDefaultBlend?this.state.frontDefaultOpacity=parseInt(this.props.data.frontDefaultBlend):this.state.frontDefaultOpacity=100,null!=this.props.data.backDefaultBlend&&void 0!=this.props.data.backDefaultBlend?this.state.backDefaultOpacity=parseInt(this.props.data.backDefaultBlend):this.state.backDefaultOpacity=100,""==this.state.defaultIcon&&(this.state.defaultIcon=a(798)("./"+this.props.data.defaultIcon+".jpg")),""==this.state.actionIcon&&(this.state.actionIcon=a(798)("./"+this.props.data.actionIcon+".jpg")),""==this.state.itemIcon&&(this.state.itemIcon=this.state.defaultIcon))},clickHandler:function(e){this.state.unFoldFun&&this.state.unFoldFun(this);var t=this;if(this.state.beSelected)this.state.itemIcon=this.state.defaultIcon,t.exitColorSplashMode();else{this.state.itemIcon=this.state.actionIcon,Fotor.progressBar.show(!0);var a=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.state.brush_Size=Math.round(240*a*.001),this.refs.brushSize.setDefault(240),this.state.brush_opacity=100,this.refs.intensity.setDefault(this.state.brush_opacity),this.refs.switchBox.setSelect(!1),this.state.isEraserMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!1,setTimeout(function(){t.enterColorSplashMode()},500)}var r=!this.state.beSelected;this.setState({beSelected:r});var t=this;setTimeout(function(){r?t.scrollerFix():t.scrollerUpFix()},300)},toggleEraserMode:function(){this.state.isEraserMode=!this.state.isEraserMode},enterColorSplashMode:function(){this.state.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.frontCommond,this.enterModeSetpCallBack_0,this.state.frontDefaultOpacity,"effect")},enterModeSetpCallBack_0:function(){Fotor.mainCanvas.enterBeautyMode(),this.savedEraserPattern();var e="layer top start;"+this.props.data.backCommond+"layer top swap;"+this.props.data.frontCommond+"blend layer top opacity 100;";Fotor.mainCanvas.fotorEngine.process_commond(e,this.enterModeSetpCallBack_1,this.state.backDefaultOpacity,"effect")},enterSwitchColorSplashMode:function(){this.state.hadchanged=!0,Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.backCommond,this.enterSwitchColorSplashMode_0,this.state.frontDefaultOpacity,"effect")},enterSwitchColorSplashMode_0:function(){Fotor.mainCanvas.enterBeautyMode(),this.savedEraserPattern();var e="layer top start;"+this.props.data.frontCommond+"layer top swap;"+this.props.data.backCommond+"blend layer top opacity 100;";Fotor.mainCanvas.fotorEngine.process_commond(e,this.enterModeSetpCallBack_1,this.state.backDefaultOpacity,"effect")},savedEraserPattern:function(){var e=this,t=new Image;t.width=Fotor.mainCanvas.fotorEngine.get_canvas().width,t.height=Fotor.mainCanvas.fotorEngine.get_canvas().height,t.onload=function(){e.state.savedOrgImg=t;var a=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");e.state.eraserPat=a.createPattern(e.state.savedOrgImg,"no-repeat")},t.src=Fotor.mainCanvas.fotorEngine.get_canvas().toDataURL()},enterModeSetpCallBack_1:function(){var e=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d"),a=this.state.brushPoints.length;if(a>0)for(var r=0;r<a;r++)if("hardEraser"==this.state.brushPoints[r].model)for(var n=0;n<this.state.brushPoints[r].points.length-1;n++)e.save(),e.strokeStyle=this.state.eraserPat,e.lineJoin=e.lineCap="round",e.lineWidth=this.state.brushPoints[r].size/Fotor.mainCanvas.editorCanvasScale,e.beginPath(),e.moveTo(this.state.brushPoints[r].points[n].x,this.state.brushPoints[r].points[n].y),e.lineTo(this.state.brushPoints[r].points[n+1].x,this.state.brushPoints[r].points[n+1].y),e.stroke(),e.restore();else if("lucency"==this.state.brushPoints[r].model)for(var i=0;i<this.state.brushPoints[r].points.length-1;i++){var s=Fotor.EngineAction.distanceBetween(this.state.brushPoints[r].points[i],this.state.brushPoints[r].points[i+1]),l=Math.max(.13*this.state.brushPoints[r].size,1),c=Math.floor(Math.max(Math.ceil(s)/l,1)),h={x:this.state.brushPoints[r].points[i+1].x-this.state.brushPoints[r].points[i].x,y:this.state.brushPoints[r].points[i+1].y-this.state.brushPoints[r].points[i].y},d={x:h.x/c,y:h.y/c};e.save();for(var u=.5*this.state.brushPoints[r].size*1.15/Fotor.mainCanvas.editorCanvasScale,p=2*u,m=0;m<c;m++){var f=this.state.brushPoints[r].points[i].x+d.x*m,g=this.state.brushPoints[r].points[i].y+d.y*m,v=e.createRadialGradient(f,g,0,f,g,u);v.addColorStop(0,"rgba(0,0,0,0.32)"),v.addColorStop(.2,"rgba(0,0,0,0.205)"),v.addColorStop(.4,"rgba(0,0,0,0.12)"),v.addColorStop(.7,"rgba(0,0,0,0.04)"),v.addColorStop(.83,"rgba(0,0,0,0.03)"),v.addColorStop(.89,"rgba(0,0,0,0.004)"),v.addColorStop(1,"rgba(0,0,0,0)"),e.globalCompositeOperation="destination-out",e.lineJoin=e.lineCap="round",e.fillStyle=v,e.fillRect(f-u,g-u,p,p)}e.restore()}Fotor.mainCanvas.trigger(o.default.ENGINELAYER_CHANGE),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,t(".upper-canvas").on("mousedown",this.moveControlDown),t(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()},exitColorSplashMode:function(){this.state.savedOrgImg=null,this.state.eraserPat=null,this.state.hadchanged=!1,this.state.brushPoints=[],Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(o.default.CONTENT_CHANGE),t(".upper-canvas").off("mousedown",this.moveControlDown),t(document).off("mousemove",this.drawMoving),t(document).off("mouseup",this.endChangeing)},drawBeauty:function(){var e=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");if(this.state.isEraserMode)e.save(),e.strokeStyle=this.state.eraserPat,e.lineJoin=e.lineCap="round",e.lineWidth=this.state.brush_Size/Fotor.mainCanvas.editorCanvasScale,e.beginPath(),e.moveTo(this.state.last_Point.x,this.state.last_Point.y),e.lineTo(this.state.canvas_Point.x,this.state.canvas_Point.y),e.stroke(),e.restore();else{var t=Fotor.EngineAction.distanceBetween(this.state.last_Point,this.state.canvas_Point),a=Math.max(.13*this.state.brush_Size,1),r=Math.floor(Math.max(Math.ceil(t)/a,1)),n={x:this.state.canvas_Point.x-this.state.last_Point.x,y:this.state.canvas_Point.y-this.state.last_Point.y},o={x:n.x/r,y:n.y/r};e.save();for(var i=.5*this.state.brush_Size*1.15/Fotor.mainCanvas.editorCanvasScale,s=0;s<r;s++){var l=this.state.last_Point.x+o.x*s,c=this.state.last_Point.y+o.y*s,h=e.createRadialGradient(l,c,0,l,c,i);h.addColorStop(0,"rgba(0,0,0,0.32)"),h.addColorStop(.2,"rgba(0,0,0,0.205)"),h.addColorStop(.4,"rgba(0,0,0,0.12)"),h.addColorStop(.7,"rgba(0,0,0,0.04)"),h.addColorStop(.83,"rgba(0,0,0,0.03)"),h.addColorStop(.89,"rgba(0,0,0,0.004)"),h.addColorStop(1,"rgba(0,0,0,0)"),e.globalCompositeOperation="destination-out",e.lineJoin=e.lineCap="round",e.fillStyle=h,e.fillRect(l-i,c-i,2*i,2*i)}e.restore()}null!=this.state.brushPoints[this.state.brushPoints.length-1]&&this.state.brushPoints[this.state.brushPoints.length-1].points&&this.state.brushPoints[this.state.brushPoints.length-1].points.push(this.state.canvas_Point),this.state.last_Point=this.state.canvas_Point},moveControlDown:function(e){if(e.preventDefault(),e.stopPropagation(),this.getEventPoint(e)){this.state.canvas_isDrawing=!0,t(document).on("mouseup",this.endChangeing),this.state.last_Point=this.state.canvas_Point;var a={};a.opacity=.5,a.size=this.state.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.state.isEraserMode?"hardEraser":"lucency",this.state.brushPoints[this.state.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}},drawMoving:function(e){this.getEventPoint(e)?(this.state.isMoving||(this.state.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.state.circel_Point=this.state.canvas_Point,this.state.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.state.isMoving&&(this.state.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.state.isMoving=!1)},endChangeing:function(e){this.state.canvas_isDrawing&&(this.state.canvas_isDrawing=!1,this.getEventPoint(e)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(o.default.BEAUTYLAYER_CHANGE)),t(document).off("mouseup",this.endChangeing)},getEventPoint:function(e){this.state.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.state.canvas_Point.x>r&&this.state.canvas_Point.x<r+o&&(t=(this.state.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.state.canvas_Point.y>n&&this.state.canvas_Point.y<n+i&&(a=(this.state.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.state.canvas_Point={x:t,y:a},!0)},helperDrawCursorCircel:function(e,t){if(this.state.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.state.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.state.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.state.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.state.isEraserMode||(t.save(),this.state.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}},mouseOverHandler:function(e){this.state.beSelected||(this.state.itemIcon=this.state.actionIcon),this.setState({})},mouseOutHnadler:function(e){this.state.beSelected||(this.state.itemIcon=this.state.defaultIcon),this.setState({})},handleBrushSizeChange:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.state.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.state.isMoving=!0,this.state.circel_Point={},this.state.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.state.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()},handleBrushSizeChanged:function(e){this.handleBrushSizeChange(e),this.state.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()},handleRecoveredChange:function(e){this.state.brush_opacity=this.refs.intensity.val(),this.refs.IntensitySpan&&t(this.refs.IntensitySpan).html(this.state.brush_opacity);var a="layer top start;"+this.props.data.backCommond+"layer top swap;"+this.props.data.frontCommond+"blend layer top opacity "+this.state.brush_opacity+";";Fotor.mainCanvas.fotorEngine.process_commond(a,this.comondCallBack,this.state.backDefaultOpacity,"effect")},handleRecoveredChanged:function(e){this.handleRecoveredChange(e)},comondCallBack:function(){Fotor.mainCanvas.trigger(o.default.ENGINELAYER_CHANGE)},componentWillReceiveProps:function(e){var t=this;e&&e.showItem&&(t.state.unFoldFun=e.unFoldFun,null!=e.data.frontDefaultBlend&&void 0!=e.data.frontDefaultBlend?t.state.frontDefaultOpacity=parseInt(e.data.frontDefaultBlend):t.state.frontDefaultOpacity=100,null!=e.data.backDefaultBlend&&void 0!=e.data.backDefaultBlend?t.state.backDefaultOpacity=parseInt(e.data.backDefaultBlend):t.state.backDefaultOpacity=100,""==this.state.defaultIcon&&(this.state.defaultIcon=a(798)("./"+this.props.data.defaultIcon+".jpg")),""==this.state.actionIcon&&(this.state.actionIcon=a(798)("./"+this.props.data.actionIcon+".jpg")),""==this.state.itemIcon&&(this.state.itemIcon=this.state.defaultIcon))},getDefaultHistoryData:function(){var e={};return e.brushPoints=[],e.swtichMode=!1,e},getCurrentHistoryData:function(){var e={};return e.brushPoints=this.state.brushPoints,e.swtichMode=this.refs.switchBox.isSelected(),e},loadTempHistoryData:function(e,t){if(this.state.brushPoints=e.brushPoints,this.refs.switchBox.isSelected()!=e.swtichMode)this.refs.switchBox.setSelect(e.swtichMode),Fotor.progressBar.show(!0),e.swtichMode?this.enterSwitchColorSplashMode():this.enterColorSplashMode();else{var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");if(r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.state.savedOrgImg,0,0),r.restore(),t)this.state.hadchanged&&(this.state.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo());else if(a>0){this.state.hadchanged||(this.state.hadchanged=!0);for(var n=0;n<a;n++)if("hardEraser"==e.brushPoints[n].model)for(var o=0;o<e.brushPoints[n].points.length-1;o++)r.save(),r.strokeStyle=this.state.eraserPat,r.lineJoin=r.lineCap="round",r.lineWidth=e.brushPoints[n].size/Fotor.mainCanvas.editorCanvasScale,r.beginPath(),r.moveTo(e.brushPoints[n].points[o].x,e.brushPoints[n].points[o].y),r.lineTo(e.brushPoints[n].points[o+1].x,e.brushPoints[n].points[o+1].y),r.stroke(),r.restore();else if("lucency"==e.brushPoints[n].model)for(var i=0;i<e.brushPoints[n].points.length-1;i++){var s=Fotor.EngineAction.distanceBetween(e.brushPoints[n].points[i],e.brushPoints[n].points[i+1]),l=Math.max(.13*e.brushPoints[n].size,1),c=Math.floor(Math.max(Math.ceil(s)/l,1)),h={x:e.brushPoints[n].points[i+1].x-e.brushPoints[n].points[i].x,y:e.brushPoints[n].points[i+1].y-e.brushPoints[n].points[i].y},d={x:h.x/c,y:h.y/c};r.save();for(var u=.5*e.brushPoints[n].size*1.15/Fotor.mainCanvas.editorCanvasScale,p=2*u,m=0;m<c;m++){var f=e.brushPoints[n].points[i].x+d.x*m,g=e.brushPoints[n].points[i].y+d.y*m,v=r.createRadialGradient(f,g,0,f,g,u);v.addColorStop(0,"rgba(0,0,0,0.32)"),v.addColorStop(.2,"rgba(0,0,0,0.205)"),v.addColorStop(.4,"rgba(0,0,0,0.12)"),v.addColorStop(.7,"rgba(0,0,0,0.04)"),v.addColorStop(.83,"rgba(0,0,0,0.03)"),v.addColorStop(.89,"rgba(0,0,0,0.004)"),v.addColorStop(1,"rgba(0,0,0,0)"),r.globalCompositeOperation="destination-out",r.lineJoin=r.lineCap="round",r.fillStyle=v,r.fillRect(f-u,g-u,p,p)}r.restore()}}}},applyHandler:function(e){if(this.state.hadchanged){var t=this.state.brushPoints.length;if(Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale),t>0)for(var a=0;a<t;a++){if(this.refs.switchBox.isSelected()){var r="layer top start;"+this.props.data.frontCommond+"layer top swap;"+this.props.data.backCommond+"blend layer top opacity "+this.state.brush_opacity+";";Fotor.mainCanvas.fotorEngine.process_painter_rule(this.state.brushPoints[a],r,!1,!1,this.props.data.backCommond)}else{var n="layer top start;"+this.props.data.backCommond+"layer top swap;"+this.props.data.frontCommond+"blend layer top opacity "+this.state.brush_opacity+";";Fotor.mainCanvas.fotorEngine.process_painter_rule(this.state.brushPoints[a],n,!1,!1,this.props.data.frontCommond)}Fotor.mainCanvas.fotorEngine.refresh_record()}else this.refs.switchBox.isSelected()?Fotor.mainCanvas.fotorEngine.process_rule(this.props.data.backCommond,!0):Fotor.mainCanvas.fotorEngine.process_rule(this.props.data.frontCommond,!0);Fotor.mainCanvas.applyEditorPic(this.afterApplyHandler)}else this.cancelHandler()},handleTransparentBorder:function(e){Fotor.progressBar.show(!0),e?(Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),this.enterSwitchColorSplashMode()):(Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),this.enterColorSplashMode())},afterApplyHandler:function(){this.state.unFoldFun(this),this.exitColorSplashMode(),this.setState({beSelected:!1})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.exitColorSplashMode(),this.setState({beSelected:!1})},render:function(){var e=this;return r.createElement("div",{ref:"item",className:"effect-item effect-item-90 "+(e.state.beSelected?"active active-310":"")},e.props.data.isVip?r.createElement("span",{className:"vip"}):"",r.createElement("div",{"data-display":e.props.doEffect},r.createElement("div",{className:"effect-item-img clearfix",onClick:e.clickHandler},r.createElement("div",{className:"effect-item-title"},Fotor.globalConfig.lang[e.props.data.name].toUpperCase()),r.createElement("img",{ref:"itemImg",onMouseOver:e.mouseOverHandler,onMouseOut:e.mouseOutHnadler,src:e.state.itemIcon,onLoad:this.onImageLoad,style:{opacity:this.state.opacity}})),r.createElement("div",{className:"effect-item-inner clearfix"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode})),r.createElement("div",{className:"container-leave-34"},r.createElement("div",{className:""},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size),r.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:"550",min:"10",default:"240",className:"input-range-grey",onChange:e.handleBrushSizeChange,onChanged:e.handleBrushSizeChanged}))),r.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Intensity,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"100"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"intensity",max:"100",min:"0",default:"100",className:"input-range-grey",bindEle:e.refs.RecoveredSpan,onChange:e.handleRecoveredChange,onChanged:e.handleRecoveredChanged}),r.createElement("div",{className:"paddingT15"},r.createElement(Fotor.ui.Checkbox,{ref:"switchBox",text:Fotor.globalConfig.lang.editor_effect_colorsplash_switchCheckbox,onClick:e.handleTransparentBorder})),r.createElement("div",{className:"clearfix effect-item-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:e.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:e.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},imageInterval:0,onImageLoad:function(){this.imageInterval=setInterval(this.showImage,30)},showImage:function(){var e=this.state.opacity+.1;this.setState({opacity:e}),e>=1&&clearInterval(this.imageInterval)},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),r=t(this.refs.item).offset(),n=t(".toolbar-list").height(),o=t(".toolbar-list").offset(),i=-e.state.topPosition,s=a;if(r.top<80){var l=r.top-o.top-i;return void e.scrollYTo(l)}if(r.top+s>n+o.top){var l=r.top-o.top-i;s<n&&(l-=n-s),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),r=e.state.topPosition,n=a.realHeight-a.containerHeight;r>n?t(e.content).stop().animate({"margin-top":-n},300,function(){e.handleWindowResize()}):e.handleWindowResize()}});e.exports=s}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/color-splasha33d845d857164f96be86114dc859638.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function a(e){n(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=15,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return i(a,t),s(a,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.setState({}),l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(110*e*.001),this.refs.brushSize.setDefault(110),this.beauty_opacity=15,this.refs.recovered.setDefault(15),this.brushPoints=[],this.hadchanged=!1,this.isEraserMode=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.setState({})}},{key:"afterUnfold",value:function(){var t=this;l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(!0),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){var e=105-this.beauty_opacity;Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.pixelate(e),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");if(r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t)this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo());else if(a>0){(new Date).getTime();this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a)}}},{key:"applyHandler",value:function(){if(l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=105-this.beauty_opacity,r=0;r<e;r++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[r],Fotor.EngineAction.pixelate(t),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold),FotorAnalytic.pageView("/editor/effect/pixelateTool",Fotor.routerManager.getToolPath())}else this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.newbieGuide?" bright":"",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_effect_pixelate,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"effect-group clearfix"},r.createElement("div",{className:"effect-item active active-no-img"},r.createElement("div",{className:"effect-item-inner"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"550",min:"20",default:"110",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Pixel_Size,r.createElement("span",{className:"pull-right",ref:"RecoveredSpan"},"50")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"5",default:"15",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix effect-item-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))))}}]),a}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.blur_opacity=100,t.beauty_opacity=100,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.setState({}),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(110*e*.001),this.refs.brushSize.setDefault(110),this.blur_opacity=100,this.refs.blurRange.setDefault(100),this.beauty_opacity=100,this.refs.recovered.setDefault(100),this.hadchanged=!1,this.isEraserMode=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.setState({})}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode}},{key:"drawBeauty",value:function(){this.hadchanged=!0,this.isEraserMode?Fotor.mainCanvas.fotorEngine.process_blur_brush_rule({points:[this.last_Point,this.canvas_Point],size:this.brush_Size/Fotor.mainCanvas.editorCanvasScale,opacity:3,model:"lucency"},Fotor.EngineAction.photoBlur(this.beauty_opacity),.01*this.blur_opacity,!1,!1):Fotor.mainCanvas.fotorEngine.process_blur_brush_rule({points:[this.last_Point,this.canvas_Point],size:this.brush_Size/Fotor.mainCanvas.editorCanvasScale,opacity:.6,model:"eraser"},Fotor.EngineAction.photoBlur(this.beauty_opacity),.01*this.blur_opacity,!1,!1),this.last_Point=this.canvas_Point}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)&&(this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore(),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData()),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),Fotor.mainCanvas.fotorEngine.process_blur_brush_rule(null,Fotor.EngineAction.photoBlur(this.beauty_opacity),.01*this.blur_opacity,!1,!1)}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"handleBlurChange",value:function(e){this.blur_opacity=this.refs.blurRange.val(),Fotor.mainCanvas.fotorEngine.process_blur_brush_rule(null,Fotor.EngineAction.photoBlur(this.beauty_opacity),.01*this.blur_opacity,!1,!1)}},{key:"handleBlurChanged",value:function(e){this.handleBlurChange(e)}},{key:"drawCanvas",value:function(){this.hadchanged=!0;var e=this.beauty_opacity;Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.photoBlur(e),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?Fotor.mainCanvas.applyEditorPic(this.applyfold):(Fotor.mainCanvas.fotorEngine.clean(),this.tryFold())}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.newbieGuide?" bright":"",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_effect_photoBlur.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_effect_photoBlur_tip,helpTipGif:a(1119),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,vip:!0,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"effect-group clearfix"},r.createElement("div",{className:"effect-item active active-278"},r.createElement("div",{className:"effect-item-inner"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"550",min:"20",default:"110",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_photoBlur_brushIntensity,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"blurSpan"},"50"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"blurRange",max:"100",min:"5",default:"15",className:"input-range-grey",bindEle:this.refs.blurSpan,onChange:this.handleBlurChange.bind(this),onChanged:this.handleBlurChanged.bind(this)}),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_photoBlur_blurIntensity,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"50"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"5",default:"15",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix effect-item-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))))}}]),c}(c.default);t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/shift-brush3f7f7f94cac19246405224a0133b2a4f.gif"},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),a(1121)),h=function(t){function l(e){r(this,l);var t=n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.state.groupData=null,t.state.deEffect=!1,t.state.thumbImg=null,t.state.isSmallPic=!1,t.hadfoldItem=!0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return o(l,t),i(l,[{key:"loadData",value:function(e){var t=a(163)("./effect_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"applyHandler",value:function(){s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["lensFlareItem_"+t].state.beSelected&&this.refs["lensFlareItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["lensFlareItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["lensFlareItem_"+t]&&this.refs["lensFlareItem_"+t].cancelHandler();this.state.isSmallPic=!1,s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"afterfold",this).call(this),this.setState({deEffect:!1})}},{key:"afterUnfold",value:function(){var e=this,t=!1;null!=e.state.thumbImg&&(t=!0),setTimeout(function(){e.creatImgThumb(function(){if(t)for(var a=e.state.groupData.items.length,r=0;r<a;r++)e.refs["lensFlareItem_"+r].updataThumbImage();e.setState({deEffect:!0}),Fotor.progressBar.hide()})},100),e.setState({deEffect:!0})}},{key:"creatImgThumb",value:function(e){var t=this;Fotor.mainCanvas.requestDocumentToolThumb().then(function(a){Fotor.mainCanvas.doEffectCanvas||(Fotor.mainCanvas.doEffectCanvas=document.createElement("canvas")),Fotor.mainCanvas.doEffectCanvas.getContext("2d").clearRect(0,0,Fotor.mainCanvas.doEffectCanvas.width,Fotor.mainCanvas.doEffectCanvas.height),Fotor.mainCanvas.doEffectCanvas.setAttribute("width",a.width),Fotor.mainCanvas.doEffectCanvas.setAttribute("height",a.height),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.set_image(a,a.width,a.height,Fotor.mainCanvas.engineFluentSize,null,!0),Fotor.mainCanvas.effectThumb=a.toDataURL("image/jpeg",.7),t.state.thumbImg=Fotor.mainCanvas.effectThumb,e&&e()})}},{key:"componentWillReceiveProps",value:function(e){var t=this;e&&null==t.state.groupData&&t.setState({groupData:t.loadData(e.effectGroupId)})}},{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"loadTempHistoryData",value:function(e){var t=this;t.creatImgThumb(function(){for(var e=t.state.groupData.items.length,a=0;a<e;a++)t.refs["lensFlareItem_"+a]&&(t.refs["lensFlareItem_"+a].cancelHandler(),t.refs["lensFlareItem_"+a].updataThumbImage());t.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()})}},{key:"doItemUnFold",value:function(e){for(var t=this.state.groupData.items.length,a=0;a<t;a++)void 0==e||null==e||"toBig"==e||"updataThumb"==e?void 0==e||null==e||"toBig"==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):void 0!=e&&null!=e&&"updataThumb"!=e||this.refs["lensFlareItem_"+a].updataThumbImage():this.refs["lensFlareItem_"+a]!=e&&this.refs["lensFlareItem_"+a].state.beSelected?(this.refs["lensFlareItem_"+a].cancelEffectFun(),this.refs["lensFlareItem_"+a].setState({beSelected:!1})):this.refs["lensFlareItem_"+a]!=e||this.refs["lensFlareItem_"+a].state.beSelected?this.refs["lensFlareItem_"+a]==e&&this.refs["lensFlareItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({deEffect:!0})}},{key:"render",value:function(){var t=this;return null!=this.state.groupData?e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase(),onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},this.state.groupData.items.map(function(a,r){return e.createElement(c,{ref:"lensFlareItem_"+r,unFoldFun:t.doItemUnFold.bind(t),data:a,doEffect:t.state.deEffect,key:r,thumbImg:t.state.thumbImg,scroller:t.props.scroller})}))):e.createElement("div",null)}}]),l}(l.default);t.default=h}).call(t,a(0))},function(e,t,a){(function(t,r,n){var o=a(8),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=(a(53).default,a(1122),a(5)),l=s({displayName:"LensFlareItem",tabDown:!1,getInitialState:function(){return{beSelected:!1,isDoneEffect:!1,doneEffectImg:null,unFoldFun:null,commondOpacity:80,effectThumbViewResult:0,controlDiv:null,lensFlareMoveDiv:null,event_state:{},circleX:0,circleY:0,circleRadius:0,OverOrOut:0,opacity:0,applyCommond:""}},componentWillUnmount:function(){t(document).off("keydown",this.handleKeydown),t(document).off("keyup",this.handleKeyup)},componentDidMount:function(){var e=this;this.props&&!e.state.isDoneEffect&&this.props.doEffect&&Fotor.mainCanvas.effectEngine&&(e.state.isDoneEffect=!0,e.state.doneEffectImg=this.props.thumbImg,e.state.unFoldFun=this.props.unFoldFun,null!=this.props.data.defaultBlend&&void 0!=this.props.data.defaultBlend?e.state.commondOpacity=parseInt(this.props.data.defaultBlend):e.state.commondOpacity=80,Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,e.setEffectImg,e.state.commondOpacity,"effect",!0)),t(document).on("keydown",this.handleKeydown),t(document).on("keyup",this.handleKeyup)},handleKeydown:function(e){9==e.keyCode&&(this.tabDown=!0)},handleKeyup:function(e){this.tabDown=!1},hanldeClick:function(e){if(!this.tabDown){this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected?this.cancelEffectFun():this.doEffectFun();var t=!this.state.beSelected;this.setState({beSelected:t});var a=this;setTimeout(function(){t?a.scrollerFix():a.scrollerUpFix()},300)}},doEffectFun:function(){this.refs.intensity.setDefault(this.state.commondOpacity),this.refs.brushSize.setDefault(50),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,this.state.commondOpacity,"effect"),this.state.circleX=Math.round(.5*Fotor.mainCanvas.canvas.documentWidth),this.state.circleY=Math.round(.5*Fotor.mainCanvas.canvas.documentHeight),this.state.circleRadius=.5*Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight),Fotor.mainCanvas.canvas.customControlsFun=this.redrawControlLayer,Fotor.mainCanvas.canvas.hasCustomControls=!0,this.createLensFlareControlDiv(),Fotor.mainCanvas.on(i.default.CONTENT_CHANGE,this.onContentChange),Fotor.mainCanvas.canvas.requestRenderAll()},cancelEffectFun:function(e){e&&this.state.unFoldFun(this),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,this.removeCropControlDiv(),Fotor.mainCanvas.off(i.default.CONTENT_CHANGE,this.onContentChange),Fotor.mainCanvas.canvas.requestRenderAll()},createLensFlareControlDiv:function(){null==this.state.controlDiv&&(this.state.controlDiv=t("<div class='lensFlareDiv'><div id='target-bar' class=' moveBar cursor-resize-move lensFlareMoveDiv'><div class='round'></div><span class='v'></span><span class='h'></span></div></div>").appendTo(t(".canvas-container")),this.state.lensFlareMoveDiv=t(".lensFlareMoveDiv"),t("#target-bar .round").css({left:"33.3%",top:"33.3%",width:"33.3%",height:"33.3%"}),this.refreshDivHolderSize(),t(".lensFlareMoveDiv").on("mousedown",this.moveControlDown))},checkFadeIn:function(){this.state.lensFlareMoveDiv&&(this.state.lensFlareMoveDiv.css({opacity:1}),this.state.lensFlareMoveDiv.show())},checkFadeOut:function(){var e=this;this.state.lensFlareMoveDiv&&this.state.lensFlareMoveDiv.fadeOut("fast",function(){e.state.lensFlareMoveDiv.show(),e.state.lensFlareMoveDiv.css({opacity:0})})},refreshDivHolderSize:function(){if(null!=this.state.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=this,t=Fotor.mainCanvas.canvasHolderEle.width(),a=Fotor.mainCanvas.canvasHolderEle.height();e.state.controlDiv.css({position:"absolute",left:"0px",top:"0px",width:t+"px",height:a+"px"}),e.refreshDivData()}},saveEventState:function(e){var a=this;a.state.event_state.save_circleX=a.state.circleX,a.state.event_state.save_circleY=a.state.circleY,a.state.event_state.mouse_x=(e.clientX||e.pageX||e.originalEvent.touches[0].clientX)+t(window).scrollLeft(),a.state.event_state.mouse_y=(e.clientY||e.pageY||e.originalEvent.touches[0].clientY)+t(window).scrollTop(),a.state.event_state.evnt=e},moveControlDown:function(e){var a=this;e.preventDefault(),e.stopPropagation(),a.saveEventState(e),t(document).on("mousemove",a.moving),t(document).on("mouseup",a.endChangeing),a.checkFadeIn()},moving:function(e){var a=this,r={};e.preventDefault(),e.stopPropagation(),r.x=(e.clientX||e.pageX)+t(window).scrollLeft(),r.y=(e.clientY||e.pageY)+t(window).scrollTop();var n=r.x-a.state.event_state.mouse_x,o=r.y-a.state.event_state.mouse_y;a.state.circleX=a.state.event_state.save_circleX+n/Fotor.mainCanvas.canvas.viewportTransform[0],a.state.circleY=a.state.event_state.save_circleY+o/Fotor.mainCanvas.canvas.viewportTransform[3],Fotor.mainCanvas.canvas.requestRenderAll()},endChangeing:function(e){var a=this;e.preventDefault(),t(document).off("mousemove",a.moving),t(document).off("mouseup",a.endChangeing),setTimeout(a.checkFadeOut,200)},removeCropControlDiv:function(){if(null!=this.state.controlDiv){t(".lensFlareMoveDiv").off("mousedown",this.moveControlDown),t(".canvas-container")[0].removeChild(this.state.controlDiv[0]),this.state.controlDiv=null,this.state.lensFlareMoveDiv=null}},redrawControlLayer:function(e,t,a){var r=this;Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight;t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),void 0!=e.viewportTransform&&t.transform.apply(t,e.viewportTransform),t.globalAlpha=.01*r.state.commondOpacity;for(var n=t.createRadialGradient(r.state.circleX,r.state.circleY,0,r.state.circleX,r.state.circleY,this.state.circleRadius),o=r.props.data.radialData.length,i=0;i<o;i++)n.addColorStop(r.props.data.radialData[i].ratio,r.props.data.radialData[i].color);t.fillStyle=n;var s=r.state.circleX-this.state.circleRadius,l=r.state.circleY-this.state.circleRadius;t.fillRect(s,l,2*this.state.circleRadius,2*this.state.circleRadius),t.restore(),null!=a&&void 0!=a||r.refreshDivData()},refreshDivData:function(){if(null!=this.state.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=this,t=e.state.circleX-this.state.circleRadius,a=e.state.circleY-this.state.circleRadius;t=Fotor.mainCanvas.canvas.viewportTransform[0]*t+Fotor.mainCanvas.canvas.viewportTransform[4],a=Fotor.mainCanvas.canvas.viewportTransform[3]*a+Fotor.mainCanvas.canvas.viewportTransform[5];var r=t,n=a,o=Fotor.mainCanvas.canvas.viewportTransform[0]*this.state.circleRadius*2,s=Fotor.mainCanvas.canvas.viewportTransform[3]*this.state.circleRadius*2;e.state.lensFlareMoveDiv.css({left:r+"px",top:n+"px",width:o+"px",height:s+"px"}),Fotor.mainCanvas.trigger(i.default.STATICLAYER_CHANGE)}},onContentChange:function(){Fotor.mainCanvas.canvas.requestRenderAll()},handleIntensityValueChange:function(e){this.state.commondOpacity=this.refs.intensity.val(),Fotor.mainCanvas.fotorEngine.process_commond(this.props.data.commond,this.comondCallBack,this.state.commondOpacity,"effect"),Fotor.mainCanvas.canvas.requestRenderAll()},handleIntensityValueChanged:function(e){this.handleIntensityValueChange(e)},handleBrushSizeChange:function(e){this.checkFadeIn();var t=this.refs.brushSize.val();t=.01*parseInt(t),this.state.circleRadius=Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight)*t,Fotor.mainCanvas.canvas.requestRenderAll()},handleBrushSizeChanged:function(e){this.checkFadeOut();var t=this.refs.brushSize.val();t=.01*parseInt(t),this.state.circleRadius=Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight)*t,Fotor.mainCanvas.canvas.requestRenderAll()},setEffectImg:function(e){var t=this;this.state.effectThumbViewResult&&(Fotor.mainCanvas.effectEngine.destroy_view(this.state.effectThumbViewResult),this.state.effectThumbViewResult=0),this.state.effectThumbViewResult=e;var a=Fotor.mainCanvas.effectEngine.get_view_texture(this.state.effectThumbViewResult);if(EW.check_CRM(a)){var r=Fotor.mainCanvas.effectEngine.texture_to_image(Fotor.mainCanvas.doEffectCanvas,a);t.setState({isDoneEffect:!0,doneEffectImg:r})}},componentWillReceiveProps:function(e){var t=this;e&&!t.state.isDoneEffect&&e.doEffect&&Fotor.mainCanvas.effectEngine&&(t.state.isDoneEffect=!0,t.state.doneEffectImg=e.thumbImg,t.state.unFoldFun=e.unFoldFun,null!=e.data.defaultBlend&&void 0!=e.data.defaultBlend?t.state.commondOpacity=parseInt(e.data.defaultBlend):t.state.commondOpacity=80,Fotor.mainCanvas.effectEngine.process_commond(e.data.commond,t.setEffectImg,t.state.commondOpacity,"effect",!0))},updataThumbImage:function(){Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.process_commond(this.props.data.commond,this.setEffectImg,this.state.commondOpacity,"effect",!0)},comondCallBack:function(){Fotor.mainCanvas.trigger(i.default.ENGINELAYER_CHANGE)},applyHandler:function(e){var t=this;this.cancelEffectFun();for(var a=t.state.circleX/Fotor.mainCanvas.canvas.documentWidth,r=t.state.circleY/Fotor.mainCanvas.canvas.documentHeight,n=this.state.circleRadius/Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight),o=t.props.data.radialData.length,i="",s=0;s<o;s++){var l=t.props.data.radialData[s].color.length-6,c=t.props.data.radialData[s].color.substr(5,l),h=c.split(",");i+=" ratio "+t.props.data.radialData[s].ratio+" color "+h[0]+" "+h[1]+" "+h[2]+" "+(255*parseFloat(h[3])).toString()}i+=";",this.state.applyCommond=this.props.data.commond+"basicAdjust lensFlare radius "+n+" pos "+a+" "+r+i,Fotor.mainCanvas.fotorEngine.process_commond(this.state.applyCommond,this.comondApplyCallBack,this.state.commondOpacity,"effect")},comondApplyCallBack:function(){Fotor.mainCanvas.applyEditorPic(this.afterApplyHandler)},afterApplyHandler:function(){this.state.unFoldFun("toBig"),this.comondCallBack(),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.process_commond(this.state.applyCommond,this.applyThumbHandler,this.state.commondOpacity,"effect",!0)},applyThumbHandler:function(e){var t=this;this.state.effectThumbViewResult&&(Fotor.mainCanvas.effectEngine.destroy_view(this.state.effectThumbViewResult),this.state.effectThumbViewResult=0),this.state.effectThumbViewResult=e;var a=Fotor.mainCanvas.effectEngine.get_view_texture(this.state.effectThumbViewResult);if(EW.check_CRM(a)){var n=Fotor.mainCanvas.effectEngine.texture_to_image(Fotor.mainCanvas.doEffectCanvas,a);Fotor.mainCanvas.effectThumb=n,r(n,function(e){Fotor.mainCanvas.effectEngine.set_image(e,e.width,e.height,Fotor.mainCanvas.engineFluentSize,null,!0),t.state.unFoldFun("updataThumb"),t.setState({effectThumbViewResult:0,beSelected:!1})})}},cancelHandler:function(e){this.cancelEffectFun(e),this.setState({effectThumbViewResult:0,beSelected:!1})},render:function(){var e=this;return null==e.state.doneEffectImg&&null!=e.props.thumbImg&&(e.state.doneEffectImg=e.props.thumbImg),n.createElement("div",{ref:"item",className:"effect-item effect-item-90 "+(e.state.beSelected?"active active-278":"")},e.props.data.isVip?n.createElement("span",{className:"vip"}):"",n.createElement("div",{"data-display":e.props.doEffect},n.createElement("div",{className:"effect-item-img clearfix",onClick:e.hanldeClick,onMouseDown:e.handleMouseDown},n.createElement("div",{className:"effect-item-title"},Fotor.globalConfig.lang[this.props.data.name].toUpperCase()),n.createElement("img",{ref:"itemImg",src:e.state.doneEffectImg,onLoad:this.onImageLoad,style:{opacity:this.state.opacity}})),n.createElement("div",{className:"effect-item-inner clearfix"},n.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Intensity,n.createElement("div",{className:"pull-right"},n.createElement("span",{ref:"RecoveredSpan"},"80"),"%")),n.createElement(Fotor.ui.InputRange,{ref:"intensity",max:"100",min:"0",default:"80",className:"input-range-grey",bindEle:e.refs.RecoveredSpan,onChange:e.handleIntensityValueChange,onChanged:e.handleIntensityValueChanged}),n.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Size,n.createElement("span",{className:"pull-right",ref:"blushSizeSpan"},"50")),n.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:"100",min:"10",default:"50",className:"input-range-grey",bindEle:e.refs.blushSizeSpan,onChange:e.handleBrushSizeChange,onChanged:e.handleBrushSizeChanged}),n.createElement("div",{className:"clearfix effect-item-btns paddingT10"},n.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:e.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),n.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:e.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},imageInterval:0,onImageLoad:function(){this.imageInterval=setInterval(this.showImage,30)},showImage:function(){var e=this.state.opacity+.1;this.setState({opacity:e}),e>=1&&clearInterval(this.imageInterval)},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),r=t(this.refs.item).offset(),n=t(".toolbar-list").height(),o=t(".toolbar-list").offset(),i=-e.state.topPosition,s=a;if(r.top<80){var l=r.top-o.top-i;return void e.scrollYTo(l)}if(r.top+s>n+o.top){var l=r.top-o.top-i;s<n&&(l-=n-s),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),r=e.state.topPosition,n=a.realHeight-a.containerHeight;r>n?t(e.content).stop().animate({"margin-top":-n},300,function(){e.handleWindowResize()}):e.handleWindowResize()}});e.exports=l}).call(t,a(1),a(23),a(0))},function(e,t,a){(function(t,r){a(1123);var n=a(5),o=n({displayName:"TargetBar",getInitialState:function(){return{display:!1,bg:"#000",x:200,y:200,width:50,radius:25}},componentDidMount:function(){},parentOffset:function(){this.offset=t(this.refs.TargetBar).parent().offset()},offset:null,show:function(){this.setState({display:!0})},updateTarget:function(e,t,a){void 0!=a&&(this.state.bg=a),void 0!=t&&(this.state.radius=t),null==this.offset&&this.parentOffset(),this.setState({x:e.x-this.offset.left,y:e.y-this.offset.top})},hide:function(){this.setState({display:!1})},render:function(){return r.createElement("div",{id:"target-bar",ref:"TargetBar",style:{display:this.state.display?"block":"none",left:this.state.x,top:this.state.y}},r.createElement("span",{className:"round",style:{width:2*this.state.radius,height:2*this.state.radius,marginLeft:-this.state.radius,marginTop:-this.state.radius,borderColor:this.state.bg}}),r.createElement("span",{className:"v",style:{background:this.state.bg}}),r.createElement("span",{className:"h",style:{background:this.state.bg}}))}});e.exports=o}).call(t,a(1),a(0))},function(e,t,a){var r=a(1124);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){t=e.exports=a(2)(!1),t.push([e.i,"/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n#target-bar {\n  position: absolute;\n  z-index: 50;\n  width: 100px;\n  height: 100px; }\n  #target-bar .round {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    display: block;\n    left: 0%;\n    top: 0%;\n    border: 1px solid rgba(102, 102, 102, 0.8);\n    border-radius: 1000px;\n    -moz-border-radius: 1000px;\n    -webkit-border-radius: 1000px; }\n  #target-bar .v {\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    margin: -10px 0 0;\n    width: 1px;\n    height: 21px;\n    background: rgba(102, 102, 102, 0.8); }\n  #target-bar .h {\n    position: absolute;\n    display: block;\n    left: 50%;\n    top: 50%;\n    margin: 0 0 0 -10px;\n    width: 21px;\n    height: 1px;\n    background: rgba(102, 102, 102, 0.8); }\n  #target-bar.white .round {\n    border-color: rgba(255, 255, 255, 0.8); }\n  #target-bar.white .v {\n    width: 10px;\n    height: 10px;\n    background: rgba(255, 255, 255, 0.8);\n    margin: -4px 0 0 -4px;\n    border-radius: 10px;\n    -webkit-border-radius: 10px;\n    -moz-border-radius: 10px; }\n  #target-bar.white .h {\n    display: none; }\n",""])},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0}),a(1126);var c=a(82),h=a(8),d=function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.isCircleMode=!1,t.commond_opacity=90,t.centerX=0,t.centerY=0,t.shiftRadius=60,t.shiftAngle=90,t.controlDiv=null,t.mouseDiv=null,t.circleMoveDiv=null,t.linerMoveDiv=null,t.leftDot=null,t.rightDot=null,t.event_={},t.maxPixel=0,t.OverOrOut=null,t.timeFlag=!1,t.moveControlDown=t.moveControlDown.bind(t),t.moving=t.moving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.dotControlDown=t.dotControlDown.bind(t),t.rotateing=t.rotateing.bind(t),t.moveControlOver=t.moveControlOver.bind(t),t.moveControlOut=t.moveControlOut.bind(t),t.checkFadeIn=t.checkFadeIn.bind(t),t.checkFadeOut=t.checkFadeOut.bind(t),t.refreshDivHolderSize=t.refreshDivHolderSize.bind(t),t.refreshDivData=t.refreshDivData.bind(t),t.drawCanvas=t.drawCanvas.bind(t),t.removetiltShiftControlDiv=t.removetiltShiftControlDiv.bind(t),t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.removetiltShiftControlDiv(),Fotor.mainCanvas.off(h.default.VIEWPORT_CHANGE,this.refreshDivHolderSize),Fotor.mainCanvas.off(h.default.ZOOM_CHANGE,this.refreshDivHolderSize),Fotor.mainCanvas.off(h.default.CONTENT_CHANGE,this.refreshDivHolderSize),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){this.shiftRadius=60,this.refs.brushSize.setDefault(60),this.commond_opacity=90,this.refs.recovered.setDefault(90),this.isCircleMode=!1,this.centerX=.5,this.centerY=.5,this.shiftAngle=90,this.maxPixel=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight,this.setState({})}},{key:"afterUnfold",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this);var e=this;setTimeout(function(){e.createtiltShiftControlDiv(),e.refreshDivData(),Fotor.mainCanvas.on(h.default.VIEWPORT_CHANGE,e.refreshDivHolderSize),Fotor.mainCanvas.on(h.default.ZOOM_CHANGE,e.refreshDivHolderSize),Fotor.mainCanvas.on(h.default.CONTENT_CHANGE,e.refreshDivHolderSize),e.drawCanvas(),Fotor.progressBar.hide()},500)}},{key:"createtiltShiftControlDiv",value:function(){null==this.controlDiv&&(this.controlDiv=e("<div class='tiltShiftDiv'><div id='tiltShiftMouseDiv' class='moveBar'></div><div id='target-bar' class='moveBar cursor-resize-move white circleMoveDiv'><div class='round'></div><span class='v' ></span><span class='h' ></span></div><div id='tiltShiftRect' class='rect-area cursor-resize-move'><div class='react-bar'><div class='round'></div><div class='line line-left'></div><div class='line line-right'></div><div id='tiltShift-LeftDot' class='dot dot-left'></div><div id='tiltShift-RightDot' class='dot dot-right'></div></div></div></div>").appendTo(e(".canvas-container")),this.mouseDiv=e("#tiltShiftMouseDiv"),this.circleMoveDiv=e("#target-bar"),this.linerMoveDiv=e("#tiltShiftRect"),this.leftDot=e("#tiltShift-LeftDot"),this.rightDot=e("#tiltShift-RightDot"),this.refreshDivHolderSize(),this.circleMoveDiv.on("mousedown",this.moveControlDown),this.linerMoveDiv.on("mousedown",this.moveControlDown),this.mouseDiv.on("mouseover",this.moveControlOver),this.circleMoveDiv.on("mouseover",this.moveControlOver),this.linerMoveDiv.on("mouseover",this.moveControlOver),this.mouseDiv.on("mouseout",this.moveControlOut),this.circleMoveDiv.on("mouseout",this.moveControlOut),this.linerMoveDiv.on("mouseout",this.moveControlOut),this.leftDot.on("mousedown",this.dotControlDown),this.rightDot.on("mousedown",this.dotControlDown),this.isCircleMode?(this.circleMoveDiv.show(),this.linerMoveDiv.hide()):(this.circleMoveDiv.hide(),this.linerMoveDiv.show()))}},{key:"saveEventState",value:function(t){var a=this;a.event_.save_centerX=a.centerX*Fotor.mainCanvas.documentWidth,a.event_.save_centerY=a.centerY*Fotor.mainCanvas.documentHeight,a.event_.mouse_x=(t.clientX||t.pageX||t.originalEvent.touches[0].clientX)+e(window).scrollLeft(),a.event_.mouse_y=(t.clientY||t.pageY||t.originalEvent.touches[0].clientY)+e(window).scrollTop(),"tiltShift-LeftDot"==t.target.id?a.event_.isLeftDot=!0:a.event_.isLeftDot=!1,a.event_.evnt=t}},{key:"moveControlOver",value:function(e){this.OverOrOut&&clearTimeout(this.OverOrOut),this.OverOrOut=setTimeout(this.checkFadeIn,300)}},{key:"moveControlOut",value:function(e){this.OverOrOut&&clearTimeout(this.OverOrOut),this.OverOrOut=setTimeout(this.checkFadeOut,300)}},{key:"checkFadeIn",value:function(){this.circleMoveDiv&&this.linerMoveDiv&&(this.isCircleMode?this.circleMoveDiv.fadeIn("fast"):this.linerMoveDiv.fadeIn("fast"))}},{key:"checkFadeOut",value:function(){this.circleMoveDiv&&this.linerMoveDiv&&(this.isCircleMode?this.circleMoveDiv.fadeOut("fast"):this.linerMoveDiv.fadeOut("fast"))}},{key:"dotControlDown",value:function(t){var a=this;t.preventDefault(),t.stopPropagation(),a.saveEventState(t),e(document).on("mousemove",a.rotateing),e(document).on("mouseup",a.endChangeing)}},{key:"rotateing",value:function(e){var t=this,a={};e.preventDefault(),e.stopPropagation(),a.x=Fotor.mainCanvas.canvas.getPointer(e).x,a.y=Fotor.mainCanvas.canvas.getPointer(e).y;var r=t.getTiltShiftAngle(this.event_.save_centerX,this.event_.save_centerY,a.x,a.y);this.event_.isLeftDot&&(r<180?r+=180:r-=180),this.shiftAngle=r+90,this.shiftAngle>360&&(this.shiftAngle=this.shiftAngle-360),t.refreshDivData(),this.timeFlag||(this.timeFlag=!0,this.maxPixel<1e6?setTimeout(t.drawCanvas,100):this.maxPixel>=1e6&&this.maxPixel<2e6?setTimeout(t.drawCanvas,200):this.maxPixel>=2e6&&setTimeout(t.drawCanvas,300))}},{key:"getTiltShiftAngle",value:function(e,t,a,r){var n=a-e,o=r-t,i=Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),s=n/i,l=Math.acos(s),c=180/(Math.PI/l);return o<0?c=-c:0==o&&n<0&&(c=180),c||(c=0),c+=360,c>360&&(c-=360),c}},{key:"moveControlDown",value:function(t){var a=this;t.preventDefault(),t.stopPropagation(),a.saveEventState(t),e(document).on("mousemove",a.moving),e(document).on("mouseup",a.endChangeing)}},{key:"moving",value:function(t){var a=this,r={};t.preventDefault(),t.stopPropagation(),r.x=(t.clientX||t.pageX)+e(window).scrollLeft(),r.y=(t.clientY||t.pageY)+e(window).scrollTop();var n=r.x-a.event_.mouse_x,o=r.y-a.event_.mouse_y;a.centerX=(a.event_.save_centerX+n/Fotor.mainCanvas.canvas.viewportTransform[0])/Fotor.mainCanvas.documentWidth,a.centerY=(a.event_.save_centerY+o/Fotor.mainCanvas.canvas.viewportTransform[3])/Fotor.mainCanvas.documentHeight,a.refreshDivData(),this.timeFlag||(this.timeFlag=!0,this.maxPixel<1e6?setTimeout(a.drawCanvas,100):this.maxPixel>=1e6&&this.maxPixel<2e6?setTimeout(a.drawCanvas,200):this.maxPixel>=2e6&&setTimeout(a.drawCanvas,300))}},{key:"endChangeing",value:function(t){var a=this;t.preventDefault(),e(document).off("mousemove",a.rotateing),e(document).off("mousemove",a.moving),e(document).off("mouseup",a.endChangeing)}},{key:"removetiltShiftControlDiv",value:function(){e(document).off("mousemove",this.rotateing),e(document).off("mousemove",this.rotateing),e(document).off("mousemove",this.moving),e(document).off("mouseup",this.endChangeing),this.circleMoveDiv.off("mousedown",this.moveControlDown),this.linerMoveDiv.off("mousedown",this.moveControlDown),this.mouseDiv.off("mouseover",this.moveControlOver),this.circleMoveDiv.off("mouseover",this.moveControlOver),this.linerMoveDiv.off("mouseover",this.moveControlOver),this.mouseDiv.off("mouseout",this.moveControlOut),this.circleMoveDiv.off("mouseout",this.moveControlOut),this.linerMoveDiv.off("mouseout",this.moveControlOut),this.leftDot.off("mousedown",this.dotControlDown),this.rightDot.off("mousedown",this.dotControlDown),e(".canvas-container")[0].removeChild(this.controlDiv[0]),this.controlDiv=null,this.mouseDiv=null,this.circleMoveDiv=null,this.linerMoveDiv=null,this.leftDot=null,this.rightDot=null}},{key:"refreshDivHolderSize",value:function(){if(null!=this.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=this,t=Fotor.mainCanvas.canvas.viewportTransform[4],a=Fotor.mainCanvas.canvas.viewportTransform[5],r=Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.canvas.documentWidth,n=Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.canvas.documentHeight;e.mouseDiv.css({left:t+"px",top:a+"px",width:r+"px",height:n+"px"}),e.refreshDivData()}}},{key:"refreshDivData",value:function(){if(null!=this.controlDiv&&Fotor.mainCanvas.canvas.viewportTransform){var e=this,t=Fotor.mainCanvas.canvas.documentHeight*(.01*this.shiftRadius)*.5,a=Fotor.mainCanvas.canvas.viewportTransform[0]*t*2,r=Fotor.mainCanvas.canvas.viewportTransform[3]*t*2;if(e.isCircleMode){var n=e.centerX*Fotor.mainCanvas.documentWidth-t,o=e.centerY*Fotor.mainCanvas.documentHeight-t;n=Fotor.mainCanvas.canvas.viewportTransform[0]*n+Fotor.mainCanvas.canvas.viewportTransform[4],o=Fotor.mainCanvas.canvas.viewportTransform[3]*o+Fotor.mainCanvas.canvas.viewportTransform[5],e.circleMoveDiv.css({left:n+"px",top:o+"px",width:a+"px",height:r+"px"})}else{var i=e.centerX*Fotor.mainCanvas.documentWidth,s=e.centerY*Fotor.mainCanvas.documentHeight;i=Fotor.mainCanvas.canvas.viewportTransform[0]*i+Fotor.mainCanvas.canvas.viewportTransform[4],s=Fotor.mainCanvas.canvas.viewportTransform[3]*s+Fotor.mainCanvas.canvas.viewportTransform[5];var l=e.shiftAngle-90;e.linerMoveDiv.css({transform:"rotate("+l+"deg)","-o-transform":"rotate("+l+"deg)","-webkit-transform":"rotate("+l+"deg)","-moz-transform":"rotate("+l+"deg)"}),e.linerMoveDiv.css({left:i+"px",top:s+"px",height:r+"px","margin-top":.5*-r+"px"})}Fotor.mainCanvas.trigger(h.default.STATICLAYER_CHANGE)}}},{key:"handleBrushSizeChange",value:function(e){this.shiftRadius=Math.round(this.refs.brushSize.val()),this.checkFadeIn(),this.refreshDivData(),this.drawCanvas()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e)}},{key:"handleRecoveredChange",value:function(e){this.commond_opacity=this.refs.recovered.val(),this.checkFadeIn(),this.refreshDivData(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){var e=this.commond_opacity<50?(50-this.commond_opacity)/50*6+4:(100-this.commond_opacity)/50*3+1,t=Math.max(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight),a=Fotor.mainCanvas.canvas.documentHeight/t*(.01*this.shiftRadius)*.5*.7;this.isCircleMode?Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.tiltShiftCircle(e,this.centerX,this.centerY,a),!0):Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.tiltShiftStrip(e,this.shiftAngle,this.centerX,this.centerY,a),!0),this.timeFlag=!1,Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"circularHandler",value:function(){this.isCircleMode||(this.isCircleMode=!0,this.circleMoveDiv.show(),this.linerMoveDiv.hide(),this.refreshDivData(),this.drawCanvas(),this.forceUpdate())}},{key:"linearHandler",value:function(){this.isCircleMode&&(this.isCircleMode=!1,this.circleMoveDiv.hide(),this.linerMoveDiv.show(),this.refreshDivData(),this.drawCanvas(),this.forceUpdate())}},{key:"applyHandler",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix",id:"tiltShiftTool"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.newbieGuide?" bright":"",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_effect_tiltshift,helpTip:Fotor.globalConfig.lang.editor_workspace_effect_tiltshift_tip,helpTipGif:a(1129),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner"},r.createElement("ul",{className:"ul-no-style tilt-shift-btns clearfix"},r.createElement("li",{onClick:this.circularHandler.bind(this),className:this.isCircleMode?"active":""},r.createElement("i",{className:"icon-34 circular"}),r.createElement("span",{className:"description"},Fotor.globalConfig.lang.editor_workspace_effect_tiltshift_circular)),r.createElement("li",{onClick:this.linearHandler.bind(this),className:this.isCircleMode?"":"active"},r.createElement("i",{className:"icon-34 linear"}),r.createElement("span",{className:"description"},Fotor.globalConfig.lang.editor_workspace_effect_tiltshift_linear))),r.createElement("div",{className:"clearfix paddingT15"},r.createElement("div",null,r.createElement("div",{className:""},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Size),r.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:"110",min:"2",default:"60",className:"input-range-grey",bindEle:this.refs.BrushSizeSpan,onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_effect_tag_Brush_Intensity,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"80"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"90",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default);t.default=d}).call(t,a(1),a(0))},function(e,t,a){var r=a(1127);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,"/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n.rect-area {\n  position: absolute;\n  z-index: 50;\n  width: 10000px;\n  height: 200px;\n  margin: -100px 0 0 -5000px;\n  border-top: 1px solid #fff;\n  border-bottom: 1px solid #fff; }\n  .rect-area .react-bar {\n    position: absolute;\n    left: 50%;\n    top: 50%; }\n    .rect-area .react-bar .round {\n      position: absolute;\n      left: 0;\n      top: 0;\n      width: 30px;\n      height: 30px;\n      margin: -15px 0 0 -15px;\n      background: url("+r(a(1128))+") center no-repeat;\n      background-color: rgba(255, 255, 255, 0.8);\n      border-radius: 1000px;\n      -moz-border-radius: 1000px;\n      -webkit-border-radius: 1000px; }\n    .rect-area .react-bar .line {\n      position: absolute;\n      width: 45px;\n      height: 1px;\n      margin: -1px 0 0 -60px;\n      top: 0;\n      left: 0;\n      background: rgba(255, 255, 255, 0.5); }\n      .rect-area .react-bar .line.line-right {\n        margin: -1px 0 0 15px; }\n    .rect-area .react-bar .dot {\n      position: absolute;\n      width: 13px;\n      height: 13px;\n      top: 0;\n      left: 0;\n      margin: -7px 0 0 -73px;\n      background: rgba(255, 255, 255, 0.8);\n      cursor: pointer;\n      border-radius: 10px;\n      -moz-border-radius: 10px;\n      -webkit-border-radius: 10px; }\n      .rect-area .react-bar .dot.dot-right {\n        margin: -7px 0 0 60px; }\n      .rect-area .react-bar .dot:hover {\n        background: #fff; }\n      .rect-area .react-bar .dot:active {\n        background: #ac975e; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTE0Nzk4NEZCNjJGMTFFNjgxNDlFRUMxODRFQTU2MTAiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NTE0Nzk4NTBCNjJGMTFFNjgxNDlFRUMxODRFQTU2MTAiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3OTg0REI2MkYxMUU2ODE0OUVFQzE4NEVBNTYxMCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1MTQ3OTg0RUI2MkYxMUU2ODE0OUVFQzE4NEVBNTYxMCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu8cHl4AAAIFSURBVHja7JZNSFRRGIbnlkUOhEwurIVki3Axi9oFQs5CHNGEzI2ILV2IYOQi0WWrxJUgTS1mY81ykBaWMihCSCUKIkGrFuUI4rJorCbG6TnwDlwuMyP3cGs2c+DhZe79vu89Z87PPU6xWAzVop0J1ajVjf9bazgtIB7vn0aeeJ9nMsuO3l9DcvCNZ7+DHPE8TEKhwvsdSMAgnbgUpLEZxXs4rFLjLizCOua3wQnC+B6swRX4CD8972/AI3gHN2FFOfbG9PwWkoJGWIAOmHGbM6/7yFO4o2m5YHKU69+YxPNIUoXMHM5g8gN9JnP3QvsDOT1PKCepGr5H3ANR2IIpCv+SSV7moTIr3cRMKSeqGr6Nh8AsknTJ1GWQr5Sk2LRyh2yMY9Ili/NhyVPDl/FladbCOOup4cs4Jw1bGJ+VFmyMD6RtFsbXpV9tjDelwxbG96UbNsYv4cScQuzH5ir7Pez5bc7rAeW+sDH+AKvQbjpBwaYKcbMlc8WklLOq/Vy2OdXuXBRqRd7CVXgDo/CdvXrsijF7+jnMSfs0tzEdp1YfCbPABuGLzuItjbDLFXMOxuAT9MJn5WStPxL02Pwde9AJryACE/DaE2rML8KR6SB5u8q1/yxS4ATMyEegW7eRnQrhLfCQfyQS2J1L87oNj6sc/qbeODw4rZ5Tv9DXjf9V+yvAAKyRoqXg58D3AAAAAElFTkSuQmCC"},function(e,t,a){e.exports=a.p+"images/tilt-shift4c75a8f658b5cbbe9ab5e6008935e931.gif"},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=function(t){function a(e){r(this,a);var t=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.hadchanged=!1,t.strength_value=20,t.thickness_value=25,t.lastRenderId=0,t.sampleToolName=e.toolName,t.sampleChildModuleName="effect",t}return o(a,t),i(a,[{key:"handleStrengthChange",value:function(e){this.hadchanged=!0,this.strength_value=this.refs.strength.val(),e&&this.updataProcess()}},{key:"handleThicknessChange",value:function(e){this.hadchanged=!0,this.thickness_value=this.refs.thickness.val(),e&&this.updataProcess()}},{key:"handleStrengthChanged",value:function(){this.handleStrengthChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"handleThicknessChanged",value:function(){this.handleThicknessChange(),this.doUpdataProcess(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"updataProcess",value:function(){this.lastRenderId&&cancelAnimationFrame(this.lastRenderId),this.lastRenderId=requestAnimationFrame(this.doUpdataProcess.bind(this))}},{key:"doUpdataProcess",value:function(){var e=.02*this.strength_value,t=.2+.008*this.thickness_value,a=Fotor.EngineAction.particles(e,t);Fotor.mainCanvas.fotorEngine.process_rule(a)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.strength=0,e.thickness=0,e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.strength=parseInt(this.refs.strength.val()),e.thickness=parseInt(this.refs.thickness.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.strength.setDefault(e.strength),this.refs.thickness.setDefault(e.thickness),this.strength_value=this.refs.strength.val(),this.thickness_value=this.refs.thickness.val()}},{key:"applyHandler",value:function(){this.hadchanged?(this.hadchanged=!1,Fotor.mainCanvas.applyEditorPic(this.applyfold)):(Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler())}},{key:"cancelHandler",value:function(){this.hadchanged=!1,this.tryFold()}},{key:"afterfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.setState({})}},{key:"afterUnfold",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this),Fotor.progressBar.hide()}},{key:"initUnfoldUI",value:function(){this.refs.strength.setDefault(20),this.refs.thickness.setDefault(25),this.setState({})}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_effect_filmGrain||"DARK CORNERS",onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"effect-group clearfix"},e.createElement("div",{className:"effect-item active active-no-img"},e.createElement("div",{className:"effect-item-inner"},e.createElement("div",{className:"marginT5 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_filmGrain_intensity||"Strength",e.createElement("div",{className:"pull-right"},e.createElement("span",{ref:"strengthSpan"},"0"),"%")),e.createElement(Fotor.ui.InputRange,{ref:"strength",type:"range",max:"100",min:"0",default:"0",bindEle:this.refs.strengthSpan,className:"input-range-grey",onChange:this.handleStrengthChange.bind(this),onChanged:this.handleStrengthChanged.bind(this)}),e.createElement("div",{className:"paddingT10 clearfix"},Fotor.globalConfig.lang.editor_workspace_effect_filmGrain_roughness||"Thickness",e.createElement("div",{className:"pull-right"},e.createElement("span",{ref:"thicknessSpan"},"0"),"%")),e.createElement(Fotor.ui.InputRange,{ref:"thickness",type:"range",max:"100",min:"0",default:"0",bindEle:this.refs.thicknessSpan,className:"input-range-grey",onChange:this.handleThicknessChange.bind(this),onChanged:this.handleThicknessChanged.bind(this)}),e.createElement("div",{className:"clearfix effect-item-btns paddingT10"},e.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),e.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))))}}]),a}(l.default);t.default=c}).call(t,a(0))},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),a(1002)),h=a(166),d=a(12),u=function(t){function a(){r(this,a);var e=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.state.groupData=null,e.state.deEffect=!1,e.state.thumbImg=null,e.state.isSmallPic=!1,e.hadfoldItem=!0,e.state.data=[],e.getData=e.getData.bind(e),e.refreshFavorite=e.refreshFavorite.bind(e),e}return o(a,t),i(a,[{key:"componentWillUnmount",value:function(){Fotor.loginStateManager.off(d.default.LOGIN,this.refreshFavorite),Fotor.favoriteManager.off(h.default.UPDATE,this.getData)}},{key:"componentDidMount",value:function(){Fotor.loginStateManager.on(d.default.LOGIN,this.refreshFavorite),Fotor.favoriteManager.on(h.default.UPDATE,this.getData),this.getData()}},{key:"getData",value:function(){this.state.data=Fotor.favoriteManager.get("effect"),this.mounted&&this.forceUpdate()}},{key:"refreshFavorite",value:function(){Fotor.favoriteManager.fetch()}},{key:"applyHandler",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this);for(var e=this.state.data.length,t=0;t<e;t++)this.refs["webglEffectItem_"+t].state.beSelected&&this.refs["webglEffectItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.data.length,t=0;t<e;t++)if(this.refs["webglEffectItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.data.length,t=0;t<e;t++)this.refs["webglEffectItem_"+t]&&this.refs["webglEffectItem_"+t].cancelHandler();this.state.isSmallPic=!1,s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.mounted&&this.setState({deEffect:!1})}},{key:"afterUnfold",value:function(){var e=this,t=!1;t=!0,setTimeout(function(){e.creatImgThumb(function(){if(t)for(var a=e.state.data.length,r=0;r<a;r++)e.refs["webglEffectItem_"+r].updataThumbImage();e.setState({deEffect:!0}),Fotor.progressBar.hide()})},100),e.setState({deEffect:!0})}},{key:"creatImgThumb",value:function(e){var t=this;Fotor.mainCanvas.requestDocumentToolThumb().then(function(a){Fotor.mainCanvas.doEffectCanvas||(Fotor.mainCanvas.doEffectCanvas=document.createElement("canvas")),Fotor.mainCanvas.doEffectCanvas.getContext("2d").clearRect(0,0,Fotor.mainCanvas.doEffectCanvas.width,Fotor.mainCanvas.doEffectCanvas.height),Fotor.mainCanvas.doEffectCanvas.setAttribute("width",a.width),Fotor.mainCanvas.doEffectCanvas.setAttribute("height",a.height),Fotor.mainCanvas.effectEngine&&Fotor.mainCanvas.effectEngine.set_image(a,a.width,a.height,Fotor.mainCanvas.engineFluentSize,null,!0),Fotor.mainCanvas.effectThumb=a.toDataURL("image/jpeg",.7),t.state.thumbImg=Fotor.mainCanvas.effectThumb,e&&e()})}},{key:"loadTempHistoryData",value:function(e,t){var a=this;a.creatImgThumb(function(){for(var e=a.state.data.length,t=0;t<e;t++)a.refs["webglEffectItem_"+t]&&(a.refs["webglEffectItem_"+t].cancelHandler(),a.refs["webglEffectItem_"+t].updataThumbImage());a.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()})}},{key:"doItemUnFold",value:function(e){for(var t=this.state.data.length,a=0;a<t;a++)void 0==e||null==e||"toBig"==e||"updataThumb"==e?void 0==e||null==e||"toBig"==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):void 0!=e&&null!=e&&"updataThumb"!=e||this.refs["webglEffectItem_"+a].updataThumbImage():this.refs["webglEffectItem_"+a]!=e&&this.refs["webglEffectItem_"+a].state.beSelected?this.refs["webglEffectItem_"+a].setState({beSelected:!1}):this.refs["webglEffectItem_"+a]!=e||this.refs["webglEffectItem_"+a].state.beSelected?this.refs["webglEffectItem_"+a]==e&&this.refs["webglEffectItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic());this.setState({deEffect:!0})}},{key:"render",value:function(){var t=this,a=!1;return this.state.data.length>0&&(a=!0),e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.className,autoActive:!1,isEditor:!0,childId:"border-favorite-list",text:Fotor.globalConfig.lang.editor_workspace_favorite_effect,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},a&&t.state.data.map(function(a,r){return e.createElement(c,{ref:"webglEffectItem_"+r,inner:"FavorFolder",unFoldFun:t.doItemUnFold.bind(t),data:a,doEffect:t.state.deEffect,key:a.name,vip:a.isVip,thumbImg:t.state.thumbImg,scroller:t.props.scroller})}),!a&&e.createElement("div",{className:"editor-favor-empty"},Fotor.globalConfig.lang.editor_workspace_favorite_notice)))}},{key:"handleToolFolderClick",value:function(){if(Fotor.loginStateManager.isLogin())s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"handleToolFolderClick",this).call(this);else{Fotor.loginStateManager.addAction(this.handleToolFolderClick.bind(this));var e=Fotor.vipResManager.getLoginContent("favor");FotorUser.show(e,!1)}}}]),a}(l.default);t.default=u}).call(t,a(0))},function(e,t,a){var r=a(1133);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,".goartLink {\n  position: relative;\n  z-index: 11;\n  display: block;\n  width: 300px;\n  height: 224px;\n  margin: 5px 0 8px 4px;\n  background: url("+r(a(1003))+") no-repeat;\n  background-size: cover;\n  -webkit-background-size: cover;\n  -moz-background-size: cover; }\n  .goartLink.en_US {\n    background-image: url("+r(a(1003))+"); }\n  .goartLink.zh_CN {\n    background-image: url("+r(a(1134))+"); }\n  .goartLink.zh_TW {\n    background-image: url("+r(a(1135))+"); }\n  .goartLink.de_DE {\n    background-image: url("+r(a(1136))+"); }\n  .goartLink.pt_BR {\n    background-image: url("+r(a(1137))+"); }\n  .goartLink.es_ES {\n    background-image: url("+r(a(1138))+"); }\n  .goartLink.fr_FR {\n    background-image: url("+r(a(1139))+"); }\n  .goartLink.ru_RU {\n    background-image: url("+r(a(1140))+"); }\n  .goartLink.ja_JP {\n    background-image: url("+r(a(1141))+"); }\n\n@media (max-width: 1279px) {\n  body.no-ads .goartLink {\n    width: 226px;\n    height: 169px; } }\n\n@media (max-width: 1439px) {\n  body.ads .goartLink {\n    width: 226px;\n    height: 169px; } }\n",""])},function(e,t,a){e.exports=a.p+"images/zh_CN647a91aafa54f83a5a19e796b915573f.png"},function(e,t,a){e.exports=a.p+"images/zh_TW427f1fc60f8423a2ec5af3b1679bca6f.png"},function(e,t,a){e.exports=a.p+"images/de_DEedab2d797db57405e7a2db11782f4b16.png"},function(e,t,a){e.exports=a.p+"images/pt_BR6dc8b36eb34c131c72e4126f3a5c89e5.png"},function(e,t,a){e.exports=a.p+"images/es_ES6d15e26f2b1a4d520fab196356bc4405.png"},function(e,t,a){e.exports=a.p+"images/fr_FRe33a255279d77dc4193a98094a432ebd.png"},function(e,t,a){e.exports=a.p+"images/ru_RUb25f35378002a3ca279e2fe8ef7762a1.png"},function(e,t,a){e.exports=a.p+"images/ja_JPdd96ab5be3477d9188f1b3e6ecf5bcfb.png"},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}var o=a(1143),i=n(o),s=a(1282),l=n(s),c=a(1283),h=n(c),d=a(1284),u=n(d),p=a(1285),m=n(p),f=a(166),g=n(f),v=a(6),b=n(v),_=a(8),y=n(_),x=a(13),C=n(x),w=a(20).default,A=a(5),E=A({displayName:"BorderList",mixins:[Fotor.mixin],getInitialState:function(){return{canvasImg:null}},componentDidMount:function(){this.removeLoading(),this.setState({scrollArea:this.refs.scrollArea}),Fotor.favoriteManager.on(g.default.UPDATE,this.updateData),Fotor.mainCanvas?this.init():Fotor.app.on(b.default.APP_INIT,this.init)},init:function(){Fotor.mainCanvas.on(y.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.on(y.default.EXIT_EDITOR_MODE,this.updateData)},updateData:function(){this.forceUpdate()},componentWillUnmount:function(){Fotor.favoriteManager.off(g.default.UPDATE,this.updateData),Fotor.app.off(b.default.APP_INIT,this.init),Fotor.mainCanvas.off(y.default.ENTER_EDITOR_MODE,this.updateData),Fotor.mainCanvas.off(y.default.EXIT_EDITOR_MODE,this.updateData)},handleScroll:function(e){e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200),Fotor.app.trigger(C.default.HIDE_PALETTE)},render:function(){return r.createElement("div",{id:"toolbar"},r.createElement("div",{className:"toolbar-cover",style:{display:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode?"none":"block"}}),r.createElement("div",{className:"toolbar-loading"},r.createElement("div",{className:"loading-round"},r.createElement("div",null),r.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),r.createElement("div",{className:"toolbar"},r.createElement("div",{className:"toolbar-list"},r.createElement(w,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},r.createElement(m.default,{className:"marginT0",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Floral",borderGroupId:"Floral",isNew:!0,scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Christmas",borderGroupId:"Christmas",isNew:!0,scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Vintage",borderGroupId:"Vintage",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"OldSchool",borderGroupId:"OldSchool",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Simple",borderGroupId:"Simple",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"RetroCutie",borderGroupId:"RetroCutie",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Borders",borderGroupId:"Borders",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Olden",borderGroupId:"Olden",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Organic",borderGroupId:"Organic",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Deco",borderGroupId:"Deco",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Lace",borderGroupId:"Lace",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"StampFrame",borderGroupId:"StampFrame",scroller:this.state.scrollArea}),r.createElement(l.default,{toolName:"BorderShadow",scroller:this.state.scrollArea}),r.createElement(h.default,{toolName:"GalleryFarme",scroller:this.state.scrollArea}),r.createElement(u.default,{toolName:"Polaroid",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"FileEdge",borderGroupId:"FileEdge",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Classy",borderGroupId:"Classy",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Cute",borderGroupId:"Cute",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Summer",borderGroupId:"Summer",scroller:this.state.scrollArea}),r.createElement(i.default,{toolName:"Funky",borderGroupId:"Funky",scroller:this.state.scrollArea}),r.createElement("div",{style:{height:"50px"}}," ")))))}});e.exports=E}).call(t,a(1),a(0))},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),a(1004)),h=a(1269),d=a(1270),u=function(t){function l(e){r(this,l);var t=n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,e));return t.borderGroupId=null,t.state.groupData=null,t.state.doBorder=!1,t.state.isSmallPic=!1,t.state.blendData=null,t.hadfoldItem=!0,t.state.orgWidth=0,t.state.orgHeight=0,t.sampleChildModuleName="border",t.sampleToolName=e.toolName,t}return o(l,t),i(l,[{key:"loadData",value:function(e){var t=a(181)("./border_"+e+".json");return"string"==typeof t?""!==t&&(t=JSON.parse(t)):t=t,t}},{key:"loadBlendData",value:function(){var e=a(1281);return"string"==typeof e?""!==e&&(e=JSON.parse(e)):e=e,e}},{key:"applyHandler",value:function(){s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"applyHandler",this).call(this);for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["borderItem_"+t].state.beSelected&&this.refs["borderItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)if(this.refs["borderItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.groupData.items.length,t=0;t<e;t++)this.refs["borderItem_"+t]&&this.refs["borderItem_"+t].state.beSelected&&this.refs["borderItem_"+t].cancelHandler();this.state.isSmallPic=!1,s(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"afterfold",this).call(this),this.mounted&&this.setState({doBorder:!1})}},{key:"afterUnfold",value:function(){var e=this;this.mounted&&e.setState({doBorder:!0}),e.setState({orgWidth:Fotor.mainCanvas.documentWidth,orgHeight:Fotor.mainCanvas.documentHeight}),Fotor.progressBar.hide()}},{key:"loadTempHistoryData",value:function(e){for(var t=this.state.groupData.items.length,a=0;a<t;a++)this.refs["borderItem_"+a]&&this.refs["borderItem_"+a].cancelHandler();this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e&&null==t.state.groupData){this.borderGroupId=e.borderGroupId;var a=t.loadData(e.borderGroupId),r=t.loadBlendData();a.type,t.setState({groupData:a,blendData:r})}}},{key:"doItemUnFold",value:function(e){for(var t=this.state.groupData.items.length,a=0;a<t;a++)void 0==e||null==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.refs["borderItem_"+a]!=e&&this.refs["borderItem_"+a].state.beSelected?this.refs["borderItem_"+a].setState({beSelected:!1}):this.refs["borderItem_"+a]!=e||this.refs["borderItem_"+a].state.beSelected?this.refs["borderItem_"+a]==e&&this.refs["borderItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic())}},{key:"render",value:function(){var t=this,a={position:"relative"},r={left:"4px"};return null!=this.state.groupData?e.createElement("div",{style:a},this.props.isNew?e.createElement("i",{className:"tipType_new",style:r}):"",e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:this.state.groupData.isVip,text:Fotor.globalConfig.lang[this.state.groupData.title]?Fotor.globalConfig.lang[this.state.groupData.title].toUpperCase():"NO KEY "+this.state.groupData.title,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},t.state.groupData.items.map(function(a,r){return"general"==t.state.groupData.type?e.createElement(c,{ref:"borderItem_"+r,unFoldFun:t.doItemUnFold.bind(t),vip:t.state.groupData.isVip,data:a,doBorder:t.state.doBorder,borderGroupId:t.borderGroupId,key:r,scroller:t.props.scroller}):"color"==t.state.groupData.type?e.createElement(h,{ref:"borderItem_"+r,unFoldFun:t.doItemUnFold.bind(t),data:a,borderGroupId:t.borderGroupId,doBorder:t.state.doBorder,vip:t.state.groupData.isVip,key:r,scroller:t.props.scroller}):"custom"==t.state.groupData.type?e.createElement(d,{ref:"borderItem_"+r,unFoldFun:t.doItemUnFold.bind(t),data:a,blendData:t.state.blendData,doBorder:t.state.doBorder,orgWidth:t.state.orgWidth,orgHeight:t.state.orgHeight,vip:t.state.groupData.isVip,key:r,borderGroupId:t.borderGroupId,scroller:t.props.scroller}):void 0}))):e.createElement("div",null)}}]),l}(l.default);t.default=u}).call(t,a(0))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){(function(t,r){var n=a(8),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=a(37),s=(a(53).default,a(5)),l=s({displayName:"ColorBorderItem",getInitialState:function(){return{thumbSrc:"",beSelected:!1,unFoldFun:null}},componentDidMount:function(){var e=this;this.props&&this.props.doEffect&&(e.state.unFoldFun=this.props.unFoldFun)},handleClick:function(e,t){if(this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected)this.cancelHandler();else{Fotor.progressBar.show(!0);var a=Fotor.common.utils.Color.colorHexToRgb(this.props.data.defaultColor);this.refs.colorpicker.setColor(this.props.data.defaultColor),Fotor.mainCanvas.fotorEngine.process_commond(this.commondAddColor(a),this.comondCallBack,100,"border"),this.props.vip&&Fotor.vipResManager.setEditorWaterMark()}var r=!this.state.beSelected;this.setState({beSelected:r});var n=this;setTimeout(function(){r?n.scrollerFix():n.scrollerUpFix()},300)},componentWillReceiveProps:function(e){var t=this;e&&""==this.state.thumbSrc&&(a.e(5).then(function(){t.state.thumbSrc=a(973)("./"+e.data.thumb+".png"),t.setState({})}.bind(null,a)).catch(a.oe),this.setState({unFoldFun:e.unFoldFun}))},colorChange:function(e,t){var a=Fotor.common.utils.Color.colorHexToRgb(e);Fotor.mainCanvas.fotorEngine.process_commond(this.commondAddColor(a),this.comondCallBack,100,"border")},commondAddColor:function(e){var t=this.props.data.commond;return t=t.replace(/%r/,e.r).replace(/%g/,e.g).replace(/%b/,e.b)},comondCallBack:function(){Fotor.progressBar.hide(),Fotor.mainCanvas.trigger(o.default.ENGINELAYER_CHANGE)},applyHandler:function(e){var t=this;this.props.vip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(t.state.unFoldFun),this.setState({beSelected:!1})},cancelHandler:function(e){e&&this.state.unFoldFun(this),this.setState({beSelected:!1}),Fotor.vipResManager.resetWaterMark()},render:function(){var e=this;return t.createElement("div",{ref:"item",className:"effect-item "+(e.state.beSelected?"active active-320":"")},e.props.data.isVip?t.createElement("span",{className:"vip"}):"",t.createElement("div",{className:"effect-item-img border clearfix"},t.createElement("div",{"data-display":e.props.doBorder},t.createElement("img",{ref:"itemImg",onClick:e.handleClick,src:this.state.thumbSrc}))),t.createElement("div",{className:"effect-item-inner clearfix"},t.createElement("div",{className:"editor-color-picker clearfix"},t.createElement(i,{ref:"colorpicker",hideFavor:!0,defaultColor:"#ffffff",noPicker:!0,showTitle:!0,isEditor:!0,hideAlphaBar:!0,target:Fotor.mainCanvas,onChange:e.colorChange})),t.createElement("div",{className:"clearfix effect-item-btns paddingT10"},t.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:e.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),t.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:e.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton))))},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var t=r(this.refs.item).height(),a=r(this.refs.item).offset(),n=r(".toolbar-list").height(),o=r(".toolbar-list").offset(),i=-e.state.topPosition,s=t;if(a.top<80){var l=a.top-o.top-i;return void e.scrollYTo(l)}if(a.top+s>n+o.top){var l=a.top-o.top-i;s<n&&(l-=n-s),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,t=e.computeSizes(),a=e.state.topPosition,n=t.realHeight-t.containerHeight;a>n?r(e.content).stop().animate({"margin-top":-n},300,function(){e.handleWindowResize()}):e.handleWindowResize()}});e.exports=l}).call(t,a(0),a(1))},function(e,t,a){(function(t,r){var n=a(8),o=function(e){return e&&e.__esModule?e:{default:e}}(n);a(1271);var i=a(37),s=(a(53).default,a(5)),l=s({displayName:"CustomBorderItem",getInitialState:function(){return{thumbSrc:"",beSelected:!1,unFoldFun:null,isOutMode:!0,isBlendMode:!1,savedBlendCommond:"",borderColor:null,borderStrength:.04,saved_documentWidth:0,saved_documentHeight:0,opacity:0}},componentWillUnmount:function(){t(document).off("keydown",this.handleKeydown)},componentDidMount:function(){var e=this;this.props&&this.props.doEffect&&(e.state.unFoldFun=this.props.unFoldFun),t(document).on("keydown",this.handleKeydown)},handleKeydown:function(e){9==e.keyCode&&(e.stopPropagation(),e.preventDefault())},handleClick:function(e,t){this.state.unFoldFun&&this.state.unFoldFun(this),this.state.beSelected?this.cancelHandler():(Fotor.progressBar.show(!0),this.state.isBlendMode=!1,this.state.isOutMode=!0,this.state.borderColor=Fotor.common.utils.Color.colorHexToRgb(this.props.data.defaultColor),this.state.borderStrength=.04,this.refs.colorpicker.setColor(this.props.data.defaultColor),this.drawCanvas(),this.props.vip&&Fotor.vipResManager.setEditorWaterMark());var a=!this.state.beSelected;this.setState({beSelected:a});var r=this;setTimeout(function(){a?r.scrollerFix():r.scrollerUpFix()},300)},componentWillReceiveProps:function(e){var t=this;this.state.saved_documentWidth=e.orgWidth,this.state.saved_documentHeight=e.orgHeight,e&&""==this.state.thumbSrc&&(a.e(5).then(function(){t.state.thumbSrc=a(973)("./"+e.data.thumb+".png"),t.setState({})}.bind(null,a)).catch(a.oe),this.setState({unFoldFun:e.unFoldFun}))},colorChange:function(e,t){this.state.isBlendMode=!1,this.state.borderColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()},handleOuterSizeChange:function(e){this.state.borderStrength=e/10,this.drawCanvas()},handleOuterSizeChanged:function(e){this.handleOuterSizeChange(e)},drawCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.state.isOutMode?(Fotor.mainCanvas.editorExportFormat="png",this.state.isBlendMode?(""!=e&&(this.state.savedBlendCommond=e),Fotor.mainCanvas.fotorEngine.process_outside_border(this.state.savedBlendCommond,this.state.borderStrength,[this.state.borderColor.r,this.state.borderColor.g,this.state.borderColor.b],this.doOutBorderComplete)):Fotor.mainCanvas.fotorEngine.process_outside_border(this.commondAddColor(),this.state.borderStrength,[this.state.borderColor.r,this.state.borderColor.g,this.state.borderColor.b],this.doOutBorderComplete)):Fotor.mainCanvas.fotorEngine.process_commond(this.commondAddColor(),this.comondCallBack,1,"border")},doOutBorderComplete:function(e,t){for(var a=Math.round(e*Fotor.mainCanvas.editorCanvasScale),r=Math.round(t*Fotor.mainCanvas.editorCanvasScale),n=e/Fotor.mainCanvas.editorCanvasEle.attr("width"),i=t/Fotor.mainCanvas.editorCanvasEle.attr("height"),s=.5*(e-Fotor.mainCanvas.editorCanvasEle.attr("width")),l=.5*(t-Fotor.mainCanvas.editorCanvasEle.attr("height")),c=0,h=Fotor.mainCanvas.canvas._objects.length;c<h;c++){var d=Fotor.mainCanvas.canvas._objects[c];d.set({left:d.left+s,top:d.top+l,scaleX:d.scaleX*n*(d.flipX?-1:1),scaleY:d.scaleY*i*(d.flipY?-1:1)})}Fotor.mainCanvas.resetCanvasSize(a,r),Fotor.mainCanvas.editorZoomFit(),Fotor.progressBar.hide(),setTimeout(function(){Fotor.mainCanvas.trigger(o.default.CONTENT_CHANGE)},100)},comondCallBack:function(){for(var e=Math.round(Fotor.mainCanvas.editorCanvasEle.attr("width")*Fotor.mainCanvas.editorCanvasScale),t=Math.round(Fotor.mainCanvas.editorCanvasEle.attr("height")*Fotor.mainCanvas.editorCanvasScale),a=this.state.saved_documentWidth/Fotor.mainCanvas.canvas.documentWidth,r=this.state.saved_documentHeight/Fotor.mainCanvas.canvas.documentHeight,n=.5*(this.state.saved_documentWidth-Fotor.mainCanvas.canvas.documentWidth),i=.5*(this.state.saved_documentHeight-Fotor.mainCanvas.canvas.documentHeight),s=0,l=Fotor.mainCanvas.canvas._objects.length;s<l;s++){var c=Fotor.mainCanvas.canvas._objects[s];c.set({left:c.left+n,top:c.top+i,scaleX:c.scaleX*a*(c.flipX?-1:1),scaleY:c.scaleY*r*(c.flipY?-1:1)})}Fotor.mainCanvas.resetCanvasSize(e,t),Fotor.mainCanvas.editorZoomFit(),Fotor.progressBar.hide(),setTimeout(function(){Fotor.mainCanvas.trigger(o.default.CONTENT_CHANGE)},100)},commondAddColor:function(){var e;return this.state.isOutMode?e=this.props.data.outCommond:(e=this.props.data.innerCommond,e=e.replace(/%th/,this.state.borderStrength)),e},blendCommond:function(e,t,a){var r=this.props.data.blendCommond;return r=r.replace(/%bc/,e),r=r.replace(/%bw/,t),r=r.replace(/%bh/,a)},outerHandler:function(){if(!this.state.isOutMode){var e=this;this.state.isBlendMode=!1,this.state.isOutMode=!0,this.drawCanvas(),this.forceUpdate(),setTimeout(function(){e.scrollerFix()},100)}},innerHandler:function(){if(this.state.isOutMode){var e=this;this.state.isBlendMode=!1,this.state.isOutMode=!1,this.drawCanvas(),this.forceUpdate(),setTimeout(function(){e.scrollerFix()},100)}},applyHandler:function(e){var t=this;this.state.saved_documentWidth=Fotor.mainCanvas.documentWidth,this.state.saved_documentHeight=Fotor.mainCanvas.documentHeight,this.props.vip&&Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(t.state.unFoldFun),this.setState({isOutMode:!0,isBlendMode:!1,beSelected:!1})},cancelHandler:function(e){if(e&&this.state.unFoldFun(this),this.setState({isOutMode:!0,isBlendMode:!1,beSelected:!1}),0!=this.state.saved_documentWidth&&0!=this.state.saved_documentHeight){for(var t=this.state.saved_documentWidth/Fotor.mainCanvas.canvas.documentWidth,a=this.state.saved_documentHeight/Fotor.mainCanvas.canvas.documentHeight,r=.5*(this.state.saved_documentWidth-Fotor.mainCanvas.canvas.documentWidth),n=.5*(this.state.saved_documentHeight-Fotor.mainCanvas.canvas.documentHeight),i=0,s=Fotor.mainCanvas.canvas._objects.length;i<s;i++){var l=Fotor.mainCanvas.canvas._objects[i];l.set({left:l.left+r,top:l.top+n,scaleX:l.scaleX*t*(l.flipX?-1:1),scaleY:l.scaleY*a*(l.flipY?-1:1)})}Fotor.mainCanvas.resetCanvasSize(this.state.saved_documentWidth,this.state.saved_documentHeight),Fotor.mainCanvas.editorZoomFit(),this.state.saved_documentWidth=0,this.state.saved_documentHeight=0,Fotor.mainCanvas.trigger(o.default.ENGINELAYER_CHANGE)}Fotor.vipResManager.resetWaterMark()},render:function(){var e=this;return r.createElement("div",{ref:"item",className:"effect-item "+(e.state.beSelected?"active active-435 ":" ")+(this.state.isOutMode?"":" min-mode")},e.props.data.isVip?r.createElement("span",{className:"vip"}):"",r.createElement("div",{"data-display":e.props.doEffect},r.createElement("div",{className:"effect-item-img border clearfix"},r.createElement("img",{ref:"itemImg",onClick:e.handleClick,src:e.state.thumbSrc})),r.createElement("div",{className:"effect-item-inner clearfix"},r.createElement("ul",{className:"ul-no-style effect-inline-btn clearfix"},r.createElement("li",{onClick:this.outerHandler,className:this.state.isOutMode?"active":""},r.createElement("i",{className:"icon-34 outer"})),r.createElement("li",{onClick:this.innerHandler,className:this.state.isOutMode?"":"active"},r.createElement("i",{className:"icon-34 inner"}))),r.createElement("div",{className:"editor-color-picker marginT15",style:{display:this.state.isOutMode?"block":"none"}},r.createElement(i,{ref:"colorpicker",hideFavor:!0,showTitle:!0,defaultColor:"#ffffff",isEditor:!0,hideAlphaBar:!0,target:Fotor.mainCanvas,onChange:e.colorChange})),r.createElement("ul",{className:"border-material marginT15 clearfix",style:{display:this.state.isOutMode?"block":"none"}},r.createElement("li",{className:"m1",onClick:this.handleMaterial}),r.createElement("li",{className:"m2",onClick:this.handleMaterial}),r.createElement("li",{className:"m3",onClick:this.handleMaterial}),r.createElement("li",{className:"m4",onClick:this.handleMaterial}),r.createElement("li",{className:"m5",onClick:this.handleMaterial}),r.createElement("li",{className:"m6",onClick:this.handleMaterial}),r.createElement("li",{className:"m7",onClick:this.handleMaterial}),r.createElement("li",{className:"m8",onClick:this.handleMaterial})),r.createElement("div",{className:"clearfix editor-folder-btns "+(this.state.isOutMode?"paddingT15":"paddingT20")},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))},handleMaterial:function(e){var a=t(e.target),r=t(a).attr("class");this.state.isBlendMode=!0;var n="";"m1"==r?(n=this.blendCommond(this.props.blendData.items[0].blendPic,this.props.blendData.items[0].blendWidth,this.props.blendData.items[0].blendHeight),this.drawCanvas(n)):"m2"==r?(n=this.blendCommond(this.props.blendData.items[1].blendPic,this.props.blendData.items[1].blendWidth,this.props.blendData.items[1].blendHeight),this.drawCanvas(n)):"m3"==r?(n=this.blendCommond(this.props.blendData.items[2].blendPic,this.props.blendData.items[2].blendWidth,this.props.blendData.items[2].blendHeight),this.drawCanvas(n)):"m4"==r?(n=this.blendCommond(this.props.blendData.items[3].blendPic,this.props.blendData.items[3].blendWidth,this.props.blendData.items[3].blendHeight),this.drawCanvas(n)):"m5"==r?(n=this.blendCommond(this.props.blendData.items[4].blendPic,this.props.blendData.items[4].blendWidth,this.props.blendData.items[4].blendHeight),this.drawCanvas(n)):"m6"==r?(n=this.blendCommond(this.props.blendData.items[5].blendPic,this.props.blendData.items[5].blendWidth,this.props.blendData.items[5].blendHeight),this.drawCanvas(n)):"m7"==r?(n=this.blendCommond(this.props.blendData.items[6].blendPic,this.props.blendData.items[6].blendWidth,this.props.blendData.items[6].blendHeight),this.drawCanvas(n)):"m8"==r&&(n=this.blendCommond(this.props.blendData.items[7].blendPic,this.props.blendData.items[7].blendWidth,this.props.blendData.items[7].blendHeight),this.drawCanvas(n)),console.log(r)},scrollerFix:function(){var e=this.props.scroller;e.handleWindowResize();var a=t(this.refs.item).height(),r=t(this.refs.item).offset(),n=t(".toolbar-list").height(),o=t(".toolbar-list").offset(),i=-e.state.topPosition,s=a;if(r.top<80){var l=r.top-o.top-i;return void e.scrollYTo(l)}if(r.top+s>n+o.top){var l=r.top-o.top-i;s<n&&(l-=n-s),e.scrollYTo(l)}},scrollerUpFix:function(){var e=this.props.scroller,a=e.computeSizes(),r=e.state.topPosition,n=a.realHeight-a.containerHeight;r>n?t(e.content).stop().animate({"margin-top":-n},300,function(){e.handleWindowResize()}):e.handleWindowResize()}});e.exports=l}).call(t,a(1),a(0))},function(e,t,a){var r=a(1272);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){var r=a(4);t=e.exports=a(2)(!1),t.push([e.i,".border-material {\n  margin: 0;\n  padding: 0;\n  list-style: none; }\n  .border-material li {\n    margin: 10px 0 0;\n    padding: 0;\n    list-style: none;\n    float: left;\n    display: block;\n    width: 12.5%;\n    height: 75px;\n    cursor: pointer;\n    background-size: cover;\n    -webkit-background-size: cover;\n    -moz-background-size: cover; }\n    .border-material li.m1 {\n      background: url("+r(a(1273))+") center no-repeat; }\n    .border-material li.m2 {\n      background: url("+r(a(1274))+") center no-repeat; }\n    .border-material li.m3 {\n      background: url("+r(a(1275))+") center no-repeat; }\n    .border-material li.m4 {\n      background: url("+r(a(1276))+") center no-repeat; }\n    .border-material li.m5 {\n      background: url("+r(a(1277))+") center no-repeat; }\n    .border-material li.m6 {\n      background: url("+r(a(1278))+") center no-repeat; }\n    .border-material li.m7 {\n      background: url("+r(a(1279))+") center no-repeat; }\n    .border-material li.m8 {\n      background: url("+r(a(1280))+") center no-repeat; }\n    .border-material li:hover {\n      opacity: .7; }\n\n@media (max-width: 1279px) {\n  body.no-ads .border-material li {\n    height: 52px; } }\n\n@media (max-width: 1439px) {\n  body.ads .border-material li {\n    height: 52px; } }\n",""])},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMyQ0ZCQjg2RTExOTExRTY4OUQ5QTQ3MkNDOERGMkMzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMyQ0ZCQjg1RTExOTExRTY4OUQ5QTQ3MkNDOERGMkMzIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAiAAAAgMBAQEAAAAAAAAAAAAABQYAAwQCAQgBAAMBAQAAAAAAAAAAAAAAAAABAgMEEAAABQEFBQUGBgMAAAAAAAABAgMEBREAITESBkFRYXEToSIyQhTwgbFSIxWRwdEzNBbxYlMRAAICAgMAAQQDAAAAAAAAAAABEQIhAzFBEjJhcYGRobEi/9oADAMBAAIRAxEAPwD6QidQtHsg9jVCdB80VUL0jBTqJgYcqha41CgjZtGdbptrsMZS7gsjQmUu4LAA+Tmo+OWaIKiAuHixEUEi0zDnOBRMO4pa2aUkWulH1MWptNBJgR4zP6aXa95s5LdWnkPw+FmrQTs1+srk80zqYZAVGD9P0sy17rhua7NTzk4e2FiygNeycPkv1HqNtDNiiJRXerDlaNC3mOYbguC+lbJKR7NiqvqYtN6cclcmmpo3WmF7ylG8qBRwKQN9PbERbfSJ1638rcjLaTYUdeoRaRGz8VTNphM4AxOiFVFBr4BAPLfjs99BuhhvSWezPo4jV5Lu3socT6iTHKdsoFAQLSn0q0qHGl3vqJb+CdMNtv5DtaDpBWotQtIVp1VfqLqd1s2L41D8OG8bNKSNmxVQM09p52q7++z31JNS9BAfA3LsAA+b4c7NvpEa9bn1bk0am0yd8cklGn9NNNr0VwuA4B5D+3ZYqx7Nc5XyO9NalLKFO1ck9NLNu67amuGoXZi12fCw1Aa9nrD5OI7TR/vbmZlD+odCqcrFMbyoogYenT/bL+HOw3iArr/16YwWk1JYADS2m27ySZyaJvTv2iqZjKlu6iQGDOmem8tQD9LUmZ21ptPtAwk4+g5tVlMjmjHqx1GD7yp5zCbpHHcWvu5YOJWCPbraLcMbAEBCoYDaDclgBbe6kcOZ1CHhi9YySpDyTnEiaRTAJyAOGYQCnZjhSWJZjbZNoX5DUnGM5Jmo0eJ9RFQLw2gOwxR2CFknBpaqsoYrRsi90w9JDy5xVjFRpHSI4FD/AJqbqdnLC2pyjGtnRw+Oi+dnX0i9GAgBq4H+a+DwIk2gBg83+AvwSUZY73bfmobgoJjDMStWpb8Vlh8ShvmN+QbLS3JpSiqoQRsixR1RKfc3P9bjECO3RxAXaxwqm3KUca7Dhv2c7XVRk59lvT8rkzwbn+rPxhpNMpGzo2ZnJgH7g4ZVjDt54cr7DzkVH4fl/sdrQdIr6gn3rl6MDADnkD3OnQeBuTbf83w52tLtmF9jb815/oKwGn2UKy6CHfVP3nDg3jUPvHhuC0tyaa6KqgvlollKsjs3hM6R7wHzFMGBijsELCcDtVWUMXIaTkIKQSgJkwqt1RAkXIUEQOAjQqZ+OzhyoNqanKMaWdX5f4NWk8vrZvJ0K+uWz9HN1q9Q/wC9n4eHLdjtsrD1cv7jH3uPZaTYne49lgAXO0ysc/Qp61v/ACK1rnCnSyX9SuGzGt1miL9fc//Z"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMwQURBMjFDRTExOTExRTZBN0FGODM1NjEzRTUzQUZGIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMwQURBMjFCRTExOTExRTZBN0FGODM1NjEzRTUzQUZGIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAeQAAAgMBAAAAAAAAAAAAAAAABgcABAUDAQEBAQAAAAAAAAAAAAAAAAAAAQIQAAECBAMGBAUDBQEAAAAAAAECAxEEBQYAIRIxQSITFAdRMkIVYXGBcjOhUkORsZKiIzQRAQEAAwEBAQAAAAAAAAAAAAABESECQTFR/9oADAMBAAIRAxEAPwB+WvftMq9dq9vPtdDWaXMvo6VwaedLocIbfbjCIUmClfOOw4LecbFmlPgMETSnwGAwbjvGiUGbpclNLCp+rzTMpJSqIcwl11LZcPghGqJP0wWc5ZHcXt4LiQzVaS97ddVOgunVBHDqKcw06RtSY5Hd8QSCXnrDn267iqrq3qHXGfbrupvBPyKxpDgT/MyN6TtIHzEQQcDrnHz4u9wu4NPtGnoi2Z2szh5dKpbUS6+4chkmJCATmfoM8Ekyx+3nb6pNVBy8bxc6y7J0RQ2YFuSbIybbGYCgDCI2bBvJLevIYuDJWd65G1GE02tvzq6XdTLyEUeZlE6ph46vxKSMy3E5rgdMdhjpJrlU7XS9Hq15Ver191Tt/SxCJmnPEqbkkQAIk1KCeYjOGsAQjDfqULdG9gyGL+v6k2fShNTQMxOzBLdOpzf5X3fBIzgkRGpUP6kgEsmQ7YNhVeZqxve9yH7jmBGQkDm1INHypQnODkP8fuJOC2+Rd7jdunq06zcNuv8Atl406CpOcTBIeSn+F7cQdgJ+R4cEldu3PcZq5mn6bUWPbbopp0VOmLBSYpyLjQOZQTu9PygSWzDnQe3ajeNQu64njP1IvuoozKyFNykqlxQZ0gcOsoz+Ef3EnAt1gdYMpgBG6O3lPq9xUi5ZRwyFcpcyytcy3EdRLIWOaw7Dbqb1JSfjDZg1KHmr0rVm3nM0e7l6rerE28/QqzmUM85wr6Z1R2BGqGfl+3yjGZozwQQCDEHMEYMpgF7V+4c7UL1krUtJvrHJeYacuGfGbMvLtujnNBR4Sspik+B4dsdJqT9GFx27SbipD9JqrAmJOYEFJ2KSoeVaFelSdxwZlwWluV6s9t6wxaV1PKmrbmCU0CvKHC2kbGHzuCf9fs8pvGdxcva9a1cFYcsWxXAageGs1pJPLk2jkpKVj+TxI2bBxeUkntGNkWTR7QojdLpqSYcUzNL/ACPuQzWs/wBhsGCW5EGCFf3FuZVfqbdh25JS9VqTiw5Upp8a2JFDahFcR5XURyV6TlmrIRvmY3VC1aye3VxrtS5JZtinVNYXSrlGZmFABITOvGBU5u1Hy/aQcIdb2b+KwWt93zVqhVTZFjLDtwOxTUqgIluQa9SlLAIC84R9OwDUcjUntE1i2LR7PpAkpEF2Ydguen3B/wBZhz9yz4CPCnd84kktyvXTa1GuejPUirM82WezSoZONrHlcbV6Vp8focsEL20Lkr1k1+WsS73FzUjNKDVs16BIeBISiXd2wUIhI3pyGaSDg1dtXtbyvdrx5XQx96m+b0vM6vV1Dv8A6+blshy+Xw7d8cDoweL4/pgwnF8f0wA3e3L5dG5vR6fd5GHX646ucNPS8ri5+ryx4YR1cMcFj//Z"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJERjZGQzYyRTExOTExRTZBMzRBOUZFNURFMjg0Q0FGIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJERjZGQzYxRTExOTExRTZBMzRBOUZFNURFMjg0Q0FGIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAjQAAAgMAAwAAAAAAAAAAAAAAAwUABAYBAgcBAAMBAQAAAAAAAAAAAAAAAAABAgMEEAAABQIDBAYIAwkBAAAAAAABAgMEBQARITESQXETBlFhgTJCFJGhsSJSs3Q1wSMWYnKSM1ODJDQVBxEAAgIBBQABBQEAAAAAAAAAAAERAjEhQRIyA4FRcZGhIgT/2gAMAwEAAhEDEQA/APV+boRdlILvimBdk7WUMC5cdChjjqTPbKxrgHozrarOD1pDnZiGwVRkSwUAOeU4p2+mW6iBA4LRVNVwqbulAhgMBf3jWwDtqbPQ18qN2+xaGcGOnJRs5T8zFOXKwO2o45qDc5A+Lp6d9KJRXPjZp4KU5BgwBN4zU8zEObC2chjpv4Dj09A7d9NOSL0jVdQULCuJVyYhDAi1RDU7dm7qZc9uGq2Qdo0NwKlHZjck23PJxkTEFFGIQdI3NiB3BwUL75xztfHrz6KUbs05qUq4kSzv3uQ+pW+YNUsGd+zGfJ6r9RZwxKkVxFKlEZBNXBJMBDvgOww2y254WvU2L8W8bBeZjLtYxmzYEKTl9UAMmumOrjnHH803rtt7LUV/Y/XRJLqJ4L73H/Uo/MCqeDOnZF9WGdS3M0iggIJpJuVjOXJu4kTiGxHr6A/ClMIrg7WZxMzLUGoQ0MApxSY/nLeNyfaYw/CPr3UJbsL3Uca4Awc4VkVRk9T8zDucHDccRJfxp+0QDsxoaFS8aPqXAgzRs9FroKeZi3LlEWjsMQEBUAQIcQ8Xt30plFcONl9DtzXOEOs6io8nl2YLqC9MGBl1hOPEv+zq9O6iq3H63ylgzdWYEoAf8ozbhm/RYHLx2LpYgcE2PDUE4aVCXysawj6c6iyNvK8ONi9PxLSWXfO4gtpBoqckgx8Smgwl4yYdJrdu/NJxkr0orS65RkgEBC4ZVoc5MsRyoA0/LEIgkqzlZUwopKLJljW+IHVVMYNBxDPSA4h6RwqLPZG/lTDfwLJF46ZcyvXbRQUnCTpbSbYIcQblMG0o7QppSiLNqzaGD1k2n2qkrFpgnJJhqko4PEP9VPpv69+aTjRl2qr6rO6BRMUzaMyzc2UfK3/wWIh77g+YCJR8PUO8cKG9kKlElysCbyryU5oYO3Rve8yiVJIO4mTiB7pfxHbTiEJWdrpspzv3uR+pW+YNNYJv2YygGBWKIcwSCp2zVMBK0TJgo4MbYAfAPRtzyqbOdC/Osf0w0sh+oWgTEeY53LYuh5GmG5kgz1JAGzdnvwoWmg7rmpX4E8CIDNRwgNwFyjYf7gVTwZ+fZD1aGaoyMjMzYCSPI6W8s28bk/ENYAD4fbuqZ2Rq6JN2tiRFLzDuVd+YcWKUoaUEC9xInwh19I1SUGV7uz1AsH7uPdkdtD8NdP8AhMUcymDaUaGpFWzTlGoaMGcvIM5qJKCSyblE0pH3C5B1gIqk6tvXvvUTGjN1VWasvkrf+ha/+wjq8x3DaOLo4VsP5Onr72rHsp0J/wBHbczGNWYExoAdcl6/1G308e9h/wBfTlcL8XVhwrZ7b5Y1N8Gvj2P/2Q=="},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI1REVCQkVCRTExOTExRTZCMTJDQUExQjY1RjNEMEZFIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI1REVCQkVBRTExOTExRTZCMTJDQUExQjY1RjNEMEZFIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAgQAAAgICAwAAAAAAAAAAAAAABgcFCAADAQIEAQADAQAAAAAAAAAAAAAAAAAAAQIDEAABAgQEBAQCBwkAAAAAAAABAgMRBAUGACESBzFBIhNhMhQVUXGBoUJiIyQW8JHBUnIzU0UXEQEBAAMBAQEBAAAAAAAAAAAAAREhAjESQXH/2gAMAwEAAhEDEQA/ANV2bxbkUi/6w3I1cuSNPqc0hqnzDTS2S0y8pHaWUtpc0kCEQrUBziMC5zFgtudxKDfNDFQp8GZtkhuo05ZBdlniPKqHmQrihYyUPGIAizCSu67KDalEeq9YeDMs10ttganHnSOhppHFS1QyH0mABOASK50Teu/7h3FpA9b7fSZ2pSjCqQyhpTaWHH0oKC6UFaipJ6lRGfCAhhZa/EwA9xRpv25l6gE+7T2r4ACYcMTgEhobOWX+jpBzc67512iyDbBTIyAUptx9p3ymYRxX3DDsswjHq44abvSS3HojW7Vtyd72XNzE1O0pC2pi3nlaXERzcShsKg1MgeMHEwEeGEJrVKPbvUb+tpZBA90k09cQQoTKAUwPMcxDLA0vhwyu21GpN0XHuLuApMvRpSpzb9Kp7sFd0mZWW33UCOvUo/gt88lHkMGEfWsQrNytyqrfNZTMzaVytKlFK9upurJsHLuuQyU8Rz+yMhzJGvPOHisy9a3Z9ZbrNIWgKHROSJiG5pkkkNuQjpI+wvik/ERwh1zLDsbtO3L+rNC3IspxMvONVGUcuOlOQQT2n0KdUpPBD7aREkZOp8YHDZfVkxSv3lvSs3De0/J1FZRTaLNzEpT5FpXQOy4povKiOp1zTxPlGQ5ki+JiANWpY1rVmY6IjMlMBAkYSsuAYjKEOKhnkYfwwCUY7TXDWaNuBRxTnyz7hNy0jUGVAqadl3nkoUkpy6k6ypCuR8IguF3uI3cMJF/XLn/tJ4kjIj8wvCTLoPwQlIhmVCJjyJj+0cM5WCB1RIyhAjn44Dgh2/yv+2tRBPusiOPD8y3D54R9eMv5hx3cC6EpQStFVnlrRmlYQH1rJgYZaeofEQIw0TnQdCTDURpSYwMMvlHwwjw2sqQltxMIa0gas8oGMRh5VE3t8pKb8tpSiAn3aRSIxGZmWwIYRXw7r8tW2N1VVdy31Ikr6tuZekpqXeggzKJd1SGw7DihemLTo8p6TzGKZ835/ivE1LTEtMuSs6y5Lzsq4pqalnwQtpwHNK08vjlxxLV1dQNREFuKK0ttBCVFSyTpGlMFKUpRhBIzwHT/ANsNuaHY/tdyXqUt3DVJlmToVLXBxUu7MqDaelPmfguK1cG0x8Thseus6hU3LXqvb26lerNGmlStRlqvPFDg6kqSZlepp1H221wzH0jPAueGbU6Xbm9lBNboiGqXuDS20pn6e4rSH0cmnVARU0vPtPQingeYwM84arPs6i7X0NF734gLrpimh0JBS4tpxQOlKBwXMKT5l8G08+JwHbbqAan3nXLx3at2r1h0KcTVJRElLNiDUuyZlB7TYyP9Sjmr9wwsrxiIa/ylF+3KtbYcQKrPEtmKQfzCxHUM+J5fLBVczUOfYfZycpT7F43AHZapKaKadTdRQpttwdTkyEkRUscGjkjn1eWox76ynt7NqJy6UMXBQ3lJuOltlLMspZ7T7UdRQgKOlt2OaVDjwVlAhWDjvCvNghxO4VuodStp1usSaHWnElC0uiZQFpWk5pUCIYGnXhtuei/6imH6E73vL/8Ac9V7pq9QqMI/heq/m5dzhgRfP0/ur731YbJnV4/VgBHXB6T/ALPL6/0T3/XSMPVep998zcIaPwe//ij92OBf4//Z"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkIzMDlFNDgyRTExOTExRTZCOEZDRjREMkVGMzg4OUFCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkIzMDlFNDgxRTExOTExRTZCOEZDRjREMkVGMzg4OUFCIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAjAAAAgIDAQAAAAAAAAAAAAAABQYEBwECAwABAAMBAQEAAAAAAAAAAAAAAAIDBAABBRAAAgAFAgQEBAMHBQEAAAAAAQIRAwQFBiESADFBE2EiMhRRQhUWgSMHcaHBUqIzQ5GxYjRUFxEAAgIBAwMEAwEAAAAAAAAAAQIAAzIRcRIxQVEhgUIEkcETM//aAAwDAQACEQMRAD8Adr7nGUW/Kq/29xmPJpa2dsppgUySiTGHaIhuI2+PHpJShUenaec1rBj694bvVktecWt8gx5BJvkoAXC3tBS5hGB/5w9D8mGh8FIxqPFsYx0Fg5L1kLG8Zt+PW4ZTliGUqEG22l1/MabzRnln/IflX5eZ8CssLnik5XWFHJpDt2d5XdM0oe5VvS0k+tkSzQSdplLKM0AqSV3NEHzNHgmoVUPnSCtzFxvF7Ljtye8u6wlrXVOvIR7rcz/DhteI2irMjvHjCLKcZomy/IJ02k3SzLo7csRMmK4iqug9TtCKJ8vM+E1z8zwX1lFScByadsptUjPbVT5JZJ0yZVUUsy6i0uYlT6mVVjBZniPWOXTjlbfyPFu/edsX+g5L+IiYm6fc9nQAqBX04AOjaTVjH8fjxVZidpNXkN5YMvFrbZ7tdsuygj20utqJlrofWWZprMj7fmd+aL05nwkNhYBF8SoVhSWbzEXJcsuuQ3F62pbtSFVpVLRLBlky29WvzTGh5mH7OXFVdQQaCTWWFjqZGx/ILnYbslxoWgSAs+mb+3NSMdjf7qw5cdsrDDQziOVOolipYrLldytmX44yyquTWU73eibyk7Jis7MBymKuseTjx4k5lAUb2lfAOQy+8Ss+v9yuWU1kuqfdKoJ06mo6ZdEVUcpugfneEWP4cuKaECqNO8nucljr2i/OlFWI08kDEHkD/HhsTPLBdu+IToTqY9APDjTRgwy4Vtsy2gShmGTLqaiTJqF5rNkznAgw+KhvKeh4XcoKnWNpYhhpIuRqhyi+llHkqqvZHUFzObbx2vEbQbMjvBpVFfuFAFZYhAY7jDnryA4ODNVUxBfXdojdIc/6eNOQrjRZslshZfMK2mUvrAwmqYEnrrwFmJ2h15DeZyeVDJLwwTc/vallX4DusSx8PDrxq8RtNZkd4JBbcGb4xYnnD8eDgTqJewzSx2w0Eh10Kk6EnoY8adhHHGb7isxZyU+o0wUnQR7i8h06cBZidoVeQ3lhZPZbTmP1CZZxKk5LbJryKiVMAVpqynZF3MP5tvkfpyPhJW5r01xMrsQWa6ZCVTOWfTO8mery6iWxSbJf1qynVWB5Q+HF0iI0mO5NcsuzuPO2wMCzF46chEx+A1400tPDsbt2MyqG5ZAqpebhOSnoKMHe0tpzKo0iRvWMXb5Rp+2K20vqF6CWVVhPVupihd7jV2rMq+5ULGXVyK2qAY6q4M1vIyjmkOY4oVQyAHxJ2Yq5I8xouNttP6g2v6va1SmyWlQLV0hIHcAGiOeoP+OZ+B8J1Y1HQ4x7KLRqMprYbDb8Nty5DkiLMvEwwt1vBBMt2GiLHTuH5m5KP39dzYeK9JkQVjk3WLdNeLpes2tVfcXJntXSFSQNFlIJ6wlqOg/eTw4oFQgeIkOWcE+ZAyxW+5Lq3c0NbUARB591hAaang68RtAsyO8dcVsVJhlvbJsgcy7hNQyqKhVoMA+uyGm6Y8NY6L/rxNa5sPFekprQVjk3WbXaTR5/Z2uVqHav1HL7dTbZj7oqCWCg6DUxKONDybwyk1HQ4mZgLRqMhErHUhk9mlONs2VXSAyTIh0YTwDLIPUQ5cU2YnaT15DeO9N7b77Xb9v9330//wBHvY9xo7d35Xe+PTdy4lOHy6e0oGfx6+8C/q53PuKn7nu/7bbPcbOxtiP+v2/693m5dIcM+rjA+zl3gv8AT3f910/a9x3NYey2d2ERHu93ydmHrjrGENeD+xhF0Zd45Xj2/wD9Ckb/AKB3fc0sO/3/AKj6hCGz8vufyR8I8Tr/AJ/L9Sls/j23n//Z"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI3Q0JCQkE5RTExOTExRTZBNUQ3OTZDOTQ1MDZGOUM1IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI3Q0JCQkE4RTExOTExRTZBNUQ3OTZDOTQ1MDZGOUM1IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAhAAAAgIDAAAAAAAAAAAAAAAABQgABgQHCQEAAwEBAAAAAAAAAAAAAAAAAAECBAMQAAIABAQDAwcJCQAAAAAAAAECABEDBCESBQcxQQZRoRNhIhQ0FRcI8HGRMkJSIzU2YjNDg7MkVHQWEQEBAAMBAQEBAAAAAAAAAAAAAREhAjESQVH/2gAMAwEAAhEDEQA/AKDuTk94XUzZncDVb0sgOUzFxUEpich+13RLvOdKpc03azrZSXY02OSnMtghnhyhicugHTap/wA7pcgCPQ6Hl/hLDcKI5V7BACM7j0x7wOppEMTqt+XBwAAuakvniWqTUVm5NSna1qtJyrCk/ng5GAKESJB4kQjP500AOnNKAwAs7fD+UsWy0RgIjO4VRU3D6mDYH2vfFX+0CLlyBI4fTE1p5ulbvalT0CqTTALU6gDZZMSFPlxlPmIF5Pz03+ndK/06H9JYpkvojARHNwgPeL1Gizd21a+wkOJuHy8Z8Ilq58iqX70mtLkqkqfhMo84tM5POYM3bxlyEM4f3pv9O6XjP+zoYjh+6WGy30RgIq3WewW6OrdXa3qVjaWTWl7qF3cW7NeBGNGtXd0LL4ZkSrCYgdPqBdt8OW8Fu61EsNMqPSdalOnWuhUpMy4ydCkmU/aB4jCHLi5Odxt+j8S22tjRWyvGvEu7MeBdJQsqnhLVo/h1BTy4ZQymUuULKfis7R/iO211bVrLSrOpfG7v7ija24e0qopqV3FNAWPATbE8oC+a2hIQJSAEC1Wkq6pqrPnU1b68NABBkYrdODMsRgs+U8YTVJoV28YN1/0qpQTTV7E+IBJjO5p4NjIqvKAupo9ENmSAOf2r1gNZ1ZWpmofTboUZkqEncuSwXnm+iJaZRjboFtwul5k5hq1gcfq+spPEfKcEHV0emKZkgBANZNf21qlJiVlfXjorCZytcviO6JaYL7dUZbg9LuWUsdYsh4JP4gIroxYr93Dj2wQupo9EUzpACEahUqrqGsU1QPRe/uDVJAJBW6qGSOcULTkZRGNtvPWOcf1n7dtTO4XTU1Kn2vZSIOY+tIQCefGRMOOfV0eY5p8+6KZU87y90AIJrUva2qcfzG6+tP8AyKnd2eWJavwS26l7wOlpZfziy4Tn60nGfdBHOv/Z"},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkI5RDEyQkExRTExOTExRTY5RTZERkY3QzJBN0ZDMkNEIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkI5RDEyQkEwRTExOTExRTY5RTZERkY3QzJBN0ZDMkNEIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAiAABAQEBAQAAAAAAAAAAAAAABwQABQYBAAIDAQEAAAAAAAAAAAAAAAIGAAMFAQQQAAECBAIGCAQHAQAAAAAAAAECAwARBAUhEjFBUSITBmFxMrIjM3MUoYIVNYGxwVIkNEQHEQACAgEDAwQDAQAAAAAAAAAAAXECAxExMiEiBEFhEjNRkSMF/9oADAMBAAIRAxEAPwD3t/UBf7icv+p8KxOPiq/SNvDwUIWc/wBlpZyXykU70uyUqkkYSJBlPqi5blfoPFtSn6dS4DyW+6IwL7sZ8a7VBTlTsECGCnMmb67cp6ql6XUXDG5hXYoQtZ1/S0s49VPguA6cp/KLkitrtHu2/bqX0W+6IX77sZsfFQUwIYKcxOFd+uE1SSmpqAZapOGfXON3DwUIXM/2WlnEfKOA4ScJHd6JbY9CONdB+txBt9KRgOC3IfKIXL7sYcfFQUQIYLcxVCE3e5NqJUPdvkFAkUniKBSVHUdchDBhr2VhC/np3uWcCqJ4boOnKqePRFyXUH4j/bPttJ6LfdELd+TGCmyKYEILL1yBzRV3euqWGWOC/UOuNEuyJStZUkkZdhjaxebjrRJ67fgzb+Ld2b9znO/8z5xU0tIYp5kEDx9ol+2OrzsWuur/AEVLxMmvoe4pefuX6enbpnS9xadIack0ojM3uqkdeIjOt4129V6l6/0cS6densV03PdhqalimbL3FqFpbbm0oCalZRMxx+JdLUOnn47NJa9fY9DHmPaaIQE6htZqqjdl4zuKt0eYdsbtV0UCtZdzlltkSkXe2lSs38trJl0S4iZ4npgcvBww8H2VlC/GIMxohARqN+rqMJkPOzV85liY3qrooFe67nLK7A6lN7t7at4GqZkBtzgAz6IDNwcMLB9lZQxxiDMaIQDq0hdZUKO4kvPSB04OK0Qx1S0UC5ZLVyXWR5Avtt4ScuapYClHtKBcGkfhAZ12WhluJL51lDHC+bxohAJq31GsqSsBa/cO5CoAkycUJQy02UIX7buS7ltxr67QTbTm9yyBKYx4o1HZAZ+FoYeHmpQzHNPX8IXTcNvdPwiEAWp/uV2mXGd0eortQy12UIwLbuS3l371aNMvds6Oz5g0QGfhaGHh5qUf/9k="},function(e,t){e.exports="data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkJCQ0QwRkQ4RTExOTExRTZCRTQ0REM1MkQ4RjUxQzI3IiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkJCQ0QwRkQ3RTExOTExRTZCRTQ0REM1MkQ4RjUxQzI3IiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODBDNjQwNjVEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODBDNjQwNjZEREQ2MTFFNDkzMTQ4QTM2NTU2NUFCOTkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAAGBAQEBQQGBQUGCQYFBgkLCAYGCAsMCgoLCgoMEAwMDAwMDBAMDg8QDw4MExMUFBMTHBsbGxwfHx8fHx8fHx8fAQcHBw0MDRgQEBgaFREVGh8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx8fHx//wAARCABLACADAREAAhEBAxEB/8QAjQABAAMBAQAAAAAAAAAAAAAABwAEBQYDAQACAwEBAAAAAAAAAAAAAAACBgADBQEEEAABAwIDBAYHCQEAAAAAAAABEQIDAAQhEgUxQRMGYXEiMjMUUaFCUrIjFfCBsYJDY3M0BzURAAIBAwMBBwUAAAAAAAAAAAABAnEyAxEhMQRBYbESIiMzUZFyEwX/2gAMAwEAAhEDEQA/AO35hdl5g1I5R/buA7E4/Ndv6qxM17qM2BL9caIzpspt5k7ha5AAm0Hb1VS3sWabjzprW/TrXAeDH8IrfhahXyXOpZyt9AogQQ5jY86/qWGy6nK9BldWHmvdWMuB+3Gi8DMuYJG2UsgOwEEAbARtFUtlil6h60z/AJtp/DH8IpghwhZyXOpZogAW5gdm17UFcjW3NwCBuSRy9a1hZr3VjHg+ONEVJGsZZOBxGR2aMbwinHprzs6uRs05Pp9qgQcKPD8opjhahdncyxRAhHr8Rbq181TJG+6lcrAjmEyOzNJd7J3pS/ml65VZv4J+hURl3ETi2TiHEg4Dq9NUt7BqQ02ASxth+0z4RTHjtVBfnyz3owTgtS5Q1y41C7mjii4c0sj2EyIS1ziQoTprFy9Flc21pz9TSh1UFFLuMw8hc0mVckIiQq3i4k7vZrj6HLpwvuWvq8enbqb8P+mcrwMbbPdccWD5L0heRmj7LkO/EVox6mKWj7Ch/wA7K99t+8u2n+gcv3VzBbRccS3L2xxB0LmhXHKFJ3V2PVwb0An0GSKbem3edJXpPESoQC5bRvm7kiNCZ5e28p+o4qprCk93UaYt+VURd0IButaYHOLj5yHJl2eI1cT00WK9VQPUfHL8X4DPW2LBKhAPuG57y4TEieVXHb4h3msFvdjRDhURY0CRjdf05ju0DdQlB73EABB6Pwo8N6qgc/xyo/AaK2xZJUID1zb277yc5GhZZSA44+Idgpck3q6jFFvRURo6WIPqun8OMNS4hOfAPPbG1N2GyiwP3I1RVlb8kqMUKYTCJUIEU8zhczl7Q+TjSZXOAJPbKj7qWpcurGCPCoXdDfGdWtFjbmE8QCKMeINx9FHgvjVAZrHRiccy7/VTEYJO10+qoQHpl8zd95OLIqJ75276WpcurGCPCoXNEX6rp+1PMxd1E74+xqzBfGqAzWOh/9k="},function(e,t){e.exports='{\r\n  "items": [\r\n    {\r\n      "blendPic":"blend01.jpg",\r\n      "blendWidth": 400,\r\n      "blendHeight": 400\r\n    },\r\n    {\r\n      "blendPic":"blend02.jpg",\r\n      "blendWidth": 400,\r\n      "blendHeight": 400\r\n    },\r\n    {\r\n      "blendPic":"blend03.jpg",\r\n      "blendWidth": 400,\r\n      "blendHeight": 400\r\n    },\r\n    {\r\n      "blendPic":"blend04.jpg",\r\n      "blendWidth": 400,\r\n      "blendHeight": 400\r\n    },\r\n    {\r\n      "blendPic":"blend05.jpg",\r\n      "blendWidth": 400,\r\n      "blendHeight": 400\r\n    },\r\n    {\r\n      "blendPic":"blend06.jpg",\r\n      "blendWidth": 400,\r\n      "blendHeight": 400\r\n    },\r\n    {\r\n      "blendPic":"blend07.jpg",\r\n      "blendWidth": 400,\r\n      "blendHeight": 400\r\n    },\r\n    {\r\n      "blendPic":"blend08.jpg",\r\n      "blendWidth": 400,\r\n      "blendHeight": 400\r\n    }\r\n  ]\r\n}'},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),a(37)),u=function(t){function a(e){n(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.border_size=35,t.border_fade=30,t.border_angle=90,t.border_distance=4,t.shadow_color={r:0,g:0,b:0},t.background_color={r:255,g:255,b:255,a:255},t.sampleChildModuleName="border",t.sampleToolName=e.toolName,t.state.isOutMode=!0,t.handleOuterColor=t.handleOuterColor.bind(t),t.handleInnerColor=t.handleInnerColor.bind(t),t}return i(a,t),s(a,[{key:"afterfold",value:function(){l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.forceUpdate(),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"initUnfoldUI",value:function(){this.border_size=35,this.refs.borderSizeRange.setDefault(this.border_size),this.border_fade=30,this.refs.fadeRange.setDefault(this.border_fade),this.border_angle=90,this.refs.angleRange.setDefault(this.border_angle),this.border_distance=4,this.refs.distanceRange.setDefault(this.border_distance),this.refs.colorpicker.setColor("#000000"),this.refs.bgColorpicker.setColor("#ffffff"),this.refs.colorpicker.state.hideModeActive=!1,this.refs.bgColorpicker.state.hideModeActive=!1,this.shadow_color={r:0,g:0,b:0},this.background_color={r:255,g:255,b:255,a:255},this.setState({})}},{key:"afterUnfold",value:function(){l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this);var e=this;setTimeout(function(){e.drawCanvas(),Fotor.progressBar.hide()},200)}},{key:"handleBorderSizeChange",value:function(e){this.border_size=this.refs.borderSizeRange.val(),this.drawCanvas()}},{key:"handleBorderSizeChanged",value:function(e){this.handleBorderSizeChange(e)}},{key:"handleFadeChange",value:function(e){this.border_fade=this.refs.fadeRange.val(),this.drawCanvas()}},{key:"handleFadeChanged",value:function(e){this.handleFadeChange(e)}},{key:"handleAngleChange",value:function(e){this.border_angle=this.refs.angleRange.val(),this.drawCanvas()}},{key:"handleAngleChanged",value:function(e){this.handleAngleChange(e)}},{key:"handleDistanceChange",value:function(e){this.border_distance=this.refs.distanceRange.val(),this.drawCanvas()}},{key:"handleDistanceChanged",value:function(e){this.handleDistanceChange(e)}},{key:"shadowColorChange",value:function(e,t){this.shadow_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"backgroundColorChange",value:function(e,t){this.background_color=Fotor.common.utils.Color.colorHexToRgba(e),this.background_color.a=Math.round(255*this.background_color.a),this.drawCanvas()}},{key:"drawCanvas",value:function(){var e=this.border_size/Fotor.mainCanvas.documentWidth,t=this.border_distance/Fotor.mainCanvas.documentWidth;Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.borderShadow(e,this.border_fade,this.border_angle,t,this.shadow_color.r,this.shadow_color.g,this.shadow_color.b,this.background_color.r,this.background_color.g,this.background_color.b,this.background_color.a),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"applyHandler",value:function(){l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_border_shadow,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner clearfix"},e.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_border_shadow_borderSize,e.createElement("span",{className:"pull-right",ref:"borderSizeSpan"},"35")),e.createElement(Fotor.ui.InputRange,{ref:"borderSizeRange",max:"100",min:"0",default:"35",className:"input-range-grey",bindEle:this.refs.borderSizeSpan,onChange:this.handleBorderSizeChange.bind(this),onChanged:this.handleBorderSizeChanged.bind(this)}),e.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_border_shadow_fade,e.createElement("span",{className:"pull-right"},"%"),e.createElement("span",{className:"pull-right",ref:"fadeSpan"},"30")),e.createElement(Fotor.ui.InputRange,{ref:"fadeRange",max:"100",min:"0",default:"30",className:"input-range-grey",bindEle:this.refs.fadeSpan,onChange:this.handleFadeChange.bind(this),onChanged:this.handleFadeChanged.bind(this)}),e.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_border_shadow_Angle,e.createElement("span",{className:"pull-right"},"°"),e.createElement("span",{className:"pull-right",ref:"angleSpan"},"90")),e.createElement(Fotor.ui.InputRange,{ref:"angleRange",max:"360",min:"0",default:"90",className:"input-range-grey",bindEle:this.refs.angleSpan,onChange:this.handleAngleChange.bind(this),onChanged:this.handleAngleChanged.bind(this)}),e.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_border_shadow_Distance,e.createElement("span",{className:"pull-right",ref:"distanceSpan"},"4")),e.createElement(Fotor.ui.InputRange,{ref:"distanceRange",max:"30",min:"0",default:"4",className:"input-range-grey",bindEle:this.refs.distanceSpan,onChange:this.handleDistanceChange.bind(this),onChanged:this.handleDistanceChanged.bind(this)}),e.createElement("ul",{className:"ul-no-style effect-inline-btn clearfix",style:{padding:"20px 0 8px 0"}},e.createElement("li",{onClick:this.handleOuterColor,className:this.state.isOutMode?"active":""},Fotor.globalConfig.lang.editor_workspace_border_shadow_ShadowColor),e.createElement("li",{onClick:this.handleInnerColor,className:this.state.isOutMode?"":"active"},Fotor.globalConfig.lang.editor_workspace_border_shadow_BackgroundColor)),e.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"block":"none"}},e.createElement(d,{ref:"colorpicker",hideFavor:!0,defaultColor:"#000000",isEditor:!0,hideAlphaBar:!0,showTitle:!0,target:Fotor.mainCanvas,hideMode:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.shadowColorChange.bind(this)})),e.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"none":"block"}},e.createElement(d,{ref:"bgColorpicker",hideFavor:!0,defaultColor:"#ffffff",isEditor:!0,hideAlphaBar:!0,showTitle:!0,target:Fotor.mainCanvas,hideMode:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.backgroundColorChange.bind(this)})),e.createElement("div",{className:"paddingT15"},e.createElement(Fotor.ui.Checkbox,{text:Fotor.globalConfig.lang.editor_border_shadow_transparent,onClick:this.handleTransparentBorder.bind(this)})),e.createElement("div",{className:"editor-folder-btns paddingT10 clearfix"},e.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),e.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleTransparentBorder",value:function(e){var t="rgba(0,0,0,0)";if(!e)var t=this.refs.bgColorpicker.getColor();this.backgroundColorChange(t,!1)}},{key:"scrollerFix",value:function(){var e=r.findDOMNode(this.refs.toolTitle),t=r.findDOMNode(this.refs.toolContent),n=this.props.scroller;l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerFix",this).call(this,e,t,n)}},{key:"scrollerUpFix",value:function(){var e=this.props.scroller;l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerUpFix",this).call(this,e)}},{key:"handleOuterColor",value:function(){this.setState({isOutMode:!0})}},{key:"handleInnerColor",value:function(){this.setState({isOutMode:!1})}}]),a}(c.default);t.default=u}).call(t,a(0),a(15))},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),a(37)),u=function(t){function a(e){n(this,a);var t=o(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.border_outSize=25,t.border_inSize=40,t.outer_color={r:0,g:0,b:0},t.inner_color={r:255,g:255,b:255},t.sampleChildModuleName="border",t.sampleToolName=e.toolName,t.state.isOutMode=!0,t.handleOuterColor=t.handleOuterColor.bind(t),t.handleInnerColor=t.handleInnerColor.bind(t),t}return i(a,t),s(a,[{key:"afterfold",value:function(){l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.forceUpdate(),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"initUnfoldUI",value:function(){this.border_outSize=25,this.refs.outSizeRange.setDefault(this.border_outSize),this.border_inSize=40,this.refs.inSizeRange.setDefault(this.border_inSize),this.refs.colorpicker.setColor("#000000"),this.refs.bgColorpicker.setColor("#ffffff"),this.refs.colorpicker.state.hideModeActive=!1,this.refs.bgColorpicker.state.hideModeActive=!1,this.outer_color={r:0,g:0,b:0},this.inner_color={r:255,g:255,b:255,a:255},this.setState({})}},{key:"afterUnfold",value:function(){l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this);var e=this;setTimeout(function(){e.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"handleBorderSizeChange",value:function(){this.border_outSize=this.refs.outSizeRange.val(),this.drawCanvas()}},{key:"handleBorderSizeChanged",value:function(){this.handleBorderSizeChange()}},{key:"handleInnerSizeChange",value:function(){this.border_inSize=this.refs.inSizeRange.val(),this.drawCanvas()}},{key:"handleInnerSizeChanged",value:function(){this.handleInnerSizeChange()}},{key:"outerColorChange",value:function(e,t){this.outer_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"innerColorChange",value:function(e,t){this.inner_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){var e=this.border_outSize/Fotor.mainCanvas.documentWidth,t=this.border_inSize/Fotor.mainCanvas.documentWidth;Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.galleryFrame(e,t,this.outer_color.r,this.outer_color.g,this.outer_color.b,this.inner_color.r,this.inner_color.g,this.inner_color.b),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"applyHandler",value:function(){l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this),Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return e.createElement("div",{className:"clearfix"},e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_border_galleryFrame,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},e.createElement("div",{className:"editor-folder-inner"},e.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_border_galleryFrame_outerSize,e.createElement("span",{className:"pull-right",ref:"outSizeSpan"},"25")),e.createElement(Fotor.ui.InputRange,{ref:"outSizeRange",className:"input-range-grey",max:"100",min:"0",default:"25",bindEle:this.refs.outSizeSpan,onChange:this.handleBorderSizeChange.bind(this),onChanged:this.handleBorderSizeChanged.bind(this)}),e.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_border_galleryFrame_innerSize,e.createElement("span",{className:"pull-right",ref:"inSizeSpan"},"40")),e.createElement(Fotor.ui.InputRange,{ref:"inSizeRange",className:"input-range-grey",max:"100",min:"0",default:"40",bindEle:this.refs.inSizeSpan,onChange:this.handleInnerSizeChange.bind(this),onChanged:this.handleInnerSizeChanged.bind(this)}),e.createElement("ul",{className:"ul-no-style effect-inline-btn clearfix",style:{padding:"20px 0 8px 0"}},e.createElement("li",{onClick:this.handleOuterColor,className:this.state.isOutMode?"active":""},Fotor.globalConfig.lang.editor_workspace_border_galleryFrame_outerColor),e.createElement("li",{onClick:this.handleInnerColor,className:this.state.isOutMode?"":"active"},Fotor.globalConfig.lang.editor_workspace_border_galleryFrame_innerColor)),e.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"block":"none"}},e.createElement(d,{ref:"colorpicker",hideFavor:!0,defaultColor:"#000000",target:Fotor.mainCanvas,isEditor:!0,hideAlphaBar:!0,showTitle:!0,hideMode:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.outerColorChange.bind(this)})),e.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"none":"block"}},e.createElement(d,{ref:"bgColorpicker",hideFavor:!0,defaultColor:"#ffffff",isEditor:!0,hideAlphaBar:!0,showTitle:!0,target:Fotor.mainCanvas,hideMode:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.innerColorChange.bind(this)})),e.createElement("div",{className:"editor-folder-btns paddingT10 clearfix"},e.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),e.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"scrollerFix",value:function(){var e=r.findDOMNode(this.refs.toolTitle),t=r.findDOMNode(this.refs.toolContent),n=this.props.scroller;l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerFix",this).call(this,e,t,n)}},{key:"scrollerUpFix",value:function(){var e=this.props.scroller;l(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerUpFix",this).call(this,e)}},{key:"handleOuterColor",value:function(){this.setState({isOutMode:!0})}},{key:"handleInnerColor",value:function(){this.setState({isOutMode:!1})}}]),a}(c.default);t.default=u}).call(t,a(0),a(15))},function(e,t,a){"use strict";(function(e,r,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var h=a(82),d=a(8),u=(a(161),a(37)),p=function(t){function a(e){o(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.border_outerSize=40,t.border_innerSize=0,t.border_roundCorners=0,t.border_CaptionSize=160,t.saveDocumentHeight=0,t.outer_color={r:255,g:255,b:255},t.inner_color={r:0,g:0,b:0},t.sampleChildModuleName="border",t.sampleToolName=e.toolName,t.state.isOutMode=!0,t.handleOuterColor=t.handleOuterColor.bind(t),t.handleInnerColor=t.handleInnerColor.bind(t),t}return s(a,t),l(a,[{key:"afterfold",value:function(){c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),0!=this.saveDocumentHeight&&(Fotor.mainCanvas.resetCanvasSize(Fotor.mainCanvas.documentWidth,this.saveDocumentHeight),Fotor.mainCanvas.editorZoomFit()),this.forceUpdate(),Fotor.mainCanvas.trigger(d.default.ENGINELAYER_CHANGE)}},{key:"initUnfoldUI",value:function(){this.border_outerSize=40,this.refs.outerSizeRange.setDefault(this.border_outerSize),this.border_innerSize=0,this.refs.innerSizeRange.setDefault(this.border_innerSize),this.border_roundCorners=0,this.refs.roundCornersRange.setDefault(this.border_roundCorners),this.border_CaptionSize=160,this.refs.captionSizeRange.setDefault(this.border_CaptionSize),this.outer_color={r:255,g:255,b:255},this.inner_color={r:0,g:0,b:0},this.refs.outerColorpicker.state.hideModeActive=!1,this.refs.innerColorpicker.state.hideModeActive=!1,this.refs.outerColorpicker.setColor("#ffffff"),this.refs.innerColorpicker.setColor("#000000"),this.setState({})}},{key:"afterUnfold",value:function(){c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterUnfold",this).call(this);var e=this;setTimeout(function(){e.saveDocumentHeight=Fotor.mainCanvas.documentHeight,e.drawCanvas(),Fotor.progressBar.hide()},200)}},{key:"handleOuterSizeChange",value:function(){this.border_outerSize=this.refs.outerSizeRange.val(),this.drawCanvas()}},{key:"handleOuterSizeChanged",value:function(){this.handleOuterSizeChange()}},{key:"handleInnerSizeChange",value:function(){this.border_innerSize=this.refs.innerSizeRange.val(),this.drawCanvas()}},{key:"handleInnerSizeChanged",value:function(){this.handleInnerSizeChange()}},{key:"handleCornersChange",value:function(){this.border_roundCorners=this.refs.roundCornersRange.val(),this.drawCanvas()}},{key:"handleCornersChanged",value:function(){this.handleCornersChange()}},{key:"handleCaptionChange",value:function(){this.border_CaptionSize=this.refs.captionSizeRange.val(),this.drawCanvas()}},{key:"handleCaptionChanged",value:function(){this.handleCaptionChange()}},{key:"outerColorChange",value:function(e,t){this.outer_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"innerColorChange",value:function(e,t){this.inner_color=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){var t=this.border_outerSize/Fotor.mainCanvas.documentWidth,a=this.border_innerSize/Fotor.mainCanvas.documentWidth,r=this.border_roundCorners/Fotor.mainCanvas.documentWidth,n=this.border_CaptionSize/Fotor.mainCanvas.documentWidth;Fotor.mainCanvas.fotorEngine.process_polaroid(Fotor.EngineAction.polaroid(t,a,r,this.outer_color.r,this.outer_color.g,this.outer_color.b,this.inner_color.r,this.inner_color.g,this.inner_color.b),[this.outer_color.r,this.outer_color.g,this.outer_color.b],n);var o=Math.round(Fotor.mainCanvas.editorCanvasEle.attr("height")*Fotor.mainCanvas.editorCanvasScale);Fotor.mainCanvas.resetCanvasSize(Fotor.mainCanvas.documentWidth,o),o*Fotor.mainCanvas.getZoom()>e("#canvas").width()||Fotor.mainCanvas.documentWidth*Fotor.mainCanvas.getZoom()>e("#canvas").height()?Fotor.mainCanvas.zoomFit():Fotor.mainCanvas.setZoom(Fotor.mainCanvas.getZoom(),!1,!1,!0),Fotor.mainCanvas.trigger(d.default.ENGINELAYER_CHANGE)}},{key:"applyHandler",value:function(){c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this),this.saveDocumentHeight=0,Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_border_POLAROID,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner"},r.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_OuterSize,r.createElement("span",{className:"pull-right",ref:"outerSizeSpan"},"40")),r.createElement(Fotor.ui.InputRange,{ref:"outerSizeRange",max:"100",min:"0",default:"40",className:"input-range-grey",bindEle:this.refs.outerSizeSpan,onChange:this.handleOuterSizeChange.bind(this),onChanged:this.handleOuterSizeChanged.bind(this)}),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_InnerSize,r.createElement("span",{className:"pull-right",ref:"innerSizeSpan"},"0")),r.createElement(Fotor.ui.InputRange,{ref:"innerSizeRange",max:"100",min:"0",default:"0",className:"input-range-grey",bindEle:this.refs.innerSizeSpan,onChange:this.handleInnerSizeChange.bind(this),onChanged:this.handleInnerSizeChanged.bind(this)}),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_RoundCorners,r.createElement("span",{className:"pull-right",ref:"roundCornersSpan"},"0")),r.createElement(Fotor.ui.InputRange,{ref:"roundCornersRange",max:"200",min:"0",default:"0",className:"input-range-grey",bindEle:this.refs.roundCornersSpan,onChange:this.handleCornersChange.bind(this),onChanged:this.handleCornersChanged.bind(this)}),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_CaptionSize,r.createElement("span",{className:"pull-right",ref:"captionSizeSpan"},"160")),r.createElement(Fotor.ui.InputRange,{ref:"captionSizeRange",max:"200",min:"0",default:"160",className:"input-range-grey",bindEle:this.refs.captionSizeSpan,onChange:this.handleCaptionChange.bind(this),onChanged:this.handleCaptionChanged.bind(this)}),r.createElement("ul",{className:"ul-no-style effect-inline-btn clearfix",style:{padding:"20px 0 8px 0"}},r.createElement("li",{onClick:this.handleOuterColor,className:this.state.isOutMode?"active":""},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_OuterColor),r.createElement("li",{onClick:this.handleInnerColor,className:this.state.isOutMode?"":"active"},Fotor.globalConfig.lang.editor_workspace_border_POLAROID_InnerColor)),r.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"block":"none"}},r.createElement(u,{ref:"outerColorpicker",hideFavor:!0,hideMode:!0,hideAlphaBar:!0,defaultColor:"#ffffff",isEditor:!0,showTitle:!0,target:Fotor.mainCanvas,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.outerColorChange.bind(this)})),r.createElement("div",{className:"editor-color-picker marginT5",style:{display:this.state.isOutMode?"none":"block"}},r.createElement(u,{ref:"innerColorpicker",hideFavor:!0,defaultColor:"#000000",isEditor:!0,target:Fotor.mainCanvas,hideMode:!0,showTitle:!0,hideAlphaBar:!0,scrollerFix:this.scrollerFix.bind(this),scrollerUpFix:this.scrollerUpFix.bind(this),onChange:this.innerColorChange.bind(this)})),r.createElement("div",{className:"editor-folder-btns paddingT10 clearfix"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"scrollerFix",value:function(){var e=n.findDOMNode(this.refs.toolTitle),t=n.findDOMNode(this.refs.toolContent),r=this.props.scroller;c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerFix",this).call(this,e,t,r)}},{key:"scrollerUpFix",value:function(){var e=this.props.scroller;c(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"scrollerUpFix",this).call(this,e)}},{key:"handleOuterColor",value:function(){this.setState({isOutMode:!0})}},{key:"handleInnerColor",value:function(){this.setState({isOutMode:!1})}}]),a}(h.default);t.default=p}).call(t,a(1),a(0),a(15))},function(e,t,a){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),s=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var l=a(82),c=(a(161),a(1004)),h=a(166),d=a(12),u=function(t){function a(){r(this,a);var e=n(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.state.groupData=null,e.state.deEffect=!1,e.state.thumbImg=null,e.state.isSmallPic=!1,e.hadfoldItem=!0,e.state.data=[],e.getData=e.getData.bind(e),e.refreshFavorite=e.refreshFavorite.bind(e),Fotor.loginStateManager.on(d.default.LOGIN,e.refreshFavorite),Fotor.favoriteManager.on(h.default.UPDATE,e.getData),Fotor.favoriteManager.on(h.default.UPDATE,e.getData.bind(e)),e.getData(),e}return o(a,t),i(a,[{key:"componentWillUnmount",value:function(){Fotor.loginStateManager.off(d.default.LOGIN,this.refreshFavorite),Fotor.favoriteManager.off(h.default.UPDATE,this.getData)}},{key:"getData",value:function(){this.state.data=Fotor.favoriteManager.get("border"),this.mounted&&this.forceUpdate()}},{key:"refreshFavorite",value:function(){Fotor.favoriteManager.fetch()}},{key:"applyHandler",value:function(){s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"applyHandler",this).call(this);for(var e=this.state.data.length,t=0;t<e;t++)this.refs["borderItem_"+t].state.beSelected&&this.refs["borderItem_"+t].applyHandler()}},{key:"hadItemUnfold",value:function(){for(var e=this.state.data.length,t=0;t<e;t++)if(this.refs["borderItem_"+t].state.beSelected)return!0;return!1}},{key:"afterfold",value:function(){for(var e=this.state.data.length,t=0;t<e;t++)this.refs["borderItem_"+t]&&this.refs["borderItem_"+t].cancelHandler();this.state.isSmallPic=!1,s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"afterfold",this).call(this),this.mounted&&this.setState({doBorder:!1})}},{key:"afterUnfold",value:function(){var e=this;this.mounted&&e.setState({doBorder:!0}),Fotor.progressBar.hide()}},{key:"loadTempHistoryData",value:function(e){for(var t=this.state.data.length,a=0;a<t;a++)this.refs["borderItem_"+a]&&this.refs["borderItem_"+a].cancelHandler();this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()}},{key:"doItemUnFold",value:function(e){for(var t=this.state.data.length,a=0;a<t;a++)void 0==e||null==e?this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.refs["borderItem_"+a]!=e&&this.refs["borderItem_"+a].state.beSelected?this.refs["borderItem_"+a].setState({beSelected:!1}):this.refs["borderItem_"+a]!=e||this.refs["borderItem_"+a].state.beSelected?this.refs["borderItem_"+a]==e&&this.refs["borderItem_"+a].state.beSelected&&this.state.isSmallPic&&(this.state.isSmallPic=!1,Fotor.mainCanvas.doEnterBigPic()):this.state.isSmallPic||(this.state.isSmallPic=!0,Fotor.mainCanvas.doEnterSmallPic())}},{key:"render",value:function(){var t=this,a=!1;return this.state.data.length>0&&(a=!0),e.createElement("div",null,e.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",className:this.props.className,autoActive:!1,childId:"border-favorite-list",isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_favorite_border,onClick:this.handleToolFolderClick.bind(this)}),e.createElement("div",{ref:"toolContent",className:"clearfix effect-group"},a&&this.state.data.map(function(a,r){return e.createElement(c,{ref:"borderItem_"+r,inner:"FavorFolder",unFoldFun:t.doItemUnFold.bind(t),data:a,doBorder:t.state.doBorder,vip:a.isVip,key:a.name,scroller:t.props.scroller})}),!a&&e.createElement("div",{className:"editor-favor-empty"},Fotor.globalConfig.lang.editor_workspace_favorite_notice)))}},{key:"handleToolFolderClick",value:function(){if(Fotor.loginStateManager.isLogin())s(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"handleToolFolderClick",this).call(this);else{Fotor.loginStateManager.addAction(this.handleToolFolderClick.bind(this));var e=FotorUtils.I18N.getLocale().toString(),t='<div class="login-pop-notice login-pop-notice-'+e+' text-left clearfix"><div class="login-pop-sub-title">'+Fotor.globalConfig.lang.design_home_signup_popUps_signedSubNoticeTtitle+'</div> <div class="clearfix"><ul class="login-list clearfix"><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_1+'</li><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_2+'</li><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_3+'</li><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_4+'</li><li class="unfocus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_5+'</li><li class="focus">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_6+'</li></ul></div><div class="login-pop-sub-title clearfix marginT30">'+Fotor.globalConfig.lang.design_home_signup_popUps_noticeContent_6+"</div> </div>";FotorUser.show(t,!1)}}}]),a}(l.default);t.default=u}).call(t,a(0))},function(e,t,a){(function(t,r){function n(e){return e&&e.__esModule?e:{default:e}}var o=a(1287),i=n(o),s=a(1289),l=n(s),c=a(1291),h=n(c),d=a(1293),u=n(d),p=a(1295),m=n(p),f=a(1297),g=n(f),v=a(1299),b=n(v),_=a(1305),y=n(_),x=a(1307),C=n(x),w=a(1309),A=n(w),E=a(1311),F=n(E),k=a(1313),M=n(k),S=a(1315),T=n(S),D=a(1317),R=n(D),I=a(1319),N=n(I),P=a(1321),B=n(P),z=a(6),U=n(z),G=a(8),O=n(G),j=a(13),L=n(j),H=a(779),Z=n(H),Y=a(20).default,W=a(5),Q=W({displayName:"BeautyList",mixins:[Fotor.mixin],getInitialState:function(){return{canvasImg:null,scroller:null,langChange:!1}},componentDidMount:function(){this.removeLoading(),this.setState({scrollArea:this.refs.scrollArea}),Fotor.mainCanvas?this.init():Fotor.app.on(U.default.APP_INIT,this.init)},init:function(){Fotor.mainCanvas.on(O.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.on(O.default.EXIT_EDITOR_MODE,this.update),Fotor.app.on(L.default.LANGUAGE_CHANGE,this.updateLang)},update:function(){this.forceUpdate()},updateLang:function(){var e=this;this.setState({langChange:!0}),setTimeout(function(){e.setState({langChange:!1})},500)},componentWillUnmount:function(){Fotor.app.off(U.default.APP_INIT,this.init),Fotor.mainCanvas.off(O.default.ENTER_EDITOR_MODE,this.update),Fotor.mainCanvas.off(O.default.EXIT_EDITOR_MODE,this.update),Fotor.app.off(L.default.LANGUAGE_CHANGE,this.updateLang)},handleScroll:function(e){e.realHeight<e.containerHeight&&t(".toolbar-list .scrollarea-content").stop().animate({"margin-top":"0px"},200),Fotor.app.trigger(L.default.HIDE_PALETTE)},render:function(){return r.createElement("div",{id:"toolbar"},r.createElement("div",{className:"toolbar-cover",style:{display:Fotor.mainCanvas&&Fotor.mainCanvas.editorMode?"none":"block"}}),r.createElement("div",{className:"toolbar-loading"},r.createElement("div",{className:"loading-round"},r.createElement("div",null),r.createElement("i",null,Fotor.globalConfig.lang.design_workspace_materialList_common_loadingGuide))),r.createElement(Z.default,{ref:"helpTip"}),r.createElement("div",{className:"toolbar"},r.createElement("div",{className:"toolbar-list"},r.createElement(Y,{ref:"scrollArea",className:"area",contentClassName:"content",verticalScrollbarStyle:{borderRadius:5,color:"#b8b8ba",background:"#b8b8ba",opacity:.5,width:"5px"},horizontal:!1,smoothScrolling:!0,scrollbarThickness:8,minScrollSize:40,onScroll:this.handleScroll},r.createElement("div",{className:"toolbar-title marginT0"},Fotor.globalConfig.lang.editor_workspace_material_beauty_face),r.createElement(h.default,{toolName:"beautyBlemishFix",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(i.default,{toolName:"beautySmoothing",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(l.default,{toolName:"beautyWrinkles",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(u.default,{toolName:"beautyBlush",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(m.default,{toolName:"beautyWeight",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(g.default,{toolName:"reshape",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(b.default,{toolName:"clone",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement("div",{className:"toolbar-title"},Fotor.globalConfig.lang.editor_workspace_material_beauty_eye_shadow),r.createElement(y.default,{toolName:"eyeShadow",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(C.default,{toolName:"eyeLiner",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(A.default,{toolName:"mascara",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(F.default,{toolName:"eyeBrowPecil",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(M.default,{toolName:"eyeTint",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(T.default,{toolName:"eyePop",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(R.default,{toolName:"redEyeRemove",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement("div",{className:"toolbar-title"},Fotor.globalConfig.lang.editor_workspace_material_beauty_mouth),r.createElement(N.default,{toolName:"lipTint",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement(B.default,{toolName:"teethWhite",scroller:this.state.scrollArea,langChange:this.state.langChange,showHelpTip:this.showHelpTip,hideHelpTip:this.hideHelpTip}),r.createElement("div",{style:{height:"50px"}}," ")))))},showHelpTip:function(e,t,a,r){this.refs.helpTip&&this.refs.helpTip.show(e,t,a,r)},hideHelpTip:function(){this.refs.helpTip&&this.refs.helpTip.hide()}});e.exports=Q}).call(t,a(1),a(0))},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=66.6,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=120*t,e.refs.brushSize.setDefault(120),e.beauty_opacity=66.6,e.refs.recovered.setDefault(66.66),this.brushPoints=[],this.hadchanged=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.7,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.smoothing(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.smoothing(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_SMOOTHING.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_SMOOTHING_tip,helpTipGif:a(1288),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"180",min:"10",default:"120",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_YearsRecovered,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"20"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",className:"input-range-grey",max:"100",min:"1",default:"66",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/smooth8c20d2cd401b617e47a5616de441c9e7.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=66.6,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=30*t,e.refs.brushSize.setDefault(30),e.beauty_opacity=66.6,e.refs.recovered.setDefault(67),this.brushPoints=[],this.hadchanged=!1,this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.7,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.wrinkles(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.wrinkles(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_WRINKLES.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_WRINKLES_tip,helpTipGif:a(1290),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"180",min:"2",default:"30",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_YearsRecovered,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"66"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"66",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/wrinkles3f113d87a1078350b6211e7de030f7c4.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.canvas_Point=null,t.canvas_isDrawing=!1,t.circel_Point=null,t.isMoving=!1,t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged=!1,e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(e=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=20*e,this.refs.brushSize.setDefault(20),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",this.moveControlDown),e(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()}},{key:"drawBeauty",value:function(){this.hadchanged=!0;var e={};e.radius=.5*this.brush_Size,e.x=this.canvas_Point.x,e.y=this.canvas_Point.y,Fotor.mainCanvas.fotorEngine.process_blemish(e),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)&&(Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,Fotor.mainCanvas.canvas.requestRenderAll()),e(document).off("mouseup",this.endChangeing)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x,a.y=this.circel_Point.y,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore(),t.restore()}}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/Fotor.mainCanvas.canvas.viewportTransform[0],s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/Fotor.mainCanvas.canvas.viewportTransform[3],l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?Fotor.mainCanvas.applyEditorPic(this.applyfold):(Fotor.mainCanvas.fotorEngine.clean(),this.tryFold())}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_BLEMISH_FIX.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_BLEMISH_FIX_tip,helpTipGif:a(1292),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner"},r.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_BLEMISH_FIX_size),r.createElement(Fotor.ui.InputRange,{ref:"brushSize",max:"50",min:"1",default:"20",className:"input-range-grey",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=h}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/blemish-fixdc33fdf4ecc3a1e16896d101f42d3c6a.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),a(164),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=25,t.isMoving=!1,t.selectedColor={},t.presetColors1=["#fdc0aa","#ffa776","#fca490","#fe8484"],t.presetColors2=["#fcb1bf","#cb7c77","#fe77c4","#d85e6f"],t.presetColors3=["#f7e7d7","#c39078","#b0907b","#9e6e57"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.state={colorToolSelectedIndex:0},t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=60*t,e.refs.brushSize.setDefault(60),e.beauty_opacity=25,e.refs.recovered.setDefault(e.beauty_opacity);e.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#fca490"),this.brushPoints=[],this.hadchanged=!1,e.isEraserMode=!1,e.state.colorToolSelectedIndex=0,e.refs.colorGroup1.setIndex(2),e.refs.colorGroup2.setIndex(2),e.refs.colorGroup3.setIndex(2),this.refs.erase.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(e){e=null!=e&&e,this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,e)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(!0),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(!1),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(!1),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=1;Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight>=4e6&&(t=Math.pow(Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.documentHeight/4e6,2)),this.brush_Size=this.refs.brushSize.val()*t,this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){247!=this.selectedColor.r&&231!=this.selectedColor.g&&215!=this.selectedColor.b?(Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.blush(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)):(Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.highLightBlush(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE))}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){this.doApplyHandler()}},{key:"doApplyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)247!=this.selectedColor.r&&231!=this.selectedColor.g&&215!=this.selectedColor.b?Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.blush(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1):Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.highLightBlush(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_BLUSH.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_BLUSH_tip,helpTipGif:a(1294),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("ul",{ref:"colorSelection",className:"color-selection cells-3 clearfix"},r.createElement("li",{style:{background:"#fca490"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#fe77c4"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#b0907b"},className:"color-selection-item "+(2==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null))),r.createElement("div",{className:"colors-group clearfixr"},r.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors2,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:2==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup3",index:"2",presetColors:this.presetColors3,onClick:this.colorChange.bind(this)}))),r.createElement("div",{className:"clearfix paddingT15"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"erase",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"180",min:"1",default:"60",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("span",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"25"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"50",min:"1",default:"25",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),r=e(t.target);r=this.findDomByClass(r,"color-selection-item");var n=e(a).index(e(r));this.state.colorToolSelectedIndex=n,this.forceUpdate();var o;switch(n){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor();break;case 2:o=this.refs.colorGroup3.getColor()}this.colorChange(o)}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/blushcf35cf766b5152406ecb8b4de0d92a9d.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.save_canvas=null,t.originalWidth=0,t.originalHeight=0,t.resizeWidth=0,t.hadchanged=!1,t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.forceUpdate(),this.hadchanged&&0!=this.originalWidth&&0!=this.originalHeight&&(Fotor.mainCanvas.resetCanvasSize(this.originalWidth,this.originalHeight),Fotor.mainCanvas.setZoom(Fotor.mainCanvas.getZoom(),!1,!1,!0)),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){this.refs.dropSelectDom.setValue(0),this.originalWidth=Fotor.mainCanvas.canvas.documentWidth,this.originalHeight=Fotor.mainCanvas.canvas.documentHeight}},{key:"afterUnfold",value:function(){Fotor.progressBar.hide()}},{key:"handleSelectChange",value:function(t){this.hadchanged=!0,t=100-t/10,t/=100,this.resizeWidth=Math.ceil(t*this.originalWidth),Fotor.mainCanvas.fotorEngine.process_resize(this.resizeWidth,this.originalHeight),Fotor.mainCanvas.resetCanvasSize(this.resizeWidth,this.originalHeight),Fotor.mainCanvas.canvas.viewportTransform[4]+this.resizeWidth*Fotor.mainCanvas.getZoom()>e("#canvas").width()-20?Fotor.mainCanvas.zoomFit():Fotor.mainCanvas.setZoom(Fotor.mainCanvas.getZoom(),!1,!1,!0)}},{key:"handleSelectChanged",value:function(e){this.handleSelectChange(e),0!=e?(Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData())):this.hadchanged=!1}},{key:"getDefaultHistoryData",value:function(){var e={};return e.resizeVal=0,e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.resizeVal=parseInt(this.refs.dropSelectDom.val()),e}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged=!1:this.hadchanged||(this.hadchanged=!0),this.refs.dropSelectDom.setDefault(e.resizeVal),this.handleSelectChange(e.resizeVal)}},{key:"applyHandler",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),this.hadchanged=!1,Fotor.mainCanvas.applyEditorPic(this.applyfold)}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_WEIGHT.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_WEIGHT_tip,helpTipGif:a(1296),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_WEIGHT_Lost,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"frameSizeSpan"},100),r.createElement("span",null,"%"))),r.createElement(Fotor.ui.InputRangeLevel,{ref:"dropSelectDom",defaultValue:"0",max:"100",min:"0",bindEle:this.refs.frameSizeSpan,className:"input-range-grey",steps:[0,10,20,30,40,50,60,70,80,90,100],onChange:this.handleSelectChange.bind(this),onChanged:this.handleSelectChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default);t.default=h}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/weight8fe0e9a86bc7a81dfc0e69bc40c46bc0.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=80,t.isMoving=!1,t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.hadchanged=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.max(10,Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight)));e.brush_Size=Math.round(18*t*.01),e.refs.brushSize.setDefault(18),e.beauty_opacity=80,e.refs.recovered.setDefault(e.beauty_opacity),Fotor.mainCanvas.canvas.mouseEnabled=!1}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()}},{key:"drawBeauty",value:function(){this.hadchanged=!0;var e={};e.radius=.5*this.brush_Size,e.points=[this.last_Point,this.canvas_Point],Fotor.mainCanvas.fotorEngine.process_reshape(e,.01*this.beauty_opacity),this.last_Point=this.canvas_Point}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)&&(Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore(),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData()),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.max(10,Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight)));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.01),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),Fotor.mainCanvas.fotorEngine.process_reshape(null,.01*this.beauty_opacity)}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?(Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)):(Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler())}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_RESHAPE.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_RESHAPE_tip,helpTipGif:a(1298),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_size,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"55",min:"2",default:"18",bindEle:this.refs.BrushSizeSpan,onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)})),r.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"80"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"80",bindEle:this.refs.RecoveredSpan,className:"input-range-grey",onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/reshape36b3d243bbb8a52039b79786c8fc8d94.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0}),a(1300);var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.clone_circel_Point=null,t.canvas_isDrawing=!1,t.brush_opacity=.7,t.beauty_opacity=100,t.isMoving=!1,t.canSetCloneBase=!0,t.offset_x=0,t.offset_y=0,t.chapterImage_0=null,t.chapterImage_1=null,t.chapterImage_0_ready=!1,t.chapterImage_1_ready=!1,t.cloneStep=0,t.isEraserMode=!1;var r=t;return t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t.chapterImage_0=new Image,isSafari||(t.chapterImage_0.crossOrigin="anonymous"),t.chapterImage_0.onLoad=function(){Fotor.mainCanvas.canvas.requestRenderAll()},r.chapterImage_0.src=a(1302),r.chapterImage_0_ready=!0,t.chapterImage_1=new Image,isSafari||(t.chapterImage_1.crossOrigin="anonymous"),t.chapterImage_1.onLoad=function(){Fotor.mainCanvas.canvas.requestRenderAll()},r.chapterImage_1.src=a(1303),r.chapterImage_1_ready=!0,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.hadchanged=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(70*e*.001),this.refs.brushSize.setDefault(70),this.refs.softnes.setDefault(0),this.refs.recovered.setDefault(0),this.cloneStartOrEnd(),this.isEraserMode=!1,this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),Fotor.mainCanvas.canvas.customControlsFun=this.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",this.moveControlDown),e(document).on("mousemove",this.drawMoving),Fotor.progressBar.hide()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.isEraserMode&&this.cancelCloneMode(),this.forceUpdate()}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){if(Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.isEraserMode){this.last_Point=this.canvas_Point,this.canvas_isDrawing=!0;var a={x:0,y:0,dx:0,dy:0};Fotor.mainCanvas.fotorEngine.refresh_clone(a)}else this.cloneStep++,3==this.cloneStep&&(this.cloneStep=2),0==this.cloneStep||(1==this.cloneStep?(null==this.clone_circel_Point&&(this.clone_circel_Point={}),this.clone_circel_Point.x=this.canvas_Point.x,this.clone_circel_Point.y=this.canvas_Point.y):2==this.cloneStep&&(this.canvas_isDrawing=!0,this.last_Point=this.canvas_Point,this.canSetCloneBase?(this.canSetCloneBase=!1,this.clone_circel_Point.dx=this.canvas_Point.x,this.clone_circel_Point.dy=this.canvas_Point.y,this.offset_x=this.clone_circel_Point.x-this.clone_circel_Point.dx,this.offset_y=this.clone_circel_Point.y-this.clone_circel_Point.dy,Fotor.mainCanvas.fotorEngine.refresh_clone(this.clone_circel_Point)):Fotor.mainCanvas.fotorEngine.refresh_clone(this.clone_circel_Point),this.drawBeauty()));e(document).on("mouseup",this.endChangeing),Fotor.mainCanvas.canvas.requestRenderAll()}this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);var e={};e.opacity=.5,e.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,e.points=[this.last_Point,this.canvas_Point],this.isEraserMode?e.model="eraser":e.model="lucency",Fotor.mainCanvas.fotorEngine.process_clone_painter(e,this.beauty_opacity),this.last_Point=this.canvas_Point}},{key:"cloneStartOrEnd",value:function(){this.isEraserMode=!1,this.refs.eraseBtn.setDisactive(),this.cloneStep=0,this.offset_x=this.offset_y=0,this.canSetCloneBase=!0,this.clone_circel_Point=null,Fotor.mainCanvas.canvas.requestRenderAll(),this.forceUpdate()}},{key:"cancelCloneMode",value:function(){this.cloneStep=0,this.offset_x=this.offset_y=0,this.canSetCloneBase=!0,this.clone_circel_Point=null,Fotor.mainCanvas.canvas.requestRenderAll(),this.forceUpdate()}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){if(null!=this.clone_circel_Point){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.setLineDash([2,2]),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};1==this.cloneStep?(a.x=this.clone_circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.clone_circel_Point.y*Fotor.mainCanvas.editorCanvasScale):2==this.cloneStep&&(a.x=(this.circel_Point.x+this.offset_x)*Fotor.mainCanvas.editorCanvasScale,a.y=(this.circel_Point.y+this.offset_y)*Fotor.mainCanvas.editorCanvasScale),a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),1==this.cloneStep&&this.chapterImage_1_ready||2==this.cloneStep&&!this.canvas_isDrawing?(t.drawImage(this.chapterImage_0,a.x-7,a.y-9),t.restore()):(t.restore(),t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom,t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore())}t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var r={};r.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,r.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,r.r=.5*this.brush_Size,t.arc(r.x,r.y,r.r,0,2*Math.PI,!0),t.stroke(),1==this.cloneStep&&this.chapterImage_1_ready||2==this.cloneStep&&!this.canvas_isDrawing?t.drawImage(this.chapterImage_1,r.x-7,r.y-9):this.isEraserMode||(t.save(),t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(r.x-5,r.y),t.lineTo(r.x+5,r.y),t.stroke(),t.beginPath(),t.moveTo(r.x,r.y-5),t.lineTo(r.x,r.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){if(this.canvas_isDrawing){this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),3==this.cloneStep&&(this.cloneStep=1);var a={x:0,y:0,dx:0,dy:0};Fotor.mainCanvas.fotorEngine.refresh_clone(a),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleSoftnesChange",value:function(e){this.brush_opacity=.7+this.refs.softnes.val()/100*.3}},{key:"handleSoftnesChanged",value:function(e){this.handleSoftnesChange(e)}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=100-this.refs.recovered.val(),Fotor.mainCanvas.fotorEngine.process_clone_painter(null,this.beauty_opacity)}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?Fotor.mainCanvas.applyEditorPic(this.applyfold):(Fotor.mainCanvas.fotorEngine.clean(),this.tryFold())}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_CLONE.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_CLONE_tip,helpTipGif:a(1304),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clone-btn "+(0!=this.cloneStep?"active":""),onClick:this.cloneStartOrEnd.bind(this)},Fotor.globalConfig.lang.editor_workspace_beauty_CLONE_btn),r.createElement("div",{className:"clearfix paddingT15"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"185",min:"45",default:"70",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"SoftnesSpan"},"100"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"softnes",max:"100",min:"0",default:"0",bindEle:this.refs.SoftnesSpan,className:"input-range-grey",onChange:this.handleSoftnesChange.bind(this),onChanged:this.handleSoftnesChanged.bind(this)}),r.createElement("div",{className:"paddingT15"},Fotor.globalConfig.lang.editor_workspace_beauty_Fade,r.createElement("span",{className:"pull-right",ref:"RecoveredSpan"},"100")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"0",default:"0",bindEle:this.refs.RecoveredSpan,className:"input-range-grey",onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){var r=a(1301);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0};n.transform=void 0;a(3)(r,n);r.locals&&(e.exports=r.locals)},function(e,t,a){t=e.exports=a(2)(!1),t.push([e.i,"/*-----------------------------------------\r\n * Base Settings\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Layout\r\n * ----------------------------------------*/\n/*-----------------------------------------\r\n * Mixin\r\n * ----------------------------------------*/\n.clone-btn {\n  width: 100%;\n  height: 34px;\n  border: 1px solid #c8c7cd;\n  text-align: center;\n  line-height: 34px;\n  color: #787878; }\n  .clone-btn.active {\n    border-color: #ac975e;\n    background: #ac975e;\n    color: #fff;\n    cursor: pointer; }\n    .clone-btn.active:hover {\n      background: #bda460;\n      border-color: #bda460;\n      color: #fff; }\n    .clone-btn.active:active {\n      background: none;\n      border-color: #c8c7cd;\n      color: #787878; }\n\n.black .clone-btn {\n  border-color: #57575a; }\n  .black .clone-btn.active {\n    border-color: #ac975e; }\n    .black .clone-btn.active:hover {\n      background: #bda460;\n      border-color: #bda460;\n      color: #fff; }\n    .black .clone-btn.active:active {\n      border-color: #57575a; }\n",""])},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzJDRUUwNEExREMxMTFFN0I1OThGNjlDNzgyNDI2MEMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzJDRUUwNEIxREMxMTFFN0I1OThGNjlDNzgyNDI2MEMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMkNFRTA0ODFEQzExMUU3QjU5OEY2OUM3ODI0MjYwQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMkNFRTA0OTFEQzExMUU3QjU5OEY2OUM3ODI0MjYwQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pnia184AAADLSURBVHjaYvj//z8DGlYF4rVA/BGK10LFUNSha1IH4vf/McF7qBxOjWuhCpcBsRgUL4OKrcWn8SNUkRiSmBhU7DOyWiYGcgEOp85FEptPjFM1gPgHVCEHEHNB2d+gcjg1MgPxC6hiCSCWg7IfATEbPo3hUIUHkMT2QsW6cWnUBeJXUEU5SOIWSPFZgKyxFIi/IkmuxpKagpHkQdGSCxL8AhW4BMTTsGhC1nwYqvYd43+wvWDASGwMghVTQyNJgCKNDJRoJFU3I0CAAQD2jRxfTOXRvgAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAASCAYAAABrXO8xAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjgyN0FCNUMxREMxMTFFN0FBNjVDNDgyQjA0QTlFNjYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MjgyN0FCNUQxREMxMTFFN0FBNjVDNDgyQjA0QTlFNjYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyODI3QUI1QTFEQzExMUU3QUE2NUM0ODJCMDRBOUU2NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyODI3QUI1QjFEQzExMUU3QUE2NUM0ODJCMDRBOUU2NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PudohMMAAAClSURBVHjaYvj//z8DGlYF4rVA/BGK10LFUNSha1IH4vf/McF7qBxOjWv/4wZrkdUygnUjwEcg5mPADr4AMS+Mw8RAJkDXuAeP2l0oPDQ/agDxDyz++waVg6tFt/E2EH/AYtsbIL6Hz8ZwPKHajSs6dIH41X/8oABZYykQf/1PPPgMxLmgeATFDzeJsfEepPE/NeJxEGtkAWJGcjWC0wGJ+hgBAgwAh5JsSXPN7kUAAAAASUVORK5CYII="},function(e,t,a){e.exports=a.p+"images/cloneddf7df4af8b40aae62d8fc6543fc3a48.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),a(164),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.brush_Size=60,t.beauty_opacity=40,t.isMoving=!1,t.selectedColor=null,t.presetColors0=["#e3b3a9","#c58a7a","#8a424d","#542930"],t.presetColors1=["#eeceb7","#cd9d87","#dd6522","#805b55"],t.presetColors2=["#edc2bb","#ebb3be","#d75a6a","#db8b84"],t.presetColors3=["#a1989d","#93705a","#3d7488","#545649"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.state={colorToolSelectedIndex:0},t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this;if(e.brush_Size=30,e.refs.brushSize.setDefault(e.brush_Size),e.beauty_opacity=40,e.refs.recovered.setDefault(e.beauty_opacity),!e.selectedColor){e.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#8a424d")}this.brushPoints=[],this.hadchanged=!1,e.state.colorToolSelectedIndex=0,e.refs.colorGroup1.setIndex(2),e.refs.colorGroup2.setIndex(2),e.refs.colorGroup3.setIndex(2),e.refs.colorGroup4.setIndex(2),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this);var t=this;setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(e){e=null!=e&&e,this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,e)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(!0),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(!1),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(!1),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){this.brush_Size=this.refs.brushSize.val(),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyeShadow(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyeShadow(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_SHADOW.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_SHADOW_tip,helpTipGif:a(1306),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner"},r.createElement("ul",{ref:"colorSelection",className:"color-selection clearfix"},r.createElement("li",{style:{background:"#8a424d"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#dd6522"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#d75a6a"},className:"color-selection-item "+(2==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#3d7488"},className:"color-selection-item "+(3==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null))),r.createElement("div",{className:"colors-group clearfix"},r.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors0,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:2==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup3",index:"2",presetColors:this.presetColors2,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:3==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup4",index:"2",presetColors:this.presetColors3,onClick:this.colorChange.bind(this)}))),r.createElement("div",{className:"clearfix paddingT15"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"90",min:"8",default:"30",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"40"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"40",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),r=e(t.target);r=this.findDomByClass(r,"color-selection-item");var n=e(a).index(e(r));this.state.colorToolSelectedIndex=n,this.forceUpdate();var o;switch(n){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor();break;case 2:o=this.refs.colorGroup3.getColor();break;case 3:o=this.refs.colorGroup4.getColor()}this.colorChange(o)}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/eye-shadow23f6ea34da1a4d764942115f2c264a9e.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.brush_Size=60,t.beauty_opacity=50,t.isMoving=!1,t.selectedColor={},t.presetColors0=["#fad5bb","#7c4c42","#473835","#1c1817"],t.presetColors1=["#663855","#542930","#424e68","#3c5236"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t.state={colorToolSelectedIndex:0},t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(15*t*.001),e.refs.brushSize.setDefault(15),e.beauty_opacity=50,e.refs.recovered.setDefault(e.beauty_opacity);e.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#755153"),this.brushPoints=[],this.hadchanged=!1,this.state.colorToolSelectedIndex=0,e.refs.colorGroup1.setIndex(2),e.refs.colorGroup2.setIndex(2),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this);var t=this;setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorItemClick",value:function(t){var a=e(t.target).css("background-color");this.colorChange(a)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){250!=this.selectedColor.r&&213!=this.selectedColor.g&&187!=this.selectedColor.b?Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyeLiner(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0):Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.highLightEyeLiner(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)250!=this.selectedColor.r&&213!=this.selectedColor.g&&187!=this.selectedColor.b?Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyeLiner(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1):Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.highLightEyeLiner(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_LINER.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_LINE_tip,helpTipGif:a(1308),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner"},r.createElement("ul",{ref:"colorSelection",className:"color-selection cells-2 clearfix"},r.createElement("li",{style:{background:"#473835"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#424e68"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null))),r.createElement("div",{className:"colors-group clearfix"},r.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors0,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_PencilSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"100",min:"5",default:"15",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"50"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"50",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),r=e(t.target);r=this.findDomByClass(r,"color-selection-item");var n=e(a).index(e(r));this.state.colorToolSelectedIndex=n,this.forceUpdate();var o;switch(n){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor()}this.colorChange(o)}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/eye-line5b053d928244db7cd849f0d21da78214.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=80,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));e.brush_Size=Math.round(50*t*.001),e.refs.brushSize.setDefault(50),e.beauty_opacity=80,e.refs.recovered.setDefault(e.beauty_opacity),this.brushPoints=[],this.hadchanged=!1,this.isEraserMode=!1,this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.7,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.mascara(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.mascara(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_MASCARA.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_MASCARA_tip,helpTipGif:a(1310),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"90",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"80"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"80",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/mascara81c08d863dd421054d805514b3566037.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=20,t.isMoving=!1,t.selectedColor={},t.presetColors=["#CCA181","#B88D6B","#957A6F","#5A4540"],t.presetColors1=["#C38741","#A3602C","#97604C","#6E3C32"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t.state={colorToolSelectedIndex:0},t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));e.brush_Size=Math.round(50*t*.001),e.refs.brushSize.setDefault(50),e.beauty_opacity=20,e.refs.recovered.setDefault(e.beauty_opacity);var a=this.refs.colorGroup1.getColor();e.selectedColor=Fotor.common.utils.Color.colorHexToRgb(a),this.brushPoints=[],this.hadchanged=!1,this.state.colorToolSelectedIndex=0,e.refs.colorGroup1.setIndex(2),e.refs.colorGroup2.setIndex(2),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorItemClick",value:function(t){var a=e(t.target).css("background-color");this.colorChange(a)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyeBrowPencil(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyeBrowPencil(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_BROWPENCIL.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_BROWPENCIL_tip,helpTipGif:a(1312),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("ul",{ref:"colorSelection",className:"color-selection cells-2 clearfix"},r.createElement("li",{style:{background:"#957a6f"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#97604c"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null))),r.createElement("div",{className:"colors-group clearfixr"},r.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_PencilSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"180",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"20"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"20",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),r=e(t.target);r=this.findDomByClass(r,"color-selection-item");var n=e(a).index(e(r));this.state.colorToolSelectedIndex=n,this.forceUpdate();var o;switch(n){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor()}this.colorChange(o)}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/eye-browpencil4c9be8c8b1652bb565802c54b4141f97.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),a(164),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=40,t.isMoving=!1,t.selectedColor={},t.presetColors0=["#64c4ff","#2e4999","#83cb58","#245a2b"],t.presetColors1=["#7b4f00","#6E3C32","#3c2d23","#808080"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.state={colorToolSelectedIndex:0},t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*t*.001),e.refs.brushSize.setDefault(50),e.beauty_opacity=40,e.refs.recovered.setDefault(e.beauty_opacity);e.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#65c3ff"),this.brushPoints=[],this.hadchanged=!1,e.state.colorToolSelectedIndex=0,e.refs.colorGroup1.setIndex(0),e.refs.colorGroup2.setIndex(0),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this);var t=this;setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyeTint(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyeTint(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYETINT.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYETINT_tip,helpTipGif:a(1314),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("ul",{ref:"colorSelection",className:"color-selection cells-2 clearfix"},r.createElement("li",{style:{background:"#64c4ff"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#7b4f00"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null))),r.createElement("div",{className:"colors-group clearfix"},r.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"0",presetColors:this.presetColors0,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"0",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"150",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"40"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"40",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),r=e(t.target);r=this.findDomByClass(r,"color-selection-item");var n=e(a).index(e(r));this.state.colorToolSelectedIndex=n,this.forceUpdate();var o;switch(n){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor()}this.colorChange(o)}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/eye-tint8633baf4be54a13abfbfccf12a6d68cf.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=50,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*t*.001),e.refs.brushSize.setDefault(50),e.beauty_opacity=50,e.refs.recovered.setDefault(e.beauty_opacity),this.brushPoints=[],this.hadchanged=!1,this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.eyePop(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.eyePop(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_POP.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_EYE_POP_tip,helpTipGif:a(1316),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"100",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"50"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"50",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/eye-pop35028923da09f27ee38f948a0448e9cf.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.isMoving=!1,t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.endChangeing=t.endChangeing.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.hadchanged=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*t*.001),e.refs.brushSize.setDefault(50),Fotor.mainCanvas.canvas.mouseEnabled=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this);var t=this;Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.progressBar.hide()}},{key:"drawBeauty",value:function(){this.hadchanged=!0;var e={};e.radius=.5*this.brush_Size,e.x=this.last_Point.x,e.y=this.last_Point.y,Fotor.mainCanvas.fotorEngine.process_redEyeRemove(e),Fotor.mainCanvas.fotorEngine.refresh_record(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData()),setTimeout(function(){Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)},150)}},{key:"moveControlDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)&&(Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,this.last_Point=this.canvas_Point,e(document).on("mouseup",this.endChangeing),this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll())}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,Fotor.mainCanvas.canvas.requestRenderAll()),e(document).off("mouseup",this.endChangeing)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore(),t.restore()}}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"loadTempHistoryData",value:function(e,t){t?this.hadchanged&&(this.hadchanged=!1):this.hadchanged||(this.hadchanged=!0)}},{key:"applyHandler",value:function(){l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged?Fotor.mainCanvas.applyEditorPic(this.applyfold):(Fotor.mainCanvas.fotorEngine.clean(),this.tryFold())}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_RED_EYE_REMOVE.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_RED_EYE_REMOVE_tip,helpTipGif:a(1318),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_size,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"200",min:"5",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)})),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/red-eye-remove8465d1f5d6d1cfffa0a43b8f6f3b70f6.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),a(164),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=30,t.isMoving=!1,t.selectedColor={},t.presetColors0=["#ef6b80","#d46369","#fe5864","#f73558"],t.presetColors1=["#e55d3e","#d74d4b","#cc3d1d","#e03d05"],t.presetColors2=["#d30f27","#b8181a","#9c070d","#a02748"],t.presetColors3=["#ce9482","#cf7c6e","#d68e7b","#805b55"],t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.colorChange=t.colorChange.bind(t),t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.state={colorToolSelectedIndex:0},t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*t*.001),e.refs.brushSize.setDefault(50),e.beauty_opacity=30,e.refs.recovered.setDefault(e.beauty_opacity);e.selectedColor=Fotor.common.utils.Color.colorHexToRgb("#fe5864"),this.brushPoints=[],this.hadchanged=!1,this.state={colorToolSelectedIndex:0},e.refs.colorGroup1.setIndex(2),e.refs.colorGroup2.setIndex(2),e.refs.colorGroup3.setIndex(2),e.refs.colorGroup4.setIndex(2),this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide(),Fotor.vipResManager.setEditorWaterMark()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"colorChange",value:function(e,t){this.selectedColor=Fotor.common.utils.Color.colorHexToRgb(e),this.drawCanvas()}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.lipTint(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.lipTint(this.selectedColor.r,this.selectedColor.g,this.selectedColor.b,this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.vipResManager.setEditorVip(),Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.cancelHandler()}},{key:"cancelHandler",value:function(){this.tryFold(),Fotor.vipResManager.resetWaterMark()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,vip:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_LIP_TINT.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_LIP_TINT_tip,helpTipGif:a(1320),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("ul",{ref:"colorSelection",className:"color-selection clearfix"},r.createElement("li",{style:{background:"#fe5864"},className:"color-selection-item "+(0==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#cc3d1d"},className:"color-selection-item "+(1==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#9c070d"},className:"color-selection-item "+(2==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null)),r.createElement("li",{style:{background:"#d68e7b"},className:"color-selection-item "+(3==this.state.colorToolSelectedIndex?"active":""),onClick:this.handleSelectColorTool.bind(this)},r.createElement("span",null))),r.createElement("div",{className:"colors-group clearfix"},r.createElement("div",{className:"clearfix",style:{display:0==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup1",index:"2",presetColors:this.presetColors0,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:1==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup2",index:"2",presetColors:this.presetColors1,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:2==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup3",index:"2",presetColors:this.presetColors2,onClick:this.colorChange.bind(this)})),r.createElement("div",{className:"clearfix",style:{display:3==this.state.colorToolSelectedIndex?"block":"none"}},r.createElement(Fotor.ui.ColorSelection,{ref:"colorGroup4",index:"2",presetColors:this.presetColors3,onClick:this.colorChange.bind(this)}))),r.createElement("div",{className:"clearfix paddingT15"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"150",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"30"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"30",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}},{key:"handleSelectColorTool",value:function(t){var a=e(this.refs.colorSelection).find("li"),r=e(t.target);r=this.findDomByClass(r,"color-selection-item");var n=e(a).index(e(r));this.state.colorToolSelectedIndex=n,this.forceUpdate();var o;switch(n){case 0:o=this.refs.colorGroup1.getColor();break;case 1:o=this.refs.colorGroup2.getColor();break;case 2:o=this.refs.colorGroup3.getColor();break;case 3:o=this.refs.colorGroup4.getColor()}this.colorChange(o)}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/lip-tint6e0ef9d4ec18ded2c48f511a0fb9c7c8.gif"},function(e,t,a){"use strict";(function(e,r){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,a,r)}if("value"in n)return n.value;var i=n.get;if(void 0!==i)return i.call(r)};Object.defineProperty(t,"__esModule",{value:!0});var c=a(82),h=a(8),d=(a(161),function(t){function c(e){n(this,c);var t=o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return t.hadchanged=!1,t.last_Point=null,t.canvas_Point=null,t.circel_Point=null,t.canvas_isDrawing=!1,t.beauty_opacity=90,t.isMoving=!1,t.savedOrgImg=null,t.isEraserMode=!1,t.brushPoints=[],t.moveControlDown=t.moveControlDown.bind(t),t.drawMoving=t.drawMoving.bind(t),t.endChangeing=t.endChangeing.bind(t),t.helperDrawCursorCircel=t.helperDrawCursorCircel.bind(t),t.sampleChildModuleName="beauty",t.sampleToolName=e.toolName,t}return i(c,t),s(c,[{key:"shouldComponentUpdate",value:function(){return this.isUnfold||this.state.firstRender||this.props.langChange}},{key:"afterfold",value:function(){this.brushPoints=[],this.hadchanged=!1,this.savedOrgImg=null,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.exitBeautyMode(),Fotor.mainCanvas.trigger(h.default.CONTENT_CHANGE),e(".upper-canvas").off("mousedown",this.moveControlDown),e(document).off("mousemove",this.drawMoving),e(document).off("mouseup",this.endChangeing),this.forceUpdate(),l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterfold",this).call(this)}},{key:"initUnfoldUI",value:function(){var e=this,t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(50*t*.001),e.refs.brushSize.setDefault(50),e.beauty_opacity=90,e.refs.recovered.setDefault(e.beauty_opacity),this.brushPoints=[],this.hadchanged=!1,this.refs.eraseBtn.setDisactive(),Fotor.mainCanvas.canvas.mouseEnabled=!1,e.isEraserMode=!1,this.forceUpdate()}},{key:"afterUnfold",value:function(){var t=this;l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"afterUnfold",this).call(this),setTimeout(function(){Fotor.mainCanvas.canvas.customControlsFun=t.helperDrawCursorCircel,Fotor.mainCanvas.canvas.hasCustomControls=!0,e(".upper-canvas").on("mousedown",t.moveControlDown),e(document).on("mousemove",t.drawMoving),Fotor.mainCanvas.enterBeautyMode(),t.savedEraserPattern(),t.drawCanvas(),Fotor.progressBar.hide()},200)}},{key:"savedEraserPattern",value:function(){this.savedOrgImg=Fotor.mainCanvas.fotorEngine.get_canvas_image()}},{key:"toggleEraserMode",value:function(){this.isEraserMode=!this.isEraserMode,this.forceUpdate()}},{key:"drawBeauty",value:function(){this.hadchanged=!0,Fotor.EngineAction.DrawBeauty(this,!0)&&(null!=this.brushPoints[this.brushPoints.length-1]&&this.brushPoints[this.brushPoints.length-1].points&&this.brushPoints[this.brushPoints.length-1].points.push(this.canvas_Point),this.last_Point=this.canvas_Point)}},{key:"moveControlDown",value:function(t){if(t.preventDefault(),t.stopPropagation(),this.getEventPoint(t)){Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,this.canvas_isDrawing=!0,e(document).on("mouseup",this.endChangeing),this.last_Point=this.canvas_Point;var a={};a.opacity=.5,a.size=this.brush_Size/Fotor.mainCanvas.editorCanvasScale,a.points=[],a.model=this.isEraserMode?"eraser":"lucency",this.brushPoints[this.brushPoints.length]=a,this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()}}},{key:"drawMoving",value:function(e){this.getEventPoint(e)?(this.isMoving||(this.isMoving=!0,Fotor.mainCanvas.canvas.isBeautyDrawMode=!0,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.emptyCursor)),this.circel_Point=this.canvas_Point,this.canvas_isDrawing&&this.drawBeauty(),Fotor.mainCanvas.canvas.requestRenderAll()):(this.isMoving&&(this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll(),Fotor.mainCanvas.canvas.isBeautyDrawMode=!1,Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor)),this.isMoving=!1)}},{key:"helperDrawCursorCircel",value:function(e,t){if(this.isMoving){t.save(),void 0!=e.viewRotateMatrix&&t.transform.apply(t,e.viewRotateMatrix.toArray()),t.transform.apply(t,e.viewportTransform),t.beginPath(),t.strokeStyle="#ffffff",t.lineWidth=1/e.viewZoom;var a={};a.x=this.circel_Point.x*Fotor.mainCanvas.editorCanvasScale,a.y=this.circel_Point.y*Fotor.mainCanvas.editorCanvasScale,a.r=.5*this.brush_Size,t.arc(a.x,a.y,a.r,0,2*Math.PI,!0),t.stroke(),this.isEraserMode||(t.save(),this.canvas_isDrawing?t.strokeStyle="rgba(255,255,255,0.5)":t.strokeStyle="rgba(255,255,255,1)",t.beginPath(),t.moveTo(a.x-5,a.y),t.lineTo(a.x+5,a.y),t.stroke(),t.beginPath(),t.moveTo(a.x,a.y-5),t.lineTo(a.x,a.y+5),t.stroke(),t.restore()),t.restore()}}},{key:"endChangeing",value:function(t){this.canvas_isDrawing&&(this.canvas_isDrawing=!1,this.getEventPoint(t)&&this.drawBeauty(),Fotor.mainCanvas.addEditorTempHistory(this.getCurrentHistoryData(),!1),Fotor.mainCanvas.trigger(h.default.BEAUTYLAYER_CHANGE)),e(document).off("mouseup",this.endChangeing)}},{key:"getEventPoint",value:function(e){this.canvas_Point=Fotor.mainCanvas.canvas.getPointer(e,!0);var t,a,r=Fotor.mainCanvas.canvas.viewportTransform[4],n=Fotor.mainCanvas.canvas.viewportTransform[5],o=Fotor.mainCanvas.canvas.documentWidth*Fotor.mainCanvas.canvas.viewportTransform[0],i=Fotor.mainCanvas.canvas.documentHeight*Fotor.mainCanvas.canvas.viewportTransform[3],s=!1,l=!1;return this.canvas_Point.x>r&&this.canvas_Point.x<r+o&&(t=(this.canvas_Point.x-r)/(Fotor.mainCanvas.canvas.viewportTransform[0]*Fotor.mainCanvas.editorCanvasScale),s=!0),this.canvas_Point.y>n&&this.canvas_Point.y<n+i&&(a=(this.canvas_Point.y-n)/(Fotor.mainCanvas.canvas.viewportTransform[3]*Fotor.mainCanvas.editorCanvasScale),l=!0),!(!s||!l)&&(this.canvas_Point={x:t,y:a},!0)}},{key:"handleBrushSizeChange",value:function(e){var t=Math.round(Math.min(Fotor.mainCanvas.canvas.documentWidth,Fotor.mainCanvas.canvas.documentHeight));this.brush_Size=Math.round(this.refs.brushSize.val()*t*.001),this.isMoving=!0,this.circel_Point={},this.circel_Point.x=.5*Fotor.mainCanvas.canvas.documentWidth/Fotor.mainCanvas.editorCanvasScale,this.circel_Point.y=.5*Fotor.mainCanvas.canvas.documentHeight/Fotor.mainCanvas.editorCanvasScale,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleBrushSizeChanged",value:function(e){this.handleBrushSizeChange(e),this.isMoving=!1,Fotor.mainCanvas.canvas.requestRenderAll()}},{key:"handleRecoveredChange",value:function(e){this.beauty_opacity=this.refs.recovered.val(),this.drawCanvas()}},{key:"handleRecoveredChanged",value:function(e){this.handleRecoveredChange(e)}},{key:"drawCanvas",value:function(){Fotor.mainCanvas.fotorEngine.process_rule(Fotor.EngineAction.teethWhite(this.beauty_opacity),!0),Fotor.mainCanvas.trigger(h.default.ENGINELAYER_CHANGE)}},{key:"getDefaultHistoryData",value:function(){var e={};return e.brushPoints=[],e}},{key:"getCurrentHistoryData",value:function(){var e={};return e.brushPoints=this.brushPoints,e}},{key:"loadTempHistoryData",value:function(e,t){this.brushPoints=e.brushPoints;var a=e.brushPoints.length,r=Fotor.mainCanvas.beautyCanvasEle[0].getContext("2d");r.clearRect(0,0,Fotor.mainCanvas.beautyCanvasEle[0].width,Fotor.mainCanvas.beautyCanvasEle[0].height),r.save(),r.drawImage(this.savedOrgImg,0,0),r.restore(),t?this.hadchanged&&(this.hadchanged=!1,Fotor.mainCanvas.fotorEngine.redo()):a>0&&(this.hadchanged||(this.hadchanged=!0),Fotor.EngineAction.historyDrawBeauty(e,r,this.savedOrgImg,a))}},{key:"applyHandler",value:function(){if(l(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"applyHandler",this).call(this),Fotor.mainCanvas.canvas.setCursor(Fotor.mainCanvas.canvas.defaultCursor),Fotor.mainCanvas.canvas.customControlsFun=null,Fotor.mainCanvas.canvas.hasCustomControls=!1,Fotor.mainCanvas.canvas.mouseEnabled=!0,Fotor.mainCanvas.canvas.requestRenderAll(),this.hadchanged){Fotor.mainCanvas.fotorEngine.set_step(Fotor.mainCanvas.editorCanvasScale);for(var e=this.brushPoints.length,t=0;t<e;t++)Fotor.mainCanvas.fotorEngine.process_painter_rule(this.brushPoints[t],Fotor.EngineAction.teethWhite(this.beauty_opacity),!1,!1),Fotor.mainCanvas.fotorEngine.refresh_record();Fotor.mainCanvas.applyEditorPic(this.applyfold)}else Fotor.mainCanvas.fotorEngine.clean(),this.tryFold()}},{key:"cancelHandler",value:function(){this.tryFold()}},{key:"render",value:function(){return r.createElement("div",{className:"clearfix"},r.createElement(Fotor.ui.TitleDrop,{ref:"toolTitle",autoActive:!1,isEditor:!0,text:Fotor.globalConfig.lang.editor_workspace_beauty_TEETH_WHITENING.toUpperCase(),helpTip:Fotor.globalConfig.lang.editor_workspace_beauty_TEETH_WHITENING_tip,helpTipGif:a(1322),showHelpTip:this.props.showHelpTip,hideHelpTip:this.props.hideHelpTip,onClick:this.handleToolFolderClick.bind(this)}),r.createElement("div",{ref:"toolContent",className:"editor-folder clearfix"},r.createElement("div",{className:"editor-folder-inner clearfix"},r.createElement("div",{className:"clearfix"},r.createElement("div",{className:"space-34"},r.createElement(Fotor.ui.Erase,{ref:"eraseBtn",onClick:this.toggleEraserMode.bind(this)})),r.createElement("div",{className:"container-leave-34"},this.isEraserMode?Fotor.globalConfig.lang.editor_workspace_beauty_EraserSize:Fotor.globalConfig.lang.editor_workspace_beauty_BrushSize,r.createElement(Fotor.ui.InputRange,{ref:"brushSize",className:"input-range-grey",max:"150",min:"10",default:"50",onChange:this.handleBrushSizeChange.bind(this),onChanged:this.handleBrushSizeChanged.bind(this)}))),r.createElement("div",{className:"paddingT15 clearfix"},Fotor.globalConfig.lang.editor_workspace_beauty_Softnes,r.createElement("div",{className:"pull-right"},r.createElement("span",{ref:"RecoveredSpan"},"90"),"%")),r.createElement(Fotor.ui.InputRange,{ref:"recovered",max:"100",min:"1",default:"90",className:"input-range-grey",bindEle:this.refs.RecoveredSpan,onChange:this.handleRecoveredChange.bind(this),onChanged:this.handleRecoveredChanged.bind(this)}),r.createElement("div",{className:"clearfix editor-folder-btns paddingT10"},r.createElement("a",{className:"btn btn-warning apply-btn pull-left",onClick:this.applyHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_applyButton),r.createElement("a",{className:"btn btn-grey apply-btn pull-right",onClick:this.cancelHandler.bind(this)},Fotor.globalConfig.lang.editor_workspace_effect_cancelButton)))))}}]),c}(c.default));t.default=d}).call(t,a(1),a(0))},function(e,t,a){e.exports=a.p+"images/teetch-whiteningcaa0dfe626b6705d42c30f5ffaa774cb.gif"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function a(){}a._RefID=0,a._isVML=!1,a.checkIE=function(){if("Microsoft Internet Explorer"==navigator.appName){var e=9;-1!=navigator.appVersion.indexOf("MSIE")&&(e=parseFloat(navigator.appVersion.split("MSIE")[1])),e<9&&(a._isVML=!0)}},a.fact=function(e){for(var t=1,a=1;a<=e;a++)t*=a;return t},a.init=function(){if(a.checkIE(),a._isVML){document.namespaces.add("v","urn:schemas-microsoft-com:vml","#default#VML");for(var e=["fill","stroke","path","textpath"],t=0,r=e.length;t<r;t++)document.createStyleSheet().addRule("v\\:"+e[t],"behavior: url(#default#VML);")}},a.init(),a.jxGraphics=function(e){function t(){return _}function r(e){this.indexOfShape(e)<0&&y.push(e)}function n(e){var t=this.indexOfShape(e);t>=0&&y.splice(t,1)}function o(){return"jxGraphics"}function i(){return g}function s(){return v}function l(){return b}function c(e){return"cartecian"==this.coordinateSystem.toLowerCase()?new a.jxPoint(Math.round(e.x*this.scale+this.origin.x),Math.round(this.origin.y-e.y*this.scale)):new a.jxPoint(Math.round(e.x*this.scale+this.origin.x),Math.round(e.y*this.scale+this.origin.y))}function h(e){return e.draw(this)}function d(e){return e.remove(this)}function u(){for(ind in y)y[ind].draw(this)}function p(){return y.length}function m(e){return y[e]}function f(e){for(var t=-1,a=y.length,r=0;r<a;r++)e==y[r]&&(t=r);return t}this.origin=new a.jxPoint(0,0),this.scale=1,this.coordinateSystem="default";var g,v,b,_,y=new Array;e?(g=e,g.style.overflow="hidden"):g=document.body,a._isVML?(b=document.createElement("v:group"),b.style.position="absolute",b.style.top="0px",b.style.left="0px",g.appendChild(b)):(v=document.createElementNS("http://www.w3.org/2000/svg","svg"),g.appendChild(v),_=document.createElementNS("http://www.w3.org/2000/svg","defs"),v.appendChild(_),v.style.position="absolute",v.style.top="0px",v.style.left="0px",v.style.width=g.style.width,v.style.height=g.style.height),this.getDefs=t,this.addShape=r,this.removeShape=n,this.getType=o,this.getDiv=i,this.getSVG=s,this.getVML=l,this.logicalToPhysicalPoint=c,this.draw=h,this.remove=d,this.redrawAll=u,this.getShapesCount=p,this.getShape=m,this.indexOfShape=f},a.jxColor=function(){function e(){return"jxColor"}function t(){return a}var a="#000000";switch(arguments.length){case 1:a=arguments[0];break;case 3:var r=arguments[0],n=arguments[1],o=arguments[2];a=jxColor.rgbToHex(r,n,o)}this.getType=e,this.getValue=t},a.jxColor.rgbToHex=function(e,t,a){if(e<0||e>255||t<0||t>255||a<0||a>255)return!1;var r=Math.round(a)+256*Math.round(t)+65536*Math.round(e);return"#"+function(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}(r.toString(16),6)},a.jxColor.hexToRgb=function(e){var t,a,r;return"#"==e.charAt(0)&&(e=e.substring(1,7)),t=parseInt(e.substring(0,2),16),a=parseInt(e.substring(2,4),16),r=parseInt(e.substring(4,6),16),!(t<0||t>255||a<0||a>255||r<0||r>255)&&new Array(t,a,r)},a.jxFont=function(e,t,a,r,n){function o(e){this.family?e.setAttribute("font-family",this.family):e.setAttribute("font-family",""),this.weight?e.setAttribute("font-weight",this.weight):e.setAttribute("font-weight",""),this.size?e.setAttribute("font-size",this.size):e.setAttribute("font-size",""),this.style?e.setAttribute("font-style",this.style):e.setAttribute("font-style",""),this.variant?e.setAttribute("font-variant",this.variant):e.setAttribute("font-variant","")}function i(e){this.family?e.style.fontFamily="'"+this.family+"'":e.style.fontFamily="",this.weight?e.style.fontWeight=this.weight:e.style.fontWeight="",this.size?e.style.fontSize=this.size:e.style.fontSize="",this.style?e.style.fontStyle=this.style:e.style.fontStyle="",this.variant?e.style.fontVariant=this.variant:e.style.fontVariant=""}function s(){return"jxFont"}this.family=null,this.size=null,this.style=null,this.weight=null,this.variant=null,e&&(this.family=e),r&&(this.weight=r),t&&(this.size=t),a&&(this.style=a),n&&(this.variant=n),this.updateSVG=o,this.updateVML=i,this.getType=s},a.jxFont.updateSVG=function(e){e.setAttribute("font-family",""),e.setAttribute("font-weight",""),e.setAttribute("font-size",""),e.setAttribute("font-style",""),e.setAttribute("font-variant","")},a.jxFont.updateVML=function(e){e.style.fontFamily="",e.style.fontWeight="",e.style.fontSize="",e.style.fontStyle="",e.style.fontVariant=""},a.jxPen=function(e,t,r){function n(e){if(e.setAttribute("stroke",this.color.getValue()),e.setAttribute("stroke-width",this.width),this.dashStyle){var t=parseInt(this.width);switch(this.dashStyle.toLowerCase()){case"shortdash":e.setAttribute("stroke-dasharray",3*t+" "+t);break;case"shortdot":e.setAttribute("stroke-dasharray",t+" "+t);break;case"shortdashdot":e.setAttribute("stroke-dasharray",3*t+" "+t+" "+t+" "+t);break;case"shortdashdotdot":e.setAttribute("stroke-dasharray",3*t+" "+t+" "+t+" "+t+" "+t+" "+t);break;case"dot":e.setAttribute("stroke-dasharray",t+" "+3*t);break;case"dash":e.setAttribute("stroke-dasharray",4*t+" "+3*t);break;case"longdash":e.setAttribute("stroke-dasharray",8*t+" "+3*t);break;case"dashdot":e.setAttribute("stroke-dasharray",4*t+" "+3*t+" "+t+" "+3*t);break;case"longdashdot":e.setAttribute("stroke-dasharray",8*t+" "+3*t+" "+t+" "+3*t);break;case"longdashdotdot":e.setAttribute("stroke-dasharray",8*t+" "+3*t+" "+t+" "+3*t+" "+t+" "+3*t);break;default:e.setAttribute("stroke-dasharray",this.dashStyle)}}}function o(e){e.Stroke.JoinStyle="miter",e.Stroke.MiterLimit="5",e.StrokeColor=this.color.getValue(),e.StrokeWeight=this.width,this.dashStyle&&(e.Stroke.DashStyle=this.dashStyle),0==parseInt(this.width)&&(e.Stroked="False")}function i(){return"jxPen"}this.color=null,this.width=null,this.dashStyle=null,this.color=e||new a.jxColor("#000000"),this.width=t||"1px",r&&(this.dashStyle=r),this.updateSVG=n,this.updateVML=o,this.getType=i},a.jxBrush=function(e,t){function r(e,t){var r,n=null;if(n=e.getAttribute("fill"),n&&("url(#"==n.substr(0,5)?(n=n.substr(5,n.length-6),r=document.getElementById(n)):n=null),"linear-gradient"==this.fillType||"lin-grad"==this.fillType){var o=document.createElementNS("http://www.w3.org/2000/svg","linearGradient");n?t.replaceChild(o,r):t.appendChild(o);var i=document.createElementNS("http://www.w3.org/2000/svg","stop");o.appendChild(i);var s=document.createElementNS("http://www.w3.org/2000/svg","stop");o.appendChild(s),a._RefID++,o.setAttribute("id","jsDraw2DX_RefID_"+a._RefID),null!=this.angle?o.setAttribute("gradientTransform","rotate("+this.angle+" 0.5 0.5)"):o.setAttribute("gradientTransform","rotate(0 0.5 0.5)"),i.setAttribute("offset","0%"),i.setAttribute("style","stop-color:"+this.color.getValue()+";stop-opacity:1"),s.setAttribute("offset","100%"),s.setAttribute("style","stop-color:"+this.color2.getValue()+";stop-opacity:1"),o.appendChild(i),o.appendChild(s),e.setAttribute("fill","url(#jsDraw2DX_RefID_"+a._RefID+")")}else e.setAttribute("fill",this.color.getValue())}function n(e){e.On="true","solid"==this.fillType?(e.Type="solid",e.Color=this.color.getValue(),e.Color2="",e.Angle=270):(e.Type="gradient",null!=this.angle?e.Angle=270-this.angle:e.Angle=270,e.Color=this.color.getValue(),e.Color2=this.color2.getValue())}function o(){return"jxBrush"}this.color=null,this.fillType=null,this.color2=null,this.angle=null,this.color=e||new a.jxColor("#000000"),this.fillType=t||"solid",this.color2=new a.jxColor("#FFFFFF"),this.updateSVG=r,this.updateVML=n,this.getType=o},a.jxPoint=function(e,t){function a(){return"jxPoint"}this.x=e,this.y=t,this.getType=a},a.jxLine=function(e,t,r){function n(){return"jxLine"}function o(e,t){function a(e){t(e,r)}h.addEventListener?h.addEventListener(e,a,!1):h.attachEvent&&h.attachEvent("on"+e,a);var r=this}function i(e){var t,r;t=e.logicalToPhysicalPoint(this.fromPoint),r=e.logicalToPhysicalPoint(this.toPoint);this.pen.color.getValue(),this.pen.width;var n,o,i,s;if(n=t.x,o=t.y,i=r.x,s=r.y,h.style.display="none",a._isVML){var l=e.getVML();u&&(l.appendChild(h),u=!1),this.pen?this.pen.updateVML(h):h.Stroked="False",h.style.position="absolute",h.From=n+","+o,h.To=i+","+s}else{var c=e.getSVG();u&&(c.appendChild(h),u=!1),this.pen?this.pen.updateSVG(h):h.setAttribute("stroke","none"),h.setAttribute("x1",n),h.setAttribute("y1",o),h.setAttribute("x2",i),h.setAttribute("y2",s)}h.style.display="",d&&e!=d&&d.removeShape(this),d=e,d.addShape(this)}function s(){if(d){if(a._isVML){d.getVML().removeChild(h)}else{d.getSVG().removeChild(h)}d.removeShape(this),d=null,u=!0}}function l(){h.style.display=""}function c(){h.style.display="none"}this.fromPoint=e,this.toPoint=t,this.pen=null;var h,d,u=!0;r&&(this.pen=r),h=a._isVML?document.createElement("v:line"):document.createElementNS("http://www.w3.org/2000/svg","line"),this.getType=n,this.addEventListener=o,this.draw=i,this.remove=s,this.show=l,this.hide=c},a.jxRect=function(e,t,r,n,o){function i(){return"jxRect"}function s(e,t){function a(e){t(e,r)}u.addEventListener?u.addEventListener(e,a,!1):u.attachEvent&&u.attachEvent("on"+e,a);var r=this}function l(e){var t,r;t=e.logicalToPhysicalPoint(this.point),r=e.scale;var n,o;if(n=t.x,o=t.y,u.style.display="none",a._isVML){var i,s=e.getVML();m&&(s.appendChild(u),m=!1),this.pen?this.pen.updateVML(u):u.Stroked="False",i=u.fill,this.brush?this.brush.updateVML(i):i.On="false",u.style.width=r*this.width,u.style.height=r*this.height,u.style.position="absolute",u.style.top=o,u.style.left=n}else{var l=e.getSVG();m&&(l.appendChild(u),m=!1),this.pen?this.pen.updateSVG(u):u.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(u,e.getDefs()):u.setAttribute("fill","none"),u.setAttribute("x",n),u.setAttribute("y",o),u.setAttribute("width",r*this.width),u.setAttribute("height",r*this.height),u.style.position="absolute"}u.style.display="",p&&e!=p&&p.removeShape(this),p=e,p.addShape(this)}function c(){if(p){if(a._isVML){p.getVML().removeChild(u)}else{p.getSVG().removeChild(u)}p.removeShape(this),p=null,m=!0}}function h(){u.style.display=""}function d(){u.style.display="none"}this.point=e,this.width=t,this.height=r,this.pen=null,this.brush=null;var u,p,m=!0;n&&(this.pen=n),o&&(this.brush=o),u=a._isVML?document.createElement("v:rect"):document.createElementNS("http://www.w3.org/2000/svg","rect"),this.getType=i,this.addEventListener=s,this.draw=l,this.remove=c,this.show=h,this.hide=d},a.jxPolyline=function(e,t,r){function n(){return"jxPolyline"}function o(e,t){function a(e){t(e,r)}h.addEventListener?h.addEventListener(e,a,!1):h.attachEvent&&h.attachEvent("on"+e,a);var r=this}function i(e){var t=new Array,r="";for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);for(ind in t)r=r+t[ind].x+","+t[ind].y+" ";if(h.style.display="none",a._isVML){var n,o=e.getVML();u&&(o.appendChild(h),u=!1),this.pen?this.pen.updateVML(h):h.Stroked="False",n=h.fill,this.brush?this.brush.updateVML(n):n.On="false",h.style.position="absolute",h.Points.Value=r}else{var i=e.getSVG();u&&(i.appendChild(h),u=!1),this.pen?this.pen.updateSVG(h):h.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(h,e.getDefs()):h.setAttribute("fill","none"),h.style.position="absolute",h.setAttribute("points",r)}h.style.display="",d&&e!=d&&d.removeShape(this),d=e,d.addShape(this)}function s(){if(d){if(a._isVML){d.getVML().removeChild(h)}else{d.getSVG().removeChild(h)}d.removeShape(this),d=null,u=!0}}function l(){h.style.display=""}function c(){h.style.display="none"}this.points=e,this.pen=null,this.brush=null;var h,d,u=!0;t&&(this.pen=t),r&&(this.brush=r),h=a._isVML?document.createElement("v:polyline"):document.createElementNS("http://www.w3.org/2000/svg","polyline"),this.getType=n,this.addEventListener=o,this.draw=i,this.remove=s,this.show=l,this.hide=c},a.jxPolygon=function(e,t,r){function n(){return"jxPolygon"}function o(e,t){function a(e){t(e,r)}h.addEventListener?h.addEventListener(e,a,!1):h.attachEvent&&h.attachEvent("on"+e,a);var r=this}function i(e){var t=new Array,r="";for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);for(ind in t)r=r+t[ind].x+","+t[ind].y+" ";if(h.style.display="none",a._isVML){r=r+t[0].x+","+t[0].y;var n,o=e.getVML();u&&(o.appendChild(h),u=!1),this.pen?this.pen.updateVML(h):h.Stroked="False",n=h.fill,this.brush?this.brush.updateVML(n):n.On="false",h.style.position="absolute",h.Points.Value=r}else{var i=e.getSVG();u&&(i.appendChild(h),u=!1),this.pen?this.pen.updateSVG(h):h.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(h,e.getDefs()):h.setAttribute("fill","none"),h.style.position="absolute",h.setAttribute("points",r)}h.style.display="",d&&e!=d&&d.removeShape(this),d=e,d.addShape(this)}function s(){if(d){if(a._isVML){d.getVML().removeChild(h)}else{d.getSVG().removeChild(h)}d.removeShape(this),d=null,u=!0}}function l(){h.style.display=""}function c(){h.style.display="none"}this.points=e,this.pen=null,this.brush=null;var h,d,u=!0;t&&(this.pen=t),r&&(this.brush=r),h=a._isVML?document.createElement("v:polyline"):document.createElementNS("http://www.w3.org/2000/svg","polygon"),this.getType=n,this.addEventListener=o,this.draw=i,this.remove=s,this.show=l,this.hide=c},a.jxCircle=function(e,t,r,n){function o(){return"jxCircle"}function i(e,t){function a(e){t(e,r)}d.addEventListener?d.addEventListener(e,a,!1):d.attachEvent&&d.attachEvent("on"+e,a);var r=this}function s(e){var t,r;t=e.logicalToPhysicalPoint(this.center),r=e.scale;var n,o;if(n=t.x,o=t.y,d.style.display="none",a._isVML){var i,s=e.getVML();p&&(s.appendChild(d),p=!1),this.pen?this.pen.updateVML(d):d.Stroked="False",i=d.fill,this.brush?this.brush.updateVML(i):i.On="false",d.style.width=r*this.radius*2,d.style.height=r*this.radius*2,d.style.position="absolute",d.style.top=o-r*this.radius,d.style.left=n-r*this.radius}else{var l=e.getSVG();p&&(l.appendChild(d),p=!1),this.pen?this.pen.updateSVG(d):d.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(d,e.getDefs()):d.setAttribute("fill","none"),d.setAttribute("cx",n),d.setAttribute("cy",o),d.setAttribute("r",r*this.radius),d.style.position="absolute"}d.style.display="",u&&e!=u&&u.removeShape(this),u=e,u.addShape(this)}function l(){if(u){if(a._isVML){u.getVML().removeChild(d)}else{u.getSVG().removeChild(d)}u.removeShape(this),u=null,p=!0}}function c(){d.style.display=""}function h(){d.style.display="none"}this.center=e,this.radius=t,this.pen=null,this.brush=null;var d,u,p=!0;r&&(this.pen=r),n&&(this.brush=n),d=a._isVML?document.createElement("v:oval"):document.createElementNS("http://www.w3.org/2000/svg","circle"),this.getType=o,this.addEventListener=i,this.draw=s,this.remove=l,this.show=c,this.hide=h},a.jxEllipse=function(e,t,r,n,o){function i(){return"jxEllipse"}function s(e,t){function a(e){t(e,r)}u.addEventListener?u.addEventListener(e,a,!1):u.attachEvent&&u.attachEvent("on"+e,a);var r=this}function l(e){var t,r;t=e.logicalToPhysicalPoint(this.center),r=e.scale;var n,o;if(n=t.x,o=t.y,u.style.display="none",a._isVML){var i,s=e.getVML();m&&(s.appendChild(u),m=!1),this.pen?this.pen.updateVML(u):u.Stroked="False",i=u.fill,this.brush?this.brush.updateVML(i):i.On="false",u.style.width=r*this.width,u.style.height=r*this.height,u.style.position="absolute",u.style.top=o-r*this.height/2,u.style.left=n-r*this.width/2}else{var l=e.getSVG();m&&(l.appendChild(u),m=!1),this.pen?this.pen.updateSVG(u):u.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(u,e.getDefs()):u.setAttribute("fill","none"),u.setAttribute("cx",n),u.setAttribute("cy",o),u.setAttribute("rx",r*this.width/2),u.setAttribute("ry",r*this.height/2),u.style.position="absolute"}u.style.display="",p&&e!=p&&p.removeShape(this),p=e,p.addShape(this)}function c(){if(p){if(a._isVML){p.getVML().removeChild(u)}else{p.getSVG().removeChild(u)}p.removeShape(this),p=null,m=!0}}function h(){u.style.display=""}function d(){u.style.display="none"}this.center=e,this.width=t,this.height=r,this.pen=null,this.brush=null;var u,p,m=!0;n&&(this.pen=n),o&&(this.brush=o),u=a._isVML?document.createElement("v:oval"):document.createElementNS("http://www.w3.org/2000/svg","ellipse"),this.getType=i,this.addEventListener=s,this.draw=l,this.remove=c,this.show=h,this.hide=d},a.jxArc=function(e,t,r,n,o,i,s){function l(){return"jxArc"}function c(e,t){function a(e){t(e,r)}m.addEventListener?m.addEventListener(e,a,!1):m.attachEvent&&m.attachEvent("on"+e,a);var r=this}function h(e){var t;e.logicalToPhysicalPoint(e),t=e.scale;var r,i;if(r=this.center.x,i=this.center.y,m.style.display="none",a._isVML){var s,l=e.getVML();g&&(l.appendChild(m),g=!1);var c,h,d,u,p,v,b,_,y;y=this.startAngle+this.arcAngle,n=this.startAngle%360,y%=360,c=t*this.width/2,h=t*this.height/2,p=this.startAngle*Math.PI/180,d=c*h/Math.sqrt(h*h*Math.cos(p)*Math.cos(p)+c*c*Math.sin(p)*Math.sin(p)),b=180*Math.asin(d*Math.sin(p)/h)/Math.PI,this.startAngle>270?b=360+b:this.startAngle>90&&(b=180-b),v=y*Math.PI/180,u=c*h/Math.sqrt(h*h*Math.cos(v)*Math.cos(v)+c*c*Math.sin(v)*Math.sin(v)),_=180*Math.asin(u*Math.sin(v)/h)/Math.PI,y>270?_=360+_:y>90&&(_=180-_),this.pen?this.pen.updateVML(m):m.Stroked="False",s=m.fill,this.brush?this.brush.updateVML(s):s.On="false",m.style.position="absolute",m.style.width=t*this.width,m.style.height=t*this.height,m.style.position="absolute",m.style.left=r-t*this.width/2,m.style.top=i-t*this.height/2,b+=90,m.StartAngle=b>360?b%360:b,_+=90,_>360?(b<=360&&(m.StartAngle=b-360),m.EndAngle=_%360):m.EndAngle=_}else{var c,h,d,u,x,C,w,A,p,v;c=t*this.width/2,h=t*this.height/2,p=this.startAngle*Math.PI/180,d=c*h/Math.sqrt(h*h*Math.cos(p)*Math.cos(p)+c*c*Math.sin(p)*Math.sin(p)),x=d*Math.cos(p),w=d*Math.sin(p),x=r+x,w=i+w,v=(n+o)*Math.PI/180,u=c*h/Math.sqrt(h*h*Math.cos(v)*Math.cos(v)+c*c*Math.sin(v)*Math.sin(v)),C=u*Math.cos(v),A=u*Math.sin(v),C=r+C,A=i+A;var E=e.getSVG();g&&(E.appendChild(m),g=!1),this.pen?this.pen.updateSVG(m):m.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(m,e.getDefs()):m.setAttribute("fill","none"),o>180?m.setAttribute("d","M"+x+" "+w+" A"+c+" "+h+" 0 1 1 "+C+" "+A):m.setAttribute("d","M"+x+" "+w+" A"+c+" "+h+" 0 0 1 "+C+" "+A)}m.style.display="",f&&e!=f&&f.removeShape(this),f=e,f.addShape(this)}function d(){if(f){if(a._isVML){f.getVML().removeChild(m)}else{f.getSVG().removeChild(m)}f.removeShape(this),f=null,g=!0}}function u(){m.style.display=""}function p(){m.style.display="none"}this.center=e,this.width=t,this.height=r,this.startAngle=n,this.arcAngle=o,this.pen=null,this.brush=null;var m,f,g=!0;i&&(this.pen=i),s&&(this.brush=s),m=a._isVML?document.createElement("v:arc"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=l,this.addEventListener=c,this.draw=h,this.remove=d,this.show=u,this.hide=p},a.jxArcSector=function(e,t,r,n,o,i,s){function l(){return"jxArcSector"}function c(e,t){function a(e){t(e,r)}m.addEventListener?m.addEventListener(e,a,!1):m.attachEvent&&m.attachEvent("on"+e,a);var r=this}function h(e){var t,r;t=e.logicalToPhysicalPoint(this.center),r=e.scale;var n,i;n=t.x,i=t.y;var s,l,c,h,d,u,p,v,b,_;if(s=r*this.width/2,l=r*this.height/2,b=this.startAngle*Math.PI/180,c=s*l/Math.sqrt(l*l*Math.cos(b)*Math.cos(b)+s*s*Math.sin(b)*Math.sin(b)),d=c*Math.cos(b),p=c*Math.sin(b),d=n+d,p=i+p,_=(this.startAngle+this.arcAngle)*Math.PI/180,h=s*l/Math.sqrt(l*l*Math.cos(_)*Math.cos(_)+s*s*Math.sin(_)*Math.sin(_)),u=h*Math.cos(_),v=h*Math.sin(_),u=n+u,v=i+v,m.style.display="none",a._isVML){var y,x=e.getVML();g&&(x.appendChild(m),g=!1);var C,w;C=Math.min(v,Math.min(i,p)),w=Math.min(u,Math.min(n,d)),Math.max(v,Math.max(i,p))-C,Math.max(u,Math.max(n,d))-w,this.pen?this.pen.updateVML(m):m.Stroked="False",y=m.fill,this.brush?this.brush.updateVML(y):y.On="false",m.style.position="absolute",m.style.height=1,m.style.width=1,m.CoordSize="1 1",m.Path="M"+n+","+i+" AT"+(n-s)+","+(i-l)+","+(n+s)+","+(i+l)+","+Math.round(u)+","+Math.round(v)+","+Math.round(d)+","+Math.round(p)+" X E"}else{var A=e.getSVG();g&&(A.appendChild(m),g=!1),this.pen?this.pen.updateSVG(m):m.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(m,e.getDefs()):m.setAttribute("fill","none"),o>180?m.setAttribute("d","M"+n+" "+i+" L"+d+" "+p+" A"+s+" "+l+" 0 1 1 "+u+" "+v+" Z"):m.setAttribute("d","M"+n+" "+i+" L"+d+" "+p+" A"+s+" "+l+" 0 0 1 "+u+" "+v+" Z")}m.style.display="",f&&e!=f&&f.removeShape(this),f=e,f.addShape(this)}function d(){if(f){if(a._isVML){f.getVML().removeChild(m)}else{f.getSVG().removeChild(m)}f.removeShape(this),f=null,g=!0}}function u(){m.style.display=""}function p(){m.style.display="none"}this.center=e,this.width=t,this.height=r,this.startAngle=n,this.arcAngle=o,this.pen=null,this.brush=null;var m,f,g=!0;i&&(this.pen=i),s&&(this.brush=s),m=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=l,this.addEventListener=c,this.draw=h,this.remove=d,this.show=u,this.hide=p},a.jxCurve=function(e,t,r,n){function o(){return"jxCurve"}function s(e,t){function a(e){t(e,r)}u.addEventListener?u.addEventListener(e,a,!1):u.attachEvent&&u.attachEvent("on"+e,a);var r=this}function l(e){var t=new Array;for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);var r,n=this.tension,o=new Array,s=new Array,l=new Array;for(i in t)i=parseInt(i),0==i?o[i]=new a.jxPoint(n*(t[1].x-t[0].x)/2,n*(t[1].y-t[0].y)/2):i==t.length-1?o[i]=new a.jxPoint(n*(t[i].x-t[i-1].x)/2,n*(t[i].y-t[i-1].y)/2):o[i]=new a.jxPoint(n*(t[i+1].x-t[i-1].x)/2,n*(t[i+1].y-t[i-1].y)/2);for(i in t)i=parseInt(i),i==t.length-1?(s[i]=new a.jxPoint(t[i].x+o[i].x/3,t[i].y+o[i].y/3),l[i]=new a.jxPoint(t[i].x-o[i].x/3,t[i].y-o[i].y/3)):(s[i]=new a.jxPoint(t[i].x+o[i].x/3,t[i].y+o[i].y/3),l[i]=new a.jxPoint(t[i+1].x-o[i+1].x/3,t[i+1].y-o[i+1].y/3));for(i in t)i=parseInt(i),0==i&&(r="M"+t[i].x+","+t[i].y),i<t.length-1&&(r=r+" C"+Math.round(s[i].x)+","+Math.round(s[i].y)+","+Math.round(l[i].x)+","+Math.round(l[i].y)+","+Math.round(t[i+1].x)+","+Math.round(t[i+1].y));if(u.style.display="none",a._isVML){var c,h=e.getVML();m&&(h.appendChild(u),m=!1),this.pen?this.pen.updateVML(u):u.Stroked="False",c=u.fill,this.brush?this.brush.updateVML(c):c.On="false",r+=" E",u.style.position="absolute",u.style.width=1,u.style.height=1,u.CoordSize="1 1",u.Path=r}else{var d=e.getSVG();m&&(d.appendChild(u),m=!1),this.pen?this.pen.updateSVG(u):u.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(u,e.getDefs()):u.setAttribute("fill","none"),u.setAttribute("d",r)}u.style.display="",p&&e!=p&&p.removeShape(this),p=e,p.addShape(this)}function c(){if(p){if(a._isVML){p.getVML().removeChild(u)}else{p.getSVG().removeChild(u)}p.removeShape(this),p=null,m=!0}}function h(){u.style.display=""}function d(){u.style.display="none"}this.points=e,this.pen=null,this.brush=null,this.tension=1;var u,p,m=!0;t&&(this.pen=t),r&&(this.brush=r),null!=n&&(this.tension=n),u=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=o,this.addEventListener=s,this.draw=l,this.remove=c,this.show=h,this.hide=d},a.jxClosedCurve=function(e,t,r,n){function o(){return"jxClosedCurve"}function s(e,t){function a(e){t(e,r)}u.addEventListener?u.addEventListener(e,a,!1):u.attachEvent&&u.attachEvent("on"+e,a);var r=this}function l(e){var t=new Array;for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);var r,n=t.length-1,o=this.tension,s=new Array,l=new Array,c=new Array;for(i in t)i=parseInt(i),0==i?s[i]=new a.jxPoint(o*(t[1].x-t[n].x)/2,o*(t[1].y-t[n].y)/2):i==t.length-1?s[i]=new a.jxPoint(o*(t[0].x-t[i-1].x)/2,o*(t[0].y-t[i-1].y)/2):s[i]=new a.jxPoint(o*(t[i+1].x-t[i-1].x)/2,o*(t[i+1].y-t[i-1].y)/2);for(i in t)i=parseInt(i),i==t.length-1?(l[i]=new a.jxPoint(t[i].x+s[i].x/3,t[i].y+s[i].y/3),c[i]=new a.jxPoint(t[0].x-s[0].x/3,t[0].y-s[0].y/3)):(l[i]=new a.jxPoint(t[i].x+s[i].x/3,t[i].y+s[i].y/3),c[i]=new a.jxPoint(t[i+1].x-s[i+1].x/3,t[i+1].y-s[i+1].y/3));for(i in t)i=parseInt(i),0==i&&(r="M"+t[i].x+","+t[i].y),i<t.length-1&&(r=r+" C"+Math.round(l[i].x)+","+Math.round(l[i].y)+","+Math.round(c[i].x)+","+Math.round(c[i].y)+","+Math.round(t[i+1].x)+","+Math.round(t[i+1].y)),i==t.length-1&&(r=r+" C"+Math.round(l[i].x)+","+Math.round(l[i].y)+","+Math.round(c[i].x)+","+Math.round(c[i].y)+","+Math.round(t[0].x)+","+Math.round(t[0].y));if(u.style.display="none",a._isVML){var h,d=e.getVML();m&&(d.appendChild(u),m=!1),r+=" E",this.pen?this.pen.updateVML(u):u.Stroked="False",h=u.fill,this.brush?this.brush.updateVML(h):h.On="false",u.style.position="absolute",u.style.width=1,u.style.height=1,u.CoordSize="1 1",u.Path=r}else{var f=e.getSVG();m&&(f.appendChild(u),m=!1),this.pen?this.pen.updateSVG(u):u.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(u,e.getDefs()):u.setAttribute("fill","none"),u.setAttribute("d",r)}u.style.display="",p&&e!=p&&p.removeShape(this),p=e,p.addShape(this)}function c(){if(p){if(a._isVML){p.getVML().removeChild(u)}else{p.getSVG().removeChild(u)}p.removeShape(this),p=null,m=!0}}function h(){u.style.display=""}function d(){u.style.display="none"}this.points=e,this.pen=null,this.brush=null,this.tension=1;var u,p,m=!0,u=null;t&&(this.pen=t),r&&(this.brush=r),null!=n&&(this.tension=n),u=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=o,this.addEventListener=s,this.draw=l,this.remove=c,this.show=h,this.hide=d},a.jxBezier=function(e,t,r){function n(){return"jxBezier"}function o(e,t){function a(e){t(e,r)}h.addEventListener?h.addEventListener(e,a,!1):h.attachEvent&&h.attachEvent("on"+e,a);var r=this}function i(e){var t=new Array;for(ind in this.points)t[ind]=e.logicalToPhysicalPoint(this.points[ind]);var r;if(t.length>4){var n,o,i,s,l,c=new Array,p=new Array,m=new Array,f=new Array,g=t.length-1,v=10*Math.min(1/Math.abs(t[g].x-t[0].x),1/Math.abs(t[g].y-t[0].y));for(s=0,l=0;l<1;l+=v){for(x=0,y=0,i=0;i<=g;i++)n=Math.pow(l,i)*Math.pow(1-l,g-i)*t[i].x,0==i&&i==g||(n=n*a.fact(g)/a.fact(i)/a.fact(g-i)),x+=n,o=Math.pow(l,i)*Math.pow(1-l,g-i)*t[i].y,0==i&&i==g||(o=o*a.fact(g)/a.fact(i)/a.fact(g-i)),y+=o;f[s]=new a.jxPoint(x,y),s++}f[s]=new a.jxPoint(t[g].x,t[g].y),t=f,tension=1;for(i in t)i=parseInt(i),0==i?c[i]=new a.jxPoint(tension*(t[1].x-t[0].x)/2,tension*(t[1].y-t[0].y)/2):i==t.length-1?c[i]=new a.jxPoint(tension*(t[i].x-t[i-1].x)/2,tension*(t[i].y-t[i-1].y)/2):c[i]=new a.jxPoint(tension*(t[i+1].x-t[i-1].x)/2,tension*(t[i+1].y-t[i-1].y)/2);for(i in t)i=parseInt(i),0==i?(p[i]=new a.jxPoint(t[0].x+c[0].x/3,t[0].y+c[0].y/3),m[i]=new a.jxPoint(t[1].x-c[1].x/3,t[1].y-c[1].y/3)):i==t.length-1?(p[i]=new a.jxPoint(t[i].x+c[i].x/3,t[i].y+c[i].y/3),m[i]=new a.jxPoint(t[i].x-c[i].x/3,t[i].y-c[i].y/3)):(p[i]=new a.jxPoint(t[i].x+c[i].x/3,t[i].y+c[i].y/3),m[i]=new a.jxPoint(t[i+1].x-c[i+1].x/3,t[i+1].y-c[i+1].y/3));for(i in t)i=parseInt(i),0==i&&(r="M"+t[i].x+","+t[i].y),i<t.length-1&&(r=r+" C"+Math.round(p[i].x)+","+Math.round(p[i].y)+","+Math.round(m[i].x)+","+Math.round(m[i].y)+","+Math.round(t[i+1].x)+","+Math.round(t[i+1].y))}else if(4==t.length)r=" M"+t[0].x+","+t[0].y+" C"+t[1].x+","+t[1].y+" "+t[2].x+","+t[2].y+" "+t[3].x+","+t[3].y;else if(3==t.length)if(a._isVML){var b=new a.jxPoint(2/3*t[1].x+1/3*t[0].x,2/3*t[1].y+1/3*t[0].y),_=new a.jxPoint(2/3*t[1].x+1/3*t[2].x,2/3*t[1].y+1/3*t[2].y);r=" M"+t[0].x+","+t[0].y+" C"+Math.round(b.x)+","+Math.round(b.y)+" "+Math.round(_.x)+","+Math.round(_.y)+" "+t[2].x+","+t[2].y}else r=" M"+t[0].x+","+t[0].y+" Q"+t[1].x+","+t[1].y+" "+t[2].x+","+t[2].y;if(h.style.display="none",a._isVML){var C,w=e.getVML();u&&(w.appendChild(h),u=!1),r+=" E",this.pen?this.pen.updateVML(h):h.Stroked="False",C=h.fill,this.brush?this.brush.updateVML(C):C.On="false",h.style.position="absolute",h.style.width=1,h.style.height=1,h.CoordSize="1 1",h.Path=r}else{var A=e.getSVG();u&&(A.appendChild(h),u=!1),this.pen?this.pen.updateSVG(h):h.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(h,e.getDefs()):h.setAttribute("fill","none"),h.setAttribute("d",r)}h.style.display="",d&&e!=d&&d.removeShape(this),d=e,d.addShape(this)}function s(){if(d){if(a._isVML){d.getVML().removeChild(h)}else{d.getSVG().removeChild(h)}d.removeShape(this),d=null,u=!0}}function l(){h.style.display=""}function c(){h.style.display="none"}this.points=e,this.pen=null,this.brush=null;var h,d,u=!0;t&&(this.pen=t),r&&(this.brush=r),h=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=n,this.addEventListener=o,this.draw=i,this.remove=s,this.show=l,this.hide=c},a.jxFunctionGraph=function(e,t,r,n,o){function s(){return"jxFunctionGraph"}function l(e,t){function a(e){t(e,r)}m.addEventListener?m.addEventListener(e,a,!1):m.attachEvent&&m.attachEvent("on"+e,a);var r=this}function c(e){e=e.replace(/x/g,1);try{return Math.eval(e),!0}catch(e){return!1}}function h(n){var o,s,l=new Array,s=new Array,c=new Array,h=new Array;if(this.validate(e)){var d,u,p=0;for(d=t;d<r;d++)u=Math.eval(e.replace(/x/g,d)),l[p]=n.logicalToPhysicalPoint(new a.jxPoint(d,u)),p++;u=Math.eval(e.replace(/x/g,r)),l[p]=n.logicalToPhysicalPoint(new a.jxPoint(d,u)),p++,tension=1;for(i in l)i=parseInt(i),0==i?s[i]=new a.jxPoint(tension*(l[1].x-l[0].x)/2,tension*(l[1].y-l[0].y)/2):i==l.length-1?s[i]=new a.jxPoint(tension*(l[i].x-l[i-1].x)/2,tension*(l[i].y-l[i-1].y)/2):s[i]=new a.jxPoint(tension*(l[i+1].x-l[i-1].x)/2,tension*(l[i+1].y-l[i-1].y)/2);for(i in l)i=parseInt(i),0==i?(c[i]=new a.jxPoint(l[0].x+s[0].x/3,l[0].y+s[0].y/3),h[i]=new a.jxPoint(l[1].x-s[1].x/3,l[1].y-s[1].y/3)):i==l.length-1?(c[i]=new a.jxPoint(l[i].x+s[i].x/3,l[i].y+s[i].y/3),h[i]=new a.jxPoint(l[i].x-s[i].x/3,l[i].y-s[i].y/3)):(c[i]=new a.jxPoint(l[i].x+s[i].x/3,l[i].y+s[i].y/3),h[i]=new a.jxPoint(l[i+1].x-s[i+1].x/3,l[i+1].y-s[i+1].y/3));for(i in l)i=parseInt(i),0==i&&(o="M"+l[i].x+","+l[i].y),i<l.length-1&&(o=o+" C"+Math.round(c[i].x)+","+Math.round(c[i].y)+","+Math.round(h[i].x)+","+Math.round(h[i].y)+","+Math.round(l[i+1].x)+","+Math.round(l[i+1].y));if(m.style.display="none",a._isVML){var v,b=n.getVML();g&&(b.appendChild(m),g=!1),o+=" E",this.pen?this.pen.updateVML(m):m.Stroked="False",v=m.fill,this.brush?this.brush.updateVML(v):v.On="false",m.style.position="absolute",m.style.width=1,m.style.height=1,m.CoordSize="1 1",m.Path=o}else{var _=n.getSVG();g&&(_.appendChild(m),g=!1),this.pen?this.pen.updateSVG(m):m.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(m,n.getDefs()):m.setAttribute("fill","none"),m.setAttribute("d",o)}m.style.display="",f&&n!=f&&f.removeShape(this),f=n,f.addShape(this)}}function d(){if(f){if(a._isVML){f.getVML().removeChild(m)}else{f.getSVG().removeChild(m)}f.removeShape(this),f=null,g=!0}}function u(){m.style.display=""}function p(){m.style.display="none"}this.fn=e,this.xMin=t,this.xMax=r,this.pen=null,this.brush=null;var m,f,g=!0;n&&(this.pen=n),o&&(this.brush=o),m=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","path"),this.getType=s,this.addEventListener=l,this.validate=c,this.draw=h,this.remove=d,this.show=u,this.hide=p},a.jxText=function(e,t,r,n,o,i){function s(){return"jxText"}function l(e,t){function a(e){t(e,r)}p.addEventListener?p.addEventListener(e,a,!1):p.attachEvent&&p.attachEvent("on"+e,a);var r=this}function c(e){var t;t=e.logicalToPhysicalPoint(this.point);var r,n;if(r=t.x,n=t.y,p.style.display="none",a._isVML){var o,i,s,l=e.getVML();f&&(s=document.createElement("v:textpath"),s.On="True",s.style["v-text-align"]="left",p.appendChild(s),l.appendChild(p),f=!1),o=p.fill,s=p.firstChild,this.pen?this.pen.updateVML(p):p.Stroked="False",o=p.fill,this.brush?this.brush.updateVML(o):o.On="false",p.style.position="absolute",p.style.height=1,p.CoordSize="1 1",i=p.Path,i.TextPathOk="true",i.v="M"+r+","+n+" L"+(r+100)+","+n+" E",s.String=this.text,this.font?this.font.updateVML(s):jxFont.updateVML(s),p.style.display="";var c,h,d,u;d=p.clientHeight/2*.8,u=this.angle,r=Math.round(r+d*Math.sin(u*Math.PI/180)),n=Math.round(n-d*Math.cos(u*Math.PI/180)),c=Math.round(r+100*Math.cos(u*Math.PI/180)),h=Math.round(n+100*Math.sin(u*Math.PI/180)),p.Path="M"+r+","+n+" L"+c+","+h+" E",p.style.width=1}else{var g=e.getSVG();f&&(g.appendChild(p),f=!1),this.pen?this.pen.updateSVG(p):p.setAttribute("stroke","none"),this.brush?this.brush.updateSVG(p,e.getDefs()):p.setAttribute("fill","none"),this.font?this.font.updateSVG(p):jxFont.updateSVG(p),p.setAttribute("x",r),p.setAttribute("y",n),p.setAttribute("transform","rotate("+this.angle+" "+r+","+n+")"),p.textContent=this.text}p.style.display="",m&&e!=m&&m.removeShape(this),m=e,m.addShape(this)}function h(){if(m){if(a._isVML){m.getVML().removeChild(p)}else{m.getSVG().removeChild(p)}m.removeShape(this),m=null,f=!0}}function d(){p.style.display=""}function u(){p.style.display="none"}this.point=e,this.text=t,this.font=null,this.pen=null,this.brush=null,this.angle=0;var p,m,f=!0;r&&(this.font=r),n&&(this.pen=n),o&&(this.brush=o),i&&(this.angle=i),p=a._isVML?document.createElement("v:shape"):document.createElementNS("http://www.w3.org/2000/svg","text"),this.getType=s,this.addEventListener=l,this.draw=c,this.remove=h,this.show=d,this.hide=u},a.jxImage=function(e,t,r,n,o){function i(){return"jxImage"}function s(e,t){function a(e){t(e,r)}u.addEventListener?u.addEventListener(e,a,!1):u.attachEvent&&u.attachEvent("on"+e,a);var r=this}function l(e){var r,n;r=e.logicalToPhysicalPoint(this.point),n=e.scale;var o,i;if(o=r.x,i=r.y,u.style.display="none",a._isVML){var s,l,c,h,d,f,g,v,b=this.angle,_=this.angle*Math.PI/180;c=n*this.width,h=n*this.height,s=o,l=i,Math.abs(b)>360&&(b%=360),b<0&&(b=360+b),b>=0&&b<90?(l=i,s=o-h*Math.sin(_)):b>=90&&b<180?(l=i-h*Math.sin(_-Math.PI/2),s=o-(c*Math.sin(_-Math.PI/2)+h*Math.cos(_-Math.PI/2))):b>=180&&b<270?(l=i-(c*Math.sin(_-Math.PI)+h*Math.cos(_-Math.PI)),s=o-c*Math.cos(_-Math.PI)):b>=270&&b<=360&&(s=o,l=i-c*Math.cos(_-1.5*Math.PI)),d=Math.cos(_),f=-Math.sin(_),g=Math.sin(_),v=Math.cos(_);var y=e.getVML();m&&(y.appendChild(u),m=!1),u.style.width=c,u.style.height=h,u.style.position="absolute",u.style.top=l,u.style.left=s,u.style.filter="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',M11="+d+",M12="+f+",M21="+g+",M22="+v+") filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+t+"', sizingMethod='scale');"}else{var x=e.getSVG();m&&(x.appendChild(u),m=!1),u.setAttribute("x",o),u.setAttribute("y",i),u.setAttribute("height",n*this.height),u.setAttribute("width",n*this.width),u.setAttribute("preserveAspectRatio","none"),u.setAttributeNS("http://www.w3.org/1999/xlink","href",this.url),u.setAttribute("transform","rotate("+this.angle+" "+o+","+i+")")}u.style.display="",p&&e!=p&&p.removeShape(this),p=e,p.addShape(this)}function c(){if(p){if(a._isVML){p.getVML().removeChild(u)}else{p.getSVG().removeChild(u)}p.removeShape(this),p=null,m=!0}}function h(){u.style.display=""}function d(){u.style.display="none"}this.point=e,this.url=t,this.width=r,this.height=n,this.angle=0;var u,p,m=!0;o&&(this.angle=o),u=a._isVML?document.createElement("v:image"):document.createElementNS("http://www.w3.org/2000/svg","image"),this.getType=i,this.addEventListener=s,this.draw=l,this.remove=c,this.show=h,this.hide=d},e.exports=a}]));